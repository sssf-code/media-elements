var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));

// ../../node_modules/shaka-player/dist/shaka-player.compiled.js
var require_shaka_player_compiled = __commonJS({
  "../../node_modules/shaka-player/dist/shaka-player.compiled.js"(exports) {
    (function() {
      var innerGlobal = typeof window != "undefined" ? window : global;
      var exportTo = {};
      (function(window2, global2, module2) {
        var r;
        function aa(a) {
          var b = 0;
          return function() {
            return b < a.length ? { done: false, value: a[b++] } : { done: true };
          };
        }
        var ba = "function" == typeof Object.defineProperties ? Object.defineProperty : function(a, b, c) {
          if (a == Array.prototype || a == Object.prototype) return a;
          a[b] = c.value;
          return a;
        };
        function ca(a) {
          a = ["object" == typeof globalThis && globalThis, a, "object" == typeof window2 && window2, "object" == typeof self && self, "object" == typeof global2 && global2];
          for (var b = 0; b < a.length; ++b) {
            var c = a[b];
            if (c && c.Math == Math) return c;
          }
          throw Error("Cannot find global object");
        }
        var da = ca(this);
        function ea(a, b) {
          if (b) a: {
            var c = da;
            a = a.split(".");
            for (var d = 0; d < a.length - 1; d++) {
              var e = a[d];
              if (!(e in c)) break a;
              c = c[e];
            }
            a = a[a.length - 1];
            d = c[a];
            b = b(d);
            b != d && null != b && ba(c, a, { configurable: true, writable: true, value: b });
          }
        }
        ea("Symbol", function(a) {
          function b(f) {
            if (this instanceof b) throw new TypeError("Symbol is not a constructor");
            return new c(d + (f || "") + "_" + e++, f);
          }
          function c(f, g) {
            this.g = f;
            ba(this, "description", { configurable: true, writable: true, value: g });
          }
          if (a) return a;
          c.prototype.toString = function() {
            return this.g;
          };
          var d = "jscomp_symbol_" + (1e9 * Math.random() >>> 0) + "_", e = 0;
          return b;
        });
        ea("Symbol.iterator", function(a) {
          if (a) return a;
          a = Symbol("Symbol.iterator");
          for (var b = "Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "), c = 0; c < b.length; c++) {
            var d = da[b[c]];
            "function" === typeof d && "function" != typeof d.prototype[a] && ba(d.prototype, a, { configurable: true, writable: true, value: function() {
              return fa(aa(this));
            } });
          }
          return a;
        });
        function fa(a) {
          a = { next: a };
          a[Symbol.iterator] = function() {
            return this;
          };
          return a;
        }
        function t(a) {
          var b = "undefined" != typeof Symbol && Symbol.iterator && a[Symbol.iterator];
          if (b) return b.call(a);
          if ("number" == typeof a.length) return { next: aa(a) };
          throw Error(String(a) + " is not an iterable or ArrayLike");
        }
        function y(a) {
          if (!(a instanceof Array)) {
            a = t(a);
            for (var b, c = []; !(b = a.next()).done; ) c.push(b.value);
            a = c;
          }
          return a;
        }
        var ha = "function" == typeof Object.create ? Object.create : function(a) {
          function b() {
          }
          b.prototype = a;
          return new b();
        }, ia;
        if ("function" == typeof Object.setPrototypeOf) ia = Object.setPrototypeOf;
        else {
          var ja;
          a: {
            var la = { a: true }, ma = {};
            try {
              ma.__proto__ = la;
              ja = ma.a;
              break a;
            } catch (a) {
            }
            ja = false;
          }
          ia = ja ? function(a, b) {
            a.__proto__ = b;
            if (a.__proto__ !== b) throw new TypeError(a + " is not extensible");
            return a;
          } : null;
        }
        var pa = ia;
        function qa(a, b) {
          a.prototype = ha(b.prototype);
          a.prototype.constructor = a;
          if (pa) pa(a, b);
          else for (var c in b) if ("prototype" != c) if (Object.defineProperties) {
            var d = Object.getOwnPropertyDescriptor(b, c);
            d && Object.defineProperty(a, c, d);
          } else a[c] = b[c];
          a.Sk = b.prototype;
        }
        function ta() {
          this.o = false;
          this.l = null;
          this.h = void 0;
          this.g = 1;
          this.j = this.m = 0;
          this.A = this.i = null;
        }
        function va(a) {
          if (a.o) throw new TypeError("Generator is already running");
          a.o = true;
        }
        ta.prototype.s = function(a) {
          this.h = a;
        };
        function wa(a, b) {
          a.i = { Lg: b, Xg: true };
          a.g = a.m || a.j;
        }
        ta.prototype.return = function(a) {
          this.i = { return: a };
          this.g = this.j;
        };
        function G(a, b, c) {
          a.g = c;
          return { value: b };
        }
        ta.prototype.u = function(a) {
          this.g = a;
        };
        function I(a) {
          a.g = 0;
        }
        function xa(a, b, c) {
          a.m = b;
          void 0 != c && (a.j = c);
        }
        function ya(a, b) {
          a.m = 0;
          a.j = b || 0;
        }
        function za(a, b, c) {
          a.g = b;
          a.m = c || 0;
        }
        function Aa(a, b) {
          a.m = b || 0;
          b = a.i.Lg;
          a.i = null;
          return b;
        }
        function Da(a) {
          a.A = [a.i];
          a.m = 0;
          a.j = 0;
        }
        function Ea(a, b) {
          var c = a.A.splice(0)[0];
          (c = a.i = a.i || c) ? c.Xg ? a.g = a.m || a.j : void 0 != c.u && a.j < c.u ? (a.g = c.u, a.i = null) : a.g = a.j : a.g = b;
        }
        function Ga(a) {
          this.g = new ta();
          this.h = a;
        }
        function Ha(a, b) {
          va(a.g);
          var c = a.g.l;
          if (c) return Ja(a, "return" in c ? c["return"] : function(d) {
            return { value: d, done: true };
          }, b, a.g.return);
          a.g.return(b);
          return Ka(a);
        }
        function Ja(a, b, c, d) {
          try {
            var e = b.call(a.g.l, c);
            if (!(e instanceof Object)) throw new TypeError("Iterator result " + e + " is not an object");
            if (!e.done) return a.g.o = false, e;
            var f = e.value;
          } catch (g) {
            return a.g.l = null, wa(a.g, g), Ka(a);
          }
          a.g.l = null;
          d.call(a.g, f);
          return Ka(a);
        }
        function Ka(a) {
          for (; a.g.g; ) try {
            var b = a.h(a.g);
            if (b) return a.g.o = false, { value: b.value, done: false };
          } catch (c) {
            a.g.h = void 0, wa(a.g, c);
          }
          a.g.o = false;
          if (a.g.i) {
            b = a.g.i;
            a.g.i = null;
            if (b.Xg) throw b.Lg;
            return { value: b.return, done: true };
          }
          return { value: void 0, done: true };
        }
        function La(a) {
          this.next = function(b) {
            va(a.g);
            a.g.l ? b = Ja(a, a.g.l.next, b, a.g.s) : (a.g.s(b), b = Ka(a));
            return b;
          };
          this.throw = function(b) {
            va(a.g);
            a.g.l ? b = Ja(a, a.g.l["throw"], b, a.g.s) : (wa(a.g, b), b = Ka(a));
            return b;
          };
          this.return = function(b) {
            return Ha(a, b);
          };
          this[Symbol.iterator] = function() {
            return this;
          };
        }
        function Ma(a) {
          function b(d) {
            return a.next(d);
          }
          function c(d) {
            return a.throw(d);
          }
          return new Promise(function(d, e) {
            function f(g) {
              g.done ? d(g.value) : Promise.resolve(g.value).then(b, c).then(f, e);
            }
            f(a.next());
          });
        }
        function Q(a) {
          return Ma(new La(new Ga(a)));
        }
        function Na() {
          for (var a = Number(this), b = [], c = a; c < arguments.length; c++) b[c - a] = arguments[c];
          return b;
        }
        ea("Promise", function(a) {
          function b(g) {
            this.h = 0;
            this.i = void 0;
            this.g = [];
            this.o = false;
            var h = this.j();
            try {
              g(h.resolve, h.reject);
            } catch (k2) {
              h.reject(k2);
            }
          }
          function c() {
            this.g = null;
          }
          function d(g) {
            return g instanceof b ? g : new b(function(h) {
              h(g);
            });
          }
          if (a) return a;
          c.prototype.h = function(g) {
            if (null == this.g) {
              this.g = [];
              var h = this;
              this.i(function() {
                h.l();
              });
            }
            this.g.push(g);
          };
          var e = da.setTimeout;
          c.prototype.i = function(g) {
            e(g, 0);
          };
          c.prototype.l = function() {
            for (; this.g && this.g.length; ) {
              var g = this.g;
              this.g = [];
              for (var h = 0; h < g.length; ++h) {
                var k2 = g[h];
                g[h] = null;
                try {
                  k2();
                } catch (l) {
                  this.j(l);
                }
              }
            }
            this.g = null;
          };
          c.prototype.j = function(g) {
            this.i(function() {
              throw g;
            });
          };
          b.prototype.j = function() {
            function g(l) {
              return function(m) {
                k2 || (k2 = true, l.call(h, m));
              };
            }
            var h = this, k2 = false;
            return { resolve: g(this.F), reject: g(this.l) };
          };
          b.prototype.F = function(g) {
            if (g === this) this.l(new TypeError("A Promise cannot resolve to itself"));
            else if (g instanceof b) this.H(g);
            else {
              a: switch (typeof g) {
                case "object":
                  var h = null != g;
                  break a;
                case "function":
                  h = true;
                  break a;
                default:
                  h = false;
              }
              h ? this.C(g) : this.m(g);
            }
          };
          b.prototype.C = function(g) {
            var h = void 0;
            try {
              h = g.then;
            } catch (k2) {
              this.l(k2);
              return;
            }
            "function" == typeof h ? this.I(h, g) : this.m(g);
          };
          b.prototype.l = function(g) {
            this.s(2, g);
          };
          b.prototype.m = function(g) {
            this.s(1, g);
          };
          b.prototype.s = function(g, h) {
            if (0 != this.h) throw Error("Cannot settle(" + g + ", " + h + "): Promise already settled in state" + this.h);
            this.h = g;
            this.i = h;
            2 === this.h && this.G();
            this.A();
          };
          b.prototype.G = function() {
            var g = this;
            e(function() {
              if (g.B()) {
                var h = da.console;
                "undefined" !== typeof h && h.error(g.i);
              }
            }, 1);
          };
          b.prototype.B = function() {
            if (this.o) return false;
            var g = da.CustomEvent, h = da.Event, k2 = da.dispatchEvent;
            if ("undefined" === typeof k2) return true;
            "function" === typeof g ? g = new g("unhandledrejection", { cancelable: true }) : "function" === typeof h ? g = new h("unhandledrejection", { cancelable: true }) : (g = da.document.createEvent("CustomEvent"), g.initCustomEvent("unhandledrejection", false, true, g));
            g.promise = this;
            g.reason = this.i;
            return k2(g);
          };
          b.prototype.A = function() {
            if (null != this.g) {
              for (var g = 0; g < this.g.length; ++g) f.h(this.g[g]);
              this.g = null;
            }
          };
          var f = new c();
          b.prototype.H = function(g) {
            var h = this.j();
            g.Sd(h.resolve, h.reject);
          };
          b.prototype.I = function(g, h) {
            var k2 = this.j();
            try {
              g.call(h, k2.resolve, k2.reject);
            } catch (l) {
              k2.reject(l);
            }
          };
          b.prototype.then = function(g, h) {
            function k2(p, q) {
              return "function" == typeof p ? function(u) {
                try {
                  l(p(u));
                } catch (w) {
                  m(w);
                }
              } : q;
            }
            var l, m, n = new b(function(p, q) {
              l = p;
              m = q;
            });
            this.Sd(k2(g, l), k2(h, m));
            return n;
          };
          b.prototype.catch = function(g) {
            return this.then(void 0, g);
          };
          b.prototype.Sd = function(g, h) {
            function k2() {
              switch (l.h) {
                case 1:
                  g(l.i);
                  break;
                case 2:
                  h(l.i);
                  break;
                default:
                  throw Error("Unexpected state: " + l.h);
              }
            }
            var l = this;
            null == this.g ? f.h(k2) : this.g.push(k2);
            this.o = true;
          };
          b.resolve = d;
          b.reject = function(g) {
            return new b(function(h, k2) {
              k2(g);
            });
          };
          b.race = function(g) {
            return new b(function(h, k2) {
              for (var l = t(g), m = l.next(); !m.done; m = l.next()) d(m.value).Sd(h, k2);
            });
          };
          b.all = function(g) {
            var h = t(g), k2 = h.next();
            return k2.done ? d([]) : new b(function(l, m) {
              function n(u) {
                return function(w) {
                  p[u] = w;
                  q--;
                  0 == q && l(p);
                };
              }
              var p = [], q = 0;
              do
                p.push(void 0), q++, d(k2.value).Sd(n(p.length - 1), m), k2 = h.next();
              while (!k2.done);
            });
          };
          return b;
        });
        function Pa(a, b) {
          return Object.prototype.hasOwnProperty.call(a, b);
        }
        ea("WeakMap", function(a) {
          function b(k2) {
            this.g = (h += Math.random() + 1).toString();
            if (k2) {
              k2 = t(k2);
              for (var l; !(l = k2.next()).done; ) l = l.value, this.set(l[0], l[1]);
            }
          }
          function c() {
          }
          function d(k2) {
            var l = typeof k2;
            return "object" === l && null !== k2 || "function" === l;
          }
          function e(k2) {
            if (!Pa(k2, g)) {
              var l = new c();
              ba(k2, g, { value: l });
            }
          }
          function f(k2) {
            var l = Object[k2];
            l && (Object[k2] = function(m) {
              if (m instanceof c) return m;
              Object.isExtensible(m) && e(m);
              return l(m);
            });
          }
          if (function() {
            if (!a || !Object.seal) return false;
            try {
              var k2 = Object.seal({}), l = Object.seal({}), m = new a([[k2, 2], [l, 3]]);
              if (2 != m.get(k2) || 3 != m.get(l)) return false;
              m.delete(k2);
              m.set(l, 4);
              return !m.has(k2) && 4 == m.get(l);
            } catch (n) {
              return false;
            }
          }()) return a;
          var g = "$jscomp_hidden_" + Math.random();
          f("freeze");
          f("preventExtensions");
          f("seal");
          var h = 0;
          b.prototype.set = function(k2, l) {
            if (!d(k2)) throw Error("Invalid WeakMap key");
            e(k2);
            if (!Pa(k2, g)) throw Error("WeakMap key fail: " + k2);
            k2[g][this.g] = l;
            return this;
          };
          b.prototype.get = function(k2) {
            return d(k2) && Pa(k2, g) ? k2[g][this.g] : void 0;
          };
          b.prototype.has = function(k2) {
            return d(k2) && Pa(
              k2,
              g
            ) && Pa(k2[g], this.g);
          };
          b.prototype.delete = function(k2) {
            return d(k2) && Pa(k2, g) && Pa(k2[g], this.g) ? delete k2[g][this.g] : false;
          };
          return b;
        });
        ea("Map", function(a) {
          function b() {
            var h = {};
            return h.Xb = h.next = h.head = h;
          }
          function c(h, k2) {
            var l = h[1];
            return fa(function() {
              if (l) {
                for (; l.head != h[1]; ) l = l.Xb;
                for (; l.next != l.head; ) return l = l.next, { done: false, value: k2(l) };
                l = null;
              }
              return { done: true, value: void 0 };
            });
          }
          function d(h, k2) {
            var l = k2 && typeof k2;
            "object" == l || "function" == l ? f.has(k2) ? l = f.get(k2) : (l = "" + ++g, f.set(k2, l)) : l = "p_" + k2;
            var m = h[0][l];
            if (m && Pa(h[0], l)) for (h = 0; h < m.length; h++) {
              var n = m[h];
              if (k2 !== k2 && n.key !== n.key || k2 === n.key) return { id: l, list: m, index: h, entry: n };
            }
            return {
              id: l,
              list: m,
              index: -1,
              entry: void 0
            };
          }
          function e(h) {
            this[0] = {};
            this[1] = b();
            this.size = 0;
            if (h) {
              h = t(h);
              for (var k2; !(k2 = h.next()).done; ) k2 = k2.value, this.set(k2[0], k2[1]);
            }
          }
          if (function() {
            if (!a || "function" != typeof a || !a.prototype.entries || "function" != typeof Object.seal) return false;
            try {
              var h = Object.seal({ x: 4 }), k2 = new a(t([[h, "s"]]));
              if ("s" != k2.get(h) || 1 != k2.size || k2.get({ x: 4 }) || k2.set({ x: 4 }, "t") != k2 || 2 != k2.size) return false;
              var l = k2.entries(), m = l.next();
              if (m.done || m.value[0] != h || "s" != m.value[1]) return false;
              m = l.next();
              return m.done || 4 != m.value[0].x || "t" != m.value[1] || !l.next().done ? false : true;
            } catch (n) {
              return false;
            }
          }()) return a;
          var f = /* @__PURE__ */ new WeakMap();
          e.prototype.set = function(h, k2) {
            h = 0 === h ? 0 : h;
            var l = d(this, h);
            l.list || (l.list = this[0][l.id] = []);
            l.entry ? l.entry.value = k2 : (l.entry = { next: this[1], Xb: this[1].Xb, head: this[1], key: h, value: k2 }, l.list.push(l.entry), this[1].Xb.next = l.entry, this[1].Xb = l.entry, this.size++);
            return this;
          };
          e.prototype.delete = function(h) {
            h = d(this, h);
            return h.entry && h.list ? (h.list.splice(h.index, 1), h.list.length || delete this[0][h.id], h.entry.Xb.next = h.entry.next, h.entry.next.Xb = h.entry.Xb, h.entry.head = null, this.size--, true) : false;
          };
          e.prototype.clear = function() {
            this[0] = {};
            this[1] = this[1].Xb = b();
            this.size = 0;
          };
          e.prototype.has = function(h) {
            return !!d(this, h).entry;
          };
          e.prototype.get = function(h) {
            return (h = d(this, h).entry) && h.value;
          };
          e.prototype.entries = function() {
            return c(this, function(h) {
              return [h.key, h.value];
            });
          };
          e.prototype.keys = function() {
            return c(this, function(h) {
              return h.key;
            });
          };
          e.prototype.values = function() {
            return c(this, function(h) {
              return h.value;
            });
          };
          e.prototype.forEach = function(h, k2) {
            for (var l = this.entries(), m; !(m = l.next()).done; ) m = m.value, h.call(k2, m[1], m[0], this);
          };
          e.prototype[Symbol.iterator] = e.prototype.entries;
          var g = 0;
          return e;
        });
        ea("Set", function(a) {
          function b(c) {
            this.g = /* @__PURE__ */ new Map();
            if (c) {
              c = t(c);
              for (var d; !(d = c.next()).done; ) this.add(d.value);
            }
            this.size = this.g.size;
          }
          if (function() {
            if (!a || "function" != typeof a || !a.prototype.entries || "function" != typeof Object.seal) return false;
            try {
              var c = Object.seal({ x: 4 }), d = new a(t([c]));
              if (!d.has(c) || 1 != d.size || d.add(c) != d || 1 != d.size || d.add({ x: 4 }) != d || 2 != d.size) return false;
              var e = d.entries(), f = e.next();
              if (f.done || f.value[0] != c || f.value[1] != c) return false;
              f = e.next();
              return f.done || f.value[0] == c || 4 != f.value[0].x || f.value[1] != f.value[0] ? false : e.next().done;
            } catch (g) {
              return false;
            }
          }()) return a;
          b.prototype.add = function(c) {
            c = 0 === c ? 0 : c;
            this.g.set(c, c);
            this.size = this.g.size;
            return this;
          };
          b.prototype.delete = function(c) {
            c = this.g.delete(c);
            this.size = this.g.size;
            return c;
          };
          b.prototype.clear = function() {
            this.g.clear();
            this.size = 0;
          };
          b.prototype.has = function(c) {
            return this.g.has(c);
          };
          b.prototype.entries = function() {
            return this.g.entries();
          };
          b.prototype.values = function() {
            return this.g.values();
          };
          b.prototype.keys = b.prototype.values;
          b.prototype[Symbol.iterator] = b.prototype.values;
          b.prototype.forEach = function(c, d) {
            var e = this;
            this.g.forEach(function(f) {
              return c.call(d, f, f, e);
            });
          };
          return b;
        });
        function Qa(a, b) {
          a instanceof String && (a += "");
          var c = 0, d = false, e = { next: function() {
            if (!d && c < a.length) {
              var f = c++;
              return { value: b(f, a[f]), done: false };
            }
            d = true;
            return { done: true, value: void 0 };
          } };
          e[Symbol.iterator] = function() {
            return e;
          };
          return e;
        }
        ea("Array.prototype.values", function(a) {
          return a ? a : function() {
            return Qa(this, function(b, c) {
              return c;
            });
          };
        });
        ea("Array.from", function(a) {
          return a ? a : function(b, c, d) {
            c = null != c ? c : function(h) {
              return h;
            };
            var e = [], f = "undefined" != typeof Symbol && Symbol.iterator && b[Symbol.iterator];
            if ("function" == typeof f) {
              b = f.call(b);
              for (var g = 0; !(f = b.next()).done; ) e.push(c.call(d, f.value, g++));
            } else for (f = b.length, g = 0; g < f; g++) e.push(c.call(d, b[g], g));
            return e;
          };
        });
        ea("Array.prototype.keys", function(a) {
          return a ? a : function() {
            return Qa(this, function(b) {
              return b;
            });
          };
        });
        ea("Object.is", function(a) {
          return a ? a : function(b, c) {
            return b === c ? 0 !== b || 1 / b === 1 / c : b !== b && c !== c;
          };
        });
        ea("Array.prototype.includes", function(a) {
          return a ? a : function(b, c) {
            var d = this;
            d instanceof String && (d = String(d));
            var e = d.length;
            c = c || 0;
            for (0 > c && (c = Math.max(c + e, 0)); c < e; c++) {
              var f = d[c];
              if (f === b || Object.is(f, b)) return true;
            }
            return false;
          };
        });
        function Ra(a, b, c) {
          if (null == a) throw new TypeError("The 'this' value for String.prototype." + c + " must not be null or undefined");
          if (b instanceof RegExp) throw new TypeError("First argument to String.prototype." + c + " must not be a regular expression");
          return a + "";
        }
        ea("String.prototype.includes", function(a) {
          return a ? a : function(b, c) {
            return -1 !== Ra(this, b, "includes").indexOf(b, c || 0);
          };
        });
        ea("String.fromCodePoint", function(a) {
          return a ? a : function(b) {
            for (var c = "", d = 0; d < arguments.length; d++) {
              var e = Number(arguments[d]);
              if (0 > e || 1114111 < e || e !== Math.floor(e)) throw new RangeError("invalid_code_point " + e);
              65535 >= e ? c += String.fromCharCode(e) : (e -= 65536, c += String.fromCharCode(e >>> 10 & 1023 | 55296), c += String.fromCharCode(e & 1023 | 56320));
            }
            return c;
          };
        });
        function Sa(a, b, c) {
          a instanceof String && (a = String(a));
          for (var d = a.length, e = 0; e < d; e++) {
            var f = a[e];
            if (b.call(c, f, e, a)) return { Vg: e, v: f };
          }
          return { Vg: -1, v: void 0 };
        }
        ea("Array.prototype.findIndex", function(a) {
          return a ? a : function(b, c) {
            return Sa(this, b, c).Vg;
          };
        });
        ea("WeakSet", function(a) {
          function b(c) {
            this.g = /* @__PURE__ */ new WeakMap();
            if (c) {
              c = t(c);
              for (var d; !(d = c.next()).done; ) this.add(d.value);
            }
          }
          if (function() {
            if (!a || !Object.seal) return false;
            try {
              var c = Object.seal({}), d = Object.seal({}), e = new a([c]);
              if (!e.has(c) || e.has(d)) return false;
              e.delete(c);
              e.add(d);
              return !e.has(c) && e.has(d);
            } catch (f) {
              return false;
            }
          }()) return a;
          b.prototype.add = function(c) {
            this.g.set(c, true);
            return this;
          };
          b.prototype.has = function(c) {
            return this.g.has(c);
          };
          b.prototype.delete = function(c) {
            return this.g.delete(c);
          };
          return b;
        });
        ea("Array.prototype.find", function(a) {
          return a ? a : function(b, c) {
            return Sa(this, b, c).v;
          };
        });
        ea("String.prototype.startsWith", function(a) {
          return a ? a : function(b, c) {
            var d = Ra(this, b, "startsWith"), e = d.length, f = b.length;
            c = Math.max(0, Math.min(c | 0, d.length));
            for (var g = 0; g < f && c < e; ) if (d[c++] != b[g++]) return false;
            return g >= f;
          };
        });
        ea("Object.entries", function(a) {
          return a ? a : function(b) {
            var c = [], d;
            for (d in b) Pa(b, d) && c.push([d, b[d]]);
            return c;
          };
        });
        var Ta = "function" == typeof Object.assign ? Object.assign : function(a, b) {
          for (var c = 1; c < arguments.length; c++) {
            var d = arguments[c];
            if (d) for (var e in d) Pa(d, e) && (a[e] = d[e]);
          }
          return a;
        };
        ea("Object.assign", function(a) {
          return a || Ta;
        });
        ea("Promise.prototype.finally", function(a) {
          return a ? a : function(b) {
            return this.then(function(c) {
              return Promise.resolve(b()).then(function() {
                return c;
              });
            }, function(c) {
              return Promise.resolve(b()).then(function() {
                throw c;
              });
            });
          };
        });
        ea("Array.prototype.entries", function(a) {
          return a ? a : function() {
            return Qa(this, function(b, c) {
              return [b, c];
            });
          };
        });
        ea("Number.isNaN", function(a) {
          return a ? a : function(b) {
            return "number" === typeof b && isNaN(b);
          };
        });
        ea("String.prototype.repeat", function(a) {
          return a ? a : function(b) {
            var c = Ra(this, null, "repeat");
            if (0 > b || 1342177279 < b) throw new RangeError("Invalid count value");
            b |= 0;
            for (var d = ""; b; ) if (b & 1 && (d += c), b >>>= 1) c += c;
            return d;
          };
        });
        ea("Number.EPSILON", function() {
          return Math.pow(2, -52);
        });
        ea("Number.MAX_SAFE_INTEGER", function() {
          return 9007199254740991;
        });
        ea("Number.isFinite", function(a) {
          return a ? a : function(b) {
            return "number" !== typeof b ? false : !isNaN(b) && Infinity !== b && -Infinity !== b;
          };
        });
        ea("Object.values", function(a) {
          return a ? a : function(b) {
            var c = [], d;
            for (d in b) Pa(b, d) && c.push(b[d]);
            return c;
          };
        });
        ea("Math.log2", function(a) {
          return a ? a : function(b) {
            return Math.log(b) / Math.LN2;
          };
        });
        ea("String.prototype.endsWith", function(a) {
          return a ? a : function(b, c) {
            var d = Ra(this, b, "endsWith");
            void 0 === c && (c = d.length);
            c = Math.max(0, Math.min(c | 0, d.length));
            for (var e = b.length; 0 < e && 0 < c; ) if (d[--c] != b[--e]) return false;
            return 0 >= e;
          };
        });
        ea("Math.trunc", function(a) {
          return a ? a : function(b) {
            b = Number(b);
            if (isNaN(b) || Infinity === b || -Infinity === b || 0 === b) return b;
            var c = Math.floor(Math.abs(b));
            return 0 > b ? -c : c;
          };
        });
        var Ua = this || self;
        function T(a, b) {
          a = a.split(".");
          var c = Ua;
          a[0] in c || "undefined" == typeof c.execScript || c.execScript("var " + a[0]);
          for (var d; a.length && (d = a.shift()); ) a.length || void 0 === b ? c[d] && c[d] !== Object.prototype[d] ? c = c[d] : c = c[d] = {} : c[d] = b;
        }
        ;
        function Va() {
        }
        function Wa() {
        }
        ;
        function Xa(a) {
          this.g = Math.exp(Math.log(0.5) / a);
          this.i = this.h = 0;
        }
        Xa.prototype.sample = function(a, b) {
          var c = Math.pow(this.g, a);
          b = b * (1 - c) + c * this.h;
          isNaN(b) || (this.h = b, this.i += a);
        };
        function Ya(a) {
          return a.h / (1 - Math.pow(a.g, a.i));
        }
        ;
        function Za() {
          this.h = new Xa(2);
          this.j = new Xa(5);
          this.g = 0;
          this.i = 128e3;
          this.l = 16e3;
        }
        Za.prototype.configure = function(a) {
          this.i = a.minTotalBytes;
          this.l = a.minBytes;
          this.h.g = Math.exp(Math.log(0.5) / a.fastHalfLife);
          this.j.g = Math.exp(Math.log(0.5) / a.slowHalfLife);
        };
        Za.prototype.sample = function(a, b) {
          if (!(b < this.l)) {
            var c = 8e3 * b / a;
            a /= 1e3;
            this.g += b;
            this.h.sample(a, c);
            this.j.sample(a, c);
          }
        };
        Za.prototype.getBandwidthEstimate = function(a) {
          return this.g < this.i ? a : Math.min(Ya(this.h), Ya(this.j));
        };
        function $a() {
        }
        function ab() {
        }
        function db() {
        }
        function eb(a) {
          var b = Na.apply(1, arguments);
          fb.has(a) || (fb.add(a), db.apply($a, y(b)));
        }
        function gb() {
        }
        function hb() {
        }
        function ib() {
        }
        var fb = /* @__PURE__ */ new Set();
        window2.console && ((/* @__PURE__ */ new Map()).set(1, function() {
          return console.error.apply(console, y(Na.apply(0, arguments)));
        }).set(2, function() {
          return console.warn.apply(console, y(Na.apply(0, arguments)));
        }).set(3, function() {
          return console.info.apply(console, y(Na.apply(0, arguments)));
        }).set(4, function() {
          return console.log.apply(console, y(Na.apply(0, arguments)));
        }).set(5, function() {
          return console.debug.apply(console, y(Na.apply(0, arguments)));
        }).set(6, function() {
          return console.debug.apply(console, y(Na.apply(0, arguments)));
        }), db = function() {
          return console.warn.apply(console, y(Na.apply(0, arguments)));
        }, ab = function() {
          console.error.apply(console, y(Na.apply(0, arguments)));
        });
        function kb() {
          this.g = /* @__PURE__ */ new Map();
        }
        r = kb.prototype;
        r.push = function(a, b) {
          this.g.has(a) ? this.g.get(a).push(b) : this.g.set(a, [b]);
        };
        r.get = function(a) {
          return this.g.has(a) ? this.g.get(a).slice() : null;
        };
        r.remove = function(a, b) {
          if (this.g.has(a)) {
            var c = this.g.get(a).filter(function(d) {
              return d != b;
            });
            this.g.set(a, c);
            c.length || this.g.delete(a);
          }
        };
        r.forEach = function(a) {
          this.g.forEach(function(b, c) {
            a(c, b);
          });
        };
        r.size = function() {
          return this.g.size;
        };
        r.keys = function() {
          return Array.from(this.g.keys());
        };
        function lb() {
          this.g = new kb();
        }
        r = lb.prototype;
        r.release = function() {
          this.Qa();
          this.g = null;
        };
        r.D = function(a, b, c, d) {
          this.g && (a = new mb(a, b, c, d), this.g.push(b, a));
        };
        r.ma = function(a, b, c, d) {
          function e(g) {
            f.Ja(a, b, e);
            c(g);
          }
          var f = this;
          this.D(a, b, e, d);
        };
        r.Ja = function(a, b, c) {
          if (this.g) {
            var d = this.g.get(b) || [];
            d = t(d);
            for (var e = d.next(); !e.done; e = d.next()) e = e.value, e.target != a || c != e.listener && c || (e.Ja(), this.g.remove(b, e));
          }
        };
        r.Qa = function() {
          if (this.g) {
            for (var a = [], b = t(this.g.g.values()), c = b.next(); !c.done; c = b.next()) a.push.apply(a, y(c.value));
            a = t(a);
            for (b = a.next(); !b.done; b = a.next()) b.value.Ja();
            this.g.g.clear();
          }
        };
        T("shaka.util.EventManager", lb);
        lb.prototype.removeAll = lb.prototype.Qa;
        lb.prototype.unlisten = lb.prototype.Ja;
        lb.prototype.listenOnce = lb.prototype.ma;
        lb.prototype.listen = lb.prototype.D;
        lb.prototype.release = lb.prototype.release;
        function mb(a, b, c, d) {
          this.target = a;
          this.type = b;
          this.listener = c;
          this.g = nb(a, d);
          this.target.addEventListener(b, c, this.g);
        }
        mb.prototype.Ja = function() {
          this.target.removeEventListener(this.type, this.listener, this.g);
          this.listener = this.target = null;
          this.g = false;
        };
        function nb(a, b) {
          if (void 0 == b) return false;
          if ("boolean" == typeof b) return b;
          var c = /* @__PURE__ */ new Set(["passive", "capture"]);
          Object.keys(b).filter(function(d) {
            return !c.has(d);
          });
          return pb(a) ? b : b.capture || false;
        }
        function pb(a) {
          var b = qb;
          if (void 0 == b) {
            b = false;
            try {
              var c = {}, d = { get: function() {
                b = true;
                return false;
              } };
              Object.defineProperty(c, "passive", d);
              Object.defineProperty(c, "capture", d);
              d = function() {
              };
              a.addEventListener("test", d, c);
              a.removeEventListener("test", d, c);
            } catch (e) {
              b = false;
            }
            qb = b;
          }
          return b || false;
        }
        var qb = void 0;
        T("shaka.config.AutoShowText", { NEVER: 0, ALWAYS: 1, IF_PREFERRED_TEXT_LANGUAGE: 2, IF_SUBTITLES_MAY_BE_NEEDED: 3 });
        function rb(a, b) {
          this.g = a;
          this.h = b;
        }
        rb.prototype.toString = function() {
          return "v" + this.g + "." + this.h;
        };
        function sb(a, b) {
          var c = new rb(5, 0), d = tb, e = d.g, f = c.h - e.h;
          (0 < (c.g - e.g || f) ? d.i : d.h)(d.g, c, a, b);
        }
        function vb(a, b, c, d) {
          db([c, "has been deprecated and will be removed in", b, ". We are currently at version", a, ". Additional information:", d].join(" "));
        }
        function wb(a, b, c, d) {
          ab([c, "has been deprecated and has been removed in", b, ". We are now at version", a, ". Additional information:", d].join(" "));
        }
        var tb = null;
        var xb = RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");
        function yb(a) {
          var b;
          a instanceof yb ? (zb(this, a.Jb), this.Gc = a.Gc, Ab(this, a.wb), Bb(this, a.$c), this.ab = a.ab, Cb(this, a.g.clone()), this.pc = a.pc) : a && (b = String(a).match(xb)) ? (zb(this, b[1] || "", true), this.Gc = Db(b[2] || ""), Ab(this, b[3] || "", true), Bb(this, b[4]), this.ab = Db(b[5] || "", true), Cb(this, b[6] || "", true), this.pc = Db(b[7] || "")) : this.g = new Eb(null);
        }
        r = yb.prototype;
        r.Jb = "";
        r.Gc = "";
        r.wb = "";
        r.$c = null;
        r.ab = "";
        r.pc = "";
        r.toString = function() {
          var a = [], b = this.Jb;
          b && a.push(Fb(b, Gb, true), ":");
          if (b = this.wb) {
            a.push("//");
            var c = this.Gc;
            c && a.push(Fb(c, Gb, true), "@");
            a.push(encodeURIComponent(b).replace(/%25([0-9a-fA-F]{2})/g, "%$1"));
            b = this.$c;
            null != b && a.push(":", String(b));
          }
          if (b = this.ab) this.wb && "/" != b.charAt(0) && a.push("/"), a.push(Fb(b, "/" == b.charAt(0) ? Hb : Ib, true));
          (b = this.g.toString()) && a.push("?", b);
          (b = this.pc) && a.push("#", Fb(b, Jb));
          return a.join("");
        };
        r.resolve = function(a) {
          var b = this.clone();
          "data" === b.Jb && (b = new yb());
          var c = !!a.Jb;
          c ? zb(b, a.Jb) : c = !!a.Gc;
          c ? b.Gc = a.Gc : c = !!a.wb;
          c ? Ab(b, a.wb) : c = null != a.$c;
          var d = a.ab;
          if (c) Bb(b, a.$c);
          else if (c = !!a.ab) {
            if ("/" != d.charAt(0)) if (this.wb && !this.ab) d = "/" + d;
            else {
              var e = b.ab.lastIndexOf("/");
              -1 != e && (d = b.ab.substr(0, e + 1) + d);
            }
            if (".." == d || "." == d) d = "";
            else if (-1 != d.indexOf("./") || -1 != d.indexOf("/.")) {
              e = 0 == d.lastIndexOf("/", 0);
              d = d.split("/");
              for (var f = [], g = 0; g < d.length; ) {
                var h = d[g++];
                "." == h ? e && g == d.length && f.push("") : ".." == h ? ((1 < f.length || 1 == f.length && "" != f[0]) && f.pop(), e && g == d.length && f.push("")) : (f.push(h), e = true);
              }
              d = f.join("/");
            }
          }
          c ? b.ab = d : c = "" !== a.g.toString();
          c ? Cb(b, a.g.clone()) : c = !!a.pc;
          c && (b.pc = a.pc);
          return b;
        };
        r.clone = function() {
          return new yb(this);
        };
        function zb(a, b, c) {
          a.Jb = c ? Db(b, true) : b;
          a.Jb && (a.Jb = a.Jb.replace(/:$/, ""));
        }
        function Ab(a, b, c) {
          a.wb = c ? Db(b, true) : b;
        }
        function Bb(a, b) {
          if (b) {
            b = Number(b);
            if (isNaN(b) || 0 > b) throw Error("Bad port number " + b);
            a.$c = b;
          } else a.$c = null;
        }
        function Cb(a, b, c) {
          b instanceof Eb ? a.g = b : (c || (b = Fb(b, Kb)), a.g = new Eb(b));
        }
        function Db(a, b) {
          return a ? b ? decodeURI(a) : decodeURIComponent(a) : "";
        }
        function Fb(a, b, c) {
          return null != a ? (a = encodeURI(a).replace(b, Lb), c && (a = a.replace(/%25([0-9a-fA-F]{2})/g, "%$1")), a) : null;
        }
        function Lb(a) {
          a = a.charCodeAt(0);
          return "%" + (a >> 4 & 15).toString(16) + (a & 15).toString(16);
        }
        var Gb = /[#\/\?@]/g, Ib = /[#\?:]/g, Hb = /[#\?]/g, Kb = /[#\?@]/g, Jb = /#/g;
        function Eb(a) {
          this.g = a || null;
        }
        function Mb(a) {
          if (!a.Va && (a.Va = /* @__PURE__ */ new Map(), a.kd = 0, a.g)) for (var b = a.g.split("&"), c = 0; c < b.length; c++) {
            var d = b[c].indexOf("="), e = null;
            if (0 <= d) {
              var f = b[c].substring(0, d);
              e = b[c].substring(d + 1);
            } else f = b[c];
            f = decodeURIComponent(f.replace(/\+/g, " "));
            e = e || "";
            a.add(f, decodeURIComponent(e.replace(/\+/g, " ")));
          }
        }
        r = Eb.prototype;
        r.Va = null;
        r.kd = null;
        function Nb(a) {
          Mb(a);
          return a.kd;
        }
        r.add = function(a, b) {
          Mb(this);
          this.g = null;
          var c = this.Va.has(a) ? this.Va.get(a) : null;
          c || this.Va.set(a, c = []);
          c.push(b);
          this.kd++;
          return this;
        };
        r.set = function(a, b) {
          Mb(this);
          this.g = null;
          this.Va.has(a) ? this.Va.set(a, [b]) : this.add(a, b);
          return this;
        };
        r.get = function(a) {
          Mb(this);
          return this.Va.get(a) || [];
        };
        r.toString = function() {
          if (this.g) return this.g;
          if (!this.Va || !this.Va.size) return "";
          for (var a = [], b = t(this.Va.keys()), c = b.next(); !c.done; c = b.next()) {
            var d = c.value;
            c = encodeURIComponent(d);
            d = this.Va.get(d);
            for (var e = 0; e < d.length; e++) {
              var f = c;
              "" !== d[e] && (f += "=" + encodeURIComponent(d[e]));
              a.push(f);
            }
          }
          return this.g = a.join("&");
        };
        r.clone = function() {
          var a = new Eb();
          a.g = this.g;
          if (this.Va) {
            for (var b = /* @__PURE__ */ new Map(), c = t(this.Va), d = c.next(); !d.done; d = c.next()) {
              var e = t(d.value);
              d = e.next().value;
              e = e.next().value;
              b.set(d, e.concat());
            }
            a.Va = b;
            a.kd = this.kd;
          }
          return a;
        };
        function Ob() {
        }
        function Pb(a, b) {
          if (!a && !b) return true;
          if (!a || !b || a.byteLength != b.byteLength) return false;
          if ((ArrayBuffer.isView(a) ? a.buffer : a) == (ArrayBuffer.isView(b) ? b.buffer : b) && (a.byteOffset || 0) == (b.byteOffset || 0)) return true;
          var c = Qb(a);
          b = Qb(b);
          for (var d = 0; d < a.byteLength; d++) if (c[d] != b[d]) return false;
          return true;
        }
        function Sb(a) {
          return ArrayBuffer.isView(a) ? 0 == a.byteOffset && a.byteLength == a.buffer.byteLength ? a.buffer : new Uint8Array(a).buffer : a;
        }
        function Qb(a, b, c) {
          c = void 0 === c ? Infinity : c;
          return Tb(a, void 0 === b ? 0 : b, c, Uint8Array);
        }
        function Ub(a, b, c) {
          c = void 0 === c ? Infinity : c;
          return Tb(a, void 0 === b ? 0 : b, c, Uint16Array);
        }
        function Vb(a, b, c) {
          c = void 0 === c ? Infinity : c;
          return Tb(a, void 0 === b ? 0 : b, c, DataView);
        }
        function Tb(a, b, c, d) {
          var e = ArrayBuffer.isView(a) ? a.buffer : a, f = 1;
          "BYTES_PER_ELEMENT" in d && (f = d.BYTES_PER_ELEMENT);
          var g = ((a.byteOffset || 0) + a.byteLength) / f;
          a = Math.floor(Math.max(0, Math.min(((a.byteOffset || 0) + b) / f, g)));
          return new d(e, a, Math.floor(Math.min(a + Math.max(c, 0), g)) - a);
        }
        T("shaka.util.BufferUtils", Ob);
        Ob.toDataView = Vb;
        Ob.toUint16 = Ub;
        Ob.toUint8 = Qb;
        Ob.toArrayBuffer = Sb;
        Ob.equal = Pb;
        function U(a, b, c) {
          var d = Na.apply(3, arguments);
          this.severity = a;
          this.category = b;
          this.code = c;
          this.data = d;
          this.handled = false;
          this.message = "Shaka Error " + this.code;
          if (Wb) try {
            throw Error(this.message || "Shaka Error");
          } catch (e) {
            this.stack = e.stack;
          }
        }
        U.prototype.toString = function() {
          return "shaka.util.Error " + JSON.stringify(this, null, "  ");
        };
        T("shaka.util.Error", U);
        var Wb = true;
        U.Severity = { RECOVERABLE: 1, CRITICAL: 2 };
        U.Category = { NETWORK: 1, TEXT: 2, MEDIA: 3, MANIFEST: 4, STREAMING: 5, DRM: 6, PLAYER: 7, CAST: 8, STORAGE: 9, ADS: 10 };
        U.Code = {
          UNSUPPORTED_SCHEME: 1e3,
          BAD_HTTP_STATUS: 1001,
          HTTP_ERROR: 1002,
          TIMEOUT: 1003,
          MALFORMED_DATA_URI: 1004,
          REQUEST_FILTER_ERROR: 1006,
          RESPONSE_FILTER_ERROR: 1007,
          MALFORMED_TEST_URI: 1008,
          UNEXPECTED_TEST_REQUEST: 1009,
          ATTEMPTS_EXHAUSTED: 1010,
          SEGMENT_MISSING: 1011,
          INVALID_TEXT_HEADER: 2e3,
          INVALID_TEXT_CUE: 2001,
          UNABLE_TO_DETECT_ENCODING: 2003,
          BAD_ENCODING: 2004,
          INVALID_XML: 2005,
          INVALID_MP4_TTML: 2007,
          INVALID_MP4_VTT: 2008,
          UNABLE_TO_EXTRACT_CUE_START_TIME: 2009,
          INVALID_MP4_CEA: 2010,
          TEXT_COULD_NOT_GUESS_MIME_TYPE: 2011,
          CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS: 2012,
          TEXT_ONLY_WEBVTT_SRC_EQUALS: 2013,
          MISSING_TEXT_PLUGIN: 2014,
          CHAPTERS_TRACK_FAILED: 2015,
          UNSUPPORTED_EXTERNAL_THUMBNAILS_URI: 2017,
          BUFFER_READ_OUT_OF_BOUNDS: 3e3,
          JS_INTEGER_OVERFLOW: 3001,
          EBML_OVERFLOW: 3002,
          EBML_BAD_FLOATING_POINT_SIZE: 3003,
          MP4_SIDX_WRONG_BOX_TYPE: 3004,
          MP4_SIDX_INVALID_TIMESCALE: 3005,
          MP4_SIDX_TYPE_NOT_SUPPORTED: 3006,
          WEBM_CUES_ELEMENT_MISSING: 3007,
          WEBM_EBML_HEADER_ELEMENT_MISSING: 3008,
          WEBM_SEGMENT_ELEMENT_MISSING: 3009,
          WEBM_INFO_ELEMENT_MISSING: 3010,
          WEBM_DURATION_ELEMENT_MISSING: 3011,
          WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING: 3012,
          WEBM_CUE_TIME_ELEMENT_MISSING: 3013,
          MEDIA_SOURCE_OPERATION_FAILED: 3014,
          MEDIA_SOURCE_OPERATION_THREW: 3015,
          VIDEO_ERROR: 3016,
          QUOTA_EXCEEDED_ERROR: 3017,
          TRANSMUXING_FAILED: 3018,
          CONTENT_TRANSFORMATION_FAILED: 3019,
          MSS_MISSING_DATA_FOR_TRANSMUXING: 3020,
          MSS_TRANSMUXING_FAILED: 3022,
          TRANSMUXING_NO_VIDEO_DATA: 3023,
          STREAMING_NOT_ALLOWED: 3024,
          UNABLE_TO_GUESS_MANIFEST_TYPE: 4e3,
          DASH_INVALID_XML: 4001,
          DASH_NO_SEGMENT_INFO: 4002,
          DASH_EMPTY_ADAPTATION_SET: 4003,
          DASH_EMPTY_PERIOD: 4004,
          DASH_WEBM_MISSING_INIT: 4005,
          DASH_UNSUPPORTED_CONTAINER: 4006,
          DASH_PSSH_BAD_ENCODING: 4007,
          DASH_NO_COMMON_KEY_SYSTEM: 4008,
          DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED: 4009,
          DASH_CONFLICTING_KEY_IDS: 4010,
          RESTRICTIONS_CANNOT_BE_MET: 4012,
          HLS_PLAYLIST_HEADER_MISSING: 4015,
          INVALID_HLS_TAG: 4016,
          HLS_INVALID_PLAYLIST_HIERARCHY: 4017,
          DASH_DUPLICATE_REPRESENTATION_ID: 4018,
          HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND: 4020,
          HLS_REQUIRED_ATTRIBUTE_MISSING: 4023,
          HLS_REQUIRED_TAG_MISSING: 4024,
          HLS_COULD_NOT_GUESS_CODECS: 4025,
          HLS_KEYFORMATS_NOT_SUPPORTED: 4026,
          DASH_UNSUPPORTED_XLINK_ACTUATE: 4027,
          DASH_XLINK_DEPTH_LIMIT: 4028,
          CONTENT_UNSUPPORTED_BY_BROWSER: 4032,
          CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM: 4033,
          NO_VARIANTS: 4036,
          PERIOD_FLATTENING_FAILED: 4037,
          INCONSISTENT_DRM_ACROSS_PERIODS: 4038,
          HLS_VARIABLE_NOT_FOUND: 4039,
          HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED: 4040,
          HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED: 4041,
          NO_WEB_CRYPTO_API: 4042,
          CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM: 4045,
          MSS_INVALID_XML: 4046,
          MSS_LIVE_CONTENT_NOT_SUPPORTED: 4047,
          AES_128_INVALID_IV_LENGTH: 4048,
          AES_128_INVALID_KEY_LENGTH: 4049,
          DASH_CONFLICTING_AES_128: 4050,
          DASH_UNSUPPORTED_AES_128: 4051,
          DASH_INVALID_PATCH: 4052,
          HLS_EMPTY_MEDIA_PLAYLIST: 4053,
          DASH_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED: 4054,
          STREAMING_ENGINE_STARTUP_INVALID_STATE: 5006,
          NO_RECOGNIZED_KEY_SYSTEMS: 6e3,
          REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE: 6001,
          FAILED_TO_CREATE_CDM: 6002,
          FAILED_TO_ATTACH_TO_VIDEO: 6003,
          INVALID_SERVER_CERTIFICATE: 6004,
          FAILED_TO_CREATE_SESSION: 6005,
          FAILED_TO_GENERATE_LICENSE_REQUEST: 6006,
          LICENSE_REQUEST_FAILED: 6007,
          LICENSE_RESPONSE_REJECTED: 6008,
          ENCRYPTED_CONTENT_WITHOUT_DRM_INFO: 6010,
          NO_LICENSE_SERVER_GIVEN: 6012,
          OFFLINE_SESSION_REMOVED: 6013,
          EXPIRED: 6014,
          SERVER_CERTIFICATE_REQUIRED: 6015,
          INIT_DATA_TRANSFORM_ERROR: 6016,
          SERVER_CERTIFICATE_REQUEST_FAILED: 6017,
          MIN_HDCP_VERSION_NOT_MATCH: 6018,
          ERROR_CHECKING_HDCP_VERSION: 6019,
          MISSING_EME_SUPPORT: 6020,
          LOAD_INTERRUPTED: 7e3,
          OPERATION_ABORTED: 7001,
          NO_VIDEO_ELEMENT: 7002,
          OBJECT_DESTROYED: 7003,
          CONTENT_NOT_LOADED: 7004,
          SRC_EQUALS_PRELOAD_NOT_SUPPORTED: 7005,
          PRELOAD_DESTROYED: 7006,
          CAST_API_UNAVAILABLE: 8e3,
          NO_CAST_RECEIVERS: 8001,
          ALREADY_CASTING: 8002,
          UNEXPECTED_CAST_ERROR: 8003,
          CAST_CANCELED_BY_USER: 8004,
          CAST_CONNECTION_TIMED_OUT: 8005,
          CAST_RECEIVER_APP_UNAVAILABLE: 8006,
          STORAGE_NOT_SUPPORTED: 9e3,
          INDEXED_DB_ERROR: 9001,
          DEPRECATED_OPERATION_ABORTED: 9002,
          REQUESTED_ITEM_NOT_FOUND: 9003,
          MALFORMED_OFFLINE_URI: 9004,
          CANNOT_STORE_LIVE_OFFLINE: 9005,
          NO_INIT_DATA_FOR_OFFLINE: 9007,
          LOCAL_PLAYER_INSTANCE_REQUIRED: 9008,
          NEW_KEY_OPERATION_NOT_SUPPORTED: 9011,
          KEY_NOT_FOUND: 9012,
          MISSING_STORAGE_CELL: 9013,
          STORAGE_LIMIT_REACHED: 9014,
          DOWNLOAD_SIZE_CALLBACK_ERROR: 9015,
          MODIFY_OPERATION_NOT_SUPPORTED: 9016,
          INDEXED_DB_INIT_TIMED_OUT: 9017,
          CS_IMA_SDK_MISSING: 1e4,
          CS_AD_MANAGER_NOT_INITIALIZED: 10001,
          SS_IMA_SDK_MISSING: 10002,
          SS_AD_MANAGER_NOT_INITIALIZED: 10003,
          CURRENT_DAI_REQUEST_NOT_FINISHED: 10004,
          MT_AD_MANAGER_NOT_INITIALIZED: 10005,
          INTERSTITIAL_AD_MANAGER_NOT_INITIALIZED: 10006,
          VAST_INVALID_XML: 10007
        };
        function Xb(a) {
          this.h = a;
          this.g = void 0;
        }
        Xb.prototype.value = function() {
          void 0 === this.g && (this.g = this.h());
          return this.g;
        };
        function Yb(a, b) {
          return a.length && b.length && a !== b ? 0 < Zb(a, b).length : true;
        }
        function Zb(a, b) {
          if (!a.length) return b;
          if (!b.length) return a;
          var c = [];
          a = t(a);
          for (var d = a.next(); !d.done; d = a.next()) {
            d = d.value;
            for (var e = t(b), f = e.next(); !f.done; f = e.next()) if (f = f.value, d.keySystem == f.keySystem) {
              e = /* @__PURE__ */ new Map();
              for (var g = t((d.initData || []).concat(f.initData || [])), h = g.next(); !h.done; h = g.next()) h = h.value, e.set(h.keyId, h);
              e = Array.from(e.values());
              g = d.keyIds && f.keyIds ? new Set([].concat(y(d.keyIds), y(f.keyIds))) : d.keyIds || f.keyIds;
              c.push({ keySystem: d.keySystem, licenseServerUri: d.licenseServerUri || f.licenseServerUri, distinctiveIdentifierRequired: d.distinctiveIdentifierRequired || f.distinctiveIdentifierRequired, persistentStateRequired: d.persistentStateRequired || f.persistentStateRequired, videoRobustness: d.videoRobustness || f.videoRobustness, audioRobustness: d.audioRobustness || f.audioRobustness, serverCertificate: d.serverCertificate || f.serverCertificate, serverCertificateUri: d.serverCertificateUri || f.serverCertificateUri, initData: e, keyIds: g });
              break;
            }
          }
          return c;
        }
        function $b(a) {
          return a ? !!a.match(/^com\.(microsoft|chromecast)\.playready/) : false;
        }
        function ac(a) {
          return a ? !!a.match(/^com\.apple\.fps/) : false;
        }
        var bc = new Xb(function() {
          return Sb(new Uint8Array([0]));
        }), cc = /* @__PURE__ */ new Map();
        function dc(a) {
          this.h = a;
          this.g = null;
        }
        dc.prototype.da = function(a) {
          var b = this;
          this.stop();
          var c = true, d = null;
          this.g = function() {
            window2.clearTimeout(d);
            c = false;
          };
          d = window2.setTimeout(function() {
            c && b.h();
          }, 1e3 * a);
          return this;
        };
        dc.prototype.stop = function() {
          this.g && (this.g(), this.g = null);
        };
        function ec(a) {
          this.h = a;
          this.g = null;
        }
        ec.prototype.kb = function() {
          this.stop();
          this.h();
          return this;
        };
        ec.prototype.da = function(a) {
          var b = this;
          this.stop();
          this.g = new dc(function() {
            b.h();
          }).da(a);
          return this;
        };
        ec.prototype.ua = function(a) {
          var b = this;
          this.stop();
          this.g = new dc(function() {
            b.g.da(a);
            b.h();
          }).da(a);
          return this;
        };
        ec.prototype.stop = function() {
          this.g && (this.g.stop(), this.g = null);
        };
        T("shaka.util.Timer", ec);
        ec.prototype.stop = ec.prototype.stop;
        ec.prototype.tickEvery = ec.prototype.ua;
        ec.prototype.tickAfter = ec.prototype.da;
        ec.prototype.tickNow = ec.prototype.kb;
        function fc() {
          var a = window2.ManagedMediaSource || window2.MediaSource;
          return a && a.isTypeSupported ? true : false;
        }
        function gc(a) {
          return "" != hc().canPlayType(a);
        }
        function ic() {
          return navigator.userAgent.match(/Edge?\//) ? true : false;
        }
        function jc() {
          return kc("Xbox One");
        }
        function lc() {
          return kc("Tizen");
        }
        function mc() {
          return kc("Tizen 3");
        }
        function nc() {
          return kc("Web0S");
        }
        function oc() {
          return nc() && 38 === pc();
        }
        function qc() {
          return kc("CrKey") && !kc("VIZIO SmartCast");
        }
        function pc() {
          if (!kc("Chrome") || navigator.userAgent.match(/Edge\//)) return null;
          var a = navigator.userAgent.match(/Chrome\/(\d+)/);
          return a ? parseInt(a[1], 10) : null;
        }
        function rc() {
          return sc() && ((navigator.userAgentData && navigator.userAgentData.platform ? "macos" == navigator.userAgentData.platform.toLowerCase() : navigator.platform ? navigator.platform.toLowerCase().includes("mac") : false) || (/(?:iPhone|iPad|iPod)/.test(navigator.userAgent) ? true : sc() && 1 < navigator.maxTouchPoints));
        }
        function tc() {
          return kc("PlayStation 5");
        }
        function uc() {
          return kc("PlayStation 4");
        }
        function vc() {
          return kc("Hisense") || kc("VIDAA");
        }
        function wc() {
          if (!rc() && (!sc() || rc())) return null;
          var a = navigator.userAgent.match(/Version\/(\d+)/);
          return a ? parseInt(a[1], 10) : (a = navigator.userAgent.match(/OS (\d+)(?:_\d+)?/)) ? parseInt(a[1], 10) : null;
        }
        function xc() {
          return navigator.userAgentData && navigator.userAgentData.platform ? "windows" == navigator.userAgentData.platform.toLowerCase() : navigator.platform ? navigator.platform.toLowerCase().includes("win32") : false;
        }
        function yc() {
          return navigator.userAgentData && navigator.userAgentData.platform ? "android" == navigator.userAgentData.platform.toLowerCase() : kc("Android");
        }
        function zc() {
          return navigator.userAgentData && navigator.userAgentData.platform ? "fuchsia" == navigator.userAgentData.platform.toLowerCase() : kc("Fuchsia");
        }
        function Ac() {
          return lc() || nc() || jc() || uc() || tc() || qc() || vc() || kc("VIZIO SmartCast") || sc() && !rc() ? true : false;
        }
        function kc(a) {
          return (navigator.userAgent || "").includes(a);
        }
        function sc() {
          return (navigator.vendor || "").includes("Apple");
        }
        function hc() {
          if (Bc) return Bc;
          Cc || (Cc = new ec(function() {
            Bc = null;
          }));
          (Bc = document.getElementsByTagName("video")[0] || document.getElementsByTagName("audio")[0]) || (Bc = document.createElement("video"));
          Cc.da(1);
          return Bc;
        }
        function Dc() {
          if (mc() || kc("Tizen 2") || oc() || uc() || tc()) return false;
          var a = wc();
          return sc() && !rc() && null != a && 15 > a ? false : true;
        }
        function Ec() {
          var a, b, c, d, e, f, g, h, k2, l, m, n, p, q, u, w;
          return Q(function(v) {
            switch (v.g) {
              case 1:
                a = { width: Infinity, height: Infinity };
                if (qc()) {
                  p = window2.cast && cast.__platform__ && cast.__platform__.canDisplayType;
                  a.width = 1280;
                  a.height = 720;
                  xa(v, 14);
                  if (!(q = p)) {
                    v.u(16);
                    break;
                  }
                  return G(v, cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'), 17);
                }
                if (lc()) {
                  a.width = 1920;
                  a.height = 1080;
                  try {
                    webapis.systeminfo && webapis.systeminfo.getMaxVideoResolution ? (b = webapis.systeminfo.getMaxVideoResolution(), a.width = b.width, a.height = b.height) : webapis.productinfo.is8KPanelSupported && webapis.productinfo.is8KPanelSupported() ? (a.width = 7680, a.height = 4320) : webapis.productinfo.isUdPanelSupported && webapis.productinfo.isUdPanelSupported() && (a.width = 3840, a.height = 2160);
                  } catch (x) {
                    db("Tizen: Error detecting screen size, default screen size 1920x1080.");
                  }
                  v.u(3);
                  break;
                }
                if (nc()) {
                  try {
                    c = JSON.parse(window2.PalmSystem.deviceInfo), a.width = Math.max(1920, c.screenWidth), a.height = Math.max(1080, c.screenHeight);
                  } catch (x) {
                    db("WebOS: Error detecting screen size, default screen size 1920x1080."), a.width = 1920, a.height = 1080;
                  }
                  v.u(3);
                  break;
                }
                if (vc()) {
                  d = null;
                  if (window2.Hisense_Get4KSupportState) try {
                    d = window2.Hisense_Get4KSupportState();
                  } catch (x) {
                  }
                  null == d && (d = kc("UHD"));
                  d ? (a.width = 3840, a.height = 2160) : (a.width = 1920, a.height = 1080);
                  v.u(3);
                  break;
                }
                if (!uc() && !tc()) {
                  e = void 0;
                  try {
                    e = "undefined" !== typeof Windows ? Windows : chrome.webview.hostObjects.sync.Windows;
                  } catch (x) {
                  }
                  if (e) {
                    a.width = 1920;
                    a.height = 1080;
                    try {
                      f = new e.Media.Protection.ProtectionCapabilities();
                      g = e.Media.Protection.ProtectionCapabilityResult;
                      h = null;
                      do
                        h = f.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"', "com.microsoft.playready.recommendation");
                      while (h === g.maybe);
                      h === g.probably && (a.width = 3840, a.height = 2160);
                    } catch (x) {
                      db("Xbox: Error detecting screen size, default screen size 1920x1080.");
                    }
                  } else jc() && (a.width = 1920, a.height = 1080, db("Xbox: Error detecting screen size, default screen size 1920x1080."));
                  v.u(3);
                  break;
                }
                k2 = false;
                xa(v, 8);
                return G(v, window2.msdk.device.getDisplayInfo(), 10);
              case 10:
                l = v.h;
                k2 = "4K" === l.resolution;
                za(v, 9);
                break;
              case 8:
                return Aa(v), xa(v, 11), G(v, window2.msdk.device.getDisplayInfoImmediate(), 13);
              case 13:
                m = v.h;
                k2 = "4K" === m.resolution;
                za(v, 9);
                break;
              case 11:
                n = Aa(v), db("PlayStation: Failed to get the display info:", n);
              case 9:
                k2 ? (a.width = 3840, a.height = 2160) : (a.width = 1920, a.height = 1080);
                v.u(3);
                break;
              case 17:
                q = v.h;
              case 16:
                if (q) {
                  a.width = 3840;
                  a.height = 2160;
                  v.u(18);
                  break;
                }
                if (!(u = p)) {
                  v.u(19);
                  break;
                }
                return G(
                  v,
                  cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'),
                  20
                );
              case 20:
                u = v.h;
              case 19:
                u && (a.width = 1920, a.height = 1080);
              case 18:
                za(v, 3);
                break;
              case 14:
                w = Aa(v), ab("Failed to check canDisplayType:", w);
              case 3:
                return v.return(a);
            }
          });
        }
        var Cc = null, Bc = null;
        function Fc() {
        }
        function Gc(a) {
          if (!a) return "";
          a = Qb(a);
          239 == a[0] && 187 == a[1] && 191 == a[2] && (a = a.subarray(3));
          if (window2.TextDecoder && !uc()) return a = new TextDecoder().decode(a), a.includes("\uFFFD") && ab('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'), a;
          for (var b = "", c = 0; c < a.length; ++c) {
            var d = 65533;
            0 == (a[c] & 128) ? d = a[c] : a.length >= c + 2 && 192 == (a[c] & 224) && 128 == (a[c + 1] & 192) ? (d = (a[c] & 31) << 6 | a[c + 1] & 63, c += 1) : a.length >= c + 3 && 224 == (a[c] & 240) && 128 == (a[c + 1] & 192) && 128 == (a[c + 2] & 192) ? (d = (a[c] & 15) << 12 | (a[c + 1] & 63) << 6 | a[c + 2] & 63, c += 2) : a.length >= c + 4 && 240 == (a[c] & 241) && 128 == (a[c + 1] & 192) && 128 == (a[c + 2] & 192) && 128 == (a[c + 3] & 192) && (d = (a[c] & 7) << 18 | (a[c + 1] & 63) << 12 | (a[c + 2] & 63) << 6 | a[c + 3] & 63, c += 3);
            if (65535 >= d) b += String.fromCharCode(d);
            else {
              d -= 65536;
              var e = d & 1023;
              b += String.fromCharCode(55296 + (d >> 10));
              b += String.fromCharCode(56320 + e);
            }
          }
          return b;
        }
        function Hc(a, b, c) {
          if (!a) return "";
          if (!c && 0 != a.byteLength % 2) throw new U(2, 2, 2004);
          c = Math.floor(a.byteLength / 2);
          var d = new Uint16Array(c);
          a = Vb(a);
          for (var e = 0; e < c; e++) d[e] = a.getUint16(2 * e, b);
          return Ic(d);
        }
        function Jc(a) {
          function b(d) {
            return c.byteLength <= d || 32 <= c[d] && 126 >= c[d];
          }
          if (!a) return "";
          var c = Qb(a);
          if (239 == c[0] && 187 == c[1] && 191 == c[2]) return Gc(c);
          if (254 == c[0] && 255 == c[1]) return Hc(c.subarray(2), false);
          if (255 == c[0] && 254 == c[1]) return Hc(c.subarray(2), true);
          if (0 == c[0] && 0 == c[2]) return Hc(a, false);
          if (0 == c[1] && 0 == c[3]) return Hc(a, true);
          if (b(0) && b(1) && b(2) && b(3)) return Gc(a);
          throw new U(2, 2, 2003);
        }
        function Kc(a) {
          if (window2.TextEncoder && !uc()) {
            var b = new TextEncoder();
            return Sb(b.encode(a));
          }
          a = encodeURIComponent(a);
          a = unescape(a);
          b = new Uint8Array(a.length);
          for (var c = 0; c < a.length; c++) b[c] = a[c].charCodeAt(0);
          return Sb(b);
        }
        function Lc(a, b) {
          for (var c = new ArrayBuffer(2 * a.length), d = new DataView(c), e = 0; e < a.length; ++e) d.setUint16(2 * e, a.charCodeAt(e), b);
          return c;
        }
        function Ic(a) {
          return Mc.value()(a);
        }
        function Nc(a) {
          var b = { "&amp;": "&", "&lt;": "<", "&gt;": ">", "&quot;": '"', "&apos;": "'", "&nbsp;": "\xA0", "&lrm;": "\u200E", "&rlm;": "\u200F" }, c = /&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g, d = RegExp(c.source);
          return a && d.test(a) ? a.replace(c, function(e) {
            return "#" == e[1] ? (e = "x" == e[2] || "X" == e[2] ? parseInt(e.substring(3), 16) : parseInt(e.substring(2), 10), 0 <= e && 1114111 >= e ? String.fromCodePoint(e) : "") : b[e] || "'";
          }) : a || "";
        }
        T("shaka.util.StringUtils", Fc);
        Fc.resetFromCharCode = function() {
          Mc.g = void 0;
        };
        Fc.toUTF16 = Lc;
        Fc.toUTF8 = Kc;
        Fc.fromBytesAutoDetect = Jc;
        Fc.fromUTF16 = Hc;
        Fc.fromUTF8 = Gc;
        var Mc = new Xb(function() {
          function a(c) {
            try {
              var d = new Uint8Array(c);
              return 0 < String.fromCharCode.apply(null, d).length;
            } catch (e) {
              return false;
            }
          }
          for (var b = { ic: 65536 }; 0 < b.ic; b = { ic: b.ic }, b.ic /= 2) if (a(b.ic)) return /* @__PURE__ */ function(c) {
            return function(d) {
              for (var e = "", f = 0; f < d.length; f += c.ic) e += String.fromCharCode.apply(null, d.subarray(f, f + c.ic));
              return e;
            };
          }(b);
          return null;
        });
        function Pc() {
        }
        function Qc(a) {
          a = Ic(Qb(a));
          return btoa(a);
        }
        function Rc(a, b) {
          b = void 0 == b ? true : b;
          a = Qc(a).replace(/\+/g, "-").replace(/\//g, "_");
          return b ? a : a.replace(/[=]*$/, "");
        }
        function Sc(a) {
          a = window2.atob(a.replace(/-/g, "+").replace(/_/g, "/"));
          for (var b = new Uint8Array(a.length), c = 0; c < a.length; ++c) b[c] = a.charCodeAt(c);
          return b;
        }
        function Tc(a) {
          for (var b = a.length / 2, c = new Uint8Array(b), d = 0; d < b; d++) c[d] = window2.parseInt(a.substr(2 * d, 2), 16);
          return c;
        }
        function Uc(a) {
          var b = Qb(a);
          a = "";
          b = t(b);
          for (var c = b.next(); !c.done; c = b.next()) c = c.value, c = c.toString(16), 1 == c.length && (c = "0" + c), a += c;
          return a;
        }
        function Vc() {
          for (var a = Na.apply(0, arguments), b = 0, c = 0; c < a.length; ++c) b += a[c].byteLength;
          b = new Uint8Array(b);
          for (var d = c = 0; d < a.length; ++d) {
            var e = a[d];
            ArrayBuffer.isView(e) && 1 === e.BYTES_PER_ELEMENT ? b.set(e, c) : b.set(Qb(e), c);
            c += e.byteLength;
          }
          return b;
        }
        T("shaka.util.Uint8ArrayUtils", Pc);
        Pc.concat = Vc;
        Pc.toHex = Uc;
        Pc.fromHex = Tc;
        Pc.fromBase64 = Sc;
        Pc.toBase64 = Rc;
        Pc.toStandardBase64 = Qc;
        function Wc(a, b, c) {
          c = void 0 === c ? "" : c;
          if (0 == b.length) return a;
          if (1 == a.length && 1 == b.length) {
            var d = new yb(a[0]);
            b = new yb(b[0]);
            b = d.resolve(b);
            c && Cb(b, c);
            return [b.toString()];
          }
          b = b.map(function(h) {
            return new yb(h);
          });
          d = [];
          a = t(a);
          for (var e = a.next(); !e.done; e = a.next()) {
            e = new yb(e.value);
            for (var f = t(b), g = f.next(); !g.done; g = f.next()) g = e.resolve(g.value), c && Cb(g, c), d.push(g.toString());
          }
          return d;
        }
        function Xc(a, b, c, d) {
          a = { keySystem: a, encryptionScheme: b, licenseServerUri: "", distinctiveIdentifierRequired: false, persistentStateRequired: false, audioRobustness: "", videoRobustness: "", serverCertificate: null, serverCertificateUri: "", sessionType: "", initData: c || [], keyIds: /* @__PURE__ */ new Set() };
          d && (a.keySystemUris = /* @__PURE__ */ new Set([d]));
          return a;
        }
        function Yc(a, b) {
          b = void 0 === b ? "cenc" : b;
          var c = [], d = [], e = [];
          a.forEach(function(g, h) {
            var k2 = h;
            22 != k2.length && (k2 = Rc(Tc(h), false));
            var l = g;
            22 != l.length && (l = Rc(Tc(g), false));
            g = { kty: "oct", kid: k2, k: l };
            c.push(g);
            d.push(g.kid);
            e.push(h);
          });
          a = JSON.stringify({ keys: c });
          var f = JSON.stringify({ kids: d });
          f = [{ initData: Qb(Kc(f)), initDataType: "keyids" }];
          return {
            keySystem: "org.w3.clearkey",
            encryptionScheme: b,
            licenseServerUri: "data:application/json;base64," + window2.btoa(a),
            distinctiveIdentifierRequired: false,
            persistentStateRequired: false,
            audioRobustness: "",
            videoRobustness: "",
            serverCertificate: null,
            serverCertificateUri: "",
            sessionType: "",
            initData: f,
            keyIds: new Set(e)
          };
        }
        function $c(a, b) {
          if (1 == b.length) return b[0];
          a = ad(a, b);
          if (null != a) return a;
          throw new U(2, 4, 4025, b);
        }
        function ad(a, b) {
          var c = bd.get(a);
          c = t(c);
          for (var d = c.next(); !d.done; d = c.next()) {
            d = d.value;
            for (var e = t(b), f = e.next(); !f.done; f = e.next()) if (f = f.value, d.test(f.trim())) return f.trim();
          }
          return a == cd ? "" : null;
        }
        function dd(a, b) {
          var c = [];
          a = bd.get(a);
          a = t(a);
          for (var d = a.next(); !d.done; d = a.next()) {
            d = d.value;
            for (var e = t(b), f = e.next(); !f.done; f = e.next()) f = f.value, d.test(f.trim()) && c.push(f.trim());
          }
          return c;
        }
        var cd = "text", ed = { la: "video", V: "audio", za: cd, $e: "image", Kj: "application" }, fd = 1 / 15, bd = (/* @__PURE__ */ new Map()).set("audio", [/^vorbis$/, /^Opus$/, /^opus$/, /^fLaC$/, /^flac$/, /^mp4a/, /^[ae]c-3$/, /^ac-4/, /^dts[cex]$/, /^iamf/, /^mhm[12]/]).set("video", [/^avc/, /^hev/, /^hvc/, /^vvc/, /^vvi/, /^vp0?[89]/, /^av01/, /^dvh/, /^dva/, /^dav/]).set("text", [/^vtt$/, /^wvtt/, /^stpp/]);
        function gd(a, b, c, d) {
          this.g = null;
          this.l = a;
          this.i = b;
          this.m = c;
          this.o = d;
          this.j = false;
          a: {
            "undefined" === typeof libDPIModule && db("Could not find LCEVC Library dependencies on this page");
            if ("undefined" !== typeof LCEVCdec) this.h = LCEVCdec;
            else if ("undefined" !== typeof LcevcDil) this.h = LcevcDil, this.j = true, sb("LcevcDil", "lcevc_dil.js is deprecated, please use lcevc_dec.js instead");
            else {
              db("Could not find LCEVC Library on this page");
              a = false;
              break a;
            }
            "undefined" === typeof this.h.SupportObject ? (db("Could not find LCEVC Library on this page"), a = false) : (this.h.SupportObject.SupportStatus || db(this.h.SupportObject.SupportError), a = "undefined" !== typeof this.h && "undefined" !== typeof libDPIModule && this.i instanceof HTMLCanvasElement && this.h.SupportObject.SupportStatus);
          }
          a && !this.g && this.h.SupportObject.webGLSupport(this.i) && (this.i.classList.remove("shaka-hidden"), this.g = this.j ? new this.h.LcevcDil(this.l, this.i, this.m) : new this.h.LCEVCdec(this.l, this.i, this.m));
        }
        function id(a, b, c, d) {
          "video" !== d.type || a.o && !d.baseOriginalId || a.g && a.g.appendBuffer(b, "video", d.id, -c, !a.o);
        }
        function jd(a) {
          a.g && a.i.classList.add("shaka-hidden");
        }
        gd.prototype.release = function() {
          this.g && (this.g.close(), this.g = null);
        };
        function kd(a) {
          return a && "undefined" !== typeof LCEVCdec ? "lvc1" == a.codecs : false;
        }
        T("shaka.lcevc.Dec", gd);
        gd.prototype.release = gd.prototype.release;
        function ld(a) {
          if (md.has(a)) return md.get(a);
          var b = window2.ManagedMediaSource || window2.MediaSource;
          return b ? (b = b.isTypeSupported(a), md.set(a, b), b) : false;
        }
        function nd() {
          var a = window2.ManagedSourceBuffer || window2.SourceBuffer;
          return !!a && !!a.prototype && !!a.prototype.changeType;
        }
        function od() {
          var a = window2.ManagedMediaSource || window2.MediaSource;
          return a && a.prototype ? !!a.prototype.setLiveSeekableRange && !!a.prototype.clearLiveSeekableRange : false;
        }
        var md = /* @__PURE__ */ new Map();
        function pd() {
        }
        pd.prototype.extract = function() {
        };
        pd.prototype.decode = function() {
          return [];
        };
        pd.prototype.clear = function() {
        };
        pd.prototype.getStreams = function() {
          return [];
        };
        function qd() {
        }
        qd.prototype.init = function() {
        };
        qd.prototype.parse = function() {
          return [];
        };
        function rd() {
        }
        rd.prototype.init = function() {
        };
        rd.prototype.i = function() {
        };
        rd.prototype.g = function() {
        };
        rd.prototype.j = function() {
        };
        T("shaka.media.IClosedCaptionParser", rd);
        function sd(a) {
          this.l = new qd();
          if (a = td(a.toLowerCase())) this.l = a();
          this.h = new pd();
          if (a = ud) this.h = a();
        }
        sd.prototype.init = function(a, b) {
          (void 0 === b ? 0 : b) || this.g();
          this.l.init(a);
        };
        sd.prototype.i = function(a) {
          a = this.l.parse(a);
          a = t(a);
          for (var b = a.next(); !b.done; b = a.next()) {
            b = b.value;
            var c = Qb(b.packet);
            0 < c.length && this.h.extract(c, b.pts);
          }
          return this.h.decode();
        };
        sd.prototype.g = function() {
          this.h.clear();
        };
        sd.prototype.j = function() {
          return this.h.getStreams();
        };
        function vd(a, b) {
          wd.set(a, b);
        }
        function td(a) {
          return wd.get(a);
        }
        T("shaka.media.ClosedCaptionParser", sd);
        sd.findDecoder = function() {
          return ud;
        };
        sd.unregisterDecoder = function() {
          ud = null;
        };
        sd.registerDecoder = function(a) {
          ud = a;
        };
        sd.findParser = td;
        sd.unregisterParser = function(a) {
          wd.delete(a);
        };
        sd.registerParser = vd;
        var wd = /* @__PURE__ */ new Map(), ud = null;
        function xd() {
          this.id = "";
          this.regionAnchorY = this.regionAnchorX = this.viewportAnchorY = this.viewportAnchorX = 0;
          this.height = this.width = 100;
          this.viewportAnchorUnits = this.widthUnits = this.heightUnits = yd;
          this.scroll = zd;
        }
        T("shaka.text.CueRegion", xd);
        var yd = 1;
        xd.units = { PX: 0, PERCENTAGE: yd, LINES: 2 };
        var zd = "";
        xd.scrollMode = { NONE: zd, UP: "up" };
        function Ad(a, b) {
          return "number" === typeof a && "number" === typeof b && isNaN(a) && isNaN(b) ? true : a === b;
        }
        function Bd(a, b) {
          b = a.indexOf(b);
          -1 < b && a.splice(b, 1);
        }
        function Cd(a, b, c) {
          c || (c = Ad);
          if (a.length != b.length) return false;
          b = b.slice();
          a = t(a);
          for (var d = a.next(), e = {}; !d.done; e = { Zg: void 0 }, d = a.next()) {
            e.Zg = d.value;
            d = b.findIndex(/* @__PURE__ */ function(f) {
              return function(g) {
                return c(f.Zg, g);
              };
            }(e));
            if (-1 == d) return false;
            b[d] = b[b.length - 1];
            b.pop();
          }
          return 0 == b.length;
        }
        function Dd(a, b, c) {
          if (a === b) return true;
          if (!a || !b) return a == b;
          c || (c = Ad);
          if (a.length != b.length) return false;
          for (var d = 0; d < a.length; d++) if (!c(a[d], b[d])) return false;
          return true;
        }
        ;
        function Ed(a) {
          this.h = a || "";
          this.g = 0;
        }
        function Fd(a) {
          Gd(a, /[ \t]+/gm);
        }
        function Gd(a, b) {
          b.lastIndex = a.g;
          b = b.exec(a.h);
          b = null == b ? null : { position: b.index, length: b[0].length, results: b };
          if (a.g == a.h.length || null == b || b.position != a.g) return null;
          a.g += b.length;
          return b.results;
        }
        function Hd(a) {
          return a.g == a.h.length ? null : (a = Gd(a, /[^ \t\n]*/gm)) ? a[0] : null;
        }
        function Jd(a) {
          a = Gd(a, Kd);
          if (null == a) return null;
          var b = Number(a[2]), c = Number(a[3]);
          return 59 < b || 59 < c ? null : (Number(a[6]) || 0) / 1e3 + c + 60 * b + 3600 * (Number(a[1]) || 0);
        }
        function Ld(a) {
          return a ? Jd(new Ed(a)) : null;
        }
        var Kd = /(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;
        function Md(a) {
          function b(d) {
            switch (typeof d) {
              case "undefined":
              case "boolean":
              case "number":
              case "string":
              case "symbol":
              case "function":
                return d;
              default:
                if (!d || ArrayBuffer.isView(d)) return d;
                if (c.has(d)) return null;
                var e = d.constructor == Array;
                if (d.constructor != Object && !e) return null;
                c.add(d);
                var f = e ? [] : {}, g;
                for (g in d) f[g] = b(d[g]);
                e && (f.length = d.length);
                return f;
            }
          }
          var c = /* @__PURE__ */ new WeakSet();
          return b(a);
        }
        function Nd(a) {
          var b = {}, c;
          for (c in a) b[c] = a[c];
          return b;
        }
        function Od(a) {
          if (Array.isArray(a)) {
            for (var b = [], c = 0; c < a.length; c++) {
              var d = c.toString(), e = a[c];
              void 0 !== e && (e = Od(e)) && b.push(d + ":" + e);
            }
            a = "[" + b.join(",") + "]";
          } else if ("function" == typeof a) a = "";
          else if (a instanceof Object) {
            c = Object.keys(a);
            c.sort();
            b = [];
            c = t(c);
            for (d = c.next(); !d.done; d = c.next()) e = d.value, d = JSON.stringify(e), e = a[e], void 0 !== e && (e = Od(e)) && b.push(d + ":" + e);
            a = "{" + b.join(",") + "}";
          } else a = JSON.stringify(a);
          return a;
        }
        ;
        function Pd(a, b) {
          var c = void 0 === c ? false : c;
          a = Jc(a);
          return Qd(a, b, c);
        }
        function Qd(a, b, c) {
          a = Rd(a, void 0 === c ? false : c);
          return !b && a.length ? a[0] : (a = a.find(function(d) {
            return b.split(",").includes(d.tagName);
          })) ? a : null;
        }
        function Sd(a) {
          return Td.has(a) ? Td.get(a) : "";
        }
        function Rd(a, b) {
          function c(f, g) {
            g = void 0 === g ? false : g;
            for (var h = []; a[e]; ) if (60 == a.charCodeAt(e)) {
              if (47 === a.charCodeAt(e + 1)) {
                g = e + 2;
                e = a.indexOf(">", e);
                g = a.substring(g, e);
                var k2 = g.indexOf(f);
                if (-1 == k2) {
                  var l = f.indexOf(".");
                  0 < l && (k2 = g.indexOf(f.substring(0, l)));
                }
                if (-1 == k2) throw f = a.substring(0, e).split("\n"), Error("Unexpected close tag\nLine: " + (f.length - 1) + "\nColumn: " + (f[f.length - 1].length + 1) + "\nChar: " + a[e]);
                e + 1 && (e += 1);
                break;
              } else if (33 === a.charCodeAt(e + 1)) {
                if (45 == a.charCodeAt(e + 2)) {
                  for (; -1 !== e && (62 !== a.charCodeAt(e) || 45 != a.charCodeAt(e - 1) || 45 != a.charCodeAt(e - 2) || -1 == e); ) e = a.indexOf(">", e + 1);
                  -1 === e && (e = a.length);
                } else if (91 === a.charCodeAt(e + 2) && 91 === a.charCodeAt(e + 8) && "cdata" === a.substr(e + 3, 5).toLowerCase()) {
                  k2 = a.indexOf("]]>", e);
                  -1 == k2 ? (h.push(a.substr(e + 9)), e = a.length) : (h.push(a.substring(e + 9, k2)), e = k2 + 3);
                  continue;
                }
                e++;
                continue;
              }
              a: {
                l = g;
                e++;
                var m = d(), n = {};
                for (k2 = []; 62 !== a.charCodeAt(e) && a[e]; ) {
                  var p = a.charCodeAt(e);
                  if (64 < p && 91 > p || 96 < p && 123 > p) {
                    p = d();
                    for (var q = a.charCodeAt(e); q && 39 !== q && 34 !== q && !(64 < q && 91 > q || 96 < q && 123 > q) && 62 !== q; ) e++, q = a.charCodeAt(e);
                    var u = e + 1;
                    e = a.indexOf(a[e], u);
                    u = a.slice(u, e);
                    if (39 === q || 34 === q) {
                      if (-1 === e) {
                        l = { tagName: m, attributes: n, children: k2, parent: null };
                        if (b) for (m = 0; m < k2.length; m++) "string" !== typeof k2[m] && (k2[m].parent = l);
                        k2 = l;
                        break a;
                      }
                    } else u = null, e--;
                    if (p.startsWith("xmlns:")) {
                      q = u;
                      var w = p.split(":")[1];
                      Td.set(q, w);
                      Ud.set(w, q);
                    }
                    "tt" === m && "xml:space" === p && "preserve" === u && (l = true);
                    n[p] = u;
                  }
                  e++;
                }
                47 !== a.charCodeAt(e - 1) ? (e++, k2 = c(m, l)) : e++;
                l = { tagName: m, attributes: n, children: k2, parent: null };
                m = k2.length;
                for (n = 0; n < m; n++) p = k2[n], "string" !== typeof p ? b && (p.parent = l) : n == m - 1 && "\n" == p && k2.pop();
                k2 = l;
              }
              h.push(k2);
              if ("string" === typeof k2) break;
              "?" === k2.tagName[0] && k2.children && (h.push.apply(h, y(k2.children)), k2.children = []);
            } else k2 = e, e = a.indexOf("<", e) - 1, -2 === e && (e = a.length), k2 = a.slice(k2, e + 1), g ? 0 < k2.length && h.push(k2) : h.length && 1 == k2.length && "\n" == k2[0] ? h.push(k2) : 0 < k2.trim().length && h.push(k2), e++;
            return h;
          }
          function d() {
            for (var f = e; -1 === "\r\n	>/= ".indexOf(a[e]) && a[e]; ) e++;
            return a.slice(f, e);
          }
          var e = 0;
          return c("");
        }
        function Vd(a) {
          return "string" === typeof a;
        }
        function Wd(a) {
          var b = [];
          if (!a.children) return [];
          a = t(a.children);
          for (var c = a.next(); !c.done; c = a.next()) c = c.value, "string" !== typeof c && b.push(c);
          return b;
        }
        function Xd(a, b) {
          var c = [];
          if (!a.children) return [];
          a = t(a.children);
          for (var d = a.next(); !d.done; d = a.next()) d = d.value, d.tagName === b && c.push(d);
          return c;
        }
        function Yd(a) {
          if ("string" === typeof a) return Nc(a);
          a = a.children.reduce(function(b, c) {
            return "string" === typeof c ? b + c : b;
          }, "");
          return "" === a ? null : Nc(a);
        }
        function Zd(a) {
          if (!Array.from(a.children).every(function(b) {
            return "string" === typeof b;
          })) return null;
          (a = Yd(a)) && (a = a.trim());
          return a;
        }
        function $d(a, b, c) {
          c = void 0 === c ? [] : c;
          a.tagName === b && c.push(a);
          if (a.children) {
            a = t(a.children);
            for (var d = a.next(); !d.done; d = a.next()) $d(d.value, b, c);
          }
          return c;
        }
        function ae(a, b) {
          a = Xd(a, b);
          return 1 != a.length ? null : a[0];
        }
        function be(a, b, c) {
          a = de(a, b, c);
          return 1 != a.length ? null : a[0];
        }
        function ge(a, b, c, d) {
          d = void 0 === d ? null : d;
          var e = null;
          a = a.attributes[b];
          null != a && (e = c(a));
          return null == e ? d : e;
        }
        function he(a, b, c) {
          b = Sd(b);
          return a.attributes[b + ":" + c] || null;
        }
        function de(a, b, c) {
          var d = Sd(b);
          b = [];
          if (a.children) for (c = d ? d + ":" + c : c, a = t(a.children), d = a.next(); !d.done; d = a.next()) (d = d.value) && d.tagName === c && b.push(d);
          return b;
        }
        function ie(a, b, c) {
          b = t(b);
          for (var d = b.next(); !d.done; d = b.next()) if (d = he(a, d.value, c)) return d;
          return null;
        }
        function je(a) {
          if (!a) return null;
          /^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(a) && (a += "Z");
          a = Date.parse(a);
          return isNaN(a) ? null : a / 1e3;
        }
        function ke(a) {
          if (!a) return null;
          a = RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$", "i").exec(a);
          if (!a) return null;
          a = 31536e3 * Number(a[1] || null) + 2592e3 * Number(a[2] || null) + 86400 * Number(a[3] || null) + 3600 * Number(a[4] || null) + 60 * Number(a[5] || null) + Number(a[6] || null);
          return isFinite(a) ? a : null;
        }
        function le(a) {
          var b = /([0-9]+)-([0-9]+)/.exec(a);
          if (!b) return null;
          a = Number(b[1]);
          if (!isFinite(a)) return null;
          b = Number(b[2]);
          return isFinite(b) ? { start: a, end: b } : null;
        }
        function me(a) {
          a = Number(a);
          return 0 === a % 1 ? a : null;
        }
        function ne(a) {
          a = Number(a);
          return 0 === a % 1 && 0 < a ? a : null;
        }
        function oe(a) {
          a = Number(a);
          return 0 === a % 1 && 0 <= a ? a : null;
        }
        function pe(a) {
          a = Number(a);
          return isNaN(a) ? null : a;
        }
        function qe(a) {
          return a ? "true" === a.toLowerCase() : false;
        }
        function re(a) {
          var b;
          var c = (b = a.match(/^(\d+)\/(\d+)$/)) ? Number(b[1]) / Number(b[2]) : Number(a);
          return isNaN(c) ? null : c;
        }
        function se(a) {
          var b = [];
          a = Nc(a).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/);
          a = t(a);
          for (var c = a.next(); !c.done; c = a.next()) {
            c = c.value;
            var d = c.match(/^([\w]+)/);
            if (d) {
              var e = c.match(/(@id='(.*?)')/), f = c.match(/(@t='(\d+)')/), g = c.match(/(@n='(\d+)')/), h = c.match(/\[(\d+)\]/);
              b.push({ name: d[0], id: e ? e[0].match(/'(.*?)'/)[0].replace(/'/gm, "") : null, t: f ? Number(f[0].match(/'(.*?)'/)[0].replace(/'/gm, "")) : null, n: g ? Number(g[0].match(/'(.*?)'/)[0].replace(/'/gm, "")) : null, position: h ? Number(h[1]) - 1 : null, $b: c.split("/@")[1] || null });
            } else c.startsWith("@") && b.length && (b[b.length - 1].$b = c.slice(1));
          }
          return b;
        }
        function te(a, b) {
          var c = se(b.attributes.sel || "");
          if (c.length) {
            var d = c[c.length - 1], e = b.attributes.pos || null;
            c = d.position;
            null == c && (null !== d.t && (c = ue(a, "t", d.t)), null !== d.n && (c = ue(a, "n", d.n)));
            null === c ? c = "prepend" === e ? 0 : a.length : "prepend" === e ? --c : "after" === e && ++c;
            e = b.tagName;
            (d = d.$b) && a[c] ? ve(a[c], e, d, Zd(b) || "") : ("remove" !== e && "replace" !== e || a.splice(c, 1), "add" !== e && "replace" !== e || a.splice.apply(a, [c, 0].concat(y(b.children))));
          }
        }
        function ue(a, b, c) {
          var d = 0;
          a = t(a);
          for (var e = a.next(); !e.done; e = a.next()) {
            if (Number(e.value.attributes[b]) === c) return d;
            d++;
          }
          return null;
        }
        function ve(a, b, c, d) {
          if ("remove" === b) delete a.attributes[c];
          else if ("add" === b || "replace" === b) a.attributes[c] = d;
        }
        function we(a) {
          var b = "", c = a.tagName.split(":");
          0 < c.length && (b = c[0], b = Ud.has(b) ? Ud.get(b) : "");
          b = document.createElementNS(b, a.tagName);
          for (var d in a.attributes) b.setAttribute(d, a.attributes[d]);
          a = t(a.children);
          for (d = a.next(); !d.done; d = a.next()) d = d.value, c = void 0, "string" == typeof d ? c = new Text(d) : c = we(d), b.appendChild(c);
          return b;
        }
        function ye(a) {
          if (!a) return null;
          var b = { tagName: a.tagName, attributes: Nd(a.attributes), children: [], parent: null };
          a = t(a.children);
          for (var c = a.next(); !c.done; c = a.next()) c = c.value, "string" === typeof c ? b.children.push(c) : (c = ye(c), c.parent = b, b.children.push(c));
          return b;
        }
        var Td = /* @__PURE__ */ new Map(), Ud = /* @__PURE__ */ new Map();
        function ze(a, b, c) {
          this.startTime = a;
          this.endTime = b;
          this.payload = c;
          this.region = new xd();
          this.position = null;
          this.positionAlign = Ae;
          this.size = 0;
          this.textAlign = Be;
          this.direction = Ce;
          this.writingMode = De;
          this.lineInterpretation = Ee;
          this.line = null;
          this.lineHeight = "";
          this.lineAlign = Fe;
          this.displayAlign = Ge;
          this.fontSize = this.border = this.backgroundImage = this.backgroundColor = this.color = "";
          this.fontWeight = He;
          this.fontStyle = Ie;
          this.linePadding = this.letterSpacing = this.fontFamily = "";
          this.opacity = 1;
          this.textCombineUpright = "";
          this.textDecoration = [];
          this.textStrokeWidth = this.textStrokeColor = this.textShadow = "";
          this.wrapLine = true;
          this.id = "";
          this.nestedCues = [];
          this.lineBreak = this.isContainer = false;
          this.rubyTag = null;
          this.cellResolution = { nc: 32, rows: 15 };
        }
        function Je(a, b) {
          a = new ze(a, b, "");
          a.lineBreak = true;
          return a;
        }
        ze.prototype.clone = function() {
          var a = new ze(0, 0, ""), b;
          for (b in this) a[b] = this[b], a[b] && a[b].constructor == Array && (a[b] = a[b].slice());
          return a;
        };
        function Ke(a, b) {
          if (a.payload != b.payload || !(1e-3 > Math.abs(a.startTime - b.startTime) && 1e-3 > Math.abs(a.endTime - b.endTime))) return false;
          for (var c in a) if ("startTime" != c && "endTime" != c && "payload" != c) {
            if ("nestedCues" == c) {
              if (!Dd(a.nestedCues, b.nestedCues, Ke)) return false;
            } else if ("region" == c || "cellResolution" == c) for (var d in a[c]) {
              if (a[c][d] != b[c][d]) return false;
            }
            else if (Array.isArray(a[c])) {
              if (!Dd(a[c], b[c])) return false;
            } else if (a[c] != b[c]) return false;
          }
          return true;
        }
        function Le(a, b) {
          b = void 0 === b ? /* @__PURE__ */ new Map() : b;
          var c = a.payload;
          if (c.includes("<")) {
            0 === b.size && Me(b);
            var d = c;
            c = [];
            for (var e = -1, f = 0; f < d.length; f++) "<" === d[f] ? e = f + 1 : ">" === d[f] && 0 < e && (e = d.substr(e, f - e), e.match(Oe) && c.push(e), e = -1);
            c = t(c);
            for (f = c.next(); !f.done; f = c.next()) f = f.value, d = d.replace("<" + f + ">", '<div time="' + f + '">'), d += "</div>";
            a: {
              f = d;
              e = [];
              var g = -1;
              c = "";
              d = false;
              for (var h = 0; h < f.length; h++) if ("/" === f[h]) {
                var k2 = f.indexOf(">", h);
                if (-1 === k2) {
                  c = f;
                  break a;
                }
                if ((k2 = f.substring(h + 1, k2)) && "v" == k2) {
                  d = true;
                  var l = null;
                  e.length && (l = e[e.length - 1]);
                  if (l) {
                    if (l === k2) c += "/" + k2 + ">";
                    else {
                      if (!l.startsWith("v")) {
                        c += f[h];
                        continue;
                      }
                      c += "/" + l + ">";
                    }
                    h += k2.length + 1;
                  } else c += f[h];
                } else c += f[h];
              } else "<" === f[h] ? (g = h + 1, "v" != f[g] && (g = -1)) : ">" === f[h] && 0 < g && (e.push(f.substr(g, h - g)), g = -1), c += f[h];
              f = t(e);
              for (e = f.next(); !e.done; e = f.next()) e = e.value, g = e.replace(" ", ".voice-"), c = c.replace("<" + e + ">", "<" + g + ">"), c = c.replace("</" + e + ">", "</" + g + ">"), d || (c += "</" + g + ">");
            }
            c = Pe(c);
            a.payload = "";
            try {
              var m = Qd("<span>" + c + "</span>", "span");
            } catch (n) {
            }
            if (m) if (m = m.children, 1 != m.length || m[0].tagName) for (m = t(m), c = m.next(); !c.done; c = m.next()) Qe(c.value, a, b);
            else a.payload = Nc(c);
            else a.payload = Nc(c);
          } else a.payload = Nc(c);
        }
        function Me(a) {
          for (var b = t(Object.entries(Re)), c = b.next(); !c.done; c = b.next()) {
            var d = t(c.value);
            c = d.next().value;
            d = d.next().value;
            var e = new ze(0, 0, "");
            e.color = d;
            a.set("." + c, e);
          }
          b = t(Object.entries(Se));
          for (c = b.next(); !c.done; c = b.next()) d = t(c.value), c = d.next().value, d = d.next().value, e = new ze(0, 0, ""), e.backgroundColor = d, a.set("." + c, e);
        }
        function Pe(a) {
          var b = { "< ": "", " >": " &gt;" }, c = /(< +>|<\s|\s>)/g, d = RegExp(c.source);
          return a && d.test(a) ? a.replace(c, function(e) {
            return b[e] || "";
          }) : a || "";
        }
        function Qe(a, b, c) {
          var d = b.clone();
          d.nestedCues = [];
          d.payload = "";
          d.rubyTag = "";
          d.line = null;
          d.region = new xd();
          d.position = null;
          d.size = 0;
          d.textAlign = Be;
          if (a.tagName) for (var e = t(a.tagName.split(/(?=[ .])+/g)), f = e.next(); !f.done; f = e.next()) {
            var g = f = f.value;
            if (g.startsWith(".voice-")) {
              var h = g.split("-").pop();
              g = 'v[voice="' + h + '"]';
              c.has(g) || (g = "v[voice=" + h + "]");
            }
            c.has(g) && (h = d, g = c.get(g)) && (h.backgroundColor = Te(g.backgroundColor, h.backgroundColor), h.color = Te(g.color, h.color), h.fontFamily = Te(g.fontFamily, h.fontFamily), h.fontSize = Te(g.fontSize, h.fontSize), h.textShadow = Te(g.textShadow, h.textShadow), h.fontWeight = g.fontWeight, h.fontStyle = g.fontStyle, h.opacity = g.opacity, h.rubyTag = g.rubyTag, h.textCombineUpright = g.textCombineUpright, h.wrapLine = g.wrapLine);
            switch (f) {
              case "br":
                d = Je(d.startTime, d.endTime);
                b.nestedCues.push(d);
                return;
              case "b":
                d.fontWeight = Ue;
                break;
              case "i":
                d.fontStyle = Ve;
                break;
              case "u":
                d.textDecoration.push(We);
                break;
              case "font":
                if (f = a.attributes.color) d.color = f;
                break;
              case "div":
                f = a.attributes.time;
                if (!f) break;
                if (f = Ld(f)) d.startTime = f;
                break;
              case "ruby":
              case "rp":
              case "rt":
                d.rubyTag = f;
            }
          }
          e = a.children;
          if (Vd(a) || 1 == e.length && Vd(e[0])) for (c = Yd(a).split("\n"), a = true, c = t(c), e = c.next(); !e.done; e = c.next()) e = e.value, a || (a = Je(d.startTime, d.endTime), b.nestedCues.push(a)), 0 < e.length && (a = d.clone(), a.payload = Nc(e), b.nestedCues.push(a)), a = false;
          else for (b.nestedCues.push(d), b = t(e), a = b.next(); !a.done; a = b.next()) Qe(a.value, d, c);
        }
        function Te(a, b) {
          return a && 0 < a.length ? a : b;
        }
        T("shaka.text.Cue", ze);
        ze.parseCuePayload = Le;
        ze.equal = Ke;
        ze.prototype.clone = ze.prototype.clone;
        var Ae = "auto";
        ze.positionAlign = { LEFT: "line-left", RIGHT: "line-right", CENTER: "center", AUTO: Ae };
        var Be = "center", Xe = { LEFT: "left", RIGHT: "right", CENTER: Be, START: "start", END: "end" };
        ze.textAlign = Xe;
        var Ge = "after", Ye = { BEFORE: "before", CENTER: "center", AFTER: Ge };
        ze.displayAlign = Ye;
        var Ce = "ltr";
        ze.direction = { HORIZONTAL_LEFT_TO_RIGHT: Ce, HORIZONTAL_RIGHT_TO_LEFT: "rtl" };
        var De = "horizontal-tb";
        ze.writingMode = { HORIZONTAL_TOP_TO_BOTTOM: De, VERTICAL_LEFT_TO_RIGHT: "vertical-lr", VERTICAL_RIGHT_TO_LEFT: "vertical-rl" };
        var Ee = 0;
        ze.lineInterpretation = { LINE_NUMBER: Ee, PERCENTAGE: 1 };
        var Fe = "start", Ze = { CENTER: "center", START: Fe, END: "end" };
        ze.lineAlign = Ze;
        var Re = { white: "white", lime: "lime", cyan: "cyan", red: "red", yellow: "yellow", magenta: "magenta", blue: "blue", black: "black" };
        ze.defaultTextColor = Re;
        var Se = { bg_white: "white", bg_lime: "lime", bg_cyan: "cyan", bg_red: "red", bg_yellow: "yellow", bg_magenta: "magenta", bg_blue: "blue", bg_black: "black" };
        ze.defaultTextBackgroundColor = Se;
        var He = 400, Ue = 700;
        ze.fontWeight = { NORMAL: He, BOLD: Ue };
        var Ie = "normal", Ve = "italic", $e = { NORMAL: Ie, ITALIC: Ve, OBLIQUE: "oblique" };
        ze.fontStyle = $e;
        var We = "underline";
        ze.textDecoration = { UNDERLINE: We, LINE_THROUGH: "lineThrough", OVERLINE: "overline" };
        var Oe = /(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;
        function af() {
        }
        af.prototype.destroy = function() {
        };
        function bf(a, b, c) {
          cf.set(a.toLowerCase().split(";")[0] + "-" + c, { priority: c, se: b });
        }
        function df(a, b) {
          for (var c = a.toLowerCase().split(";")[0], d = t([ef, ff, gf, hf]), e = d.next(); !e.done; e = d.next()) if (e = cf.get(c + "-" + e.value)) {
            var f = e.se(), g = f.isSupported(a, b);
            f.destroy();
            if (g) return e.se;
          }
          return null;
        }
        T("shaka.transmuxer.TransmuxerEngine", af);
        af.findTransmuxer = df;
        af.unregisterTransmuxer = function(a, b) {
          cf.delete(a.toLowerCase().split(";")[0] + "-" + b);
        };
        af.registerTransmuxer = bf;
        af.prototype.destroy = af.prototype.destroy;
        var cf = /* @__PURE__ */ new Map(), hf = 1, gf = 2, ff = 3, ef = 4;
        af.PluginPriority = { FALLBACK: hf, PREFERRED_SECONDARY: gf, PREFERRED: ff, APPLICATION: ef };
        function jf() {
        }
        function kf(a, b) {
          var c = a;
          b && !lf.includes(a) && (c += '; codecs="' + b + '"');
          return c;
        }
        function mf(a, b) {
          b && (a += '; codecs="' + b + '"');
          return a;
        }
        function nf(a, b, c) {
          var d = kf(a, b);
          b = mf(a, b);
          df(b) ? (a = df(b)) ? (a = a(), c = a.convertCodecs(c, b), a.destroy()) : c = b : c = "video/mp2t" != a && "audio" == c ? d.replace("video", "audio") : d;
          return c;
        }
        function of(a, b, c) {
          var d = [b];
          pf.forEach(function(e, f) {
            var g = a[f];
            "codecs" == f ? lf.includes(a.mimeType) || d.push('codecs="' + c + '"') : g && d.push(e + '="' + g + '"');
          });
          "PQ" == a.hdr && d.push('eotf="smpte2084"');
          return d.join(";");
        }
        function qf(a) {
          return a.split(";")[0].split("/")[1];
        }
        function rf(a) {
          var b = sf(a);
          a = b[0].toLowerCase();
          b = b[1].toLowerCase();
          switch (true) {
            case ("mp4a" === a && "69" === b):
            case ("mp4a" === a && "6b" === b):
            case ("mp4a" === a && "40.34" === b):
              return "mp3";
            case ("mp4a" === a && "66" === b):
            case ("mp4a" === a && "67" === b):
            case ("mp4a" === a && "68" === b):
            case ("mp4a" === a && "40.2" === b):
            case ("mp4a" === a && "40.02" === b):
            case ("mp4a" === a && "40.5" === b):
            case ("mp4a" === a && "40.05" === b):
            case ("mp4a" === a && "40.29" === b):
            case ("mp4a" === a && "40.42" === b):
              return "aac";
            case ("mp4a" === a && "a5" === b):
              return "ac-3";
            case ("mp4a" === a && "a6" === b):
              return "ec-3";
            case ("mp4a" === a && "b2" === b):
              return "dtsx";
            case ("mp4a" === a && "a9" === b):
              return "dtsc";
            case "vp09" === a:
              return "vp9";
            case "avc1" === a:
            case "avc3" === a:
              return "avc";
            case "hvc1" === a:
            case "hev1" === a:
              return "hevc";
            case "vvc1" === a:
            case "vvi1" === a:
              return "vvc";
            case "dvh1" === a:
            case "dvhe" === a:
              return b && b.startsWith("05") ? "dovi-p5" : "dovi-hevc";
            case "dvav" === a:
            case "dva1" === a:
              return "dovi-avc";
            case "dav1" === a:
              return "dovi-av1";
            case "dvc1" === a:
            case "dvi1" === a:
              return "dovi-vvc";
          }
          return a;
        }
        function tf(a) {
          var b = [];
          a = t(a.split(","));
          for (var c = a.next(); !c.done; c = a.next()) c = sf(c.value), b.push(c[0]);
          return b.sort().join(",");
        }
        function uf(a) {
          return a.split(";")[0];
        }
        function vf(a) {
          a = a.split(/ *; */);
          a.shift();
          return (a = a.find(function(b) {
            return b.startsWith("codecs=");
          })) ? a.split("=")[1].replace(/^"|"$/g, "") : "";
        }
        function wf(a) {
          return "application/x-mpegurl" === a || "application/vnd.apple.mpegurl" === a;
        }
        function sf(a) {
          a = a.split(".");
          var b = a[0];
          a.shift();
          return [b, a.join(".")];
        }
        T("shaka.util.MimeUtils", jf);
        jf.getFullTypeWithAllCodecs = mf;
        jf.getFullType = kf;
        var pf = (/* @__PURE__ */ new Map()).set("codecs", "codecs").set("frameRate", "framerate").set("bandwidth", "bitrate").set("width", "width").set("height", "height").set("channelsCount", "channels"), lf = ["audio/aac", "audio/ac3", "audio/ec3", "audio/mpeg"];
        function xf(a) {
          this.i = null;
          this.j = a;
          this.B = false;
          this.l = this.s = 0;
          this.m = Infinity;
          this.h = this.g = null;
          this.C = "";
          this.A = function() {
          };
          this.o = /* @__PURE__ */ new Map();
        }
        function yf(a, b) {
          zf.set(a, b);
        }
        function Af(a) {
          return zf.get(a);
        }
        function Bf(a) {
          return zf.has(a) ? true : "application/cea-608" == a || "application/cea-708" == a ? !!ud : false;
        }
        xf.prototype.destroy = function() {
          this.j = this.i = null;
          this.o.clear();
          return Promise.resolve();
        };
        function Cf(a, b, c, d, e) {
          var f, g, h, k2, l, m, n;
          return Q(function(p) {
            if (1 == p.g) return G(p, Promise.resolve(), 2);
            if (!a.i || !a.j) return p.return();
            if (null == c || null == d) return a.i.parseInit(Qb(b)), p.return();
            f = a.B ? c : a.s;
            g = { periodStart: a.s, segmentStart: c, segmentEnd: d, vttOffset: f };
            h = a.i.parseMedia(Qb(b), g, e, []);
            k2 = t(h);
            for (l = k2.next(); !l.done; l = k2.next()) m = l.value, a.A(m, e || null, g);
            n = h.filter(function(q) {
              return q.startTime >= a.l && q.startTime < a.m;
            });
            a.j.append(n);
            null == a.g && (a.g = Math.max(c, a.l));
            a.h = Math.min(d, a.m);
            I(p);
          });
        }
        xf.prototype.remove = function(a, b) {
          var c = this;
          return Q(function(d) {
            if (1 == d.g) return G(d, Promise.resolve(), 2);
            !c.j || !c.j.remove(a, b) || null == c.g || b <= c.g || a >= c.h || (a <= c.g && b >= c.h ? c.g = c.h = null : a <= c.g && b < c.h ? c.g = b : a > c.g && b >= c.h && (c.h = a));
            I(d);
          });
        };
        function Df(a, b, c) {
          a.l = b;
          a.m = c;
        }
        function Ef(a, b, c) {
          a.C = b;
          if (b = a.o.get(b)) for (var d = t(b.keys()), e = d.next(); !e.done; e = d.next()) (e = b.get(e.value).filter(function(f) {
            return f.endTime <= c;
          })) && a.j.append(e);
        }
        function Ff(a, b, c) {
          b.startTime += c;
          b.endTime += c;
          b = t(b.nestedCues);
          for (var d = b.next(); !d.done; d = b.next()) Ff(a, d.value, c);
        }
        function Gf(a, b, c, d, e) {
          var f = c + " " + d, g = /* @__PURE__ */ new Map();
          b = t(b);
          for (var h = b.next(); !h.done; h = b.next()) {
            var k2 = h.value;
            h = k2.stream;
            k2 = k2.cue;
            g.has(h) || g.set(h, /* @__PURE__ */ new Map());
            g.get(h).has(f) || g.get(h).set(f, []);
            Ff(a, k2, e);
            k2.startTime >= a.l && k2.startTime < a.m && (g.get(h).get(f).push(k2), h == a.C && a.j.append([k2]));
          }
          e = t(g.keys());
          for (f = e.next(); !f.done; f = e.next()) for (f = f.value, a.o.has(f) || a.o.set(f, /* @__PURE__ */ new Map()), b = t(g.get(f).keys()), h = b.next(); !h.done; h = b.next()) h = h.value, k2 = g.get(f).get(h), a.o.get(f).set(h, k2);
          a.g = null == a.g ? Math.max(
            c,
            a.l
          ) : Math.min(a.g, Math.max(c, a.l));
          a.h = Math.max(a.h, Math.min(d, a.m));
        }
        T("shaka.text.TextEngine", xf);
        xf.prototype.destroy = xf.prototype.destroy;
        xf.findParser = Af;
        xf.unregisterParser = function(a) {
          zf.delete(a);
        };
        xf.registerParser = yf;
        var zf = /* @__PURE__ */ new Map();
        function Hf(a, b) {
          return a.concat(b);
        }
        function If() {
        }
        function Jf(a) {
          return null != a;
        }
        function Kf(a, b) {
          return Promise.race([b, new Promise(function(c, d) {
            new ec(d).da(a);
          })]);
        }
        ;
        function Lf() {
        }
        function Mf(a, b) {
          a = Nf(a);
          b = Nf(b);
          return a.split("-")[0] == b.split("-")[0];
        }
        function Of(a, b) {
          a = Nf(a);
          b = Nf(b);
          a = a.split("-");
          b = b.split("-");
          return a[0] == b[0] && 1 == a.length && 2 == b.length;
        }
        function Pf(a, b) {
          a = Nf(a);
          b = Nf(b);
          a = a.split("-");
          b = b.split("-");
          return 2 == a.length && 2 == b.length && a[0] == b[0];
        }
        function Nf(a) {
          a = t(a.split("-x-"));
          var b = a.next().value;
          b = void 0 === b ? "" : b;
          a = a.next().value;
          a = void 0 === a ? "" : a;
          var c = t(b.split("-"));
          b = c.next().value;
          b = void 0 === b ? "" : b;
          c = c.next().value;
          c = void 0 === c ? "" : c;
          a = a ? "x-" + a : "";
          b = b.toLowerCase();
          b = Sf.get(b) || b;
          c = c.toUpperCase();
          return (c ? b + "-" + c : b) + (a ? "-" + a : "");
        }
        function Tf(a, b) {
          a = Nf(a);
          b = Nf(b);
          return b == a ? 4 : Of(b, a) ? 3 : Pf(b, a) ? 2 : Of(a, b) ? 1 : 0;
        }
        function Uf(a) {
          var b = a.indexOf("-");
          a = 0 <= b ? a.substring(0, b) : a;
          a = a.toLowerCase();
          return a = Sf.get(a) || a;
        }
        function Vf(a) {
          return a.language ? Nf(a.language) : a.audio && a.audio.language ? Nf(a.audio.language) : a.video && a.video.language ? Nf(a.video.language) : "und";
        }
        function $f(a, b) {
          a = Nf(a);
          var c = /* @__PURE__ */ new Set();
          b = t(b);
          for (var d = b.next(); !d.done; d = b.next()) c.add(Nf(d.value));
          b = t(c);
          for (d = b.next(); !d.done; d = b.next()) if (d = d.value, d == a) return d;
          b = t(c);
          for (d = b.next(); !d.done; d = b.next()) if (d = d.value, Of(d, a)) return d;
          b = t(c);
          for (d = b.next(); !d.done; d = b.next()) if (d = d.value, Pf(d, a)) return d;
          c = t(c);
          for (b = c.next(); !b.done; b = c.next()) if (b = b.value, Of(a, b)) return b;
          return null;
        }
        T("shaka.util.LanguageUtils", Lf);
        Lf.findClosestLocale = $f;
        Lf.getLocaleForVariant = Vf;
        Lf.getLocaleForText = function(a) {
          return Nf(a.language || "und");
        };
        Lf.getBase = Uf;
        Lf.relatedness = Tf;
        Lf.areSiblings = function(a, b) {
          var c = Uf(a), d = Uf(b);
          return a != c && b != d && c == d;
        };
        Lf.normalize = Nf;
        Lf.isSiblingOf = Pf;
        Lf.isParentOf = Of;
        Lf.areLanguageCompatible = Mf;
        Lf.areLocaleCompatible = function(a, b) {
          a = Nf(a);
          b = Nf(b);
          return a == b;
        };
        var Sf = /* @__PURE__ */ new Map([["aar", "aa"], ["abk", "ab"], ["afr", "af"], ["aka", "ak"], ["alb", "sq"], ["amh", "am"], ["ara", "ar"], ["arg", "an"], ["arm", "hy"], ["asm", "as"], ["ava", "av"], ["ave", "ae"], ["aym", "ay"], ["aze", "az"], ["bak", "ba"], ["bam", "bm"], ["baq", "eu"], ["bel", "be"], ["ben", "bn"], ["bih", "bh"], ["bis", "bi"], ["bod", "bo"], ["bos", "bs"], ["bre", "br"], ["bul", "bg"], ["bur", "my"], ["cat", "ca"], ["ces", "cs"], ["cha", "ch"], ["che", "ce"], ["chi", "zh"], ["chu", "cu"], ["chv", "cv"], ["cor", "kw"], ["cos", "co"], ["cre", "cr"], ["cym", "cy"], [
          "cze",
          "cs"
        ], ["dan", "da"], ["deu", "de"], ["div", "dv"], ["dut", "nl"], ["dzo", "dz"], ["ell", "el"], ["eng", "en"], ["epo", "eo"], ["est", "et"], ["eus", "eu"], ["ewe", "ee"], ["fao", "fo"], ["fas", "fa"], ["fij", "fj"], ["fin", "fi"], ["fra", "fr"], ["fre", "fr"], ["fry", "fy"], ["ful", "ff"], ["geo", "ka"], ["ger", "de"], ["gla", "gd"], ["gle", "ga"], ["glg", "gl"], ["glv", "gv"], ["gre", "el"], ["grn", "gn"], ["guj", "gu"], ["hat", "ht"], ["hau", "ha"], ["heb", "he"], ["her", "hz"], ["hin", "hi"], ["hmo", "ho"], ["hrv", "hr"], ["hun", "hu"], ["hye", "hy"], ["ibo", "ig"], [
          "ice",
          "is"
        ], ["ido", "io"], ["iii", "ii"], ["iku", "iu"], ["ile", "ie"], ["ina", "ia"], ["ind", "id"], ["ipk", "ik"], ["isl", "is"], ["ita", "it"], ["jav", "jv"], ["jpn", "ja"], ["kal", "kl"], ["kan", "kn"], ["kas", "ks"], ["kat", "ka"], ["kau", "kr"], ["kaz", "kk"], ["khm", "km"], ["kik", "ki"], ["kin", "rw"], ["kir", "ky"], ["kom", "kv"], ["kon", "kg"], ["kor", "ko"], ["kua", "kj"], ["kur", "ku"], ["lao", "lo"], ["lat", "la"], ["lav", "lv"], ["lim", "li"], ["lin", "ln"], ["lit", "lt"], ["ltz", "lb"], ["lub", "lu"], ["lug", "lg"], ["mac", "mk"], ["mah", "mh"], ["mal", "ml"], [
          "mao",
          "mi"
        ], ["mar", "mr"], ["may", "ms"], ["mkd", "mk"], ["mlg", "mg"], ["mlt", "mt"], ["mon", "mn"], ["mri", "mi"], ["msa", "ms"], ["mya", "my"], ["nau", "na"], ["nav", "nv"], ["nbl", "nr"], ["nde", "nd"], ["ndo", "ng"], ["nep", "ne"], ["nld", "nl"], ["nno", "nn"], ["nob", "nb"], ["nor", "no"], ["nya", "ny"], ["oci", "oc"], ["oji", "oj"], ["ori", "or"], ["orm", "om"], ["oss", "os"], ["pan", "pa"], ["per", "fa"], ["pli", "pi"], ["pol", "pl"], ["por", "pt"], ["pus", "ps"], ["que", "qu"], ["roh", "rm"], ["ron", "ro"], ["rum", "ro"], ["run", "rn"], ["rus", "ru"], ["sag", "sg"], [
          "san",
          "sa"
        ], ["sin", "si"], ["slk", "sk"], ["slo", "sk"], ["slv", "sl"], ["sme", "se"], ["smo", "sm"], ["sna", "sn"], ["snd", "sd"], ["som", "so"], ["sot", "st"], ["spa", "es"], ["sqi", "sq"], ["srd", "sc"], ["srp", "sr"], ["ssw", "ss"], ["sun", "su"], ["swa", "sw"], ["swe", "sv"], ["tah", "ty"], ["tam", "ta"], ["tat", "tt"], ["tel", "te"], ["tgk", "tg"], ["tgl", "tl"], ["tha", "th"], ["tib", "bo"], ["tir", "ti"], ["ton", "to"], ["tsn", "tn"], ["tso", "ts"], ["tuk", "tk"], ["tur", "tr"], ["twi", "tw"], ["uig", "ug"], ["ukr", "uk"], ["urd", "ur"], ["uzb", "uz"], ["ven", "ve"], [
          "vie",
          "vi"
        ], ["vol", "vo"], ["wel", "cy"], ["wln", "wa"], ["wol", "wo"], ["xho", "xh"], ["yid", "yi"], ["yor", "yo"], ["zha", "za"], ["zho", "zh"], ["zul", "zu"]]);
        function ag() {
        }
        function bg(a, b, c, d, e) {
          function f(x) {
            var z = String(x.width || "") + String(x.height || "") + String(Math.round(x.frameRate || 0)) + (x.hdr || "") + x.fastSwitching;
            x.dependencyStream && (z += x.dependencyStream.baseOriginalId || "");
            return z;
          }
          function g(x) {
            var z = x.language + (x.channelsCount || 0) + (x.audioSamplingRate || 0) + x.roles.join(",") + x.label + x.groupId + x.fastSwitching;
            x.dependencyStream && (z += x.dependencyStream.baseOriginalId || "");
            return z;
          }
          if (e.length) {
            var h = a.textStreams;
            e = t(e);
            for (var k2 = e.next(), l = {}; !k2.done; l = { qg: void 0 }, k2 = e.next()) if (l.qg = k2.value, k2 = h.filter(/* @__PURE__ */ function(x) {
              return function(z) {
                return z.codecs.startsWith(x.qg) || z.mimeType.startsWith(x.qg) ? true : false;
              };
            }(l)), k2.length) {
              h = k2;
              break;
            }
            a.textStreams = h;
          }
          h = a.variants;
          if (b.length || c.length) h = cg(h, b, c);
          if (d.length) {
            b = new kb();
            c = t(h);
            for (h = c.next(); !h.done; h = c.next()) h = h.value, b.push(String(h.video.width || 0), h);
            var m = [];
            b.forEach(function(x, z) {
              x = 0;
              var C = [];
              z = t(z);
              for (var D = z.next(), F = {}; !D.done; F = { Pe: void 0 }, D = z.next()) F.Pe = D.value, D = d.filter(/* @__PURE__ */ function(B) {
                return function(A) {
                  return B.Pe.decodingInfos[0][A];
                };
              }(F)).length, D > x ? (x = D, C = [F.Pe]) : D == x && C.push(F.Pe);
              m.push.apply(m, y(C));
            });
            h = m;
          }
          c = /* @__PURE__ */ new Set();
          b = /* @__PURE__ */ new Set();
          h = t(h);
          for (e = h.next(); !e.done; e = h.next()) e = e.value, e.audio && c.add(e.audio), e.video && b.add(e.video);
          h = Array.from(c).sort(function(x, z) {
            return x.bandwidth - z.bandwidth;
          });
          var n = [];
          c = /* @__PURE__ */ new Map();
          h = t(h);
          for (e = h.next(); !e.done; e = h.next()) {
            e = e.value;
            k2 = g(e);
            l = c.get(k2) || [];
            if (l.length) {
              var p = l[l.length - 1], q = rf(p.codecs), u = rf(e.codecs);
              q != u || e.bandwidth && p.bandwidth && !(e.bandwidth > p.bandwidth) || (l.push(e), n.push(e.id));
            } else l.push(e), n.push(e.id);
            c.set(k2, l);
          }
          var w = { vp8: 1, avc: 1, "dovi-avc": 0.95, vp9: 0.9, vp09: 0.9, hevc: 0.85, "dovi-hevc": 0.8, "dovi-p5": 0.75, av01: 0.7, "dovi-av1": 0.65, vvc: 0.6 };
          h = Array.from(b).sort(function(x, z) {
            if (!x.bandwidth || !z.bandwidth || x.bandwidth == z.bandwidth) {
              if (x.codecs && z.codecs && x.codecs != z.codecs && x.width == z.width) {
                var C = rf(x.codecs), D = rf(z.codecs);
                if (C != D) return (w[C] || 1) - (w[D] || 1);
              }
              return x.width - z.width;
            }
            return x.bandwidth - z.bandwidth;
          });
          b = nd();
          var v = [];
          c = /* @__PURE__ */ new Map();
          h = t(h);
          for (e = h.next(); !e.done; e = h.next()) {
            e = e.value;
            k2 = f(e);
            l = c.get(k2) || [];
            if (l.length) {
              p = l[l.length - 1];
              if (!b && (q = rf(p.codecs), u = rf(e.codecs), q !== u)) continue;
              q = rf(p.codecs);
              u = rf(e.codecs);
              q != u || e.bandwidth && p.bandwidth && !(e.bandwidth > p.bandwidth) || (l.push(e), v.push(e.id));
            } else l.push(e), v.push(e.id);
            c.set(k2, l);
          }
          a.variants = a.variants.filter(function(x) {
            var z = x.audio;
            x = x.video;
            return z && !n.includes(z.id) || x && !v.includes(x.id) ? false : true;
          });
        }
        function cg(a, b, c) {
          b = t(b);
          for (var d = b.next(), e = {}; !d.done; e = { Jh: void 0 }, d = b.next()) if (e.Jh = d.value, d = a.filter(/* @__PURE__ */ function(f) {
            return function(g) {
              return g.video && g.video.codecs.startsWith(f.Jh);
            };
          }(e)), d.length) {
            a = d;
            break;
          }
          c = t(c);
          b = c.next();
          for (d = {}; !b.done; d = { Ag: void 0 }, b = c.next()) if (d.Ag = b.value, b = a.filter(/* @__PURE__ */ function(f) {
            return function(g) {
              return g.audio && g.audio.codecs.startsWith(f.Ag);
            };
          }(d)), b.length) {
            a = b;
            break;
          }
          return a;
        }
        function dg(a, b, c) {
          a.variants = a.variants.filter(function(d) {
            return eg(d, b, c);
          });
        }
        function eg(a, b, c) {
          function d(h, k2, l) {
            return h >= k2 && h <= l;
          }
          var e = a.video;
          if (e && e.width && e.height) {
            var f = e.width, g = e.height;
            g > f && (g = t([g, f]), f = g.next().value, g = g.next().value);
            if (!d(f, b.minWidth, Math.min(b.maxWidth, c.width)) || !d(g, b.minHeight, Math.min(b.maxHeight, c.height)) || !d(e.width * e.height, b.minPixels, b.maxPixels)) return false;
          }
          return a && a.video && a.video.frameRate && !d(a.video.frameRate, b.minFrameRate, b.maxFrameRate) || a && a.audio && a.audio.channelsCount && !d(a.audio.channelsCount, b.minChannelsCount, b.maxChannelsCount) || !d(a.bandwidth, b.minBandwidth, b.maxBandwidth) ? false : true;
        }
        function fg(a, b, c, d) {
          c = void 0 === c ? [] : c;
          d = void 0 === d ? {} : d;
          return Q(function(e) {
            if (1 == e.g) return G(e, gg(a, b, 0 < b.offlineSessionIds.length, c, d), 2);
            hg(b);
            return G(e, ig(b), 0);
          });
        }
        function gg(a, b, c, d, e) {
          var f, g;
          return Q(function(h) {
            if (1 == h.g) return jc() && jg(b.variants), G(h, kg(b.variants, c, false, d), 2);
            f = null;
            a && (g = a.h) && (f = g.keySystem);
            b.variants = b.variants.filter(function(k2) {
              var l = lg(k2, f, e);
              if (!l) {
                var m = [];
                k2.audio && m.push(mg(k2.audio));
                k2.video && m.push(mg(k2.video));
              }
              return l;
            });
            I(h);
          });
        }
        function jg(a) {
          var b = (/* @__PURE__ */ new Map()).set("dvav", "avc3").set("dva1", "avc1").set("dvhe", "hev1").set("dvh1", "hvc1").set("dvc1", "vvc1").set("dvi1", "vvi1"), c = /* @__PURE__ */ new Set();
          a = t(a);
          for (var d = a.next(); !d.done; d = a.next()) d = d.value, d.video && c.add(d.video);
          c = t(c);
          for (a = c.next(); !a.done; a = c.next()) {
            a = a.value;
            d = t(b);
            for (var e = d.next(); !e.done; e = d.next()) {
              var f = t(e.value);
              e = f.next().value;
              f = f.next().value;
              if (a.codecs.includes(e)) {
                a.codecs = a.codecs.replace(e, f);
                break;
              }
            }
          }
        }
        function lg(a, b, c) {
          if (!a.decodingInfos.some(function(k2) {
            return !k2.supported || b && (k2 = k2.keySystemAccess) && (c[k2.keySystem] || k2.keySystem) != b ? false : true;
          })) return false;
          var d = jc(), e = kc("Firefox") && yc(), f = a.video, g = f && f.width || 0, h = f && f.height || 0;
          if (d && f && (1920 < g || 1080 < h) && (f.codecs.includes("avc1.") || f.codecs.includes("avc3.")) || (d = f && f.dependencyStream) && !kd(d)) return false;
          a = a.audio;
          return e && a && a.encrypted && a.codecs.toLowerCase().includes("opus") || a && a.dependencyStream ? false : true;
        }
        function ng(a, b) {
          var c, d, e, f, g, h, k2;
          return Q(function(l) {
            if (1 == l.g) {
              c = function(m, n) {
                if (m) {
                  var p = Nd(m);
                  p.supported = m.supported && n.supported;
                  p.powerEfficient = m.powerEfficient && n.powerEfficient;
                  p.smooth = m.smooth && n.smooth;
                  n.keySystemAccess && !p.keySystemAccess && (p.keySystemAccess = n.keySystemAccess);
                  return p;
                }
                return n;
              };
              d = null;
              e = [];
              f = t(b);
              g = f.next();
              for (h = {}; !g.done; h = { cache: void 0, Rd: void 0 }, g = f.next()) k2 = g.value, h.Rd = Od(k2), h.cache = og, h.cache.has(h.Rd) ? d = c(d, h.cache.get(h.Rd)) : e.push(pg(k2).then(/* @__PURE__ */ function(m) {
                return function(n) {
                  var p = null;
                  n = t(n || []);
                  for (var q = n.next(); !q.done; q = n.next()) p = c(p, q.value);
                  p && (m.cache.set(m.Rd, p), d = c(d, p));
                };
              }(h)));
              return G(l, Promise.all(e), 2);
            }
            d && a.decodingInfos.push(d);
            I(l);
          });
        }
        function pg(a) {
          var b = [""];
          a.video && (b = vf(a.video.contentType).split(","));
          var c = [""];
          a.audio && (c = vf(a.audio.contentType).split(","));
          var d = [];
          b = t(b);
          for (var e = b.next(); !e.done; e = b.next()) {
            e = e.value;
            for (var f = t(c), g = f.next(), h = {}; !g.done; h = { oc: void 0 }, g = f.next()) g = g.value, h.oc = Md(a), a.video && (h.oc.video.contentType = kf(uf(h.oc.video.contentType), e)), a.audio && (h.oc.audio.contentType = kf(uf(h.oc.audio.contentType), g)), d.push(new Promise(/* @__PURE__ */ function(k2) {
              return function(l, m) {
                (yc() ? Kf(5, navigator.mediaCapabilities.decodingInfo(k2.oc)) : navigator.mediaCapabilities.decodingInfo(k2.oc)).then(function(n) {
                  l(n);
                }).catch(m);
              };
            }(h)));
          }
          return Promise.all(d).catch(function() {
            JSON.stringify(a);
            return null;
          });
        }
        function kg(a, b, c, d) {
          var e, f, g, h, k2, l, m, n, p, q, u, w, v, x, z, C, D, F, B;
          return Q(function(A) {
            switch (A.g) {
              case 1:
                if (e = a.some(function(H) {
                  return H.decodingInfos.length;
                })) return A.return();
                f = t(d);
                g = f.next();
                h = {};
              case 2:
                if (g.done) {
                  A.u(4);
                  break;
                }
                h.kh = g.value;
                k2 = false;
                l = t(a);
                m = l.next();
              case 5:
                if (m.done) {
                  A.u(7);
                  break;
                }
                n = m.value;
                p = qg(n, b, c).filter(/* @__PURE__ */ function(H) {
                  return function(E) {
                    E = E[0];
                    return (E.keySystemConfiguration && E.keySystemConfiguration.keySystem) === H.kh;
                  };
                }(h));
                q = t(p);
                u = q.next();
              case 8:
                if (u.done) {
                  A.u(10);
                  break;
                }
                w = u.value;
                return G(A, ng(n, w), 9);
              case 9:
                u = q.next();
                A.u(8);
                break;
              case 10:
                n.decodingInfos.length && (k2 = true);
                m = l.next();
                A.u(5);
                break;
              case 7:
                if (k2) return A.return();
                h = { kh: void 0 };
                g = f.next();
                A.u(2);
                break;
              case 4:
                v = t(a), x = v.next();
              case 12:
                if (x.done) {
                  A.u(0);
                  break;
                }
                z = x.value;
                C = qg(z, b, c).filter(function(H) {
                  H = H[0];
                  H = H.keySystemConfiguration && H.keySystemConfiguration.keySystem;
                  return !H || !d.includes(H);
                });
                D = t(C);
                F = D.next();
              case 15:
                if (F.done) {
                  x = v.next();
                  A.u(12);
                  break;
                }
                B = F.value;
                return G(A, ng(z, B), 16);
              case 16:
                F = D.next(), A.u(15);
            }
          });
        }
        function qg(a, b, c) {
          var d = a.audio, e = a.video, f = [], g = [];
          if (e) for (var h = t(e.fullMimeTypes), k2 = h.next(); !k2.done; k2 = h.next()) {
            k2 = k2.value;
            var l = vf(k2);
            if (l.includes(",") && !d) {
              var m = l.split(","), n = uf(k2);
              l = $c("video", m);
              m = $c("audio", m);
              m = rg(m, n);
              n = nf(n, m, "audio");
              g.push({ contentType: n, channels: 2, bitrate: a.bandwidth || 1, samplerate: 1, spatialRendering: false });
            }
            l = sg(l);
            k2 = { contentType: nf(uf(k2), l, "video"), width: e.width || 64, height: e.height || 64, bitrate: e.bandwidth || a.bandwidth || 1, framerate: e.frameRate || 1 };
            if (e.hdr) switch (e.hdr) {
              case "SDR":
                k2.transferFunction = "srgb";
                break;
              case "PQ":
                k2.transferFunction = "pq";
                break;
              case "HLG":
                k2.transferFunction = "hlg";
            }
            e.colorGamut && (k2.colorGamut = e.colorGamut);
            f.push(k2);
          }
          if (d) for (h = t(d.fullMimeTypes), k2 = h.next(); !k2.done; k2 = h.next()) l = k2.value, k2 = uf(l), l = rg(vf(l), k2), k2 = nf(k2, l, "audio"), g.push({ contentType: k2, channels: d.channelsCount || 2, bitrate: d.bandwidth || a.bandwidth || 1, samplerate: d.audioSamplingRate || 1, spatialRendering: d.spatialAudio });
          h = [];
          0 == f.length && f.push(null);
          0 == g.length && g.push(null);
          f = t(f);
          for (k2 = f.next(); !k2.done; k2 = f.next()) for (k2 = k2.value, l = t(g), n = l.next(); !n.done; n = l.next()) n = n.value, m = { type: c ? "file" : "media-source" }, k2 && (m.video = k2), n && (m.audio = n), h.push(m);
          g = (a.video ? a.video.drmInfos : []).concat(a.audio ? a.audio.drmInfos : []);
          if (!g.length) return [h];
          a = [];
          c = /* @__PURE__ */ new Map();
          g = t(g);
          for (f = g.next(); !f.done; f = g.next()) f = f.value, c.get(f.keySystem) || c.set(f.keySystem, []), c.get(f.keySystem).push(f);
          g = b ? "required" : "optional";
          b = b ? ["persistent-license"] : ["temporary"];
          f = t(c.keys());
          for (k2 = f.next(); !k2.done; k2 = f.next()) {
            k2 = k2.value;
            n = c.get(k2);
            l = /* @__PURE__ */ new Map();
            n = t(n);
            for (m = n.next(); !m.done; m = n.next()) {
              m = m.value;
              var p = m.videoRobustness + "," + m.audioRobustness;
              l.get(p) || l.set(p, []);
              l.get(p).push(m);
            }
            l = t(l.values());
            for (n = l.next(); !n.done; n = l.next()) {
              n = n.value;
              m = [];
              p = t(h);
              for (var q = p.next(); !q.done; q = p.next()) {
                q = Object.assign({}, q.value);
                for (var u = { keySystem: k2, initDataType: "cenc", persistentState: g, distinctiveIdentifier: "optional", sessionTypes: b }, w = t(n), v = w.next(); !v.done; v = w.next()) {
                  v = v.value;
                  if (v.initData && v.initData.length) {
                    for (var x = /* @__PURE__ */ new Set(), z = t(v.initData), C = z.next(); !C.done; C = z.next()) x.add(C.value.initDataType);
                    u.initDataType = v.initData[0].initDataType;
                  }
                  v.distinctiveIdentifierRequired && (u.distinctiveIdentifier = "required");
                  v.persistentStateRequired && (u.persistentState = "required");
                  v.sessionType && (u.sessionTypes = [v.sessionType]);
                  d && (u.audio ? (v.encryptionScheme && (u.audio.encryptionScheme = u.audio.encryptionScheme || v.encryptionScheme), u.audio.robustness = u.audio.robustness || v.audioRobustness) : (u.audio = { robustness: v.audioRobustness }, v.encryptionScheme && (u.audio.encryptionScheme = v.encryptionScheme)), "" == u.audio.robustness && delete u.audio.robustness);
                  e && (u.video ? (v.encryptionScheme && (u.video.encryptionScheme = u.video.encryptionScheme || v.encryptionScheme), u.video.robustness = u.video.robustness || v.videoRobustness) : (u.video = { robustness: v.videoRobustness }, v.encryptionScheme && (u.video.encryptionScheme = v.encryptionScheme)), "" == u.video.robustness && delete u.video.robustness);
                }
                q.keySystemConfiguration = u;
                m.push(q);
              }
              a.push(m);
            }
          }
          return a;
        }
        function rg(a, b) {
          return "flac" == a.toLowerCase() ? rc() ? "fLaC" : "flac" : "opus" === a.toLowerCase() ? rc() ? "mp4" == qf(b) ? "Opus" : "opus" : "opus" : "ac-3" == a.toLowerCase() && mc() ? "ec-3" : a;
        }
        function sg(a) {
          if (a.includes("avc1")) {
            var b = a.split(".");
            if (3 == b.length) return a = b.shift() + ".", a += parseInt(b.shift(), 10).toString(16), a += ("000" + parseInt(b.shift(), 10).toString(16)).slice(-4);
          } else if ("vp9" == a) return "vp09.00.41.08";
          return a;
        }
        function hg(a) {
          a.textStreams = a.textStreams.filter(function(b) {
            b = kf(b.mimeType, b.codecs);
            return Bf(b);
          });
        }
        function ig(a) {
          var b, c, d, e, f, g, h, k2;
          return Q(function(l) {
            switch (l.g) {
              case 1:
                b = [], c = t(a.imageStreams), d = c.next();
              case 2:
                if (d.done) {
                  l.u(4);
                  break;
                }
                e = d.value;
                f = e.mimeType;
                "application/mp4" == f && "mjpg" == e.codecs && (f = "image/jpg");
                if (tg.has(f)) {
                  l.u(5);
                  break;
                }
                g = ug.get(f);
                if (!g) {
                  tg.set(f, false);
                  l.u(5);
                  break;
                }
                return G(l, vg(g), 7);
              case 7:
                h = l.h, tg.set(f, h);
              case 5:
                (k2 = tg.get(f)) && b.push(e);
                d = c.next();
                l.u(2);
                break;
              case 4:
                a.imageStreams = b, I(l);
            }
          });
        }
        function vg(a) {
          return new Promise(function(b) {
            var c = new Image();
            c.src = a;
            "decode" in c ? c.decode().then(function() {
              b(true);
            }).catch(function() {
              b(false);
            }) : c.onload = c.onerror = function() {
              b(2 === c.height);
            };
          });
        }
        function wg(a) {
          var b = a.audio, c = a.video, d = b ? b.mimeType : null, e = c ? c.mimeType : null, f = b ? b.codecs : null, g = c ? c.codecs : null, h = b ? b.groupId : null, k2 = [];
          c && k2.push(c.mimeType);
          b && k2.push(b.mimeType);
          k2 = k2[0] || null;
          var l = [];
          b && l.push(b.kind);
          c && l.push(c.kind);
          l = l[0] || null;
          var m = /* @__PURE__ */ new Set();
          if (b) for (var n = t(b.roles), p = n.next(); !p.done; p = n.next()) m.add(p.value);
          if (c) for (n = t(c.roles), p = n.next(); !p.done; p = n.next()) m.add(p.value);
          a = {
            id: a.id,
            active: false,
            type: "variant",
            bandwidth: a.bandwidth,
            language: a.language,
            label: null,
            kind: l,
            width: null,
            height: null,
            frameRate: null,
            pixelAspectRatio: null,
            hdr: null,
            colorGamut: null,
            videoLayout: null,
            mimeType: k2,
            audioMimeType: d,
            videoMimeType: e,
            codecs: "",
            audioCodec: f,
            videoCodec: g,
            primary: a.primary,
            roles: Array.from(m),
            audioRoles: null,
            forced: false,
            videoId: null,
            audioId: null,
            audioGroupId: h,
            channelsCount: null,
            audioSamplingRate: null,
            spatialAudio: false,
            tilesLayout: null,
            audioBandwidth: null,
            videoBandwidth: null,
            originalVideoId: null,
            originalAudioId: null,
            originalTextId: null,
            originalImageId: null,
            accessibilityPurpose: null,
            originalLanguage: null
          };
          if (c) {
            a.videoId = c.id;
            a.originalVideoId = c.originalId;
            a.width = c.width || null;
            a.height = c.height || null;
            a.frameRate = c.frameRate || null;
            a.pixelAspectRatio = c.pixelAspectRatio || null;
            a.videoBandwidth = c.bandwidth || null;
            a.hdr = c.hdr || null;
            a.colorGamut = c.colorGamut || null;
            a.videoLayout = c.videoLayout || null;
            if (d = c.dependencyStream) a.width = d.width || a.width, a.height = d.height || a.height, a.videoCodec = d.codecs || a.videoCodec;
            if (g.includes(",")) {
              a.channelsCount = c.channelsCount;
              a.audioSamplingRate = c.audioSamplingRate;
              a.spatialAudio = c.spatialAudio;
              a.originalLanguage = c.originalLanguage;
              a.audioMimeType = e;
              c = g.split(",");
              try {
                a.videoCodec = $c("video", c), a.audioCodec = $c("audio", c);
              } catch (q) {
              }
            }
          }
          b && (a.audioId = b.id, a.originalAudioId = b.originalId, a.channelsCount = b.channelsCount, a.audioSamplingRate = b.audioSamplingRate, a.audioBandwidth = b.bandwidth || null, a.spatialAudio = b.spatialAudio, a.label = b.label, a.audioRoles = b.roles, a.accessibilityPurpose = b.accessibilityPurpose, a.originalLanguage = b.originalLanguage, b = b.dependencyStream) && (a.audioCodec = b.codecs || a.audioCodec);
          b = [];
          a.videoCodec && b.push(a.videoCodec);
          a.audioCodec && b.push(a.audioCodec);
          a.codecs = b.join(", ");
          return a;
        }
        function xg(a) {
          return {
            id: a.id,
            active: false,
            type: cd,
            bandwidth: 0,
            language: a.language,
            label: a.label,
            kind: a.kind || null,
            width: null,
            height: null,
            frameRate: null,
            pixelAspectRatio: null,
            hdr: null,
            colorGamut: null,
            videoLayout: null,
            mimeType: a.mimeType,
            audioMimeType: null,
            videoMimeType: null,
            codecs: a.codecs || null,
            audioCodec: null,
            videoCodec: null,
            primary: a.primary,
            roles: a.roles,
            audioRoles: null,
            forced: a.forced,
            videoId: null,
            audioId: null,
            audioGroupId: null,
            channelsCount: null,
            audioSamplingRate: null,
            spatialAudio: false,
            tilesLayout: null,
            audioBandwidth: null,
            videoBandwidth: null,
            originalVideoId: null,
            originalAudioId: null,
            originalTextId: a.originalId,
            originalImageId: null,
            accessibilityPurpose: a.accessibilityPurpose,
            originalLanguage: a.originalLanguage
          };
        }
        function yg(a) {
          var b = a.width || null, c = a.height || null, d = null;
          a.segmentIndex && (d = zg(a.segmentIndex));
          var e = a.tilesLayout;
          d && (e = d.tilesLayout || e);
          e && null != b && (b /= Number(e.split("x")[0]));
          e && null != c && (c /= Number(e.split("x")[1]));
          return {
            id: a.id,
            active: false,
            type: "image",
            bandwidth: a.bandwidth || 0,
            language: "",
            label: null,
            kind: null,
            width: b,
            height: c,
            frameRate: null,
            pixelAspectRatio: null,
            hdr: null,
            colorGamut: null,
            videoLayout: null,
            mimeType: a.mimeType,
            audioMimeType: null,
            videoMimeType: null,
            codecs: a.codecs || null,
            audioCodec: null,
            videoCodec: null,
            primary: false,
            roles: [],
            audioRoles: null,
            forced: false,
            videoId: null,
            audioId: null,
            audioGroupId: null,
            channelsCount: null,
            audioSamplingRate: null,
            spatialAudio: false,
            tilesLayout: e || null,
            audioBandwidth: null,
            videoBandwidth: null,
            originalVideoId: null,
            originalAudioId: null,
            originalTextId: null,
            originalImageId: a.originalId,
            accessibilityPurpose: null,
            originalLanguage: null
          };
        }
        function Ag(a) {
          a.__shaka_id || (a.__shaka_id = Bg++);
          return a.__shaka_id;
        }
        function Cg(a) {
          var b = Dg(a);
          b.active = "disabled" != a.mode;
          b.type = "text";
          b.originalTextId = a.id;
          "captions" == a.kind && (b.mimeType = "unknown");
          "subtitles" == a.kind && (b.mimeType = "text/vtt");
          a.kind && (b.roles = [a.kind]);
          "forced" == a.kind && (b.forced = true);
          return b;
        }
        function Eg(a) {
          var b = Dg(a);
          b.active = a.enabled;
          b.type = "variant";
          b.originalAudioId = a.id;
          "main" == a.kind && (b.primary = true);
          a.kind && (b.roles = [a.kind], b.audioRoles = [a.kind], b.label = a.label);
          return b;
        }
        function Dg(a) {
          var b = a.language;
          return {
            id: Ag(a),
            active: false,
            type: "",
            bandwidth: 0,
            language: Nf(b || "und"),
            label: a.label,
            kind: a.kind,
            width: null,
            height: null,
            frameRate: null,
            pixelAspectRatio: null,
            hdr: null,
            colorGamut: null,
            videoLayout: null,
            mimeType: null,
            audioMimeType: null,
            videoMimeType: null,
            codecs: null,
            audioCodec: null,
            videoCodec: null,
            primary: false,
            roles: [],
            forced: false,
            audioRoles: null,
            videoId: null,
            audioId: null,
            audioGroupId: null,
            channelsCount: null,
            audioSamplingRate: null,
            spatialAudio: false,
            tilesLayout: null,
            audioBandwidth: null,
            videoBandwidth: null,
            originalVideoId: null,
            originalAudioId: null,
            originalTextId: null,
            originalImageId: null,
            accessibilityPurpose: null,
            originalLanguage: b
          };
        }
        function Fg(a) {
          return a.allowedByApplication && a.allowedByKeySystem && 0 == a.disabledUntilTime;
        }
        function Gg(a) {
          return a.filter(function(b) {
            return Fg(b);
          });
        }
        function Hg(a, b, c, d) {
          var e = a, f = a.filter(function(k2) {
            return k2.primary;
          });
          f.length && (e = f);
          var g = e.length ? e[0].language : "";
          e = e.filter(function(k2) {
            return k2.language == g;
          });
          if (b) {
            var h = $f(Nf(b), a.map(function(k2) {
              return k2.language;
            }));
            h && (e = a.filter(function(k2) {
              return Nf(k2.language) == h;
            }));
          }
          e = e.filter(function(k2) {
            return k2.forced == d;
          });
          if (c) {
            if (a = Ig(e, c), a.length) return a;
          } else if (a = e.filter(function(k2) {
            return 0 == k2.roles.length;
          }), a.length) return a;
          a = e.map(function(k2) {
            return k2.roles;
          }).reduce(Hf, []);
          return a.length ? Ig(e, a[0]) : e;
        }
        function Ig(a, b) {
          return a.filter(function(c) {
            return c.roles.includes(b);
          });
        }
        function Jg(a, b) {
          b.length && (b = b.filter(function(c) {
            return rf(a.codecs) == rf(c.codecs);
          }).sort(function(c, d) {
            return c.bandwidth && d.bandwidth && c.bandwidth != d.bandwidth ? c.bandwidth - d.bandwidth : (c.width || 0) - (d.width || 0);
          }), a.trickModeVideo = b[0], 1 < b.length && (b = b.find(function(c) {
            return a.width == c.width && a.height == c.height;
          }))) && (a.trickModeVideo = b);
        }
        function mg(a) {
          return "audio" == a.type ? "type=audio codecs=" + a.codecs + " bandwidth=" + a.bandwidth + " channelsCount=" + a.channelsCount + " audioSamplingRate=" + a.audioSamplingRate : "video" == a.type ? "type=video codecs=" + a.codecs + " bandwidth=" + a.bandwidth + " frameRate=" + a.frameRate + " width=" + a.width + " height=" + a.height : "unexpected stream type";
        }
        function Kg(a, b, c) {
          if (0 == c.autoShowText) return false;
          if (1 == c.autoShowText) return true;
          var d = Nf(c.preferredTextLanguage);
          b = Nf(b.language);
          if (2 == c.autoShowText) return Mf(b, d);
          if (3 == c.autoShowText) {
            if (!a) return false;
            a = Nf(a.language);
            return Mf(b, d) && !Mf(a, b);
          }
          db("Invalid autoShowText setting!");
          return false;
        }
        T("shaka.util.StreamUtils", ag);
        ag.meetsRestrictions = eg;
        var og = /* @__PURE__ */ new Map(), Bg = 0, tg = (/* @__PURE__ */ new Map()).set("image/svg+xml", true).set("image/png", true).set("image/jpeg", true).set("image/jpg", true), ug = (/* @__PURE__ */ new Map()).set("image/webp", "data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif", "data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");
        function Lg() {
          var a = this;
          this.G = null;
          this.o = false;
          this.m = new Za();
          this.j = new lb();
          navigator.connection && navigator.connection.addEventListener && this.j.D(navigator.connection, "change", function() {
            if (a.o && a.g.useNetworkInformation) {
              a.m = new Za();
              a.g && a.m.configure(a.g.advanced);
              var b = a.chooseVariant();
              b && navigator.onLine && a.G(b, a.g.clearBufferSwitch, a.g.safeMarginSwitch);
            }
          });
          this.F = [];
          this.H = 1;
          this.I = false;
          this.h = this.l = this.g = this.s = null;
          this.A = new ec(function() {
            if (a.o && (a.g.restrictToElementSize || a.g.restrictToScreenSize)) {
              var b = a.chooseVariant();
              b && a.G(b, a.g.clearBufferSwitch, a.g.safeMarginSwitch);
            }
          });
          this.B = window2;
          "documentPictureInPicture" in window2 && this.j.D(window2.documentPictureInPicture, "enter", function() {
            a.B = window2.documentPictureInPicture.window;
            a.A && a.A.kb();
            a.j.ma(a.B, "pagehide", function() {
              a.B = window2;
              a.A && a.A.kb();
            });
          });
          this.C = this.i = null;
        }
        r = Lg.prototype;
        r.stop = function() {
          this.G = null;
          this.o = false;
          this.F = [];
          this.H = 1;
          this.l = this.s = null;
          this.h && (this.h.disconnect(), this.h = null);
          this.A.stop();
          this.C = this.i = null;
        };
        r.release = function() {
          this.j.release();
          this.A = null;
        };
        r.init = function(a) {
          this.G = a;
        };
        r.chooseVariant = function() {
          var a = Infinity, b = Infinity;
          if (this.g.restrictToScreenSize) {
            var c = this.g.ignoreDevicePixelRatio ? 1 : this.B.devicePixelRatio;
            a = this.B.screen.height * c;
            b = this.B.screen.width * c;
          }
          if (this.h && this.g.restrictToElementSize) {
            c = this.g.ignoreDevicePixelRatio ? 1 : this.B.devicePixelRatio;
            var d = this.l.clientHeight, e = this.l.clientWidth;
            this.i && document.pictureInPictureElement && document.pictureInPictureElement == this.l && (d = this.i.height, e = this.i.width);
            a = Math.min(a, d * c);
            b = Math.min(b, e * c);
          }
          c = this.F.filter(function(l) {
            return l && !(l.audio && l.audio.fastSwitching || l.video && l.video.fastSwitching);
          });
          c.length || (c = this.F);
          d = c;
          c.length != this.F.length && (d = this.F.filter(function(l) {
            return l && (l.audio && l.audio.fastSwitching || l.video && l.video.fastSwitching ? true : false);
          }));
          c = Mg(this, this.g.restrictions, d, Infinity, Infinity);
          if (Infinity != a || Infinity != b) {
            c = Ng(c);
            c = t(c);
            for (e = c.next(); !e.done; e = c.next()) if (e = e.value, e.height >= a && e.width >= b) {
              a = e.height;
              b = e.width;
              break;
            }
            c = Mg(this, this.g.restrictions, d, a, b);
          }
          a = this.getBandwidthEstimate();
          d.length && !c.length && (c = Mg(this, null, d, Infinity, Infinity), c = [c[0]]);
          b = c[0] || null;
          for (d = 0; d < c.length; d++) {
            e = c[d];
            for (var f = isNaN(this.H) ? 1 : Math.abs(this.H), g = f * e.bandwidth / this.g.bandwidthDowngradeTarget, h = { bandwidth: Infinity }, k2 = d + 1; k2 < c.length; k2++) if (e.bandwidth != c[k2].bandwidth) {
              h = c[k2];
              break;
            }
            f = f * h.bandwidth / this.g.bandwidthUpgradeTarget;
            a >= g && a <= f && (b.bandwidth != e.bandwidth || b.bandwidth == e.bandwidth && b.video && e.video && (b.video.width < e.video.width || b.video.height < e.video.height)) && (b = e);
          }
          this.s = Date.now();
          return b;
        };
        r.enable = function() {
          this.o = true;
        };
        r.disable = function() {
          this.o = false;
        };
        r.segmentDownloaded = function(a, b, c) {
          a < this.g.cacheLoadThreshold || (this.m.sample(a, b), c && null != this.s && this.o && Og(this));
        };
        r.trySuggestStreams = function() {
          null != this.s && this.o && Og(this);
        };
        r.getBandwidthEstimate = function() {
          var a = this.g.defaultBandwidthEstimate;
          navigator.connection && navigator.connection.downlink && this.g.useNetworkInformation && (a = 1e6 * navigator.connection.downlink);
          if (navigator.connection && navigator.connection.downlink && this.g.useNetworkInformation && this.g.preferNetworkInformationBandwidth) return a;
          a = this.m.getBandwidthEstimate(a);
          return this.C ? this.C.getBandwidthEstimate(a) : a;
        };
        r.setVariants = function(a) {
          this.F = a;
        };
        r.playbackRateChanged = function(a) {
          this.H = a;
        };
        r.setMediaElement = function(a) {
          function b() {
            c.A.da(Pg);
          }
          var c = this;
          this.l = a;
          this.h && (this.h.disconnect(), this.h = null);
          this.l && "ResizeObserver" in window2 && (this.h = new ResizeObserver(b), this.h.observe(this.l));
          this.j.D(a, "enterpictureinpicture", function(d) {
            d.pictureInPictureWindow && (c.i = d.pictureInPictureWindow, c.j.D(c.i, "resize", b));
          });
          this.j.D(a, "leavepictureinpicture", function() {
            c.i && c.j.Ja(c.i, "resize", b);
            c.i = null;
          });
        };
        r.setCmsdManager = function(a) {
          this.C = a;
        };
        r.configure = function(a) {
          this.g = a;
          this.m && this.g && this.m.configure(this.g.advanced);
        };
        function Og(a) {
          if (!a.I) {
            var b = a.m;
            if (!(b.g >= b.i)) return;
            a.I = true;
            a.s -= 1e3 * (a.g.switchInterval - a.g.minTimeToSwitch);
          }
          Date.now() - a.s < 1e3 * a.g.switchInterval || (b = a.chooseVariant(), a.getBandwidthEstimate(), b && a.G(b, a.g.clearBufferSwitch, a.g.safeMarginSwitch));
        }
        function Mg(a, b, c, d, e) {
          if (a.C) {
            var f = a.C.Sg();
            f && (c = c.filter(function(g) {
              return g.bandwidth && f ? g.bandwidth <= f : true;
            }));
          }
          b && (c = c.filter(function(g) {
            return eg(g, b, { width: e, height: d });
          }));
          return c.sort(function(g, h) {
            return g.bandwidth - h.bandwidth;
          });
        }
        function Ng(a) {
          var b = [];
          a = t(a);
          for (var c = a.next(); !c.done; c = a.next()) (c = c.value.video) && c.height && c.width && b.push({ height: c.height, width: c.width });
          return b.sort(function(d, e) {
            return d.width - e.width;
          });
        }
        T("shaka.abr.SimpleAbrManager", Lg);
        Lg.prototype.configure = Lg.prototype.configure;
        Lg.prototype.setCmsdManager = Lg.prototype.setCmsdManager;
        Lg.prototype.setMediaElement = Lg.prototype.setMediaElement;
        Lg.prototype.playbackRateChanged = Lg.prototype.playbackRateChanged;
        Lg.prototype.setVariants = Lg.prototype.setVariants;
        Lg.prototype.getBandwidthEstimate = Lg.prototype.getBandwidthEstimate;
        Lg.prototype.trySuggestStreams = Lg.prototype.trySuggestStreams;
        Lg.prototype.segmentDownloaded = Lg.prototype.segmentDownloaded;
        Lg.prototype.disable = Lg.prototype.disable;
        Lg.prototype.enable = Lg.prototype.enable;
        Lg.prototype.chooseVariant = Lg.prototype.chooseVariant;
        Lg.prototype.init = Lg.prototype.init;
        Lg.prototype.release = Lg.prototype.release;
        Lg.prototype.stop = Lg.prototype.stop;
        var Pg = 1;
        T("shaka.config.CrossBoundaryStrategy", { KEEP: "keep", RESET: "reset", RESET_TO_ENCRYPTED: "reset_to_encrypted", RESET_ON_ENCRYPTION_CHANGE: "RESET_ON_ENCRYPTION_CHANGE" });
        function Qg(a, b) {
          var c = Rg();
          this.l = null == a.maxAttempts ? c.maxAttempts : a.maxAttempts;
          this.j = null == a.baseDelay ? c.baseDelay : a.baseDelay;
          this.o = null == a.fuzzFactor ? c.fuzzFactor : a.fuzzFactor;
          this.m = null == a.backoffFactor ? c.backoffFactor : a.backoffFactor;
          this.g = 0;
          this.h = this.j;
          if (this.i = void 0 === b ? false : b) this.g = 1;
        }
        function Sg(a) {
          var b, c;
          return Q(function(d) {
            if (1 == d.g) {
              if (a.g >= a.l) if (a.i) a.g = 1, a.h = a.j;
              else throw new U(2, 7, 1010);
              b = a.g;
              a.g++;
              if (0 == b) return d.return();
              c = a.h * (1 + (2 * Math.random() - 1) * a.o);
              return G(d, new Promise(function(e) {
                new ec(e).da(c / 1e3);
              }), 2);
            }
            a.h *= a.m;
            I(d);
          });
        }
        function Rg() {
          return { maxAttempts: 2, baseDelay: 1e3, backoffFactor: 2, fuzzFactor: 0.5, timeout: 3e4, stallTimeout: 5e3, connectionTimeout: 1e4 };
        }
        ;
        function Tg() {
          var a, b, c = new Promise(function(d, e) {
            a = d;
            b = e;
          });
          c.resolve = a;
          c.reject = b;
          return c;
        }
        Tg.prototype.resolve = function() {
        };
        Tg.prototype.reject = function() {
        };
        function Ug(a, b) {
          this.promise = a;
          this.i = b;
          this.g = null;
        }
        function Vg(a) {
          return new Ug(Promise.reject(a), function() {
            return Promise.resolve();
          });
        }
        function Wg() {
          var a = Promise.reject(new U(2, 7, 7001));
          a.catch(function() {
          });
          return new Ug(a, function() {
            return Promise.resolve();
          });
        }
        function Xg(a) {
          return new Ug(Promise.resolve(a), function() {
            return Promise.resolve();
          });
        }
        function Yg(a) {
          return new Ug(a, function() {
            return a.catch(function() {
            });
          });
        }
        Ug.prototype.abort = function() {
          this.g || (this.g = this.i());
          return this.g;
        };
        function Zg(a) {
          return new Ug(Promise.all(a.map(function(b) {
            return b.promise;
          })), function() {
            return Promise.all(a.map(function(b) {
              return b.abort();
            }));
          });
        }
        Ug.prototype.finally = function(a) {
          this.promise.then(function() {
            return a(true);
          }, function() {
            return a(false);
          });
          return this;
        };
        Ug.prototype.Ha = function(a, b) {
          function c(h) {
            return function(k2) {
              if (e.g && h) f.reject(g);
              else {
                var l = h ? a : b;
                l ? d = $g(l, k2, f) : (h ? f.resolve : f.reject)(k2);
              }
            };
          }
          function d() {
            f.reject(g);
            return e.abort();
          }
          var e = this, f = new Tg();
          f.catch(function() {
          });
          var g = new U(2, 7, 7001);
          this.promise.then(c(true), c(false));
          return new Ug(f, function() {
            return d();
          });
        };
        function $g(a, b, c) {
          try {
            var d = a(b);
            if (d && d.promise && d.abort) return c.resolve(d.promise), function() {
              return d.abort();
            };
            c.resolve(d);
            return function() {
              return Promise.resolve(d).then(function() {
              }, function() {
              });
            };
          } catch (e) {
            return c.reject(e), function() {
              return Promise.resolve();
            };
          }
        }
        da.Object.defineProperties(Ug.prototype, { aborted: { configurable: true, enumerable: true, get: function() {
          return null !== this.g;
        } } });
        T("shaka.util.AbortableOperation", Ug);
        Ug.prototype.chain = Ug.prototype.Ha;
        Ug.prototype["finally"] = Ug.prototype.finally;
        Ug.all = Zg;
        Ug.prototype.abort = Ug.prototype.abort;
        Ug.notAbortable = Yg;
        Ug.completed = Xg;
        Ug.aborted = Wg;
        Ug.failed = Vg;
        function V(a, b) {
          if (b) if (b instanceof Map) for (var c = t(b.keys()), d = c.next(); !d.done; d = c.next()) d = d.value, Object.defineProperty(this, d, { value: b.get(d), writable: true, enumerable: true });
          else for (c in b) Object.defineProperty(this, c, { value: b[c], writable: true, enumerable: true });
          this.defaultPrevented = this.cancelable = this.bubbles = false;
          this.timeStamp = window2.performance && window2.performance.now ? window2.performance.now() : Date.now();
          this.type = a;
          this.isTrusted = false;
          this.target = this.currentTarget = null;
          this.g = false;
        }
        function ah(a) {
          var b = new V(a.type), c;
          for (c in a) Object.defineProperty(b, c, { value: a[c], writable: true, enumerable: true });
          return b;
        }
        V.prototype.preventDefault = function() {
          this.cancelable && (this.defaultPrevented = true);
        };
        V.prototype.stopImmediatePropagation = function() {
          this.g = true;
        };
        V.prototype.stopPropagation = function() {
        };
        T("shaka.util.FakeEvent", V);
        var bh = {
          Mj: "abrstatuschanged",
          Nj: "adaptation",
          Oj: "audiotrackchanged",
          Pj: "audiotrackschanged",
          Qj: "boundarycrossed",
          Rj: "buffering",
          Sj: "complete",
          Tj: "downloadcompleted",
          Uj: "downloadfailed",
          Vj: "downloadheadersreceived",
          Wj: "drmsessionupdate",
          Yj: "emsg",
          sk: "prft",
          Error: "error",
          Zj: "expirationupdated",
          $j: "firstquartile",
          ak: "gapjumped",
          dk: "keystatuschanged",
          hk: "loaded",
          ik: "loading",
          kk: "manifestparsed",
          lk: "manifestupdated",
          mk: "mediaqualitychanged",
          nk: "mediasourcerecovered",
          Metadata: "metadata",
          pk: "midpoint",
          qk: "nospatialvideoinfo",
          rk: "onstatechange",
          tk: "ratechange",
          vk: "segmentappended",
          wk: "sessiondata",
          xk: "spatialvideoinfo",
          yk: "stalldetected",
          zk: "started",
          Ak: "statechanged",
          Bk: "streaming",
          Ck: "textchanged",
          Dk: "texttrackvisibility",
          Ek: "thirdquartile",
          Fk: "timelineregionadded",
          Gk: "timelineregionenter",
          Hk: "timelineregionexit",
          Ik: "trackschanged",
          Kk: "unloading",
          Mk: "variantchanged"
        };
        function ch() {
          this.Ea = new kb();
          this.Ge = this;
        }
        ch.prototype.addEventListener = function(a, b) {
          this.Ea && this.Ea.push(a, b);
        };
        ch.prototype.removeEventListener = function(a, b) {
          this.Ea && this.Ea.remove(a, b);
        };
        ch.prototype.dispatchEvent = function(a) {
          if (!this.Ea) return true;
          var b = this.Ea.get(a.type) || [], c = this.Ea.get("All");
          c && (b = b.concat(c));
          b = t(b);
          for (c = b.next(); !c.done; c = b.next()) {
            c = c.value;
            a.target = this.Ge;
            a.currentTarget = this.Ge;
            try {
              c.handleEvent ? c.handleEvent(a) : c.call(this, a);
            } catch (d) {
            }
            if (a.g) break;
          }
          return a.defaultPrevented;
        };
        ch.prototype.release = function() {
          this.Ea = null;
        };
        function dh() {
          this.g = [];
        }
        function eh(a, b) {
          a.g.push(b.finally(function() {
            Bd(a.g, b);
          }));
        }
        dh.prototype.destroy = function() {
          for (var a = [], b = t(this.g), c = b.next(); !c.done; c = b.next()) c = c.value, c.promise.catch(function() {
          }), a.push(c.abort());
          this.g = [];
          return Promise.all(a);
        };
        function fh(a, b, c, d, e, f, g) {
          ch.call(this);
          this.i = false;
          this.s = new dh();
          this.g = /* @__PURE__ */ new Set();
          this.h = /* @__PURE__ */ new Set();
          this.m = a || null;
          this.l = b || null;
          this.C = c || null;
          this.F = d || null;
          this.G = e || null;
          this.I = f || null;
          this.H = g || null;
          this.A = this.B = false;
          this.o = 16e3;
          this.j = /* @__PURE__ */ new Map();
        }
        qa(fh, ch);
        r = fh.prototype;
        r.ig = function(a) {
          this.B = a;
        };
        r.jg = function(a) {
          this.A = a;
        };
        function gh(a, b, c, d) {
          d = void 0 === d ? false : d;
          c = c || hh;
          var e = ih.get(a);
          (!e || c >= e.priority) && ih.set(a, { priority: c, se: b, gj: d });
        }
        function jh(a, b) {
          for (var c = t(a.g), d = c.next(); !d.done; d = c.next()) b.g.add(d.value);
          a = t(a.h);
          for (c = a.next(); !c.done; c = a.next()) b.h.add(c.value);
        }
        r.jj = function(a) {
          this.g.add(a);
        };
        r.Fj = function(a) {
          this.g.delete(a);
        };
        r.Xh = function() {
          this.g.clear();
        };
        r.kj = function(a) {
          this.h.add(a);
        };
        r.Gj = function(a) {
          this.h.delete(a);
        };
        r.Yh = function() {
          this.h.clear();
        };
        r.Fg = function() {
          this.j.clear();
        };
        function kh(a, b, c) {
          return { uris: a, method: "GET", body: null, headers: {}, allowCrossSiteCredentials: false, retryParameters: b, licenseRequestType: null, sessionId: null, drmInfo: null, initData: null, initDataType: null, streamDataCallback: void 0 === c ? null : c };
        }
        r.destroy = function() {
          this.i = true;
          this.g.clear();
          this.h.clear();
          this.j.clear();
          ch.prototype.release.call(this);
          return this.s.destroy();
        };
        r.request = function(a, b, c) {
          var d = this, e = new lh();
          if (this.i) {
            var f = Promise.reject(new U(2, 7, 7001));
            f.catch(function() {
            });
            return new mh(f, function() {
              return Promise.resolve();
            }, e);
          }
          b.method = b.method || "GET";
          b.headers = b.headers || {};
          b.retryParameters = b.retryParameters ? Md(b.retryParameters) : Rg();
          b.uris = Md(b.uris);
          f = nh(this, a, b, c);
          var g = f.Ha(function() {
            return oh(d, a, b, c, new Qg(b.retryParameters, false), 0, null, e);
          }), h = g.Ha(function(p) {
            return ph(d, a, p, c);
          }), k2 = Date.now(), l = 0;
          f.promise.then(function() {
            l = Date.now() - k2;
          }, function() {
          });
          var m = 0;
          g.promise.then(function() {
            m = Date.now();
          }, function() {
          });
          var n = h.Ha(function(p) {
            var q = Date.now() - m, u = p.response;
            u.timeMs += l;
            u.timeMs += q;
            p.Mi || !d.m || u.fromCache || "HEAD" == b.method || a != qh || d.m(u.timeMs, u.data.byteLength, rh(c));
            d.H && d.H(a, u, c);
            return u;
          }, function(p) {
            p && (p.severity = 2);
            throw p;
          });
          f = new mh(n.promise, function() {
            return n.abort();
          }, e);
          eh(this.s, f);
          return f;
        };
        function nh(a, b, c, d) {
          function e(h) {
            f = f.Ha(function() {
              c.body && (c.body = Sb(c.body));
              return h(b, c, d);
            });
          }
          var f = Xg(void 0);
          a.G && e(a.G);
          a = t(a.g);
          for (var g = a.next(); !g.done; g = a.next()) e(g.value);
          return f.Ha(void 0, function(h) {
            if (h instanceof U && 7001 == h.code) throw h;
            throw new U(2, 1, 1006, h);
          });
        }
        function oh(a, b, c, d, e, f, g, h) {
          a.B && (c.uris[f] = c.uris[f].replace("https://", "http://"));
          a.A && (c.uris[f] = c.uris[f].replace("http://", "https://"));
          0 < f && a.I && a.I(b, d, c.uris[f], c.uris[f - 1]);
          var k2 = new yb(c.uris[f]), l = k2.Jb, m = false;
          l || (l = location.protocol, l = l.slice(0, -1), zb(k2, l), c.uris[f] = k2.toString());
          l = l.toLowerCase();
          var n = (l = ih.get(l)) ? l.se : null;
          if (!n) return Vg(new U(2, 1, 1e3, k2));
          var p = l.gj;
          (k2 = a.j.get(k2.wb)) && (c.headers["common-access-token"] = k2);
          var q = null, u = null, w = false, v = false, x;
          return Yg(Sg(e)).Ha(function() {
            if (a.i) return Wg();
            x = Date.now();
            var z = 0;
            c.requestStartTime = Date.now();
            var C = n(c.uris[f], c, b, function(B, A, H) {
              q && q.stop();
              u && u.da(F / 1e3);
              a.m && b == qh && (z++, c.packetNumber = z, a.m(B, A, rh(d), c), m = true, h.g = H);
            }, function(B) {
              v = true;
              c.timeToFirstByte = Date.now() - c.requestStartTime;
              a.l && a.l(B, c, b);
            }, { minBytesForProgressEvents: a.o });
            if (!p) return C;
            var D = c.retryParameters.connectionTimeout;
            D && (q = new ec(function() {
              w = true;
              C.abort();
            }), q.da(D / 1e3));
            var F = c.retryParameters.stallTimeout;
            F && (u = new ec(function() {
              w = true;
              C.abort();
            }));
            return C;
          }).Ha(function(z) {
            q && q.stop();
            u && u.stop();
            void 0 == z.timeMs && (z.timeMs = Date.now() - x);
            var C = z.headers["common-access-token"];
            if (C) {
              var D = new yb(z.uri);
              a.j.set(D.wb, C);
            }
            C = { response: z, Mi: m };
            !v && a.l && a.l(z.headers, c, b);
            a.C && a.C(c, z);
            return C;
          }, function(z) {
            q && q.stop();
            u && u.stop();
            if (a.F) {
              var C = null, D = 0;
              z instanceof U && (C = z, 1001 == z.code && (D = z.data[1]));
              a.F(c, C, D, w);
            }
            if (a.i) return Wg();
            w && (z = new U(1, 1, 1003, c.uris[f], b));
            if (z instanceof U) {
              if (7001 == z.code) throw z;
              if (1010 == z.code) throw g;
              if (1 == z.severity) {
                C = (/* @__PURE__ */ new Map()).set(
                  "error",
                  z
                );
                C = new V("retry", C);
                C.cancelable = true;
                a.dispatchEvent(C);
                if (C.defaultPrevented) throw z;
                f = (f + 1) % c.uris.length;
                return oh(a, b, c, d, e, f, z, h);
              }
            }
            throw z;
          });
        }
        function ph(a, b, c, d) {
          var e = Xg(void 0);
          a = t(a.h);
          for (var f = a.next(), g = {}; !f.done; g = { oh: void 0 }, f = a.next()) g.oh = f.value, e = e.Ha(/* @__PURE__ */ function(h) {
            return function() {
              var k2 = c.response;
              k2.data && (k2.data = Sb(k2.data));
              return (0, h.oh)(b, k2, d);
            };
          }(g));
          return e.Ha(function() {
            return c;
          }, function(h) {
            var k2 = 2;
            if (h instanceof U) {
              if (7001 == h.code) throw h;
              k2 = h.severity;
            }
            throw new U(k2, 1, 1007, h);
          });
        }
        function rh(a) {
          if (a) {
            var b = a.segment;
            a = a.stream;
            if (b && a && a.fastSwitching && b.o) return false;
          }
          return true;
        }
        T("shaka.net.NetworkingEngine", fh);
        fh.prototype.request = fh.prototype.request;
        fh.prototype.destroy = fh.prototype.destroy;
        fh.makeRequest = kh;
        fh.defaultRetryParameters = function() {
          return Rg();
        };
        fh.prototype.clearCommonAccessTokenMap = fh.prototype.Fg;
        fh.prototype.clearAllResponseFilters = fh.prototype.Yh;
        fh.prototype.unregisterResponseFilter = fh.prototype.Gj;
        fh.prototype.registerResponseFilter = fh.prototype.kj;
        fh.prototype.clearAllRequestFilters = fh.prototype.Xh;
        fh.prototype.unregisterRequestFilter = fh.prototype.Fj;
        fh.prototype.registerRequestFilter = fh.prototype.jj;
        fh.unregisterScheme = function(a) {
          ih.delete(a);
        };
        fh.registerScheme = gh;
        fh.prototype.setForceHTTPS = fh.prototype.jg;
        fh.prototype.setForceHTTP = fh.prototype.ig;
        function lh() {
          this.g = 0;
        }
        fh.NumBytesRemainingClass = lh;
        function mh(a, b, c) {
          Ug.call(this, a, b);
          this.h = c;
        }
        qa(mh, Ug);
        fh.PendingRequest = mh;
        var qh = 1;
        fh.RequestType = { MANIFEST: 0, SEGMENT: qh, LICENSE: 2, APP: 3, TIMING: 4, SERVER_CERTIFICATE: 5, KEY: 6, ADS: 7, CONTENT_STEERING: 8 };
        fh.AdvancedRequestType = { INIT_SEGMENT: 0, MEDIA_SEGMENT: 1, MEDIA_PLAYLIST: 2, MASTER_PLAYLIST: 3, MPD: 4, MSS: 5, MPD_PATCH: 6, MEDIATAILOR_SESSION_INFO: 7, MEDIATAILOR_TRACKING_INFO: 8, MEDIATAILOR_STATIC_RESOURCE: 9, MEDIATAILOR_TRACKING_EVENT: 10, INTERSTITIAL_ASSET_LIST: 11, INTERSTITIAL_AD_URL: 12 };
        var hh = 3;
        fh.PluginPriority = { FALLBACK: 1, PREFERRED: 2, APPLICATION: hh };
        var ih = /* @__PURE__ */ new Map();
        function sh(a) {
          this.g = false;
          this.h = new Tg();
          this.i = a;
        }
        sh.prototype.destroy = function() {
          var a = this;
          if (this.g) return this.h;
          this.g = true;
          return this.i().then(function() {
            a.h.resolve();
          }, function() {
            a.h.resolve();
          });
        };
        function th(a, b) {
          if (a.g) {
            if (b instanceof U && 7003 == b.code) throw b;
            throw new U(2, 7, 7003, b);
          }
        }
        ;
        function uh(a, b) {
          var c = [];
          a = t(a);
          for (var d = a.next(); !d.done; d = a.next()) c.push(b(d.value));
          return c;
        }
        function vh(a, b) {
          a = t(a);
          for (var c = a.next(); !c.done; c = a.next()) if (!b(c.value)) return false;
          return true;
        }
        ;
        function wh(a) {
          for (var b = /* @__PURE__ */ new Map(), c = t(Object.keys(a)), d = c.next(); !d.done; d = c.next()) d = d.value, b.set(d, a[d]);
          return b;
        }
        function xh(a) {
          var b = {};
          a.forEach(function(c, d) {
            b[d] = c;
          });
          return b;
        }
        ;
        function Bh(a, b) {
          this.h = Vb(a);
          this.i = b == Ch;
          this.g = 0;
        }
        r = Bh.prototype;
        r.ta = function() {
          return this.g < this.h.byteLength;
        };
        r.Ba = function() {
          return this.g;
        };
        r.getLength = function() {
          return this.h.byteLength;
        };
        r.X = function() {
          try {
            var a = this.h.getUint8(this.g);
            this.g += 1;
            return a;
          } catch (b) {
            throw Dh();
          }
        };
        r.na = function() {
          try {
            var a = this.h.getUint16(this.g, this.i);
            this.g += 2;
            return a;
          } catch (b) {
            throw Dh();
          }
        };
        r.R = function() {
          try {
            var a = this.h.getUint32(this.g, this.i);
            this.g += 4;
            return a;
          } catch (b) {
            throw Dh();
          }
        };
        r.mh = function() {
          try {
            var a = this.h.getInt32(this.g, this.i);
            this.g += 4;
            return a;
          } catch (b) {
            throw Dh();
          }
        };
        r.bd = function() {
          try {
            if (this.i) {
              var a = this.h.getUint32(this.g, true);
              var b = this.h.getUint32(this.g + 4, true);
            } else b = this.h.getUint32(this.g, false), a = this.h.getUint32(this.g + 4, false);
          } catch (c) {
            throw Dh();
          }
          if (2097151 < b) throw new U(2, 3, 3001);
          this.g += 8;
          return b * Math.pow(2, 32) + a;
        };
        r.Cb = function(a) {
          if (this.g + a > this.h.byteLength) throw Dh();
          var b = Qb(this.h, this.g, a);
          this.g += a;
          return b;
        };
        r.skip = function(a) {
          if (this.g + a > this.h.byteLength) throw Dh();
          this.g += a;
        };
        r.ph = function(a) {
          if (this.g < a) throw Dh();
          this.g -= a;
        };
        r.seek = function(a) {
          if (0 > a || a > this.h.byteLength) throw Dh();
          this.g = a;
        };
        r.Bc = function() {
          for (var a = this.g; this.ta() && 0 != this.h.getUint8(this.g); ) this.g += 1;
          a = Qb(this.h, a, this.g - a);
          this.g += 1;
          return Gc(a);
        };
        function Dh() {
          return new U(2, 3, 3e3);
        }
        T("shaka.util.DataViewReader", Bh);
        Bh.prototype.readTerminatedString = Bh.prototype.Bc;
        Bh.prototype.seek = Bh.prototype.seek;
        Bh.prototype.rewind = Bh.prototype.ph;
        Bh.prototype.skip = Bh.prototype.skip;
        Bh.prototype.readBytes = Bh.prototype.Cb;
        Bh.prototype.readUint64 = Bh.prototype.bd;
        Bh.prototype.readInt32 = Bh.prototype.mh;
        Bh.prototype.readUint32 = Bh.prototype.R;
        Bh.prototype.readUint16 = Bh.prototype.na;
        Bh.prototype.readUint8 = Bh.prototype.X;
        Bh.prototype.getLength = Bh.prototype.getLength;
        Bh.prototype.getPosition = Bh.prototype.Ba;
        Bh.prototype.hasMoreData = Bh.prototype.ta;
        var Ch = 1;
        Bh.Endianness = { BIG_ENDIAN: 0, LITTLE_ENDIAN: Ch };
        function Eh() {
          this.i = /* @__PURE__ */ new Map();
          this.h = /* @__PURE__ */ new Map();
          this.g = false;
        }
        r = Eh.prototype;
        r.box = function(a, b) {
          a = Fh(a);
          this.i.set(a, Gh);
          this.h.set(a, b);
          return this;
        };
        r.S = function(a, b) {
          a = Fh(a);
          this.i.set(a, Hh);
          this.h.set(a, b);
          return this;
        };
        r.stop = function() {
          this.g = true;
        };
        r.parse = function(a, b, c) {
          a = new Bh(a, 0);
          for (this.g = false; a.ta() && !this.g; ) this.Yc(0, a, b, c);
        };
        r.Yc = function(a, b, c, d) {
          var e = b.Ba();
          if (d && e + 8 > b.getLength()) this.g = true;
          else {
            var f = b.R(), g = b.R(), h = Ih(g), k2 = false;
            switch (f) {
              case 0:
                f = b.getLength() - e;
                break;
              case 1:
                if (d && b.Ba() + 8 > b.getLength()) {
                  this.g = true;
                  return;
                }
                f = b.bd();
                k2 = true;
            }
            var l = this.h.get(g);
            if (l) {
              var m = null, n = null;
              if (this.i.get(g) == Hh) {
                if (d && b.Ba() + 4 > b.getLength()) {
                  this.g = true;
                  return;
                }
                n = b.R();
                m = n >>> 24;
                n &= 16777215;
              }
              g = e + f;
              c && g > b.getLength() && (g = b.getLength());
              d && g > b.getLength() ? this.g = true : (d = g - b.Ba(), b = 0 < d ? b.Cb(d) : new Uint8Array(0), b = new Bh(b, 0), l({
                name: h,
                parser: this,
                partialOkay: c || false,
                version: m,
                flags: n,
                reader: b,
                size: f,
                start: e + a,
                has64BitSize: k2
              }));
            } else b.skip(Math.min(e + f - b.Ba(), b.getLength() - b.Ba()));
          }
        };
        function Jh(a) {
          for (var b = Kh(a); a.reader.ta() && !a.parser.g; ) a.parser.Yc(a.start + b, a.reader, a.partialOkay);
        }
        function Lh(a) {
          for (var b = Kh(a), c = a.reader.R(), d = 0; d < c && (a.parser.Yc(a.start + b, a.reader, a.partialOkay), !a.parser.g); d++) ;
        }
        function Mh(a) {
          var b = Kh(a);
          for (a.reader.skip(78); a.reader.ta() && !a.parser.g; ) a.parser.Yc(a.start + b, a.reader, a.partialOkay);
        }
        function Nh(a) {
          var b = Kh(a);
          a.reader.skip(8);
          var c = a.reader.na();
          a.reader.skip(6);
          2 == c ? a.reader.skip(48) : a.reader.skip(12);
          for (1 == c && a.reader.skip(16); a.reader.ta() && !a.parser.g; ) a.parser.Yc(a.start + b, a.reader, a.partialOkay);
        }
        function Oh(a) {
          return function(b) {
            a(b.reader.Cb(b.reader.getLength() - b.reader.Ba()));
          };
        }
        function Fh(a) {
          var b = 0;
          a = t(a);
          for (var c = a.next(); !c.done; c = a.next()) b = b << 8 | c.value.charCodeAt(0);
          return b;
        }
        function Ih(a) {
          return String.fromCharCode(a >> 24 & 255, a >> 16 & 255, a >> 8 & 255, a & 255);
        }
        function Kh(a) {
          return 8 + (a.has64BitSize ? 8 : 0) + (null != a.flags ? 4 : 0);
        }
        T("shaka.util.Mp4Parser", Eh);
        Eh.headerSize = Kh;
        Eh.typeToString = Ih;
        Eh.allData = Oh;
        Eh.audioSampleEntry = Nh;
        Eh.visualSampleEntry = Mh;
        Eh.sampleDescription = Lh;
        Eh.children = Jh;
        Eh.prototype.parseNext = Eh.prototype.Yc;
        Eh.prototype.parse = Eh.prototype.parse;
        Eh.prototype.stop = Eh.prototype.stop;
        Eh.prototype.fullBox = Eh.prototype.S;
        Eh.prototype.box = Eh.prototype.box;
        var Gh = 0, Hh = 1;
        function Ph(a) {
          var b = this;
          this.g = [];
          this.h = [];
          this.data = [];
          new Eh().box("moov", Jh).box("moof", Jh).S("pssh", function(c) {
            if (!(1 < c.version)) {
              var d = Qb(c.reader.h, -12, c.size);
              b.data.push(d);
              b.g.push(Uc(c.reader.Cb(16)));
              if (0 < c.version) {
                d = c.reader.R();
                for (var e = 0; e < d; e++) {
                  var f = Uc(c.reader.Cb(16));
                  b.h.push(f);
                }
              }
            }
          }).parse(a);
        }
        function Qh(a, b, c, d) {
          var e = a.length, f = b.length + 16 + e;
          0 < d && (f += 4 + 16 * c.size);
          var g = new Uint8Array(f), h = Vb(g), k2 = 0;
          h.setUint32(k2, f);
          k2 += 4;
          h.setUint32(k2, 1886614376);
          k2 += 4;
          1 > d ? h.setUint32(k2, 0) : h.setUint32(k2, 16777216);
          k2 += 4;
          g.set(b, k2);
          k2 += b.length;
          if (0 < d) for (h.setUint32(k2, c.size), k2 += 4, b = t(c), c = b.next(); !c.done; c = b.next()) c = Tc(c.value), g.set(c, k2), k2 += c.length;
          h.setUint32(k2, e);
          g.set(a, k2 + 4);
          return g;
        }
        ;
        function Rh(a) {
          var b = this;
          this.C = a;
          this.j = this.A = null;
          this.ka = this.ea = false;
          this.H = 0;
          this.h = null;
          this.o = new lb();
          this.i = /* @__PURE__ */ new Map();
          this.T = [];
          this.B = /* @__PURE__ */ new Map();
          this.K = false;
          this.m = new Tg();
          this.g = null;
          this.s = function(c) {
            2 == c.severity && b.m.reject(c);
            a.onError(c);
          };
          this.Y = /* @__PURE__ */ new Map();
          this.fa = /* @__PURE__ */ new Map();
          this.L = new ec(function() {
            return Sh(b);
          });
          this.O = false;
          this.M = [];
          this.W = false;
          this.I = new ec(function() {
            Th(b);
          });
          this.m.catch(function() {
          });
          this.l = new sh(function() {
            return Uh(b);
          });
          this.Z = false;
          this.F = this.G = null;
          this.P = function() {
            return false;
          };
        }
        r = Rh.prototype;
        r.destroy = function() {
          return this.l.destroy();
        };
        function Uh(a) {
          return Q(function(b) {
            switch (b.g) {
              case 1:
                return a.o.release(), a.o = null, a.m.reject(), a.I.stop(), a.I = null, a.L.stop(), a.L = null, G(b, Vh(a), 2);
              case 2:
                if (!a.j) {
                  b.u(3);
                  break;
                }
                xa(b, 4);
                return G(b, a.j.setMediaKeys(null), 6);
              case 6:
                za(b, 5);
                break;
              case 4:
                Aa(b);
              case 5:
                a.j = null;
              case 3:
                a.h = null, a.A = null, a.B = /* @__PURE__ */ new Map(), a.g = null, a.s = function() {
                }, a.C = null, a.Z = false, a.G = null, I(b);
            }
          });
        }
        r.configure = function(a, b) {
          this.g = a;
          b && (this.P = b);
          this.I && this.I.ua(this.g.updateExpirationTime);
        };
        function Wh(a, b, c) {
          a.ka = true;
          a.B = /* @__PURE__ */ new Map();
          a.O = c;
          return Xh(a, b, false);
        }
        function Yh(a, b, c, d) {
          d = void 0 === d ? true : d;
          a.B = /* @__PURE__ */ new Map();
          c = t(c);
          for (var e = c.next(); !e.done; e = c.next()) a.B.set(e.value, { initData: null, initDataType: null });
          c = t(a.g.persistentSessionsMetadata);
          for (e = c.next(); !e.done; e = c.next()) e = e.value, a.B.set(e.sessionId, { initData: e.initData, initDataType: e.initDataType });
          a.O = 0 < a.B.size;
          return Xh(a, b, d);
        }
        function Zh(a, b, c, d, e, f) {
          var g = /* @__PURE__ */ new Map();
          e = { audioCapabilities: e, videoCapabilities: f, distinctiveIdentifier: "optional", persistentState: "required", sessionTypes: ["persistent-license"], label: b };
          e.drmInfos = [{ keySystem: b, licenseServerUri: c, distinctiveIdentifierRequired: false, persistentStateRequired: true, audioRobustness: "", videoRobustness: "", serverCertificate: d, serverCertificateUri: "", initData: null, keyIds: null }];
          g.set(b, e);
          return $h(a, g, []);
        }
        function Xh(a, b, c) {
          var d, e, f, g, h, k2, l, m, n, p, q, u, w, v, x, z, C, D, F;
          return Q(function(B) {
            if (1 == B.g) {
              ai(a.g.clearKeys, b);
              d = b.some(function(A) {
                return A.video && A.video.drmInfos.length || A.audio && A.audio.drmInfos.length ? true : false;
              });
              !d && c && (e = wh(a.g.servers), bi(b, e));
              f = /* @__PURE__ */ new Set();
              g = t(b);
              for (h = g.next(); !h.done; h = g.next()) for (k2 = h.value, l = ci(k2), m = t(l), n = m.next(); !n.done; n = m.next()) p = n.value, f.add(p);
              q = t(f);
              for (u = q.next(); !u.done; u = q.next()) w = u.value, di(w, wh(a.g.servers), wh(a.g.advanced || {}), a.g.keySystemsMapping);
              v = function(A, H) {
                var E = [];
                A = t(A);
                for (var L = A.next(); !L.done; L = A.next()) {
                  L = L.value;
                  var M = L[H] || a.g.advanced && a.g.advanced[L.keySystem] && a.g.advanced[L.keySystem][H] || "", J;
                  if (J = "" == M) J = (J = L.keySystem) ? !!J.match(/^com\.widevine\.alpha/) : false;
                  J && ("audioRobustness" == H ? M = [a.g.defaultAudioRobustnessForWidevine] : "videoRobustness" == H && (M = [a.g.defaultVideoRobustnessForWidevine]));
                  if ("string" === typeof M) E.push(L);
                  else if (Array.isArray(M)) for (0 === M.length && (M = [""]), M = t(M), J = M.next(); !J.done; J = M.next()) {
                    var K = {};
                    E.push(Object.assign(
                      {},
                      L,
                      (K[H] = J.value, K)
                    ));
                  }
                }
                return E;
              };
              x = t(b);
              for (z = x.next(); !z.done; z = x.next()) C = z.value, C.video && (C.video.drmInfos = v(C.video.drmInfos, "videoRobustness"), C.video.drmInfos = v(C.video.drmInfos, "audioRobustness")), C.audio && (C.audio.drmInfos = v(C.audio.drmInfos, "videoRobustness"), C.audio.drmInfos = v(C.audio.drmInfos, "audioRobustness"));
              return G(B, kg(b, a.O, a.Z, a.g.preferredKeySystems), 2);
            }
            th(a.l);
            D = d || Object.keys(a.g.servers).length;
            if (!D) return a.ea = true, B.return(Promise.resolve());
            F = $h(a, void 0, b);
            return B.return(d ? F : F.catch(function() {
            }));
          });
        }
        function ei(a) {
          var b;
          return Q(function(c) {
            switch (c.g) {
              case 1:
                if (a.j.mediaKeys) return c.return();
                if (!a.G) {
                  c.u(2);
                  break;
                }
                return G(c, a.G, 3);
              case 3:
                return th(a.l), c.return();
              case 2:
                return xa(c, 4), a.G = a.j.setMediaKeys(a.A), G(c, a.G, 6);
              case 6:
                za(c, 5);
                break;
              case 4:
                b = Aa(c), a.s(new U(2, 6, 6003, b.message));
              case 5:
                th(a.l), I(c);
            }
          });
        }
        function fi(a, b) {
          return Q(function(c) {
            if (1 == c.g) return G(c, ei(a), 2);
            gi(a, b.initDataType, Qb(b.initData));
            I(c);
          });
        }
        r.Kb = function(a) {
          var b = this;
          return Q(function(c) {
            if (1 == c.g) {
              if (b.j === a) return c.return();
              if (!b.A) return b.o.ma(a, "encrypted", function() {
                b.s(new U(2, 6, 6010));
              }), c.return();
              b.j = a;
              b.o.ma(b.j, "play", function() {
                for (var d = t(b.M), e = d.next(); !e.done; e = d.next()) hi(b, e.value);
                b.W = true;
                b.M = [];
              });
              b.j.remote ? (b.o.D(b.j.remote, "connect", function() {
                return Vh(b);
              }), b.o.D(b.j.remote, "connecting", function() {
                return Vh(b);
              }), b.o.D(b.j.remote, "disconnect", function() {
                return Vh(b);
              })) : "webkitCurrentPlaybackTargetIsWireless" in b.j && b.o.D(b.j, "webkitcurrentplaybacktargetiswirelesschanged", function() {
                return Vh(b);
              });
              b.F = b.h ? b.h.initData.find(function(d) {
                return 0 < d.initData.length;
              }) || null : null;
              return b.F || "com.apple.fps" !== b.h.keySystem || b.B.size ? G(c, ei(b), 2) : c.u(2);
            }
            ii(b).catch(function() {
            });
            b.F || b.B.size || b.g.parseInbandPsshEnabled || b.o.D(b.j, "encrypted", function(d) {
              return fi(b, d);
            });
            I(c);
          });
        };
        function ji(a) {
          var b, c, d, e, f;
          return Q(function(g) {
            switch (g.g) {
              case 1:
                if (!a.A || !a.h) return g.return();
                if (!a.h.serverCertificateUri || a.h.serverCertificate && a.h.serverCertificate.length) {
                  g.u(2);
                  break;
                }
                b = kh([a.h.serverCertificateUri], a.g.retryParameters);
                xa(g, 3);
                c = a.C.Wb.request(5, b, { isPreload: a.P() });
                return G(g, c.promise, 5);
              case 5:
                d = g.h;
                a.h.serverCertificate = Qb(d.data);
                za(g, 4);
                break;
              case 3:
                throw e = Aa(g), new U(2, 6, 6017, e);
              case 4:
                if (a.l.g) return g.return();
              case 2:
                if (!a.h.serverCertificate || !a.h.serverCertificate.length) return g.return();
                xa(g, 6);
                return G(g, a.A.setServerCertificate(a.h.serverCertificate), 8);
              case 8:
                za(g, 0);
                break;
              case 6:
                throw f = Aa(g), new U(2, 6, 6004, f.message);
            }
          });
        }
        function ki(a, b) {
          var c, d, e;
          return Q(function(f) {
            if (1 == f.g) return G(f, li(a, b, { initData: null, initDataType: null }), 2);
            if (3 != f.g) {
              c = f.h;
              if (!c) return f.return();
              d = [];
              if (e = a.i.get(c)) e.sb = new Tg(), d.push(e.sb);
              d.push(c.remove());
              return G(f, Promise.all(d), 3);
            }
            a.i.delete(c);
            I(f);
          });
        }
        function ii(a) {
          var b, c, d, e, f;
          return Q(function(g) {
            if (1 == g.g) {
              if (!a.B.size) return g.u(2);
              a.B.forEach(function(h, k2) {
                li(a, k2, h);
              });
              return G(g, a.m, 3);
            }
            if (2 != g.g) {
              b = a.h && a.h.keyIds || /* @__PURE__ */ new Set([]);
              if (0 < b.size && mi(a)) return g.return(a.m);
              a.K = false;
              a.m = new Tg();
              a.m.catch(function() {
              });
            }
            c = (a.h ? a.h.initData : []) || [];
            d = t(c);
            for (e = d.next(); !e.done; e = d.next()) f = e.value, gi(a, f.initDataType, f.initData);
            ni(a) && a.m.resolve();
            return g.return(a.m);
          });
        }
        function gi(a, b, c) {
          if (c.length) {
            if (a.g.ignoreDuplicateInitData) {
              var d = a.i.values();
              d = t(d);
              for (var e = d.next(); !e.done; e = d.next()) if (Pb(c, e.value.initData)) return;
              var f = false;
              a.B.forEach(function(g) {
                !f && Pb(c, g.initData) && (f = true);
              });
              if (f) return;
            }
            a.K = true;
            0 < a.i.size && ni(a) && (a.m.resolve(), a.K = false, a.m = new Tg(), a.m.catch(function() {
            }));
            oi(a, b, c, a.h.sessionType);
          }
        }
        function pi(a) {
          a = a.i.keys();
          a = uh(a, function(b) {
            return b.sessionId;
          });
          return Array.from(a);
        }
        r.Ff = function() {
          var a = this, b = this.i.keys();
          b = uh(b, function(c) {
            var d = a.i.get(c);
            return { sessionId: c.sessionId, sessionType: d.type, initData: d.initData, initDataType: d.initDataType };
          });
          return Array.from(b);
        };
        r.pd = function() {
          var a = Infinity, b = this.i.keys();
          b = t(b);
          for (var c = b.next(); !c.done; c = b.next()) c = c.value, isNaN(c.expiration) || (a = Math.min(a, c.expiration));
          return a;
        };
        r.Yd = function() {
          return xh(this.fa);
        };
        function $h(a, b, c) {
          var d, e, f, g, h, k2, l, m;
          return Q(function(n) {
            switch (n.g) {
              case 1:
                d = /* @__PURE__ */ new Map();
                if (c.length) {
                  e = qi(a, c, d);
                  n.u(2);
                  break;
                }
                return G(n, ri(a, b), 3);
              case 3:
                e = n.h;
              case 2:
                f = e;
                if (!f) {
                  if (!navigator.requestMediaKeySystemAccess) throw new U(2, 6, 6020);
                  throw new U(2, 6, 6001);
                }
                th(a.l);
                xa(n, 4);
                f.getConfiguration();
                g = a.g.keySystemsMapping[f.keySystem] || f.keySystem;
                if (c.length) {
                  var p = g;
                  var q = d.get(g);
                  var u = [], w = [], v = [], x = [], z = [], C = /* @__PURE__ */ new Set(), D = /* @__PURE__ */ new Set();
                  si(q, u, w, x, v, z, C, D);
                  var F = a.O ? "persistent-license" : "temporary";
                  p = { keySystem: p, encryptionScheme: u[0], licenseServerUri: w[0], distinctiveIdentifierRequired: q[0].distinctiveIdentifierRequired, persistentStateRequired: q[0].persistentStateRequired, sessionType: q[0].sessionType || F, audioRobustness: q[0].audioRobustness || "", videoRobustness: q[0].videoRobustness || "", serverCertificate: x[0], serverCertificateUri: v[0], initData: z, keyIds: C };
                  0 < D.size && (p.keySystemUris = D);
                  q = t(q);
                  for (D = q.next(); !D.done; D = q.next()) D = D.value, D.distinctiveIdentifierRequired && (p.distinctiveIdentifierRequired = D.distinctiveIdentifierRequired), D.persistentStateRequired && (p.persistentStateRequired = D.persistentStateRequired);
                  q = p;
                } else q = g, D = b.get(g), p = [], u = [], w = [], v = [], x = [], z = /* @__PURE__ */ new Set(), si(D.drmInfos, p, u, v, w, x, z), q = {
                  keySystem: q,
                  encryptionScheme: p[0],
                  licenseServerUri: u[0],
                  distinctiveIdentifierRequired: "required" == D.distinctiveIdentifier,
                  persistentStateRequired: "required" == D.persistentState,
                  sessionType: D.sessionTypes[0] || "temporary",
                  audioRobustness: (D.audioCapabilities ? D.audioCapabilities[0].robustness : "") || "",
                  videoRobustness: (D.videoCapabilities ? D.videoCapabilities[0].robustness : "") || "",
                  serverCertificate: v[0],
                  serverCertificateUri: w[0],
                  initData: x,
                  keyIds: z
                };
                a.h = q;
                if (!a.h.licenseServerUri) throw new U(2, 6, 6012, a.h.keySystem);
                return G(n, f.createMediaKeys(), 6);
              case 6:
                h = n.h;
                th(a.l);
                a.A = h;
                if (!("" != a.g.minHdcpVersion && "getStatusForPolicy" in a.A)) {
                  n.u(7);
                  break;
                }
                xa(n, 8);
                return G(n, a.A.getStatusForPolicy({ minHdcpVersion: a.g.minHdcpVersion }), 10);
              case 10:
                k2 = n.h;
                if ("usable" != k2) throw new U(2, 6, 6018);
                th(a.l);
                za(n, 7, 4);
                break;
              case 8:
                l = Aa(n, 4);
                if (l instanceof U) throw l;
                throw new U(2, 6, 6019, l.message);
              case 7:
                return a.ea = true, G(n, ji(a), 11);
              case 11:
                th(a.l);
                za(n, 0);
                break;
              case 4:
                m = Aa(n);
                th(a.l, m);
                a.h = null;
                if (m instanceof U) throw m;
                throw new U(2, 6, 6002, m.message);
            }
          });
        }
        function qi(a, b, c) {
          for (var d = t(b), e = d.next(); !e.done; e = d.next()) {
            e = t(ci(e.value));
            for (var f = e.next(); !f.done; f = e.next()) f = f.value, c.has(f.keySystem) || c.set(f.keySystem, []), c.get(f.keySystem).push(f);
          }
          if (1 == c.size && c.has("")) throw new U(2, 6, 6e3);
          d = a.g.preferredKeySystems;
          d.length || (e = wh(a.g.servers), 1 == e.size && (d = Array.from(e.keys())));
          e = t(d);
          var g = e.next();
          for (f = {}; !g.done; f = { lh: void 0 }, g = e.next()) {
            f.lh = g.value;
            g = t(b);
            for (var h = g.next(); !h.done; h = g.next()) if (h = h.value.decodingInfos.find(/* @__PURE__ */ function(n) {
              return function(p) {
                return p.supported && null != p.keySystemAccess && p.keySystemAccess.keySystem == n.lh;
              };
            }(f))) return h.keySystemAccess;
          }
          e = t([true, false]);
          for (f = e.next(); !f.done; f = e.next()) for (f = f.value, g = t(b), h = g.next(); !h.done; h = g.next()) {
            h = t(h.value.decodingInfos);
            for (var k2 = h.next(); !k2.done; k2 = h.next()) if (k2 = k2.value, k2.supported && k2.keySystemAccess) {
              var l = k2.keySystemAccess.keySystem;
              if (!d.includes(l)) {
                var m = c.get(l);
                !m && a.g.keySystemsMapping[l] && (m = c.get(a.g.keySystemsMapping[l]));
                l = t(m);
                for (m = l.next(); !m.done; m = l.next()) if (!!m.value.licenseServerUri == f) return k2.keySystemAccess;
              }
            }
          }
          return null;
        }
        function ri(a, b) {
          var c, d, e, f, g, h, k2, l, m, n, p, q, u, w, v, x;
          return Q(function(z) {
            switch (z.g) {
              case 1:
                if (1 == b.size && b.has("")) throw new U(2, 6, 6e3);
                d = t(b.values());
                for (e = d.next(); !e.done; e = d.next()) f = e.value, 0 == f.audioCapabilities.length && delete f.audioCapabilities, 0 == f.videoCapabilities.length && delete f.videoCapabilities;
                g = t(a.g.preferredKeySystems);
                h = g.next();
              case 2:
                if (h.done) {
                  z.u(4);
                  break;
                }
                k2 = h.value;
                if (!b.has(k2)) {
                  z.u(3);
                  break;
                }
                l = b.get(k2);
                xa(z, 6);
                return G(z, navigator.requestMediaKeySystemAccess(k2, [l]), 8);
              case 8:
                return c = z.h, z.return(c);
              case 6:
                Aa(z);
              case 7:
                th(a.l);
              case 3:
                h = g.next();
                z.u(2);
                break;
              case 4:
                m = t([true, false]), n = m.next();
              case 9:
                if (n.done) {
                  z.u(11);
                  break;
                }
                p = n.value;
                q = t(b.keys());
                u = q.next();
              case 12:
                if (u.done) {
                  n = m.next();
                  z.u(9);
                  break;
                }
                w = u.value;
                v = b.get(w);
                x = v.drmInfos.some(function(C) {
                  return !!C.licenseServerUri;
                });
                if (x != p) {
                  z.u(13);
                  break;
                }
                xa(z, 15);
                return G(z, navigator.requestMediaKeySystemAccess(w, [v]), 17);
              case 17:
                return c = z.h, z.return(c);
              case 15:
                Aa(z);
              case 16:
                th(a.l);
              case 13:
                u = q.next();
                z.u(12);
                break;
              case 11:
                return z.return(c);
            }
          });
        }
        function ti(a) {
          ni(a) && a.m.resolve();
        }
        function ui(a, b) {
          new ec(function() {
            b.loaded = true;
            ti(a);
          }).da(vi);
        }
        function li(a, b, c) {
          var d, e, f, g, h, k2, l;
          return Q(function(m) {
            switch (m.g) {
              case 1:
                try {
                  d = a.A.createSession("persistent-license");
                } catch (n) {
                  return e = new U(2, 6, 6005, n.message), a.s(e), m.return(Promise.reject(e));
                }
                a.o.D(d, "message", function(n) {
                  a.j && a.g.delayLicenseRequestUntilPlayed && a.j.paused && !a.W ? a.M.push(n) : hi(a, n);
                });
                a.o.D(d, "keystatuseschange", function(n) {
                  return wi(a, n);
                });
                f = { initData: c.initData, initDataType: c.initDataType, loaded: false, Uf: Infinity, sb: null, type: "persistent-license" };
                a.i.set(d, f);
                xa(m, 2);
                return G(
                  m,
                  d.load(b),
                  4
                );
              case 4:
                return g = m.h, th(a.l), g || (a.i.delete(d), h = a.g.persistentSessionOnlinePlayback ? 1 : 2, a.s(new U(h, 6, 6013)), f.loaded = true), ui(a, f), ti(a), m.return(d);
              case 2:
                k2 = Aa(m), th(a.l, k2), a.i.delete(d), l = a.g.persistentSessionOnlinePlayback ? 1 : 2, a.s(new U(l, 6, 6005, k2.message)), f.loaded = true, ti(a);
              case 3:
                return m.return(Promise.resolve());
            }
          });
        }
        function oi(a, b, c, d) {
          try {
            var e = a.A.createSession(d);
          } catch (f) {
            a.s(new U(2, 6, 6005, f.message));
            return;
          }
          a.o.D(e, "message", function(f) {
            a.j && a.g.delayLicenseRequestUntilPlayed && a.j.paused && !a.W ? a.M.push(f) : hi(a, f);
          });
          a.o.D(e, "keystatuseschange", function(f) {
            return wi(a, f);
          });
          a.i.set(e, { initData: c, initDataType: b, loaded: false, Uf: Infinity, sb: null, type: d });
          try {
            c = a.g.initDataTransform(c, b, a.h);
          } catch (f) {
            b = f;
            f instanceof U || (b = new U(2, 6, 6016, f));
            a.s(b);
            return;
          }
          a.g.logLicenseExchange && Rc(c);
          e.generateRequest(b, c).catch(function(f) {
            if (!a.l.g) {
              a.i.delete(e);
              var g = f.errorCode;
              if (g && g.systemCode) {
                var h = g.systemCode;
                0 > h && (h += Math.pow(2, 32));
                h = "0x" + h.toString(16);
              }
              a.s(new U(2, 6, 6006, f.message, f, h));
            }
          });
        }
        function xi(a) {
          return Q(function(b) {
            return 1 == b.g ? a.K ? G(b, a.m, 3) : b.u(0) : G(b, Promise.all(a.T.map(function(c) {
              return c.promise;
            })), 0);
          });
        }
        function hi(a, b) {
          var c, d, e, f, g, h, k2, l, m, n, p, q, u, w;
          Q(function(v) {
            switch (v.g) {
              case 1:
                c = b.target;
                a.g.logLicenseExchange && Rc(b.message);
                d = a.i.get(c);
                e = a.h.licenseServerUri;
                f = a.g.advanced[a.h.keySystem];
                "individualization-request" == b.messageType && f && f.individualizationServer && (e = f.individualizationServer);
                g = kh([e], a.g.retryParameters);
                g.body = b.message;
                g.method = "POST";
                g.licenseRequestType = b.messageType;
                g.sessionId = c.sessionId;
                g.drmInfo = a.h;
                d && (g.initData = d.initData, g.initDataType = d.initDataType);
                if (f && f.headers) for (h in f.headers) g.headers[h] = f.headers[h];
                if ("org.w3.clearkey" === a.h.keySystem) {
                  var x = g, z = a.h;
                  try {
                    var C = Jc(x.body);
                    if (C) {
                      var D = JSON.parse(C);
                      D.type || (D.type = z.sessionType, x.body = Kc(JSON.stringify(D)));
                    }
                  } catch (F) {
                  }
                }
                if ($b(a.h.keySystem)) if (x = Hc(g.body, true, true), x.includes("PlayReadyKeyMessage")) {
                  x = Qd(x, "PlayReadyKeyMessage");
                  z = $d(x, "HttpHeader");
                  z = t(z);
                  for (C = z.next(); !C.done; C = z.next()) D = C.value, C = $d(D, "name")[0], D = $d(D, "value")[0], g.headers[Yd(C)] = Yd(D);
                  x = $d(x, "Challenge")[0];
                  g.body = Sc(Yd(x));
                } else g.headers["Content-Type"] = "text/xml; charset=utf-8";
                k2 = Date.now();
                xa(v, 2);
                m = a.C.Wb.request(2, g, { isPreload: a.P() });
                a.T.push(m);
                return G(v, m.promise, 4);
              case 4:
                l = v.h;
                Bd(a.T, m);
                za(v, 3);
                break;
              case 2:
                n = Aa(v);
                if (a.l.g) return v.return();
                p = new U(2, 6, 6007, n);
                1 == a.i.size ? (a.s(p), d && d.sb && d.sb.reject(p)) : (d && d.sb && d.sb.reject(p), a.i.delete(c), ni(a) && (a.m.resolve(), a.L.da(0.1)));
                return v.return();
              case 3:
                if (a.l.g) return v.return();
                a.H += (Date.now() - k2) / 1e3;
                a.g.logLicenseExchange && Rc(l.data);
                xa(v, 5);
                return G(v, c.update(l.data), 7);
              case 7:
                za(v, 6);
                break;
              case 5:
                return q = Aa(v), u = new U(2, 6, 6008, q.message), a.s(u), d && d.sb && d.sb.reject(u), v.return();
              case 6:
                if (a.l.g) return v.return();
                w = new V("drmsessionupdate");
                a.C.onEvent(w);
                d && (d.sb && d.sb.resolve(), ui(a, d));
                I(v);
            }
          });
        }
        function wi(a, b) {
          b = b.target;
          var c = a.i.get(b), d = false;
          b.keyStatuses.forEach(function(f, g) {
            if ("string" == typeof g) {
              var h = g;
              g = f;
              f = h;
            }
            if ($b(a.h.keySystem) && 16 == g.byteLength && (ic() || uc())) {
              h = Vb(g);
              var k2 = h.getUint32(0, true), l = h.getUint16(4, true), m = h.getUint16(6, true);
              h.setUint32(0, k2, false);
              h.setUint16(4, l, false);
              h.setUint16(6, m, false);
            }
            "status-pending" != f && (c.loaded = true);
            "expired" == f && (d = true);
            g = Uc(g).slice(0, 32);
            a.Y.set(g, f);
          });
          var e = b.expiration - Date.now();
          (0 > e || d && 1e3 > e) && c && !c.sb && (a.i.delete(b), yi(b));
          ni(a) && (a.m.resolve(), a.L.da(zi));
        }
        function Sh(a) {
          var b = a.Y, c = a.fa;
          c.clear();
          b.forEach(function(d, e) {
            return c.set(e, d);
          });
          b = Array.from(c.values());
          b.length && b.every(function(d) {
            return "expired" == d;
          }) && a.s(new U(2, 6, 6014));
          a.C.pe(xh(c));
        }
        function Ai() {
          var a, b, c, d, e, f, g, h, k2, l, m, n, p, q, u, w, v, x, z, C, D, F, B, A, H, E, L, M, J, K, N, O, P, R;
          return Q(function(S) {
            if (1 == S.g) {
              a = "org.w3.clearkey com.widevine.alpha com.widevine.alpha.experiment com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.chromecast.playready com.apple.fps.1_0 com.apple.fps com.huawei.wiseplay".split(" ");
              if (!(window2.MediaKeys && window2.navigator && window2.navigator.requestMediaKeySystemAccess && window2.MediaKeySystemAccess && window2.MediaKeySystemAccess.prototype.getConfiguration)) {
                b = {};
                c = t(a);
                for (d = c.next(); !d.done; d = c.next()) e = d.value, b[e] = null;
                return S.return(b);
              }
              f = "1.0 1.1 1.2 1.3 1.4 2.0 2.1 2.2 2.3".split(" ");
              g = ["SW_SECURE_CRYPTO", "SW_SECURE_DECODE", "HW_SECURE_CRYPTO", "HW_SECURE_DECODE", "HW_SECURE_ALL"];
              h = ["150", "2000", "3000"];
              k2 = { "com.widevine.alpha": g, "com.widevine.alpha.experiment": g, "com.microsoft.playready.recommendation": h };
              l = [{ contentType: 'video/mp4; codecs="avc1.42E01E"' }, { contentType: 'video/webm; codecs="vp8"' }];
              m = [{ contentType: 'audio/mp4; codecs="mp4a.40.2"' }, { contentType: 'audio/webm; codecs="opus"' }];
              n = { videoCapabilities: l, audioCapabilities: m, initDataTypes: ["cenc", "sinf", "skd", "keyids"] };
              p = [null, "cenc", "cbcs", "cbcs-1-9"];
              q = /* @__PURE__ */ new Map();
              u = function(oa, Z) {
                var Fa, Ia, ka, ua, Ba, na, Ca, ra, sa, Oa, ob, bb, cb;
                return Q(function(jb) {
                  switch (jb.g) {
                    case 1:
                      return xa(jb, 2), G(jb, Z.createMediaKeys(), 5);
                    case 5:
                      Fa = jb.h;
                    case 4:
                      za(jb, 3);
                      break;
                    case 2:
                      return Aa(jb), jb.return();
                    case 3:
                      ka = (Ia = Z.getConfiguration().sessionTypes) ? Ia.includes("persistent-license") : false;
                      mc() && (ka = false);
                      ua = Z.getConfiguration().videoCapabilities;
                      Ba = Z.getConfiguration().audioCapabilities;
                      na = { persistentState: ka, encryptionSchemes: [], videoRobustnessLevels: [], audioRobustnessLevels: [], minHdcpVersions: [] };
                      q.has(oa) && q.get(oa) ? na = q.get(oa) : q.set(oa, na);
                      (Ca = ua[0].encryptionScheme) && !na.encryptionSchemes.includes(Ca) && na.encryptionSchemes.push(Ca);
                      (ra = ua[0].robustness) && !na.videoRobustnessLevels.includes(ra) && na.videoRobustnessLevels.push(ra);
                      (sa = Ba[0].robustness) && !na.audioRobustnessLevels.includes(sa) && na.audioRobustnessLevels.push(sa);
                      if ("getStatusForPolicy" in Fa) {
                        Oa = [];
                        ob = t(f);
                        bb = ob.next();
                        for (cb = {}; !bb.done; cb = { td: void 0 }, bb = ob.next()) cb.td = bb.value, na.minHdcpVersions.includes(cb.td) || Oa.push(Fa.getStatusForPolicy({ minHdcpVersion: cb.td }).then(/* @__PURE__ */ function(ub) {
                          return function(xe) {
                            "usable" != xe || na.minHdcpVersions.includes(ub.td) || na.minHdcpVersions.push(ub.td);
                          };
                        }(cb)));
                        return G(jb, Promise.all(Oa), 0);
                      }
                      jb.u(0);
                  }
                });
              };
              w = function(oa, Z, Fa, Ia) {
                var ka, ua, Ba, na, Ca, ra, sa, Oa, ob, bb;
                return Q(function(cb) {
                  switch (cb.g) {
                    case 1:
                      xa(cb, 2);
                      ka = Md(n);
                      ua = t(ka.videoCapabilities);
                      for (Ba = ua.next(); !Ba.done; Ba = ua.next()) na = Ba.value, na.encryptionScheme = Z, na.robustness = Fa;
                      Ca = t(ka.audioCapabilities);
                      for (ra = Ca.next(); !ra.done; ra = Ca.next()) sa = ra.value, sa.encryptionScheme = Z, sa.robustness = Ia;
                      Oa = Md(ka);
                      Oa.persistentState = "required";
                      Oa.sessionTypes = ["persistent-license"];
                      ob = [Oa, ka];
                      return yc() ? G(cb, Kf(5, navigator.requestMediaKeySystemAccess(oa, ob)), 7) : G(cb, navigator.requestMediaKeySystemAccess(oa, ob), 6);
                    case 6:
                      bb = cb.h;
                      cb.u(5);
                      break;
                    case 7:
                      bb = cb.h;
                    case 5:
                      return G(cb, u(oa, bb), 8);
                    case 8:
                      za(cb, 0);
                      break;
                    case 2:
                      Aa(cb), I(cb);
                  }
                });
              };
              v = function(oa, Z, Fa, Ia) {
                var ka, ua, Ba;
                return Q(function(na) {
                  switch (na.g) {
                    case 1:
                      return xa(na, 2), ka = { type: "media-source", video: { contentType: l[0].contentType, width: 640, height: 480, bitrate: 1, framerate: 1 }, audio: { contentType: m[0].contentType, channels: 2, bitrate: 1, samplerate: 1 }, keySystemConfiguration: { keySystem: oa, video: { encryptionScheme: Z, robustness: Fa }, audio: { encryptionScheme: Z, robustness: Ia } } }, yc() ? G(na, Kf(5, navigator.mediaCapabilities.decodingInfo(ka)), 7) : G(
                        na,
                        navigator.mediaCapabilities.decodingInfo(ka),
                        6
                      );
                    case 6:
                      ua = na.h;
                      na.u(5);
                      break;
                    case 7:
                      ua = na.h;
                    case 5:
                      return Ba = ua.keySystemAccess, G(na, u(oa, Ba), 8);
                    case 8:
                      za(na, 0);
                      break;
                    case 2:
                      Aa(na), I(na);
                  }
                });
              };
              x = t(a);
              for (z = x.next(); !z.done; z = x.next()) C = z.value, q.set(C, null);
              D = function(oa) {
                return "org.w3.clearkey" === oa && rc() ? false : true;
              };
              F = [];
              B = t(p);
              for (A = B.next(); !A.done; A = B.next()) for (H = A.value, E = t(a), L = E.next(); !L.done; L = E.next()) M = L.value, D(M) && (F.push(w(M, H, "", "")), F.push(v(M, H, "", "")));
              J = t(a);
              for (K = J.next(); !K.done; K = J.next()) for (N = K.value, O = t(k2[N] || []), P = O.next(); !P.done; P = O.next()) R = P.value, D(N) && (F.push(w(N, null, R, "")), F.push(w(N, null, "", R)), F.push(v(N, null, R, "")), F.push(v(N, null, "", R)));
              return G(S, Promise.all(F), 2);
            }
            return S.return(xh(q));
          });
        }
        function yi(a) {
          return Q(function(b) {
            if (1 == b.g) return xa(b, 2), G(b, Kf(Bi, Promise.all([a.close().catch(function() {
            }), a.closed])), 4);
            if (2 != b.g) return za(b, 0);
            Aa(b);
            I(b);
          });
        }
        function Vh(a) {
          var b;
          return Q(function(c) {
            b = Array.from(a.i.entries());
            a.i.clear();
            return G(c, Promise.all(b.map(function(d) {
              d = t(d);
              var e = d.next().value, f = d.next().value;
              return Q(function(g) {
                if (1 == g.g) return xa(g, 2), a.ka || a.B.has(e.sessionId) || "persistent-license" !== f.type || a.g.persistentSessionOnlinePlayback ? G(g, yi(e), 5) : G(g, e.remove(), 5);
                if (2 != g.g) return za(g, 0);
                Aa(g);
                I(g);
              });
            })), 0);
          });
        }
        function ci(a) {
          return (a.video ? a.video.drmInfos : []).concat(a.audio ? a.audio.drmInfos : []);
        }
        function Th(a) {
          a.i.forEach(function(b, c) {
            var d = b.Uf, e = c.expiration;
            isNaN(e) && (e = Infinity);
            e != d && (a.C.onExpirationUpdated(c.sessionId, e), b.Uf = e);
          });
        }
        function ni(a) {
          a = a.i.values();
          return vh(a, function(b) {
            return b.loaded;
          });
        }
        function mi(a) {
          for (var b = t(a.h && a.h.keyIds || /* @__PURE__ */ new Set([])), c = b.next(); !c.done; c = b.next()) if ("usable" !== a.Y.get(c.value)) return false;
          return true;
        }
        function bi(a, b) {
          var c = [];
          b.forEach(function(d, e) {
            c.push({ keySystem: e, licenseServerUri: d, distinctiveIdentifierRequired: false, persistentStateRequired: false, audioRobustness: "", videoRobustness: "", serverCertificate: null, serverCertificateUri: "", initData: [], keyIds: /* @__PURE__ */ new Set() });
          });
          a = t(a);
          for (b = a.next(); !b.done; b = a.next()) b = b.value, b.video && (b.video.drmInfos = c), b.audio && (b.audio.drmInfos = c);
        }
        function si(a, b, c, d, e, f, g, h) {
          var k2 = [];
          a = t(a);
          for (var l = a.next(), m = {}; !l.done; m = { va: void 0 }, l = a.next()) {
            m.va = l.value;
            b.includes(m.va.encryptionScheme) || b.push(m.va.encryptionScheme);
            "org.w3.clearkey" == m.va.keySystem && m.va.licenseServerUri.startsWith("data:application/json;base64,") ? k2.includes(m.va.licenseServerUri) || k2.push(m.va.licenseServerUri) : c.includes(m.va.licenseServerUri) || c.push(m.va.licenseServerUri);
            e.includes(m.va.serverCertificateUri) || e.push(m.va.serverCertificateUri);
            m.va.serverCertificate && (d.some(/* @__PURE__ */ function(q) {
              return function(u) {
                return Pb(u, q.va.serverCertificate);
              };
            }(m)) || d.push(m.va.serverCertificate));
            if (m.va.initData) {
              l = t(m.va.initData);
              for (var n = l.next(), p = {}; !n.done; p = { Lf: void 0 }, n = l.next()) p.Lf = n.value, f.some(/* @__PURE__ */ function(q) {
                return function(u) {
                  var w = q.Lf;
                  return u.keyId && u.keyId == w.keyId ? true : u.initDataType == w.initDataType && Pb(u.initData, w.initData);
                };
              }(p)) || f.push(p.Lf);
            }
            if (m.va.keyIds) for (l = t(m.va.keyIds), n = l.next(); !n.done; n = l.next()) g.add(n.value);
            if (m.va.keySystemUris && h) for (m = t(m.va.keySystemUris), l = m.next(); !l.done; l = m.next()) h.add(l.value);
          }
          if (1 == k2.length) c.push(k2[0]);
          else if (0 < k2.length) {
            b = [];
            k2 = t(k2);
            for (d = k2.next(); !d.done; d = k2.next()) d = window2.atob(d.value.split("data:application/json;base64,").pop()), d = JSON.parse(d), b.push.apply(b, y(d.keys));
            k2 = JSON.stringify({ keys: b });
            c.push("data:application/json;base64," + window2.btoa(k2));
          }
        }
        function di(a, b, c, d) {
          var e = a.keySystem;
          if (e && ("org.w3.clearkey" != e || !a.licenseServerUri)) {
            b.size && b.get(e) && (b = b.get(e), a.licenseServerUri = b);
            a.keyIds || (a.keyIds = /* @__PURE__ */ new Set());
            if (c = c.get(e)) a.distinctiveIdentifierRequired || (a.distinctiveIdentifierRequired = c.distinctiveIdentifierRequired), a.persistentStateRequired || (a.persistentStateRequired = c.persistentStateRequired), a.serverCertificate || (a.serverCertificate = c.serverCertificate), c.sessionType && (a.sessionType = c.sessionType), a.serverCertificateUri || (a.serverCertificateUri = c.serverCertificateUri);
            d[e] && (a.keySystem = d[e]);
            window2.cast && window2.cast.__platform__ && "com.microsoft.playready" == e && (a.keySystem = "com.chromecast.playready");
          }
        }
        function ai(a, b) {
          a = wh(a);
          if (0 != a.size) {
            a = Yc(a);
            b = t(b);
            for (var c = b.next(); !c.done; c = b.next()) c = c.value, c.video && (c.video.drmInfos = [a]), c.audio && (c.audio.drmInfos = [a]);
          }
        }
        var Bi = 1, vi = 5, zi = 0.5;
        function Ci(a, b, c) {
          c = void 0 === c ? true : c;
          this.h = a;
          this.g = /* @__PURE__ */ new Set([a]);
          b = b || [];
          a = t(b);
          for (b = a.next(); !b.done; b = a.next()) this.add(b.value, c);
        }
        Ci.prototype.add = function(a, b) {
          var c = this.h;
          b = void 0 === b ? true : b;
          var d;
          if (!(d = !!c.audio != !!a.audio || !!c.video != !!a.video || c.language != a.language) && (d = c.audio && a.audio)) {
            d = c.audio;
            var e = a.audio;
            d = !(!((!d.channelsCount || !e.channelsCount || 2 < d.channelsCount || 2 < e.channelsCount) && d.channelsCount != e.channelsCount || d.spatialAudio !== e.spatialAudio || b && !Di(d, e)) && Ei(d.roles, e.roles) && d.groupId === e.groupId);
          }
          !d && (d = c.video && a.video) && (c = c.video, d = a.video, d = !((!b || Di(c, d)) && Ei(c.roles, d.roles)));
          return d ? false : (this.g.add(a), true);
        };
        Ci.prototype.values = function() {
          return this.g.values();
        };
        function Di(a, b) {
          if (a.mimeType != b.mimeType) return false;
          a = a.codecs.split(",").map(function(d) {
            return tf(d);
          });
          b = b.codecs.split(",").map(function(d) {
            return tf(d);
          });
          if (a.length != b.length) return false;
          a.sort();
          b.sort();
          for (var c = 0; c < a.length; c++) if (a[c] != b[c]) return false;
          return true;
        }
        function Ei(a, b) {
          a = new Set(a);
          b = new Set(b);
          a.delete("main");
          b.delete("main");
          if (a.size != b.size) return false;
          a = t(a);
          for (var c = a.next(); !c.done; c = a.next()) if (!b.has(c.value)) return false;
          return true;
        }
        T("shaka.media.AdaptationSet", Ci);
        T("shaka.config.CodecSwitchingStrategy", { RELOAD: "reload", SMOOTH: "smooth" });
        function Fi() {
        }
        Fi.prototype.create = function() {
        };
        Fi.prototype.configure = function() {
        };
        T("shaka.media.AdaptationSetCriteria", Fi);
        function Gi() {
          this.g = Hi;
          this.i = (/* @__PURE__ */ new Map()).set(Hi, 2).set(Ii, 1);
          this.h = 0;
        }
        var Ii = 0, Hi = 1;
        function Ji(a, b, c) {
          this.g = a;
          this.i = b;
          this.h = c;
        }
        function Ki(a, b) {
          return Q(function(c) {
            if (1 == c.g) return G(c, fg(a.h, b, a.g.drm.preferredKeySystems, a.g.drm.keySystemsMapping), 2);
            a.g.streaming.dontChooseCodecs || bg(b, a.g.preferredVideoCodecs, a.g.preferredAudioCodecs, a.g.preferredDecodingAttributes, a.g.preferredTextFormats);
            if (!b.variants.some(Fg)) throw new U(2, 4, 4032);
            return c.return(Li(a, b));
          });
        }
        function Mi(a, b) {
          var c = a.g.restrictions;
          a = a.i;
          var d = false;
          b = t(b.variants);
          for (var e = b.next(); !e.done; e = b.next()) {
            e = e.value;
            var f = e.allowedByApplication;
            e.allowedByApplication = eg(e, c, a);
            f != e.allowedByApplication && (d = true);
          }
          return d;
        }
        function Li(a, b) {
          var c = Mi(a, b);
          if (b) {
            var d = a.h ? a.h.h : null;
            if (d && a.h.A) for (var e = t(b.variants), f = e.next(); !f.done; f = e.next()) f = f.value, Ni(a, d.keySystem, f.video), Ni(a, d.keySystem, f.audio);
            Oi(a, b);
          }
          return c;
        }
        function Ni(a, b, c) {
          if (c) {
            c = t(c.drmInfos);
            for (var d = c.next(); !d.done; d = c.next()) if (d = d.value, d.keySystem == b) {
              d = t(d.initData || []);
              for (var e = d.next(); !e.done; e = d.next()) e = e.value, gi(a.h, e.initDataType, e.initData);
            }
          }
        }
        function Oi(a, b) {
          a = a.h ? a.h.Yd() : {};
          var c = Object.keys(a);
          c = c.length && "00" == c[0];
          var d = false, e = false, f = /* @__PURE__ */ new Set(), g = /* @__PURE__ */ new Set();
          b = t(b.variants);
          for (var h = b.next(); !h.done; h = b.next()) {
            h = h.value;
            var k2 = [];
            h.audio && k2.push(h.audio);
            h.video && k2.push(h.video);
            k2 = t(k2);
            for (var l = k2.next(); !l.done; l = k2.next()) if (l = l.value, l.keyIds.size) {
              l = t(l.keyIds);
              for (var m = l.next(); !m.done; m = l.next()) {
                m = m.value;
                var n = a[c ? "00" : m];
                n ? Pi.includes(n) && g.add(n) : f.add(m);
              }
            }
            h.allowedByApplication ? h.allowedByKeySystem && (d = true) : e = true;
          }
          if (!d) throw a = {
            hasAppRestrictions: e,
            missingKeys: Array.from(f),
            restrictedKeyStatuses: Array.from(g)
          }, new U(2, 4, 4012, a);
        }
        var Pi = ["output-restricted", "internal-error"];
        function Qi() {
        }
        function Ri(a, b) {
          Si.set(a, b);
        }
        function Ti() {
          var a = {};
          if (fc()) for (var b = t(Si.keys()), c = b.next(); !c.done; c = b.next()) a[c.value] = true;
          b = t(["application/dash+xml", "application/x-mpegurl", "application/vnd.apple.mpegurl", "application/vnd.ms-sstr+xml"]);
          for (c = b.next(); !c.done; c = b.next()) c = c.value, a[c] = fc() ? Si.has(c) : gc(c);
          return a;
        }
        function Ui(a, b) {
          if (b) {
            var c = Si.get(b.toLowerCase());
            if (c) return c;
          }
          throw new U(2, 4, 4e3, a, b);
        }
        T("shaka.media.ManifestParser", Qi);
        Qi.unregisterParserByMime = function(a) {
          Si.delete(a);
        };
        Qi.registerParserByMime = Ri;
        Qi.registerParserByExtension = function() {
          sb("ManifestParser.registerParserByExtension", "Please use an ManifestParser with registerParserByMime function.");
        };
        Qi.AccessibilityPurpose = { Lk: "visually impaired", bk: "hard of hearing" };
        var Si = /* @__PURE__ */ new Map();
        function Vi(a) {
          if (!Wi) {
            Wi = true;
            var b = new Uint8Array([105, 115, 111, 109]), c = new Uint8Array([97, 118, 99, 49]), d = new Uint8Array([0, 0, 0, 1]);
            Xi = Yi("ftyp", b, d, b, c);
            b = Yi("dref", Zi);
            $i = Yi("dinf", b);
          }
          this.g = a;
        }
        function aj(a) {
          for (var b = [], c = t(a.g), d = c.next(); !d.done; d = c.next()) {
            var e = b, f = e.push;
            var g = d.value;
            d = Yi;
            var h = g.id + 1;
            var k2 = g.stream.width || 0, l = g.stream.height || 0;
            "audio" == g.type && (l = k2 = 0);
            var m = g.duration * g.timescale, n = Math.floor(m / (bj + 1));
            m = Math.floor(m % (bj + 1));
            h = new Uint8Array([1, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3].concat(y(cj(h, 4)), [0, 0, 0, 0], y(cj(n, 4)), y(cj(m, 4)), [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0], y(cj(k2, 2)), [0, 0], y(cj(
              l,
              2
            )), [0, 0]));
            h = Yi("tkhd", h);
            k2 = Yi;
            n = g.duration * g.timescale;
            l = Math.floor(n / (bj + 1));
            n = Math.floor(n % (bj + 1));
            m = g.stream.language;
            m = m.charCodeAt(0) - 96 << 10 | m.charCodeAt(1) - 96 << 5 | m.charCodeAt(2) - 96;
            l = new Uint8Array([1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3].concat(y(cj(g.timescale, 4)), y(cj(l, 4)), y(cj(n, 4)), y(cj(m, 2)), [0, 0]));
            l = Yi("mdhd", l);
            n = g;
            m = new Uint8Array([]);
            switch (n.type) {
              case "video":
                m = dj;
                break;
              case "audio":
                m = ej;
            }
            n = Yi("hdlr", m);
            a: {
              switch (g.type) {
                case "video":
                  g = Yi("minf", Yi("vmhd", fj), $i, gj(g));
                  break a;
                case "audio":
                  g = Yi("minf", Yi("smhd", hj), $i, gj(g));
                  break a;
              }
              g = new Uint8Array([]);
            }
            g = k2("mdia", l, n, g);
            d = d("trak", h, g);
            f.call(e, d);
          }
          b = Vc.apply(Pc, y(b));
          f = a.g[0];
          c = Yi;
          d = f.duration * f.timescale;
          e = Math.floor(d / (bj + 1));
          d = Math.floor(d % (bj + 1));
          e = new Uint8Array([1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3].concat(y(cj(f.timescale, 4)), y(cj(e, 4)), y(cj(d, 4)), [
            0,
            1,
            0,
            0,
            1,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            1,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            1,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            64,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            255,
            255,
            255,
            255
          ]));
          e = Yi("mvhd", e);
          d = [];
          a = t(a.g);
          for (k2 = a.next(); !k2.done; k2 = a.next()) g = d, h = g.push, k2 = new Uint8Array([0, 0, 0, 0].concat(y(cj(k2.value.id + 1, 4)), [0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])), k2 = Yi("trex", k2), h.call(g, k2);
          a = Vc.apply(Pc, y(d));
          a = Yi("mvex", a);
          d = [];
          if (f.encrypted) {
            f = t(f.stream.drmInfos);
            for (g = f.next(); !g.done; g = f.next()) if (g = g.value, g.initData) for (g = t(g.initData), h = g.next(); !h.done; h = g.next()) d.push(h.value.initData);
            f = Vc.apply(Pc, y(d));
          } else f = new Uint8Array([]);
          a = c("moov", e, b, a, f);
          b = new Uint8Array(Xi.byteLength + a.byteLength);
          b.set(Xi);
          b.set(a, Xi.byteLength);
          return b;
        }
        function gj(a) {
          var b = Yi, c = "aac";
          a.codecs.includes("mp3") ? c = "mp3" : a.codecs.includes("ac-3") ? c = mc() ? "ec-3" : "ac-3" : a.codecs.includes("ec-3") ? c = "ec-3" : a.codecs.includes("opus") && (c = "opus");
          var d = new Uint8Array([]);
          switch (a.type) {
            case "video":
              if (a.codecs.includes("avc1")) {
                c = a.stream.width || 0;
                d = a.stream.height || 0;
                if (0 < a.Ca.byteLength) var e = Yi("avcC", a.Ca);
                else {
                  e = Yi;
                  for (var f = 7, g = [], h = [], k2 = 0, l = 0, m = 0, n = 0; n < a.mb.length; n++) {
                    var p = ij(a.mb[n]);
                    switch (p[0] & 31) {
                      case 7:
                        g.push(p);
                        f += p.length + 2;
                        break;
                      case 8:
                        h.push(p), f += p.length + 2;
                    }
                  }
                  0 < g.length && (k2 = g[0][1], m = g[0][2], l = g[0][3]);
                  f = new Uint8Array(f);
                  n = 0;
                  f[n++] = 1;
                  f[n++] = k2;
                  f[n++] = m;
                  f[n++] = l;
                  f[n++] = 255;
                  f[n++] = 224 | g.length;
                  for (k2 = 0; k2 < g.length; k2++) f[n++] = (g[k2].length & 65280) >> 8, f[n++] = g[k2].length & 255, f.set(g[k2], n), n += g[k2].length;
                  f[n++] = h.length;
                  for (g = 0; g < h.length; g++) f[n++] = (h[g].length & 65280) >> 8, f[n++] = h[g].length & 255, f.set(h[g], n), n += h[g].length;
                  e = e("avcC", f);
                }
                c = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0].concat(y(cj(c, 2)), y(cj(d, 2)), [
                  0,
                  72,
                  0,
                  0,
                  0,
                  72,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  1,
                  19,
                  118,
                  105,
                  100,
                  101,
                  111,
                  106,
                  115,
                  45,
                  99,
                  111,
                  110,
                  116,
                  114,
                  105,
                  98,
                  45,
                  104,
                  108,
                  115,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  24,
                  17,
                  17
                ]));
                d = "avc1";
                h = jj(a);
                g = new Uint8Array([]);
                a.encrypted && (g = kj(0, a.stream, a.codecs), d = "encv");
                d = Yi(d, c, e, h, g);
              } else a.codecs.includes("hvc1") && (d = a.stream.width || 0, e = a.stream.height || 0, c = new Uint8Array([]), 0 < a.Ca.byteLength && (c = Yi("hvcC", a.Ca)), d = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0].concat(y(cj(d, 2)), y(cj(e, 2)), [
                0,
                72,
                0,
                0,
                0,
                72,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                1,
                19,
                118,
                105,
                100,
                101,
                111,
                106,
                115,
                45,
                99,
                111,
                110,
                116,
                114,
                105,
                98,
                45,
                104,
                108,
                115,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                24,
                17,
                17
              ])), e = "hvc1", h = jj(a), g = new Uint8Array([]), a.encrypted && (g = kj(0, a.stream, a.codecs), e = "encv"), d = Yi(e, d, c, h, g));
              break;
            case "audio":
              if ("mp3" == c) a = Yi(".mp3", lj(a));
              else if ("ac-3" == c) c = Yi("dac3", a.ra), d = "ac-3", e = new Uint8Array([]), a.encrypted && (e = kj(0, a.stream, a.codecs), d = "enca"), a = Yi(d, lj(a), c, e);
              else if ("ec-3" == c) c = Yi("dec3", a.ra), d = "ec-3", e = new Uint8Array([]), a.encrypted && (e = kj(0, a.stream, a.codecs), d = "enca"), a = Yi(d, lj(a), c, e);
              else if ("opus" == c) c = Yi("dOps", a.ra), d = "Opus", e = new Uint8Array([]), a.encrypted && (e = kj(0, a.stream, a.codecs), d = "enca"), a = Yi(d, lj(a), c, e);
              else {
                if (0 < a.ra.byteLength) c = Yi("esds", a.ra);
                else {
                  c = Yi;
                  d = a.id + 1;
                  e = a.stream.channelsCount || 2;
                  g = a.stream.audioSamplingRate || 44100;
                  k2 = $c("audio", a.codecs.split(","));
                  l = { 96e3: 0, 88200: 1, 64e3: 2, 48e3: 3, 44100: 4, 32e3: 5, 24e3: 6, 22050: 7, 16e3: 8, 12e3: 9, 11025: 10, 8e3: 11, 7350: 12 };
                  h = l[g];
                  if ("mp4a.40.5" === k2 || "mp4a.40.29" === k2) h = l[2 * g];
                  g = parseInt(
                    k2.split(".").pop(),
                    10
                  );
                  d = new Uint8Array([0, 0, 0, 0, 3, 25].concat(y(cj(d, 2)), [0, 4, 17, 64, 21, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5, 2, g << 3 | h >>> 1, h << 7 | e << 3, 6, 1, 2]));
                  c = c("esds", d);
                }
                d = "mp4a";
                e = new Uint8Array([]);
                a.encrypted && (e = kj(0, a.stream, a.codecs), d = "enca");
                a = Yi(d, lj(a), c, e);
              }
              d = a;
          }
          a = Yi("stsd", mj, d);
          return b("stbl", a, Yi("stts", nj), Yi("stsc", oj), Yi("stsz", pj), Yi("stco", qj));
        }
        function jj(a) {
          if (!a.Ia && !a.Ka) return new Uint8Array([]);
          var b = a.Ka;
          a = new Uint8Array([].concat(y(cj(a.Ia, 4)), y(cj(b, 4))));
          return Yi("pasp", a);
        }
        function lj(a) {
          return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, a.stream.channelsCount || 2, 0, 16, 0, 0, 0, 0].concat(y(cj(a.stream.audioSamplingRate || 44100, 2)), [0, 0]));
        }
        function kj(a, b, c) {
          a = Yi;
          c = new Uint8Array([].concat(y(cj(rj(c.substring(0, c.indexOf("."))), 4))));
          c = Yi("frma", c);
          var d = "cenc";
          var e = b.drmInfos[0];
          e && e.encryptionScheme && (d = e.encryptionScheme);
          d = new Uint8Array([0, 0, 0, 0].concat(y(cj(rj(d), 4)), [0, 1, 0, 0]));
          d = Yi("schm", d);
          e = Yi;
          var f = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);
          b = t(b.drmInfos);
          for (var g = b.next(); !g.done; g = b.next()) if ((g = g.value) && g.keyIds && g.keyIds.size) {
            g = t(g.keyIds);
            for (var h = g.next(); !h.done; h = g.next()) f = ij(h.value);
          }
          b = new Uint8Array([
            0,
            0,
            0,
            0,
            0,
            0,
            1,
            8
          ]);
          b = Yi("tenc", b, f);
          return a("sinf", c, d, e("schi", b));
        }
        function sj(a) {
          var b = [];
          a = t(a.g);
          for (var c = a.next(); !c.done; c = a.next()) {
            c = c.value;
            var d = b.push, e = d.apply;
            var f = Yi;
            var g = new Uint8Array([0, 0, 0, 0].concat(y(cj(c.data ? c.data.Db : 0, 4))));
            g = Yi("mfhd", g);
            var h;
            var k2 = c.data ? c.data.jb : [];
            var l = new Uint8Array(4 + k2.length);
            for (h = 0; h < k2.length; h++) {
              var m = k2[h].flags;
              l[h + 4] = m.Ya << 4 | m.$a << 2 | m.Za;
            }
            k2 = Yi("sdtp", l);
            var n = k2.length + 92;
            l = Yi;
            h = new Uint8Array([0, 0, 0, 58].concat(y(cj(c.id + 1, 4)), [0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]));
            h = Yi("tfhd", h);
            m = c.data ? c.data.baseMediaDecodeTime : 0;
            var p = Math.floor(m % (bj + 1));
            m = new Uint8Array([1, 0, 0, 0].concat(y(cj(Math.floor(m / (bj + 1)), 4)), y(cj(p, 4))));
            m = Yi("tfdt", m);
            var q = n;
            n = c.data ? c.data.jb : [];
            p = n.length;
            var u = 12 + 16 * p, w = new Uint8Array(u);
            q += 8 + u;
            w.set(["video" === c.type ? 1 : 0, 0, 15, 1].concat(y(cj(p, 4)), y(cj(q, 4))), 0);
            for (q = 0; q < p; q++) {
              var v = n[q];
              u = cj(v.duration, 4);
              var x = cj(v.size, 4), z = v.flags;
              v = cj(v.eb, 4);
              w.set([].concat(y(u), y(x), [z.hb << 2 | z.Ya, z.$a << 6 | z.Za << 4 | z.ib, z.Xa & 61440, z.Xa & 15], y(v)), 12 + 16 * q);
            }
            n = Yi("trun", w);
            k2 = l("traf", h, m, n, k2);
            f = f(
              "moof",
              g,
              k2
            );
            e.call(d, b, [f, tj(c)]);
          }
          return Vc.apply(Pc, y(b));
        }
        function tj(a) {
          a = (a.data ? a.data.jb : []).map(function(b) {
            return b.data;
          });
          a = Vc.apply(Pc, y(a));
          return Yi("mdat", a);
        }
        function cj(a, b) {
          var c = [];
          for (--b; 0 <= b; b--) c.push(a >> 8 * b & 255);
          return c;
        }
        function ij(a) {
          for (var b = new Uint8Array(a.length / 2), c = 0; c < a.length / 2; c += 1) b[c] = parseInt(String(a[2 * c] + a[2 * c + 1]), 16);
          return b;
        }
        function rj(a) {
          for (var b = 0, c = 0; c < a.length; c += 1) b |= a.charCodeAt(c) << 8 * (a.length - c - 1);
          return b;
        }
        function Yi(a) {
          var b = Na.apply(1, arguments), c = uj.get(a);
          c || (c = [a.charCodeAt(0), a.charCodeAt(1), a.charCodeAt(2), a.charCodeAt(3)], uj.set(a, c));
          for (var d = 8, e = b.length - 1; 0 <= e; e--) d += b[e].byteLength;
          e = new Uint8Array(d);
          e[0] = d >> 24 & 255;
          e[1] = d >> 16 & 255;
          e[2] = d >> 8 & 255;
          e[3] = d & 255;
          e.set(c, 4);
          c = 0;
          for (d = 8; c < b.length; c++) e.set(b[c], d), d += b[c].byteLength;
          return e;
        }
        var Wi = false, bj = Math.pow(2, 32) - 1, uj = /* @__PURE__ */ new Map(), dj = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 118, 105, 100, 101, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 86, 105, 100, 101, 111, 72, 97, 110, 100, 108, 101, 114, 0]), ej = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 115, 111, 117, 110, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 83, 111, 117, 110, 100, 72, 97, 110, 100, 108, 101, 114, 0]), nj = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]), oj = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]), qj = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]), pj = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]), fj = new Uint8Array([0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0]), hj = new Uint8Array([
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ]), mj = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1]), Xi = new Uint8Array([]), Zi = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 12, 117, 114, 108, 32, 0, 0, 0, 1]), $i = new Uint8Array([]);
        function vj(a, b, c) {
          function d(q) {
            n.push({ box: q, fh: 1701733217 });
          }
          function e(q) {
            n.push({ box: q, fh: 1701733238 });
          }
          function f(q) {
            k2 = true;
            q.parser.stop();
          }
          function g(q) {
            m.push(q);
            Jh(q);
          }
          var h = b = Qb(b), k2 = false, l, m = [], n = [];
          new Eh().box("moov", g).box("trak", g).box("mdia", g).box("minf", g).box("stbl", g).S("stsd", function(q) {
            l = q;
            m.push(q);
            Lh(q);
          }).S("encv", f).S("enca", f).S("dvav", e).S("dva1", e).S("dvh1", e).S("dvhe", e).S("dvc1", e).S("dvi1", e).S("hev1", e).S("hvc1", e).S("avc1", e).S("avc3", e).S("ac-3", d).S("ec-3", d).S(
            "ac-4",
            d
          ).S("Opus", d).S("fLaC", d).S("mp4a", d).parse(b);
          if (k2) return b;
          if (0 == n.length || !l) throw ib(Uc(b)), new U(2, 3, 3019, c);
          n.reverse();
          c = t(n);
          for (var p = c.next(); !p.done; p = c.next()) p = p.value, h = wj(a, h, l, p.box, m, p.fh);
          return ic() && xc() && !jc() ? (a = new Uint8Array(b.byteLength + h.byteLength), a.set(h), a.set(b, h.byteLength), a) : h;
        }
        function wj(a, b, c, d, e, f) {
          var g = kj(new Vi([]), a, d.name), h = b.subarray(d.start, d.start + d.size);
          a = new Uint8Array(d.size + g.byteLength);
          a.set(h, 0);
          Vb(a).setUint32(4, f);
          a.set(g, d.size);
          xj(a, 0, a.byteLength);
          f = new Uint8Array(b.byteLength + a.byteLength);
          d = jc() || ic() ? d.start : d.start + d.size;
          g = b.subarray(d);
          f.set(b.subarray(0, d));
          f.set(a, d);
          f.set(g, d + a.byteLength);
          b = t(e);
          for (e = b.next(); !e.done; e = b.next()) e = e.value, xj(f, e.start, e.size + a.byteLength);
          a = Vb(f, c.start);
          c = Kh(c);
          b = a.getUint32(c);
          a.setUint32(c, b + 1);
          return f;
        }
        function xj(a, b, c) {
          a = Vb(a, b);
          b = a.getUint32(0);
          0 != b && (1 == b ? (a.setUint32(8, c >> 32), a.setUint32(12, c & 4294967295)) : a.setUint32(0, c));
        }
        function yj(a) {
          function b(e) {
            d.push({ start: e.start, size: e.size });
            Jh(e);
          }
          var c = Qb(a), d = [];
          new Eh().box("moov", b).box("trak", b).box("mdia", b).box("minf", b).box("stbl", b).box("stsd", function(e) {
            d.push({ start: e.start, size: e.size });
            for (var f = Vb(c, e.start), g = 0; g < e.size - 3; g++) {
              var h = f.getUint32(g);
              1633889587 == h ? f.setUint32(g, 1700998451) : 1684103987 == h && f.setUint32(g, 1684366131);
            }
          }).parse(c);
          return c;
        }
        ;
        function zj(a, b, c, d, e, f, g, h) {
          this.N = a;
          this.Sa = b;
          this.wa = c;
          this.Wc = void 0 === d ? null : d;
          this.timescale = void 0 === e ? null : e;
          this.h = void 0 === f ? null : f;
          this.aesKey = void 0 === g ? null : g;
          this.g = this.mimeType = this.codecs = null;
          this.encrypted = void 0 === h ? false : h;
        }
        zj.prototype.tc = function() {
          return this.Sa;
        };
        zj.prototype.sc = function() {
          return this.wa;
        };
        zj.prototype.Kd = function(a) {
          this.h = a;
        };
        zj.prototype.Qb = function() {
          return this.h;
        };
        function Aj(a, b) {
          return a === b ? true : a && b ? a.tc() == b.tc() && a.sc() == b.sc() && Dd(a.N().sort(), b.N().sort()) && Pb(a.Qb(), b.Qb()) : a == b;
        }
        T("shaka.media.InitSegmentReference", zj);
        zj.prototype.getEndByte = zj.prototype.sc;
        zj.prototype.getStartByte = zj.prototype.tc;
        function Bj(a, b, c, d, e, f, g, h, k2, l, m, n, p, q, u, w) {
          l = void 0 === l ? [] : l;
          q = void 0 === q ? Cj : q;
          this.startTime = a;
          this.j = this.endTime = b;
          this.C = c;
          this.Sa = d;
          this.wa = e;
          this.ca = f;
          this.timestampOffset = g;
          this.appendWindowStart = h;
          this.appendWindowEnd = k2;
          this.g = l;
          this.tilesLayout = void 0 === m ? "" : m;
          this.B = void 0 === n ? null : n;
          this.h = void 0 === p ? null : p;
          this.status = q;
          this.preload = false;
          this.l = true;
          this.m = false;
          this.aesKey = void 0 === u ? null : u;
          this.thumbnailSprite = null;
          this.i = -1;
          this.A = void 0 === w ? false : w;
          this.F = this.o = false;
          a = t(this.g);
          for (b = a.next(); !b.done; b = a.next()) b.value.dh();
          this.A && this.g.length && this.g[this.g.length - 1].bh();
          this.s = this.bandwidth = this.mimeType = this.codecs = null;
          this.G = false;
        }
        r = Bj.prototype;
        r.N = function() {
          return this.C();
        };
        r.getStartTime = function() {
          return this.startTime;
        };
        r.ki = function() {
          return this.endTime;
        };
        r.tc = function() {
          return this.Sa;
        };
        r.sc = function() {
          return this.wa;
        };
        r.Hi = function() {
          return this.tilesLayout;
        };
        r.Gi = function() {
          return this.B;
        };
        r.cc = function() {
          return this.status;
        };
        r.Zi = function() {
          this.status = Dj;
        };
        r.Rf = function() {
          this.preload = true;
        };
        r.isPreload = function() {
          return this.preload;
        };
        r.Vc = function() {
          this.l = false;
        };
        r.Ri = function() {
          return this.l;
        };
        r.dh = function() {
          this.o = true;
        };
        r.Ti = function() {
          return this.o;
        };
        r.bh = function() {
          this.F = true;
        };
        r.Si = function() {
          return this.F;
        };
        r.ah = function() {
          this.m = true;
        };
        r.Ni = function() {
          return this.m;
        };
        r.De = function(a) {
          this.thumbnailSprite = a;
        };
        r.Ei = function() {
          return this.thumbnailSprite;
        };
        r.offset = function(a) {
          this.startTime += a;
          this.endTime += a;
          this.j += a;
          for (var b = t(this.g), c = b.next(); !c.done; c = b.next()) c = c.value, c.startTime += a, c.endTime += a, c.j += a;
        };
        r.og = function(a) {
          null == this.h ? ab("Sync attempted without sync time!") : (a = this.h - a - this.startTime, 1e-3 <= Math.abs(a) && this.offset(a));
        };
        r.Kd = function(a, b) {
          this.s = a;
          this.G = void 0 === b ? false : b;
        };
        r.Qb = function(a) {
          var b = this.s;
          (void 0 === a || a) && this.G && (this.s = null);
          return b;
        };
        function Ej(a, b) {
          a.ca = b;
          a = t(a.g);
          for (var c = a.next(); !c.done; c = a.next()) Ej(c.value, b);
        }
        T("shaka.media.SegmentReference", Bj);
        Bj.prototype.getSegmentData = Bj.prototype.Qb;
        Bj.prototype.setSegmentData = Bj.prototype.Kd;
        Bj.prototype.syncAgainst = Bj.prototype.og;
        Bj.prototype.offset = Bj.prototype.offset;
        Bj.prototype.getThumbnailSprite = Bj.prototype.Ei;
        Bj.prototype.setThumbnailSprite = Bj.prototype.De;
        Bj.prototype.hasByterangeOptimization = Bj.prototype.Ni;
        Bj.prototype.markAsByterangeOptimization = Bj.prototype.ah;
        Bj.prototype.isLastPartial = Bj.prototype.Si;
        Bj.prototype.markAsLastPartial = Bj.prototype.bh;
        Bj.prototype.isPartial = Bj.prototype.Ti;
        Bj.prototype.markAsPartial = Bj.prototype.dh;
        Bj.prototype.isIndependent = Bj.prototype.Ri;
        Bj.prototype.markAsNonIndependent = Bj.prototype.Vc;
        Bj.prototype.isPreload = Bj.prototype.isPreload;
        Bj.prototype.markAsPreload = Bj.prototype.Rf;
        Bj.prototype.markAsUnavailable = Bj.prototype.Zi;
        Bj.prototype.getStatus = Bj.prototype.cc;
        Bj.prototype.getTileDuration = Bj.prototype.Gi;
        Bj.prototype.getTilesLayout = Bj.prototype.Hi;
        Bj.prototype.getEndByte = Bj.prototype.sc;
        Bj.prototype.getStartByte = Bj.prototype.tc;
        Bj.prototype.getEndTime = Bj.prototype.ki;
        Bj.prototype.getStartTime = Bj.prototype.getStartTime;
        Bj.prototype.getUris = Bj.prototype.N;
        var Cj = 0, Dj = 1;
        Bj.Status = { Lj: Cj, Jk: Dj, jk: 2 };
        function Fj(a) {
          return 1 == a.length && 1e-4 > a.end(0) - a.start(0);
        }
        function Gj(a) {
          return !a || Fj(a) ? null : a.length ? a.end(a.length - 1) : null;
        }
        function Hj(a, b) {
          return !a || !a.length || Fj(a) || b > a.end(a.length - 1) ? false : b >= a.start(0);
        }
        function Ij(a, b) {
          if (!a || !a.length || Fj(a)) return 0;
          var c = 0;
          a = t(Jj(a));
          for (var d = a.next(); !d.done; d = a.next()) {
            var e = d.value;
            d = e.start;
            e = e.end;
            e > b && (c += e - Math.max(d, b));
          }
          return c;
        }
        function Kj(a, b, c) {
          if (!a || !a.length || Fj(a)) return null;
          a = Jj(a).findIndex(function(d, e, f) {
            return d.start > b && (0 == e || f[e - 1].end - b <= c);
          });
          return 0 <= a ? a : null;
        }
        function Jj(a) {
          if (!a) return [];
          for (var b = [], c = 0; c < a.length; c++) b.push({ start: a.start(c), end: a.end(c) });
          return b;
        }
        ;
        function Lj() {
        }
        function Mj(a, b) {
          var c = document.createElement("source");
          c.src = a;
          c.type = void 0 === b ? "" : b;
          return c;
        }
        function Nj(a) {
          for (; a.firstChild; ) a.removeChild(a.firstChild);
        }
        T("shaka.util.Dom", Lj);
        Lj.removeAllChildren = Nj;
        function Oj() {
        }
        function Pj(a, b) {
          return b + 10 <= a.length && 73 === a[b] && 68 === a[b + 1] && 51 === a[b + 2] && 255 > a[b + 3] && 255 > a[b + 4] && 128 > a[b + 6] && 128 > a[b + 7] && 128 > a[b + 8] && 128 > a[b + 9] ? true : false;
        }
        function Qj(a, b) {
          return b + 10 <= a.length && 51 === a[b] && 68 === a[b + 1] && 73 === a[b + 2] && 255 > a[b + 3] && 255 > a[b + 4] && 128 > a[b + 6] && 128 > a[b + 7] && 128 > a[b + 8] && 128 > a[b + 9] ? true : false;
        }
        function Rj(a, b) {
          var c = (a[b] & 127) << 21;
          c |= (a[b + 1] & 127) << 14;
          c |= (a[b + 2] & 127) << 7;
          return c |= a[b + 3] & 127;
        }
        function Sj(a) {
          var b = { key: a.type, description: "", data: "", mimeType: null, pictureType: null };
          if ("APIC" === a.type) {
            if (2 > a.size || 3 !== a.data[0]) return null;
            var c = a.data.subarray(1).indexOf(0);
            if (-1 === c) return null;
            var d = Gc(Qb(a.data, 1, c)), e = a.data[2 + c], f = a.data.subarray(3 + c).indexOf(0);
            if (-1 === f) return null;
            var g = Gc(Qb(a.data, 3 + c, f)), h;
            "-->" === d ? h = Gc(Qb(a.data, 4 + c + f)) : h = Sb(a.data.subarray(4 + c + f));
            b.mimeType = d;
            b.pictureType = e;
            b.description = g;
            b.data = h;
            return b;
          }
          if ("TXXX" === a.type) {
            if (2 > a.size || 3 !== a.data[0]) return null;
            d = a.data.subarray(1).indexOf(0);
            if (-1 === d) return null;
            c = Gc(Qb(a.data, 1, d));
            a = Gc(Qb(a.data, 2 + d)).replace(/\0*$/, "");
            b.description = c;
            b.data = a;
            return b;
          }
          if ("WXXX" === a.type) {
            if (2 > a.size || 3 !== a.data[0]) return null;
            d = a.data.subarray(1).indexOf(0);
            if (-1 === d) return null;
            c = Gc(Qb(a.data, 1, d));
            a = Gc(Qb(a.data, 2 + d)).replace(/\0*$/, "");
            b.description = c;
            b.data = a;
            return b;
          }
          if ("PRIV" === a.type) {
            if (2 > a.size) return null;
            c = a.data.indexOf(0);
            if (-1 === c) return null;
            c = Gc(Qb(a.data, 0, c));
            b.description = c;
            "com.apple.streaming.transportStreamTimestamp" == c ? (c = a.data.subarray(c.length + 1), a = c[3] & 1, c = (c[4] << 23) + (c[5] << 15) + (c[6] << 7) + c[7], c /= 45, a && (c += 4772185884e-2), b.data = c) : (a = Sb(a.data.subarray(c.length + 1)), b.data = a);
            return b;
          }
          if ("T" === a.type[0]) {
            if (2 > a.size || 3 !== a.data[0]) return null;
            a = Gc(a.data.subarray(1)).replace(/\0*$/, "");
            b.data = a;
            return b;
          }
          return "W" === a.type[0] ? (a = Gc(a.data).replace(/\0*$/, ""), b.data = a, b) : a.data ? (b.data = Sb(a.data), b) : null;
        }
        function Tj(a) {
          for (var b = 0, c = []; Pj(a, b); ) {
            var d = Rj(a, b + 6);
            a[b + 5] >> 6 & 1 && (b += 10);
            b += 10;
            for (d = b + d; b + 10 < d; ) {
              var e = a.subarray(b), f = Rj(e, 4);
              e = { type: String.fromCharCode(e[0], e[1], e[2], e[3]), size: f, data: e.subarray(10, 10 + f) };
              (f = Sj(e)) && c.push(f);
              b += e.size + 10;
            }
            Qj(a, b) && (b += 10);
          }
          return c;
        }
        function Uj(a, b) {
          for (var c = b = void 0 === b ? 0 : b, d = 0; Pj(a, b); ) a[b + 5] >> 6 & 1 && (d += 10), d += 10, d += Rj(a, b + 6), Qj(a, b + 10) && (d += 10), b += d;
          return 0 < d ? a.subarray(c, c + d) : new Uint8Array([]);
        }
        T("shaka.util.Id3Utils", Oj);
        Oj.getID3Data = Uj;
        Oj.getID3Frames = Tj;
        function Vj(a, b) {
          var c = null, d = null, e = null, f = a.R();
          b & 1 && (e = a.bd());
          b & 2 && a.skip(4);
          b & 8 && (c = a.R());
          b & 16 && (d = a.R());
          return { trackId: f, ld: c, md: d, Nk: e };
        }
        function Wj(a, b) {
          return 1 == b ? (b = a.R(), a = a.R(), { baseMediaDecodeTime: b * Math.pow(2, 32) + a }) : { baseMediaDecodeTime: a.R() };
        }
        function fk(a, b) {
          1 == b ? (a.skip(8), a.skip(8)) : (a.skip(4), a.skip(4));
          b = a.R();
          a.skip(4);
          a = a.na();
          return { timescale: b, language: String.fromCharCode((a >> 10) + 96) + String.fromCharCode(((a & 960) >> 5) + 96) + String.fromCharCode((a & 31) + 96) };
        }
        function gk(a, b, c) {
          var d = a.R(), e = [], f = null;
          c & 1 && (f = a.R());
          c & 4 && a.skip(4);
          for (var g = 0; g < d; g++) {
            var h = { eg: null, sampleSize: null, ye: null };
            c & 256 && (h.eg = a.R());
            c & 512 && (h.sampleSize = a.R());
            c & 1024 && a.skip(4);
            c & 2048 && (h.ye = 0 == b ? a.R() : a.mh());
            e.push(h);
          }
          return { Rk: d, dg: e, bi: f };
        }
        function hk(a) {
          a.skip(6);
          a.skip(2);
          a.skip(8);
          var b = a.na();
          a.skip(2);
          a.skip(2);
          a.skip(2);
          a = a.na() + a.na() / 65536;
          return { channelCount: b, sampleRate: a };
        }
        function ik(a) {
          a = a.R();
          return { codec: Ih(a) };
        }
        function jk(a) {
          var b = null, c = null, d = a.Cb(4);
          var e = String.fromCharCode(d[0]);
          e += String.fromCharCode(d[1]);
          e += String.fromCharCode(d[2]);
          e += String.fromCharCode(d[3]);
          if ("nclx" === e) {
            switch (a.na()) {
              case 1:
              case 5:
              case 6:
              case 7:
                b = "srgb";
                break;
              case 9:
                b = "rec2020";
                break;
              case 11:
              case 12:
                b = "p3";
            }
            d = a.na();
            a.na();
            switch (d) {
              case 1:
              case 6:
              case 13:
              case 14:
              case 15:
                c = "SDR";
                break;
              case 16:
                c = "PQ";
                break;
              case 18:
                c = "HLG";
            }
          }
          return { colorGamut: b, Nd: c };
        }
        function kk(a, b) {
          b = void 0 === b ? false : b;
          a = a.toString(16).toUpperCase();
          return b ? a : ("0" + a).slice(-2);
        }
        function lk(a) {
          return (10 > a ? "0" : "") + a;
        }
        ;
        function mk(a, b) {
          this.j = a;
          if (void 0 === b ? 0 : b) {
            b = new Uint8Array(a.byteLength);
            for (var c = 0, d = 0; d < a.byteLength; d++) 2 <= d && 3 == a[d] && 0 == a[d - 1] && 0 == a[d - 2] || (b[c] = a[d], c++);
            this.j = Qb(b, 0, c);
          }
          this.i = this.j.byteLength;
          this.g = this.h = 0;
        }
        function nk(a) {
          var b = a.j.byteLength - a.i, c = new Uint8Array(4), d = Math.min(4, a.i);
          0 !== d && (c.set(a.j.subarray(b, b + d)), a.h = new Bh(c, 0).R(), a.g = 8 * d, a.i -= d);
        }
        function ok(a, b) {
          if (a.g <= b) {
            b -= a.g;
            var c = Math.floor(b / 8);
            b -= 8 * c;
            a.g -= c;
            nk(a);
          }
          a.h <<= b;
          a.g -= b;
        }
        function pk(a, b) {
          var c = Math.min(a.g, b), d = a.h >>> 32 - c;
          a.g -= c;
          0 < a.g ? a.h <<= c : 0 < a.i && nk(a);
          c = b - c;
          return 0 < c ? d << c | pk(a, c) : d;
        }
        function qk(a) {
          var b;
          for (b = 0; b < a.g; ++b) if (0 !== (a.h & 2147483648 >>> b)) return a.h <<= b, a.g -= b, b;
          nk(a);
          return b + qk(a);
        }
        function rk(a) {
          ok(a, 1 + qk(a));
        }
        function W(a) {
          var b = qk(a);
          return pk(a, b + 1) - 1;
        }
        function sk(a) {
          a = W(a);
          return 1 & a ? 1 + a >>> 1 : -1 * (a >>> 1);
        }
        function tk(a) {
          return 1 === pk(a, 1);
        }
        function uk(a) {
          return pk(a, 8);
        }
        function vk(a, b) {
          for (var c = 8, d = 8, e = 0; e < b; e++) 0 !== d && (d = sk(a), d = (c + d + 256) % 256), c = 0 === d ? c : d;
        }
        function wk(a) {
          uk(a);
          W(a);
          return W(a);
        }
        T("shaka.util.ExpGolomb", mk);
        function xk() {
          this.G = null;
          this.H = false;
          this.m = this.I = null;
          this.j = [];
          this.g = [];
          this.A = this.B = null;
          this.i = [];
          this.h = [];
          this.C = null;
          this.l = [];
          this.F = this.o = this.s = null;
        }
        r = xk.prototype;
        r.clearData = function() {
          this.j = [];
          this.g = [];
          this.i = [];
          this.h = [];
          this.l = [];
        };
        r.parse = function(a) {
          if (564 > a.length) return this;
          for (var b = Math.max(0, yk(a)), c = a.length - (a.length + b) % 188, d = false, e = b; e < c; e += 188) if (71 == a[e]) {
            var f = !!(a[e + 1] & 64), g = ((a[e + 1] & 31) << 8) + a[e + 2];
            if (1 < (a[e + 3] & 48) >> 4) {
              var h = e + 5 + a[e + 4];
              if (h == e + 188) continue;
            } else h = e + 4;
            switch (g) {
              case 0:
                f && (h += a[h] + 1);
                this.G = (a[h + 10] & 31) << 8 | a[h + 11];
                break;
              case 17:
              case 8191:
                break;
              case this.G:
                f && (h += a[h] + 1);
                f = a;
                g = { audio: -1, video: -1, ce: -1, audioCodec: "", videoCodec: "" };
                var k2 = h + 3 + ((f[h + 1] & 15) << 8 | f[h + 2]) - 4;
                for (h += 12 + ((f[h + 10] & 15) << 8 | f[h + 11]); h < k2; ) {
                  var l = (f[h + 1] & 31) << 8 | f[h + 2], m = (f[h + 3] & 15) << 8 | f[h + 4];
                  switch (f[h]) {
                    case 6:
                      if (0 < m) for (var n = h + 5, p = m; 2 < p; ) {
                        var q = f[n + 1] + 2;
                        switch (f[n]) {
                          case 5:
                            var u = Ic(f.subarray(n + 2, n + q));
                            -1 == g.audio && "Opus" === u ? (g.audio = l, g.audioCodec = "opus") : -1 == g.video && "AV01" === u && (g.video = l, g.videoCodec = "av1");
                            break;
                          case 106:
                            -1 == g.audio && (g.audio = l, g.audioCodec = "ac3");
                            break;
                          case 122:
                            -1 == g.audio && (g.audio = l, g.audioCodec = "ec3");
                            break;
                          case 124:
                            -1 == g.audio && (g.audio = l, g.audioCodec = "aac");
                            break;
                          case 127:
                            "opus" == g.audioCodec && (u = null, 128 === f[n + 2] && (u = f[n + 3]), null != u && (this.F = { channelCount: 0 === (u & 15) ? 2 : u & 15, Wh: u, sampleRate: 48e3 }));
                        }
                        n += q;
                        p -= q;
                      }
                      break;
                    case 15:
                      -1 == g.audio && (g.audio = l, g.audioCodec = "aac");
                      break;
                    case 17:
                      -1 == g.audio && (g.audio = l, g.audioCodec = "aac-loas");
                      break;
                    case 21:
                      -1 == g.ce && (g.ce = l);
                      break;
                    case 27:
                      -1 == g.video && (g.video = l, g.videoCodec = "avc");
                      break;
                    case 3:
                    case 4:
                      -1 == g.audio && (g.audio = l, g.audioCodec = "mp3");
                      break;
                    case 36:
                      -1 == g.video && (g.video = l, g.videoCodec = "hvc");
                      break;
                    case 129:
                      -1 == g.audio && (g.audio = l, g.audioCodec = "ac3");
                      break;
                    case 132:
                    case 135:
                      -1 == g.audio && (g.audio = l, g.audioCodec = "ec3");
                  }
                  h += m + 5;
                }
                f = g;
                -1 != f.video && (this.I = f.video, this.m = f.videoCodec);
                -1 != f.audio && (this.B = f.audio, this.A = f.audioCodec);
                -1 != f.ce && (this.C = f.ce);
                d && !this.H && (d = false, e = b - 188);
                this.H = true;
                break;
              case this.I:
                h = a.subarray(h, e + 188);
                f ? this.j.push([h]) : this.j.length && this.j[this.j.length - 1] && this.j[this.j.length - 1].push(h);
                break;
              case this.B:
                h = a.subarray(h, e + 188);
                f ? this.i.push([h]) : this.i.length && this.i[this.i.length - 1] && this.i[this.i.length - 1].push(h);
                break;
              case this.C:
                h = a.subarray(h, e + 188);
                f ? this.l.push([h]) : this.l.length && this.l[this.l.length - 1] && this.l[this.l.length - 1].push(h);
                break;
              default:
                d = true;
            }
          }
          return this;
        };
        function zk(a, b) {
          if (1 !== (b[0] << 16 | b[1] << 8 | b[2])) return null;
          var c = { data: new Uint8Array(0), packetLength: b[4] << 8 | b[5], pts: null, dts: null, nalus: [] };
          if (c.packetLength && c.packetLength > b.byteLength - 6) return null;
          var d = b[7];
          if (d & 192) {
            var e = 536870912 * (b[9] & 14) + 4194304 * (b[10] & 255) + 16384 * (b[11] & 254) + 128 * (b[12] & 255) + (b[13] & 254) / 2;
            null == a.s && (a.s = e);
            c.pts = Ak(e, a.s);
            a.s = c.pts;
            c.dts = c.pts;
            d & 64 && (d = 536870912 * (b[14] & 14) + 4194304 * (b[15] & 255) + 16384 * (b[16] & 254) + 128 * (b[17] & 255) + (b[18] & 254) / 2, null == a.o && (a.o = d), c.dts = Ak(
              d,
              a.o
            ));
            a.o = c.dts;
          }
          a = b[8] + 9;
          if (b.byteLength <= a) return null;
          c.data = b.subarray(a);
          return c;
        }
        r.fj = function(a) {
          sb("TsParser.parseAvcNalus", "Please use parseNalus function instead.");
          return this.Wf(a, { Dd: null, state: null });
        };
        r.Wf = function(a, b) {
          var c = a.pts ? a.pts / 9e4 : null;
          a = a.data;
          var d = a.byteLength, e = 1;
          "hvc" == this.m && (e = 2);
          var f = b.state || 0, g = f, h = 0, k2 = [], l = -1, m = 0;
          -1 == f && (l = 0, m = "hvc" == this.m ? a[0] >> 1 & 63 : a[0] & 31, f = 0, h = 1);
          for (; h < d; ) {
            var n = a[h++];
            if (f) if (1 === f) f = n ? 0 : 2;
            else if (n) if (1 == n) {
              n = h - f - 1;
              if (0 <= l) k2.push({ data: a.subarray(l + e, n), fullData: a.subarray(l, n), type: m, time: c, state: null });
              else if (f = k2.length ? k2[k2.length - 1] : b.Dd) g && h <= 4 - g && f.state && (f.data = f.data.subarray(0, f.data.byteLength - g), f.fullData = f.fullData.subarray(0, f.fullData.byteLength - g)), 0 < n && (n = a.subarray(0, n), f.data = Vc(f.data, n), f.fullData = Vc(f.fullData, n), f.state = 0);
              h < d ? (m = "hvc" == this.m ? a[h] >> 1 & 63 : a[h] & 31, l = h, f = 0) : f = -1;
            } else f = 0;
            else f = 3;
            else f = n ? 0 : 1;
          }
          0 <= l && 0 <= f && k2.push({ data: a.subarray(l + e, d), fullData: a.subarray(l, d), type: m, time: c, state: f });
          !k2.length && b.Dd && (c = k2.length ? k2[k2.length - 1] : b.Dd) && (c.data = Vc(c.data, a), c.fullData = Vc(c.fullData, a));
          b.state = f;
          return k2;
        };
        r.getMetadata = function() {
          for (var a = [], b = t(this.l), c = b.next(); !c.done; c = b.next()) c = Vc.apply(Pc, y(c.value)), (c = zk(this, c)) && a.push({ cueTime: c.pts ? c.pts / 9e4 : null, data: c.data, frames: Tj(c.data), dts: c.dts, pts: c.pts });
          return a;
        };
        r.fb = function() {
          if (this.i.length && !this.h.length) {
            for (var a = false, b = t(this.i), c = b.next(); !c.done; c = b.next()) {
              var d = Vc.apply(Pc, y(c.value)), e = zk(this, d);
              c = this.h.length ? this.h[this.h.length - 1] : null;
              e && null != e.pts && null != e.dts && (!c || c.pts != e.pts && c.dts != e.dts) ? (this.h.length && e.dts < (c.dts || 0) && (a = true), this.h.push(e)) : this.h.length && (d = e ? e.data : d) && (c = this.h.pop(), c.data = Vc(c.data, d), this.h.push(c));
            }
            a && (this.h = this.h.sort(function(f, g) {
              var h = (f.pts || 0) - (g.pts || 0);
              return (f.dts || 0) - (g.dts || 0) || h;
            }));
          }
          return this.h;
        };
        r.vc = function(a) {
          a = void 0 === a ? true : a;
          if (this.j.length && !this.g.length) {
            for (var b = false, c = t(this.j), d = c.next(); !d.done; d = c.next()) {
              var e = Vc.apply(Pc, y(d.value)), f = zk(this, e);
              d = this.g.length ? this.g[this.g.length - 1] : null;
              f && null != f.pts && null != f.dts && (!d || d.pts != f.pts && d.dts != f.dts) ? (this.g.length && f.dts < (d.dts || 0) && (b = true), this.g.push(f)) : this.g.length && (e = f ? f.data : e) && (d = this.g.pop(), d.data = Vc(d.data, e), this.g.push(d));
            }
            if (a) {
              c = { Dd: null, state: null };
              d = [];
              e = t(this.g);
              for (f = e.next(); !f.done; f = e.next()) f = f.value, f.nalus = this.Wf(f, c), f.nalus.length && (d.push(f), c.Dd = f.nalus[f.nalus.length - 1]);
              this.g = d;
            }
            b && (this.g = this.g.sort(function(g, h) {
              var k2 = (g.pts || 0) - (h.pts || 0);
              return (g.dts || 0) - (h.dts || 0) || k2;
            }));
          }
          return a ? this.g : (a = this.g, this.g = [], a);
        };
        r.getStartTime = function(a) {
          if ("audio" == a) {
            a = null;
            var b = this.fb();
            b.length && (a = b[0], a = Math.min(a.dts, a.pts) / 9e4);
            return a;
          }
          return "video" == a ? (a = null, b = this.vc(false), b.length && (a = b[0], a = Math.min(a.dts, a.pts) / 9e4), a) : null;
        };
        r.od = function() {
          return { audio: this.A, video: this.m };
        };
        r.be = function() {
          for (var a = [], b = t(this.vc()), c = b.next(); !c.done; c = b.next()) a.push.apply(a, y(c.value.nalus));
          return a;
        };
        r.Ki = function() {
          sb("TsParser.getVideoResolution", "Please use getVideoInfo function instead.");
          var a = this.Jf();
          return { height: a.height, width: a.width };
        };
        r.Jf = function() {
          return "hvc" == this.m ? Bk(this) : Ck(this);
        };
        function Dk(a) {
          var b = a.vc();
          return 1 < b.length && (a = b[0].pts, b = b[1].pts, !isNaN(b - a)) ? String(1 / (b - a) * 9e4) : null;
        }
        function Ck(a) {
          var b = { height: null, width: null, codec: null, frameRate: null }, c = a.be();
          if (!c.length) return b;
          c = c.find(function(q) {
            return 7 == q.type;
          });
          if (!c) return b;
          c = new mk(c.data);
          var d = uk(c), e = uk(c), f = uk(c);
          rk(c);
          if (Ek.includes(d)) {
            var g = W(c);
            3 === g && ok(c, 1);
            rk(c);
            rk(c);
            ok(c, 1);
            if (tk(c)) {
              g = 3 !== g ? 8 : 12;
              for (var h = 0; h < g; h++) tk(c) && (6 > h ? vk(c, 16) : vk(c, 64));
            }
          }
          rk(c);
          g = W(c);
          if (0 === g) W(c);
          else if (1 === g) for (ok(c, 1), rk(c), rk(c), g = W(c), h = 0; h < g; h++) rk(c);
          rk(c);
          ok(c, 1);
          g = W(c);
          h = W(c);
          var k2 = pk(c, 1);
          0 === k2 && ok(c, 1);
          ok(
            c,
            1
          );
          var l = 0, m = 0, n = 0, p = 0;
          tk(c) && (l = W(c), m = W(c), n = W(c), p = W(c));
          b.height = String((2 - k2) * (h + 1) * 16 - 2 * n - 2 * p);
          b.width = String(16 * (g + 1) - 2 * l - 2 * m);
          b.codec = "avc1." + ("0" + d.toString(16).toUpperCase()).slice(-2) + ("0" + e.toString(16).toUpperCase()).slice(-2) + ("0" + f.toString(16).toUpperCase()).slice(-2);
          b.frameRate = Dk(a);
          return b;
        }
        function Bk(a) {
          var b = { height: null, width: null, codec: null, frameRate: null }, c = a.be();
          if (!c.length) return b;
          c = c.find(function(F) {
            return 33 == F.type;
          });
          if (!c) return b;
          var d = new mk(c.fullData, true);
          uk(d);
          uk(d);
          pk(d, 4);
          var e = pk(d, 3);
          tk(d);
          var f = pk(d, 2), g = pk(d, 1), h = pk(d, 5), k2 = pk(d, 32);
          c = uk(d);
          for (var l = uk(d), m = uk(d), n = uk(d), p = uk(d), q = uk(d), u = uk(d), w = [], v = [], x = 0; x < e; x++) w.push(tk(d)), v.push(tk(d));
          if (0 < e) for (x = e; 8 > x; x++) pk(d, 2);
          for (x = 0; x < e; x++) w[x] && pk(d, 88), v[x] && uk(d);
          W(d);
          e = W(d);
          3 == e && pk(d, 1);
          w = W(d);
          v = W(d);
          var z = x = 0, C = 0, D = 0;
          tk(d) && (x += W(d), z += W(d), C += W(d), D += W(d));
          b.width = String(w - (x + z) * (1 === e || 2 === e ? 2 : 1));
          b.height = String(v - (C + D) * (1 === e ? 2 : 1));
          d = function(F) {
            for (var B = 0, A = 0; 32 > A; A++) B |= (F >> A & 1) << 31 - A;
            return B >>> 0;
          }(k2);
          g = 1 == g ? "H" : "L";
          f = "hvc1" + ("." + ["", "A", "B", "C"][f] + h);
          f += "." + d.toString(16).toUpperCase();
          f += "." + g + u;
          q && (f += "." + q.toString(16).toUpperCase());
          p && (f += "." + p.toString(16).toUpperCase());
          n && (f += "." + n.toString(16).toUpperCase());
          m && (f += "." + m.toString(16).toUpperCase());
          l && (f += "." + l.toString(16).toUpperCase());
          c && (f += "." + c.toString(16).toUpperCase());
          b.codec = f;
          b.frameRate = Dk(a);
          return b;
        }
        function Ak(a, b) {
          var c = 1;
          for (a > b && (c = -1); 4294967296 < Math.abs(b - a); ) a += 8589934592 * c;
          return a;
        }
        function Fk(a) {
          return 0 > yk(a) ? false : true;
        }
        function yk(a) {
          for (var b = Math.min(1e3, a.length - 564), c = 0; c < b; ) {
            if (71 == a[c] && 71 == a[c + 188] && 71 == a[c + 376]) return c;
            c++;
          }
          return -1;
        }
        T("shaka.util.TsParser", xk);
        xk.syncOffset = yk;
        xk.probe = Fk;
        xk.prototype.getVideoInfo = xk.prototype.Jf;
        xk.prototype.getVideoResolution = xk.prototype.Ki;
        xk.prototype.getVideoNalus = xk.prototype.be;
        xk.prototype.getCodecs = xk.prototype.od;
        xk.prototype.getStartTime = xk.prototype.getStartTime;
        xk.prototype.getVideoData = xk.prototype.vc;
        xk.prototype.getAudioData = xk.prototype.fb;
        xk.prototype.getMetadata = xk.prototype.getMetadata;
        xk.prototype.parseNalus = xk.prototype.Wf;
        xk.prototype.parseAvcNalus = xk.prototype.fj;
        xk.prototype.parse = xk.prototype.parse;
        xk.prototype.clearData = xk.prototype.clearData;
        xk.Timescale = 9e4;
        var Ek = [100, 110, 122, 244, 44, 83, 86, 118, 128, 138, 139, 134];
        function Gk(a, b, c, d) {
          var e = this;
          this.g = a;
          this.K = c;
          this.B = null;
          this.ea = b;
          this.l = /* @__PURE__ */ new Map();
          this.A = /* @__PURE__ */ new Map();
          this.Aa = /* @__PURE__ */ new Map();
          this.h = null;
          this.Ea = false;
          this.I = d || null;
          this.s = /* @__PURE__ */ new Map();
          this.o = new lb();
          this.j = /* @__PURE__ */ new Map();
          this.L = null;
          this.G = new Tg();
          this.Ga = "";
          this.Na = false;
          this.sa = true;
          this.Z = false;
          this.C = this.M = null;
          this.i = Hk(this, this.G);
          this.ya = this.H = false;
          this.O = new sh(function() {
            return Ik(e);
          });
          this.F = false;
          this.P = "UNKNOWN";
          this.La = this.Ma = false;
          this.Fa = new Tg();
          this.m = false;
          this.pa = null;
          this.Y = /* @__PURE__ */ new Map();
          this.ka = this.T = this.oa = this.W = null;
          this.fa = new Tg();
          this.g.remote && (this.Z = "disconnected" != this.g.remote.state, this.o.D(this.g.remote, "connect", function() {
            e.Z = "disconnected" != e.g.remote.state;
          }), this.o.D(this.g.remote, "connecting", function() {
            e.Z = "disconnected" != e.g.remote.state;
          }), this.o.D(this.g.remote, "disconnect", function() {
            e.Z = "disconnected" != e.g.remote.state;
          }));
        }
        function Hk(a, b) {
          a.sa = true;
          if (window2.ManagedMediaSource) {
            a.C || (a.g.disableRemotePlayback = true);
            var c = new ManagedMediaSource();
            a.o.D(c, "startstreaming", function() {
              a.sa = true;
            });
            a.o.D(c, "endstreaming", function() {
              a.sa = false;
            });
          } else c = new MediaSource();
          a.o.ma(c, "sourceopen", function() {
            URL.revokeObjectURL(a.Ga);
            b.resolve();
          });
          a.o.ma(a.g, "playing", function() {
            a.Na = true;
          });
          a.Ga = Jk(c);
          a.g.removeAttribute("src");
          a.M && a.g.removeChild(a.M);
          a.C && a.g.removeChild(a.C);
          a.M = Mj(a.Ga);
          a.g.appendChild(a.M);
          a.C && a.g.appendChild(a.C);
          a.g.load();
          return c;
        }
        function Kk(a, b, c) {
          a.g && window2.ManagedMediaSource && a.i && (a.C && a.g.removeChild(a.C), a.C = Mj(b, c), a.g.appendChild(a.C), a.g.disableRemotePlayback = false);
        }
        function Lk(a, b) {
          var c, d, e, f, g, h, k2, l, m, n, p;
          return Q(function(q) {
            if (1 == q.g) return a.createSegmentIndex ? G(q, a.createSegmentIndex(), 2) : q.u(2);
            if (!a.segmentIndex) return q.return(false);
            if (0 == a.segmentIndex.getNumReferences()) return q.return(true);
            c = ed;
            d = /* @__PURE__ */ new Set();
            e = t(a.segmentIndex);
            for (f = e.next(); !f.done; f = e.next()) if (g = f.value, h = g.mimeType || a.mimeType || "", k2 = g.codecs || a.codecs || "", h != a.mimeType || k2 != a.codecs) {
              if (l = h + ":" + k2, !d.has(l)) {
                if (d.add(l), b == c.za) {
                  if (m = kf(h, k2), !Bf(m)) return q.return(false);
                } else if (b == c.la ? k2 = sg(k2) : b == c.V && (k2 = rg(k2, h)), n = of(a, h, k2), p = mf(h, k2), !ld(n) && !df(p)) return q.return(false);
              }
            }
            return q.return(true);
          });
        }
        function Mk() {
          var a = 'video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.05.01",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(y(lf)), b = {};
          a = t(a);
          for (var c = a.next(); !c.done; c = a.next()) {
            c = c.value;
            Bf(c) ? b[c] = true : b[c] = fc() ? ld(c) || (df(c) ? true : false) : gc(c);
            var d = c.split(";")[0];
            b[d] = b[d] || b[c];
          }
          return b;
        }
        r = Gk.prototype;
        r.destroy = function() {
          return this.O.destroy();
        };
        function Ik(a) {
          var b, c, d, e, f, g, h, k2, l, m, n, p, q, u, w;
          return Q(function(v) {
            if (1 == v.g) {
              b = [];
              c = t(a.s);
              for (d = c.next(); !d.done; d = c.next()) for (e = d.value, f = t(e), g = f.next().value, h = f.next().value, k2 = h[0], l = g, a.s.set(l, h.slice(0, 1)), k2 && b.push(k2.p.catch(If)), m = t(h.slice(1)), n = m.next(); !n.done; n = m.next()) p = n.value, p.p.reject(new U(2, 7, 7003, void 0));
              a.h && b.push(a.h.destroy());
              return G(v, Promise.all(b), 2);
            }
            q = t(a.j.values());
            for (u = q.next(); !u.done; u = q.next()) w = u.value, w.destroy();
            a.o && (a.o.release(), a.o = null);
            a.g && a.C && a.g.removeChild(a.C);
            a.g && a.M && (a.g.removeChild(a.M), a.g.load(), a.g.disableRemotePlayback = false);
            a.g = null;
            a.M = null;
            a.C = null;
            a.B = null;
            a.i = null;
            a.h = null;
            a.ea = null;
            a.l.clear();
            a.Aa.clear();
            a.j.clear();
            a.L = null;
            a.s.clear();
            a.I = null;
            a.Y.clear();
            a.K = null;
            I(v);
          });
        }
        r.init = function(a, b, c, d) {
          b = void 0 === b ? false : b;
          c = void 0 === c ? "UNKNOWN" : c;
          d = void 0 === d ? false : d;
          var e = this, f, g, h, k2, l, m;
          return Q(function(n) {
            switch (n.g) {
              case 1:
                return f = ed, G(n, e.G, 2);
              case 2:
                if (!Nk(e) && !Ok(e)) {
                  n.u(3);
                  break;
                }
                ab("Expected MediaSource to be open during init(); reopening the media source.");
                e.G = new Tg();
                e.i = Hk(e, e.G);
                return G(n, e.G, 3);
              case 3:
                e.F = b, e.P = c, e.Ma = d, e.La = !e.F && "HLS" == e.P && !e.Ma, e.Y.clear(), e.W = null, e.oa = null, e.T = null, e.ka = null, e.fa = new Tg(), g = t(a.keys()), h = g.next();
              case 5:
                if (h.done) {
                  n.u(7);
                  break;
                }
                k2 = h.value;
                l = a.get(k2);
                return G(n, Pk(e, k2, l, l.codecs), 8);
              case 8:
                e.m ? (e.s.set(f.V, []), e.s.set(f.la, [])) : e.s.set(k2, []);
                h = g.next();
                n.u(5);
                break;
              case 7:
                (m = a.get(f.V)) && m.isAudioMuxedInVideo && (e.m = true), I(n);
            }
          });
        };
        function Pk(a, b, c, d) {
          var e, f, g, h, k2, l, m, n, p, q, u, w;
          return Q(function(v) {
            switch (v.g) {
              case 1:
                return e = ed, f = Va, g = Wa, G(v, Lk(c, b), 2);
              case 2:
                g.call(f, v.h, "Type negotiation should happen before MediaSourceEngine.init!");
                b == e.V && d && (d = rg(d, c.mimeType));
                h = kf(c.mimeType, d);
                if (b == e.za) {
                  Qk(a, h, a.F, c.external);
                  v.u(0);
                  break;
                }
                k2 = a.B.forceTransmux;
                if (!ld(h) || !a.F && lf.includes(h)) k2 = true;
                l = mf(c.mimeType, d);
                if (!k2) {
                  v.u(4);
                  break;
                }
                m = ad(e.V, (d || "").split(","));
                n = ad(e.la, (d || "").split(","));
                if (!m || !n) {
                  v.u(5);
                  break;
                }
                a.m = true;
                return G(
                  v,
                  Pk(a, e.V, c, m),
                  6
                );
              case 6:
                return G(v, Pk(a, e.la, c, n), 7);
              case 7:
                return v.return();
              case 5:
                if (p = df(l)) q = p(), a.j.set(b, q), h = q.convertCodecs(b, l);
              case 4:
                u = h + a.B.addExtraFeaturesToSourceBuffer(h);
                th(a.O);
                try {
                  w = a.i.addSourceBuffer(u);
                } catch (x) {
                  throw new U(2, 3, 3015, x, "The mediaSource_ status was " + a.i.readyState + " expected 'open'", null);
                }
                a.F && (w.mode = Rk);
                a.o.D(w, "error", function() {
                  var x = a.s.get(b)[0];
                  x.p.reject(new U(2, 3, 3014, a.g.error ? a.g.error.code : 0, x.uri));
                });
                a.o.D(w, "updateend", function() {
                  return Sk(a, b);
                });
                a.l.set(b, w);
                a.A.set(b, h);
                a.Aa.set(b, !!c.drmInfos.length);
                I(v);
            }
          });
        }
        r.configure = function(a) {
          this.B = a;
          this.h && (this.h.A = a.modifyCueCallback);
        };
        function Tk(a) {
          return a.sa && !a.Z && !a.H;
        }
        function Qk(a, b, c, d) {
          a.h || (a.h = new xf(a.ea), a.h && (a.h.A = a.B.modifyCueCallback));
          var e = a.h;
          d = d || a.Ea;
          a = a.P;
          "application/cea-608" == b || "application/cea-708" == b ? e.i = null : (e.i = zf.get(b)(), e.i.setSequenceMode ? e.i.setSequenceMode(c) : sb("Text parsers w/ setSequenceMode", 'Text parsers should have a "setSequenceMode" method!'), e.i.setManifestType ? e.i.setManifestType(a) : sb("Text parsers w/ setManifestType", 'Text parsers should have a "setManifestType" method!'), e.B = d);
        }
        function Nk(a) {
          return a.H ? false : a.i ? "ended" == a.i.readyState : true;
        }
        function Ok(a) {
          return a.H ? false : a.i ? "closed" == a.i.readyState : true;
        }
        function Uk(a, b) {
          a.l.size ? b == cd ? a = a.h.g : (a = Vk(a, b), a = !a || Fj(a) ? null : 1 == a.length && 0 > a.start(0) ? 0 : a.length ? a.start(0) : null) : a = null;
          return a;
        }
        function Wk(a, b) {
          return a.l.size ? b == cd ? a.h.h : Gj(Vk(a, b)) : null;
        }
        function Xk(a, b, c) {
          if (b == cd) return a = a.h, null == a.h || a.h < c ? 0 : a.h - Math.max(c, a.g);
          a = Vk(a, b);
          return Ij(a, c);
        }
        r.Fb = function() {
          var a = { total: this.H ? [] : Jj(this.g.buffered), audio: Jj(Vk(this, "audio")), video: Jj(Vk(this, "video")), text: [] };
          if (this.h) {
            var b = this.h.g, c = this.h.h;
            null != b && null != c && a.text.push({ start: b, end: c });
          }
          return a;
        };
        function Vk(a, b) {
          if (a.H || a.Z) return null;
          try {
            return a.l.get(b).buffered;
          } catch (c) {
            return a.l.has(b), null;
          }
        }
        function Yk(a, b, c, d, e, f) {
          var g = null, h = [], k2 = Qb(c);
          if (lf.includes(f)) b = Tj(k2), b.length && d && ((c = b.find(function(q) {
            return "com.apple.streaming.transportStreamTimestamp" === q.description;
          })) && (g = Math.round(c.data) / 1e3), a.K.onMetadata([{ cueTime: d.startTime, data: k2, frames: b, dts: d.startTime, pts: d.startTime }], 0, d.endTime));
          else if (f.includes("/mp4") && d && d.ca && d.ca.timescale) {
            var l = d.ca.timescale;
            if (!isNaN(l)) {
              var m = null != e.emsgSchemeIdUris && 0 < e.emsgSchemeIdUris.length || a.B.dispatchAllEmsgBoxes, n = 0, p = false;
              k2 = new Eh();
              m && k2.S("emsg", function(q) {
                var u = e.emsgSchemeIdUris;
                if (0 === q.version) {
                  var w = q.reader.Bc();
                  var v = q.reader.Bc();
                  var x = q.reader.R();
                  var z = q.reader.R();
                  var C = q.reader.R();
                  var D = q.reader.R();
                  var F = d.startTime + z / x;
                } else x = q.reader.R(), F = q.reader.bd() / x + d.timestampOffset, z = F - d.startTime, C = q.reader.R(), D = q.reader.R(), w = q.reader.Bc(), v = q.reader.Bc();
                q = q.reader.Cb(q.reader.getLength() - q.reader.Ba());
                if (u && u.includes(w) || a.B.dispatchAllEmsgBoxes) {
                  if ("urn:mpeg:dash:event:2012" == w) a.K.ej();
                  else if (u = F + C / x, x = {
                    startTime: F,
                    endTime: u,
                    schemeIdUri: w,
                    value: v,
                    timescale: x,
                    presentationTimeDelta: z,
                    eventDuration: C,
                    id: D,
                    messageData: q
                  }, D = (/* @__PURE__ */ new Map()).set("detail", x), new V("emsg", D).cancelable = true, a.K.cj(x), "https://aomedia.org/emsg/ID3" == w || "https://developer.apple.com/streaming/emsg-id3" == w) {
                    if (w = Tj(q), w.length) a.K.onMetadata([{ cueTime: F, data: q, frames: w, dts: F, pts: F }], 0, u);
                  }
                }
              });
              k2.S("prft", function(q) {
                var u = q.reader, w = q.version;
                u.R();
                q = u.R();
                var v = u.R();
                q = 1e3 * q + v / Math.pow(2, 32) * 1e3;
                0 === w ? u = u.R() : (w = u.R(), u = u.R(), u = w * Math.pow(2, 32) + u);
                q = new Date(new Date(Date.UTC(1900, 0, 1, 0, 0, 0)).getTime() + q).getTime();
                u = (/* @__PURE__ */ new Map()).set("detail", { wallClockTime: q, programStartDate: new Date(q - u / l * 1e3) });
                u = new V("prft", u);
                a.K.onEvent(u);
              }).box("moof", Jh).box("traf", Jh).S("tfdt", function(q) {
                p || (n = Wj(q.reader, q.version).baseMediaDecodeTime / l, p = true, m || q.parser.stop());
              }).parse(c, true);
              p && 0 == d.timestampOffset && (g = n);
            }
          } else f.includes("/mp4") || f.includes("/webm") || !Fk(k2) || (a.Y.has(b) ? a.Y.get(b).clearData() : a.Y.set(b, new xk()), h = a.Y.get(b).parse(k2), k2 = h.getStartTime(b), null != k2 && (g = k2), h = h.getMetadata());
          return { timestamp: g, metadata: h };
        }
        function Zk(a, b, c, d, e, f, g, h, k2, l) {
          g = void 0 === g ? false : g;
          h = void 0 === h ? false : h;
          k2 = void 0 === k2 ? false : k2;
          l = void 0 === l ? false : l;
          var m, n, p, q, u, w, v, x, z, C, D, F, B, A, H, E, L, M;
          return Q(function(J) {
            switch (J.g) {
              case 1:
                m = ed;
                if (b != m.za) {
                  J.u(2);
                  break;
                }
                if ("HLS" != a.P) {
                  J.u(3);
                  break;
                }
                return G(J, a.Fa, 4);
              case 4:
                n = J.h, a.h.s = n;
              case 3:
                return G(J, Cf(a.h, c, d ? d.startTime : null, d ? d.endTime : null, d ? d.N()[0] : null), 5);
              case 5:
                return J.return();
              case 2:
                if (l || !a.m) {
                  J.u(6);
                  break;
                }
                return G(J, Zk(a, m.V, c, d, e, f, g, h, k2, true), 7);
              case 7:
                return G(J, Zk(
                  a,
                  m.la,
                  c,
                  d,
                  e,
                  f,
                  g,
                  h,
                  k2,
                  true
                ), 8);
              case 8:
                return J.return();
              case 6:
                if (!a.l.has(b)) return J.return();
                p = a.l.get(b).timestampOffset;
                q = a.A.get(b);
                a.j.has(b) && (q = a.j.get(b).getOriginalMimeType());
                if (d && (u = Yk(a, b, c, d, e, q), w = u.timestamp, v = u.metadata, null != w && (null == a.W && b == m.la && (a.W = w, a.oa = d.startTime, null != a.T && (x = 0, a.oa == a.ka && (x = a.W - a.T), a.fa.resolve(x))), null == a.T && b == m.V && (a.T = w, a.ka = d.startTime, null != a.W && (z = 0, a.oa == a.ka && (z = a.W - a.T), a.fa.resolve(z))), C = w, D = lf, !a.F && D.includes(a.A.get(b)) && (C = 0), F = d.startTime - C, B = Math.abs(p - F), (1e-3 <= B || g || h) && (!k2 || 0 < F || !p) && (p = F, a.La && ($k(a, b, function() {
                  return al(a, b);
                }, null), $k(a, b, function() {
                  return bl(a, b, p);
                }, null))), (A = b == m.la || !a.l.has(m.la)) && a.Fa.resolve(p)), v.length)) a.K.onMetadata(v, p, d ? d.endTime : null);
                f && b == m.la && (a.h || Qk(a, "application/cea-608", a.F, false), a.L || (H = q.split(";", 1)[0], a.L = new sd(H)), d ? (E = a.L.i(c), E.length && Gf(a.h, E, d.startTime, d.endTime, p)) : a.L.init(c, h));
                if (!a.j.has(b)) {
                  J.u(9);
                  break;
                }
                return G(J, a.j.get(b).transmux(c, e, d, a.i.duration, b), 10);
              case 10:
                c = J.h;
              case 9:
                c = cl(a, e, c, d ? d.startTime : null, b, d ? d.N()[0] : null);
                if (!d || !a.F || b == m.za) {
                  J.u(11);
                  break;
                }
                if (!g && !h) {
                  J.u(11);
                  break;
                }
                L = d.startTime;
                if ("HLS" != a.P || a.m || b != m.V || !a.l.has(m.la)) {
                  J.u(13);
                  break;
                }
                return G(J, a.fa, 14);
              case 14:
                M = J.h, 0.15 < Math.abs(M) && (L -= M);
              case 13:
                $k(a, b, function() {
                  return al(a, b);
                }, null), $k(a, b, function() {
                  return bl(a, b, L);
                }, null);
              case 11:
                return G(J, $k(a, b, function() {
                  var K = c;
                  a.I && id(a.I, K, p, e);
                  a.l.get(b).appendBuffer(K);
                }, d ? d.N()[0] : null), 15);
              case 15:
                I(J);
            }
          });
        }
        function dl(a, b) {
          var c = Wk(a, "video") || 0;
          Ef(a.h, b, c);
        }
        function el(a) {
          a.h && Ef(a.h, "", 0);
        }
        r.remove = function(a, b, c) {
          var d = this, e;
          return Q(function(f) {
            return 1 == f.g ? (e = ed, a == e.za ? G(f, d.h.remove(b, c), 0) : c > b ? G(f, $k(d, a, function() {
              return fl(d, a, b, c);
            }, null), 5) : f.u(0)) : d.m ? G(f, $k(d, e.V, function() {
              return fl(d, e.V, b, c);
            }, null), 0) : f.u(0);
          });
        };
        function gl(a, b) {
          var c;
          return Q(function(d) {
            return 1 == d.g ? (c = ed, b == c.za ? a.h ? G(d, a.h.remove(0, Infinity), 0) : d.return() : G(d, $k(a, b, function() {
              return fl(a, b, 0, a.i.duration);
            }, null), 4)) : a.m ? G(d, $k(a, c.V, function() {
              return fl(a, c.V, 0, a.i.duration);
            }, null), 0) : d.u(0);
          });
        }
        r.flush = function(a) {
          var b = this, c;
          return Q(function(d) {
            return 1 == d.g ? (c = ed, a == c.za ? d.return() : G(d, $k(b, a, function() {
              b.g.currentTime -= 1e-3;
              Sk(b, a);
            }, null), 2)) : b.m ? G(d, $k(b, c.V, function() {
              var e = c.V;
              b.g.currentTime -= 1e-3;
              Sk(b, e);
            }, null), 0) : d.u(0);
          });
        };
        function hl(a, b, c, d, e, f, g, h, k2) {
          var l, m, n;
          return Q(function(p) {
            if (1 == p.g) {
              l = ed;
              if (b == l.za) return f || (a.h.s = c), Df(a.h, d, e), p.return();
              m = [];
              return G(p, il(a, b, g, h, k2), 2);
            }
            n = p.h;
            n || (m.push($k(a, b, function() {
              return al(a, b);
            }, null)), a.m && m.push($k(a, l.V, function() {
              return al(a, l.V);
            }, null)));
            f || (m.push($k(a, b, function() {
              return bl(a, b, c);
            }, null)), a.m && m.push($k(a, l.V, function() {
              return bl(a, l.V, c);
            }, null)));
            if (0 != d || Infinity != e) m.push($k(a, b, function() {
              var q = a.l.get(b);
              q.appendWindowStart = 0;
              q.appendWindowEnd = e;
              q.appendWindowStart = d;
              Sk(a, b);
            }, null)), a.m && m.push($k(a, l.V, function() {
              var q = l.V, u = a.l.get(q);
              u.appendWindowStart = 0;
              u.appendWindowEnd = e;
              u.appendWindowStart = d;
              Sk(a, q);
            }, null));
            return m.length ? G(p, Promise.all(m), 0) : p.u(0);
          });
        }
        function jl(a, b, c) {
          var d, e;
          return Q(function(f) {
            if (1 == f.g) {
              d = ed;
              if (b == d.za) return f.return();
              b == d.la && (a.Fa = new Tg());
              if (!a.F || (e = Wk(a, b)) && 0.1 > Math.abs(e - c)) return f.return();
              $k(a, b, function() {
                return al(a, b);
              }, null);
              a.m && $k(a, d.V, function() {
                return al(a, d.V);
              }, null);
              return G(f, $k(a, b, function() {
                return bl(a, b, c);
              }, null), 2);
            }
            return a.m ? G(f, $k(a, d.V, function() {
              return bl(a, d.V, c);
            }, null), 0) : f.u(0);
          });
        }
        r.endOfStream = function(a) {
          var b = this;
          return Q(function(c) {
            return G(c, kl(b, function() {
              Nk(b) || Ok(b) || (a ? b.i.endOfStream(a) : b.i.endOfStream());
            }), 0);
          });
        };
        r.bb = function(a) {
          var b = this;
          return Q(function(c) {
            return G(c, kl(b, function() {
              if (a < b.i.duration) for (var d = t(b.l.keys()), e = d.next(); !e.done; e = d.next()) {
                e = e.value;
                var f = { start: function() {
                }, p: new Tg(), uri: null };
                b.s.get(e).unshift(f);
              }
              b.i.duration = a;
              b.pa = a;
            }), 0);
          });
        };
        r.getDuration = function() {
          return this.i.duration;
        };
        function ll(a, b, c) {
          Q(function(d) {
            return Nk(a) || Ok(a) ? d.return() : G(d, kl(a, function() {
              Nk(a) || Ok(a) || a.i.setLiveSeekableRange(b, c);
            }), 0);
          });
        }
        function ml(a) {
          Q(function(b) {
            return Nk(a) || Ok(a) ? b.return() : G(b, kl(a, function() {
              Nk(a) || Ok(a) || a.i.clearLiveSeekableRange();
            }), 0);
          });
        }
        function fl(a, b, c, d) {
          d <= c ? Sk(a, b) : a.l.get(b).remove(c, d);
        }
        function al(a, b) {
          var c = a.l.get(b), d = c.appendWindowStart, e = c.appendWindowEnd;
          c.abort();
          c.appendWindowStart = d;
          c.appendWindowEnd = e;
          Sk(a, b);
        }
        function bl(a, b, c) {
          0 > c && (c += 1e-3);
          var d = true;
          "HLS" == a.P && (d = Wk(a, b), d = !d || 0.15 < Math.abs(d - c) ? true : false);
          d && (a.l.get(b).timestampOffset = c);
          Sk(a, b);
        }
        function Sk(a, b) {
          if (!a.H) {
            var c = a.s.get(b)[0];
            c && (c.p.resolve(), nl(a, b));
          }
        }
        function $k(a, b, c, d) {
          th(a.O);
          c = { start: c, p: new Tg(), uri: d };
          a.s.get(b).push(c);
          1 == a.s.get(b).length && ol(a, b);
          return c.p;
        }
        function kl(a, b) {
          var c, d, e, f, g, h, k2, l, m, n, p, q, u;
          return Q(function(w) {
            switch (w.g) {
              case 1:
                th(a.O);
                c = [];
                d = Array.from(a.l.keys());
                e = t(d);
                f = e.next();
                for (g = {}; !f.done; g = { ready: void 0 }, f = e.next()) h = f.value, g.ready = new Tg(), k2 = { start: /* @__PURE__ */ function(v) {
                  return function() {
                    return v.ready.resolve();
                  };
                }(g), p: g.ready, uri: null }, l = a.s.get(h), l.push(k2), c.push(g.ready), 1 == l.length && k2.start();
                xa(w, 2);
                return G(w, Promise.all(c), 4);
              case 4:
                za(w, 3);
                break;
              case 2:
                throw m = Aa(w), m;
              case 3:
                return xa(w, 5, 6), G(w, b(), 6);
              case 6:
                Da(w);
                n = t(d);
                for (p = n.next(); !p.done; p = n.next()) q = p.value, nl(a, q);
                Ea(w, 0);
                break;
              case 5:
                throw u = Aa(w), new U(2, 3, 3015, u, a.g.error || "No error in the media element", null);
            }
          });
        }
        function nl(a, b) {
          a.s.get(b).shift();
          ol(a, b);
        }
        function ol(a, b) {
          var c = a.s.get(b)[0];
          if (c) try {
            c.start();
          } catch (d) {
            "QuotaExceededError" == d.name ? c.p.reject(new U(2, 3, 3017, b)) : Tk(a) ? c.p.reject(new U(2, 3, 3015, d, a.g.error || "No error in the media element", c.uri)) : c.p.reject(new U(2, 3, 3024, b)), nl(a, b);
          }
        }
        function cl(a, b, c, d, e, f) {
          d = null == d;
          var g = a.Aa.get(e), h = a.K.pi();
          if (g = a.B.insertFakeEncryptionInInit && d && g) h = $b(h), g = lc() || jc() || kc("SOPOpenBrowser") || ic() && xc() && h;
          g && "mp4" == qf(a.A.get(e)) && (c = vj(b, c, f));
          d && mc() && "mp4" == qf(a.A.get(e)) && (c = yj(c));
          return c;
        }
        function pl(a, b, c, d) {
          return $k(a, b, function() {
            if (b !== cd) {
              a.A.get(b);
              if (nd()) {
                a.j.has(b) && (a.j.get(b).destroy(), a.j.delete(b));
                d && a.j.set(b, d);
                var e = c + a.B.addExtraFeaturesToSourceBuffer(c);
                a.l.get(b).changeType(e);
                a.A.set(b, c);
              }
              Sk(a, b);
            }
          }, null);
        }
        function ql(a, b) {
          var c, d, e, f, g, h, k2, l, m, n, p, q, u, w, v, x, z, C, D, F;
          return Q(function(B) {
            switch (B.g) {
              case 1:
                if (a.H) return B.return();
                c = ed;
                a.H = true;
                a.m = false;
                d = a.g.currentTime;
                e = a.g.autoplay;
                a.g.paused || (a.ya = true);
                a.Na && (a.g.autoplay = false);
                ya(B, 2);
                a.o.Qa();
                f = t(a.j.values());
                for (g = f.next(); !g.done; g = f.next()) h = g.value, h.destroy();
                k2 = t(a.l.values());
                for (l = k2.next(); !l.done; l = k2.next()) {
                  m = l.value;
                  try {
                    a.i.removeSourceBuffer(m);
                  } catch (A) {
                  }
                }
                a.j.clear();
                a.l.clear();
                n = a.i.duration;
                a.G = new Tg();
                a.i = Hk(a, a.G);
                return G(B, a.G, 4);
              case 4:
                !isNaN(n) && n ? a.i.duration = n : !isNaN(a.pa) && a.pa && (a.i.duration = a.pa), p = new Tg(), q = a.i.sourceBuffers, u = b.size, w = 0, v = function() {
                  w++;
                  w === u && (p.resolve(), a.o.Ja(q, "addsourcebuffer", v));
                }, a.o.D(q, "addsourcebuffer", v), x = t(b.keys()), z = x.next();
              case 5:
                if (z.done) return (F = b.get(c.V)) && F.isAudioMuxedInVideo && (a.m = true), a.m && !a.s.has(c.V) && a.s.set(c.V, []), a.g.currentTime = d, G(B, p, 2);
                C = z.value;
                D = b.get(C);
                return G(B, Pk(a, C, D, D.codecs), 6);
              case 6:
                z = x.next();
                B.u(5);
                break;
              case 2:
                Da(B), a.H = false, th(a.O), a.o.ma(
                  a.g,
                  "canplaythrough",
                  function() {
                    a.O.g || (a.g.autoplay = e, a.ya && (a.ya = false, a.g.play()));
                  }
                ), Ea(B, 0);
            }
          });
        }
        function rl(a, b) {
          return kl(a, function() {
            return ql(a, b);
          });
        }
        function sl(a, b, c, d) {
          var e = false, f = ad("audio", (d || "").split(",")), g = ad("video", (d || "").split(",")), h = g;
          "audio" == b && (h = f);
          h || (h = d);
          d = kf(c, h);
          var k2 = a.B.forceTransmux;
          if (!ld(d) || !a.F && lf.includes(d)) k2 = true;
          if (k2 && (a = mf(c, h), c = df(a))) {
            var l = c();
            f && g && (e = true);
            d = l.convertCodecs(b, a);
          }
          b = rf(vf(d));
          return { sg: l, Dj: e, Cg: uf(d), codec: b, mimeType: d };
        }
        function il(a, b, c, d, e) {
          var f, g, h, k2, l, m, n, p, q, u, w, v, x, z;
          return Q(function(C) {
            if (1 == C.g) {
              f = ed;
              if (b == f.za) return C.return(false);
              g = rf(vf(a.A.get(b)));
              h = uf(a.A.get(b));
              k2 = sl(a, b, c, d);
              l = k2.sg;
              m = k2.Dj;
              n = k2.Cg;
              p = k2.codec;
              q = k2.mimeType;
              u = true;
              m && a.A.has(f.V) && (w = sl(a, f.V, c, d), v = rf(vf(a.A.get(f.V))), x = uf(a.A.get(f.V)), u = v == w.codec && x == w.Cg, w.sg && w.sg.destroy());
              if (g === p && h === n && u) return a.j.has(b) && !l ? (a.j.get(b).destroy(), a.j.delete(b)) : !a.j.has(b) && l ? a.j.set(b, l) : l && (a.j.has(b) && a.j.get(b).transmux != l.transmux ? (a.j.get(b).destroy(), a.j.delete(b), a.j.set(b, l)) : l.destroy()), C.return(false);
              z = true;
              if (a.m || m && l && !a.j.has(b)) z = false;
              if (z && "smooth" === a.B.codecSwitchingStrategy && nd()) return G(C, pl(a, b, q, l), 3);
              l && l.destroy();
              return G(C, rl(a, e), 3);
            }
            return C.return(true);
          });
        }
        function tl(a, b, c, d) {
          if (b == cd) var e = false;
          else {
            e = rf(vf(a.A.get(b)));
            var f = uf(a.A.get(b)), g = kf(c, d), h = a.B.forceTransmux;
            if (!ld(g) || !a.F && lf.includes(g)) h = true;
            c = mf(c, d);
            h && (h = df(c)) && (h = h(), g = h.convertCodecs(b, c), h.destroy());
            b = rf(vf(g));
            g = uf(g);
            e = e !== b || f !== g;
          }
          return e ? "smooth" !== a.B.codecSwitchingStrategy || !nd() || a.m : false;
        }
        var Jk = window2.URL.createObjectURL, Rk = "sequence";
        function ul(a, b, c) {
          this.i = a;
          this.C = b;
          this.o = this.l = Infinity;
          this.h = 1;
          this.g = this.j = null;
          this.A = 0;
          this.B = true;
          this.I = false;
          this.H = 0;
          this.F = void 0 === c ? true : c;
          this.G = 0;
          this.s = false;
          this.m = a;
        }
        r = ul.prototype;
        r.getDuration = function() {
          return this.l;
        };
        r.ti = function() {
          return this.h;
        };
        r.wh = function(a) {
          this.i = a;
        };
        r.bb = function(a) {
          this.l = a;
        };
        r.zi = function() {
          return this.i;
        };
        r.uh = function(a) {
          this.A = a;
        };
        r.Fc = function(a) {
          a && !this.B && (this.I = true);
          this.B = a;
        };
        r.Ce = function(a) {
          this.o = a;
        };
        r.ae = function() {
          return this.o;
        };
        r.hg = function(a) {
          this.C = a;
        };
        r.ji = function() {
          return this.C;
        };
        r.ih = function(a, b) {
          if (0 != a.length) {
            var c = (Date.now() + this.A) / 1e3;
            a = a.filter(function(e) {
              return e.start + b < c;
            });
            if (0 != a.length) {
              var d = a[a.length - 1].end + b;
              this.ne(a[0].start + b);
              this.h = a.reduce(function(e, f) {
                return Math.max(e, f.end - f.start);
              }, this.h);
              this.g = Math.max(this.g, d);
              null != this.i && this.F && !this.s && (this.i = c - this.g - this.h);
            }
          }
        };
        r.Ed = function(a) {
          if (0 != a.length) {
            var b = a[0].startTime, c = a[0].endTime, d = (Date.now() + this.A) / 1e3;
            a = t(a);
            for (var e = a.next(); !e.done; e = a.next()) e = e.value, d < e.startTime || (b = Math.min(b, e.startTime), c = Math.max(c, e.endTime), this.h = Math.max(this.h, e.endTime - e.startTime));
            this.ne(b);
            this.g = Math.max(this.g, c);
            null != this.i && this.F && !this.s && (this.i = d - this.g - this.h);
          }
        };
        r.hh = function(a, b) {
          this.ne(a);
          Infinity == b || this.U() || (this.g = Math.max(this.g, b));
        };
        r.ui = function() {
          return this.g;
        };
        r.ie = function() {
          this.s = true;
        };
        r.Ui = function() {
          return this.s;
        };
        r.vh = function(a) {
          this.m = a;
        };
        r.oi = function() {
          return this.m;
        };
        r.ne = function(a) {
          null == this.j ? this.j = a : this.I || (this.j = Math.min(this.j, a));
        };
        r.Sf = function(a) {
          this.h = Math.max(this.h, a);
        };
        r.offset = function(a) {
          null != this.j && (this.j += a);
          null != this.g && (this.g += a);
        };
        r.U = function() {
          return Infinity == this.l && !this.B;
        };
        r.xc = function() {
          return Infinity != this.l && !this.B;
        };
        r.pb = function() {
          return Math.max(this.H, this.bc() - this.o);
        };
        r.zh = function(a) {
          this.H = a;
        };
        r.bc = function() {
          return this.U() || this.xc() ? Math.min(Math.max(0, (Date.now() + this.A) / 1e3 - this.h - this.i) + this.G, this.l) : this.g ? Math.min(this.g, this.l) : this.l;
        };
        r.qd = function(a) {
          var b = Math.max(this.j, this.H);
          return Infinity == this.o ? Math.ceil(1e3 * b) / 1e3 : Math.max(b, Math.min(this.bc() - this.o + a, this.ob()));
        };
        r.Hb = function() {
          return this.qd(0);
        };
        r.ob = function() {
          return Math.max(0, this.bc() - (this.U() || this.xc() ? this.C : 0));
        };
        r.Ih = function() {
          return null == this.i || null != this.g && this.F ? false : true;
        };
        r.th = function(a) {
          this.G = a;
        };
        r.gi = function() {
          return this.G;
        };
        T("shaka.media.PresentationTimeline", ul);
        ul.prototype.getAvailabilityTimeOffset = ul.prototype.gi;
        ul.prototype.setAvailabilityTimeOffset = ul.prototype.th;
        ul.prototype.usingPresentationStartTime = ul.prototype.Ih;
        ul.prototype.getSeekRangeEnd = ul.prototype.ob;
        ul.prototype.getSeekRangeStart = ul.prototype.Hb;
        ul.prototype.getSafeSeekRangeStart = ul.prototype.qd;
        ul.prototype.getSegmentAvailabilityEnd = ul.prototype.bc;
        ul.prototype.setUserSeekStart = ul.prototype.zh;
        ul.prototype.getSegmentAvailabilityStart = ul.prototype.pb;
        ul.prototype.isInProgress = ul.prototype.xc;
        ul.prototype.isLive = ul.prototype.U;
        ul.prototype.offset = ul.prototype.offset;
        ul.prototype.notifyMaxSegmentDuration = ul.prototype.Sf;
        ul.prototype.notifyMinSegmentStartTime = ul.prototype.ne;
        ul.prototype.getInitialProgramDateTime = ul.prototype.oi;
        ul.prototype.setInitialProgramDateTime = ul.prototype.vh;
        ul.prototype.isStartTimeLocked = ul.prototype.Ui;
        ul.prototype.lockStartTime = ul.prototype.ie;
        ul.prototype.getMaxSegmentEndTime = ul.prototype.ui;
        ul.prototype.notifyPeriodDuration = ul.prototype.hh;
        ul.prototype.notifySegments = ul.prototype.Ed;
        ul.prototype.notifyTimeRange = ul.prototype.ih;
        ul.prototype.getDelay = ul.prototype.ji;
        ul.prototype.setDelay = ul.prototype.hg;
        ul.prototype.getSegmentAvailabilityDuration = ul.prototype.ae;
        ul.prototype.setSegmentAvailabilityDuration = ul.prototype.Ce;
        ul.prototype.setStatic = ul.prototype.Fc;
        ul.prototype.setClockOffset = ul.prototype.uh;
        ul.prototype.getPresentationStartTime = ul.prototype.zi;
        ul.prototype.setDuration = ul.prototype.bb;
        ul.prototype.setPresentationStartTime = ul.prototype.wh;
        ul.prototype.getMaxSegmentDuration = ul.prototype.ti;
        ul.prototype.getDuration = ul.prototype.getDuration;
        function vl(a, b, c, d) {
          var e = this;
          this.s = d;
          this.g = a;
          this.B = b;
          this.h = c;
          this.o = new lb();
          this.l = false;
          this.F = a.readyState;
          this.G = this.C = this.j = 0;
          this.m = wl(this);
          this.A = false;
          this.o.D(a, "waiting", function() {
            return xl(e);
          });
          this.i = new ec(function() {
            xl(e);
          }).ua(this.h.gapJumpTimerTime);
        }
        vl.prototype.release = function() {
          this.o && (this.o.release(), this.o = null);
          null != this.i && (this.i.stop(), this.i = null);
          this.m && (this.m.release(), this.m = null);
          this.g = this.B = this.s = null;
        };
        vl.prototype.qe = function() {
          this.A = true;
          this.i && this.i.ua(this.h.gapJumpTimerTime);
          xl(this);
        };
        function xl(a) {
          if (0 != a.g.readyState) {
            if (a.g.seeking) {
              if (!a.l) return;
            } else a.l = false;
            if (!a.g.paused || a.g.currentTime == a.j && (a.g.autoplay || a.g.currentTime != a.j)) {
              a.g.readyState != a.F && (a.F = a.g.readyState);
              var b;
              if (!(b = !a.m)) {
                b = a.m;
                var c = b.j, d = yl(c), e = c.g.currentTime, f = Date.now() / 1e3;
                if (b.g != e || b.m != d) b.l = f, b.g = e, b.m = d, b.h = false;
                e = f - b.l;
                if (d = e >= b.o && d && !b.h) b.i && b.i(b.g, e), b.h = true, b.g = c.g.currentTime;
                b = !d;
              }
              b && (b = a.g.currentTime, c = a.g.buffered, d = Kj(c, b, a.h.gapDetectionThreshold), null == d || 0 == d && !a.A || (e = c.start(d), (f = a.h.gapPadding) && (e = Math.ceil(100 * (e + f)) / 100), e >= a.B.ob() || 1e-3 > e - b || (0 != d && c.end(d - 1), a.g.currentTime = e, b == a.j && (a.j = e), a.C++, a.s(new V("gapjumped")))));
            }
          }
        }
        function wl(a) {
          if (!a.h.stallEnabled) return null;
          var b = a.h.stallSkip;
          return new zl(new Al(a.g), a.h.stallThreshold, function() {
            b ? a.g.currentTime += b : (a.g.pause(), a.g.play());
            a.G++;
            a.s(new V("stalldetected"));
          });
        }
        function zl(a, b, c) {
          this.j = a;
          this.m = yl(a);
          this.g = a.g.currentTime;
          this.l = Date.now() / 1e3;
          this.h = false;
          this.o = b;
          this.i = c;
        }
        zl.prototype.release = function() {
          this.i = this.j = null;
        };
        function Al(a) {
          this.g = a;
        }
        function yl(a) {
          if (a.g.paused || 0 == a.g.playbackRate || 0 == a.g.buffered.length) var b = false;
          else a: {
            b = a.g.currentTime;
            a = t(Jj(a.g.buffered));
            for (var c = a.next(); !c.done; c = a.next()) if (c = c.value, !(b < c.start - 0.1 || b > c.end - 0.5)) {
              b = true;
              break a;
            }
            b = false;
          }
          return b;
        }
        ;
        function Bl(a, b, c, d) {
          b == HTMLMediaElement.HAVE_NOTHING || a.readyState >= b ? d() : (b = Cl.value().get(b), c.ma(a, b, d));
        }
        var Cl = new Xb(function() {
          return /* @__PURE__ */ new Map([[HTMLMediaElement.HAVE_METADATA, "loadedmetadata"], [HTMLMediaElement.HAVE_CURRENT_DATA, "loadeddata"], [HTMLMediaElement.HAVE_FUTURE_DATA, "canplay"], [HTMLMediaElement.HAVE_ENOUGH_DATA, "canplaythrough"]]);
        });
        function Dl(a, b, c, d) {
          var e = this;
          this.g = a;
          this.m = b;
          this.s = c;
          this.l = null;
          this.j = function() {
            null == e.l && (e.l = d());
            return e.l;
          };
          this.o = false;
          this.h = new lb();
          this.i = new El(a);
          Bl(this.g, HTMLMediaElement.HAVE_METADATA, this.h, function() {
            Fl(e, e.j());
          });
        }
        Dl.prototype.release = function() {
          this.h && (this.h.release(), this.h = null);
          null != this.i && (this.i.release(), this.i = null);
          this.m = function() {
          };
          this.g = null;
        };
        function Gl(a) {
          return a.o ? a.g.currentTime : a.j();
        }
        function Hl(a, b) {
          0 < a.g.readyState ? Il(a.i, b) : Bl(a.g, HTMLMediaElement.HAVE_METADATA, a.h, function() {
            Fl(a, a.j());
          });
        }
        function Fl(a, b) {
          1e-3 > Math.abs(a.g.currentTime - b) ? Jl(a) : (a.h.ma(a.g, "seeking", function() {
            Jl(a);
          }), Il(a.i, a.g.currentTime && 0 != a.g.currentTime ? a.g.currentTime : b));
        }
        function Jl(a) {
          a.o = true;
          a.h.D(a.g, "seeking", function() {
            return a.m();
          });
          a.s(a.g.currentTime);
        }
        function El(a) {
          var b = this;
          this.g = a;
          this.m = 10;
          this.j = this.l = this.i = 0;
          this.h = new ec(function() {
            0 >= b.i ? b.h.stop() : b.g.currentTime != b.l || b.g.currentTime === b.j ? b.h.stop() : (b.g.currentTime = b.j, b.i--);
          });
        }
        El.prototype.release = function() {
          this.h && (this.h.stop(), this.h = null);
          this.g = null;
        };
        function Il(a, b) {
          a.l = a.g.currentTime;
          a.j = b;
          a.i = a.m;
          a.g.currentTime = b;
          a.h.ua(0.1);
        }
        ;
        function Kl(a) {
          this.h = a;
          this.j = false;
          this.g = null;
          this.i = new lb();
        }
        r = Kl.prototype;
        r.ready = function() {
          function a() {
            if (null == b.g || 0 == b.g && Infinity != b.h.duration) b.j = true;
            else {
              var c = b.h.currentTime, d = b.g;
              0 > b.g && (d = Math.max(0, c + b.g));
              c != d ? (b.i.ma(b.h, "seeking", function() {
                b.j = true;
              }), b.h.currentTime = d) : b.j = true;
            }
          }
          var b = this;
          Bl(this.h, HTMLMediaElement.HAVE_CURRENT_DATA, this.i, function() {
            a();
          });
        };
        r.release = function() {
          this.i && (this.i.release(), this.i = null);
          this.h = null;
        };
        r.af = function(a) {
          this.g = this.j ? this.g : a;
        };
        r.Od = function() {
          return (this.j ? this.h.currentTime : this.g) || 0;
        };
        r.yg = function() {
          return 0;
        };
        r.xg = function() {
          return 0;
        };
        r.gh = function() {
        };
        function Ll(a, b, c, d, e, f) {
          var g = this;
          this.i = a;
          this.g = b.presentationTimeline;
          this.l = c;
          this.s = e;
          this.o = null;
          this.j = new vl(a, b.presentationTimeline, c, f);
          this.h = new Dl(a, function() {
            a: {
              var h = g.j;
              h.l = true;
              h.A = false;
              h.i && h.i.ua(h.h.gapJumpTimerTime);
              xl(h);
              var k2 = Gl(g.h);
              h = Ml(g, k2);
              if (!od() && 1e-3 < Math.abs(h - k2)) {
                k2 = false;
                if (!qc() || qc() && yc()) k2 = true;
                else {
                  var l = Date.now() / 1e3, m = qc() && zc() ? 3 : 1;
                  if (!g.o || g.o < l - m) g.o = l, k2 = true;
                }
                if (k2) {
                  Hl(g.h, h);
                  h = void 0;
                  break a;
                }
              }
              g.s();
              h = void 0;
            }
            return h;
          }, function(h) {
            var k2 = g.j;
            k2.g.seeking && !k2.l && (k2.l = true, k2.j = h);
            k2.i && k2.i.ua(k2.h.gapJumpTimerTime);
            xl(k2);
          }, function() {
            var h = d;
            null == h ? h = Infinity > g.g.getDuration() ? g.g.Hb() : g.g.ob() : 0 > h && (h = g.g.ob() + h);
            return Nl(g, Ol(g, h));
          });
          this.m = new ec(function() {
            if (0 != g.i.readyState && !g.i.paused) {
              var h = Gl(g.h), k2 = g.g.Hb(), l = g.g.ob();
              3 > l - k2 && (k2 = l - 3);
              h < k2 && (h = Ml(g, h), g.i.currentTime = h);
            }
          });
        }
        r = Ll.prototype;
        r.ready = function() {
          this.m.ua(0.25);
        };
        r.release = function() {
          this.h && (this.h.release(), this.h = null);
          this.j && (this.j.release(), this.j = null);
          this.m && (this.m.stop(), this.m = null);
          this.i = this.h = this.g = this.l = null;
          this.s = function() {
          };
        };
        r.af = function(a) {
          Hl(this.h, a);
        };
        r.Od = function() {
          var a = Gl(this.h);
          return 0 < this.i.readyState && !this.i.paused ? Ol(this, a) : a;
        };
        r.yg = function() {
          return this.j.G;
        };
        r.xg = function() {
          return this.j.C;
        };
        r.gh = function() {
          this.j.qe();
        };
        function Nl(a, b) {
          var c = a.g.getDuration();
          return b >= c ? c - a.l.durationBackoff : b;
        }
        function Ml(a, b) {
          var c = a.l.rebufferingGoal, d = a.l.safeSeekOffset, e = a.g.Hb(), f = a.g.ob(), g = a.g.getDuration();
          3 > f - e && (e = f - 3);
          var h = a.g.qd(c), k2 = a.g.qd(d);
          c = a.g.qd(c + d);
          return b >= g ? Nl(a, b) : b > f ? f - a.l.safeSeekEndOffset : b < e ? Hj(a.i.buffered, k2) ? k2 : c : b >= h || Hj(a.i.buffered, b) ? b : c;
        }
        function Ol(a, b) {
          var c = a.g.Hb();
          if (b < c) return c;
          a = a.g.ob();
          return b > a ? a : b;
        }
        ;
        function Pl(a) {
          this.g = a;
          this.m = null;
          this.i = 0;
          this.o = false;
        }
        r = Pl.prototype;
        r.getNumReferences = function() {
          return this.g.length;
        };
        r.getNumEvicted = function() {
          return this.i;
        };
        r.release = function() {
          this.o || (this.g = [], this.m && this.m.stop(), this.m = null);
        };
        r.$i = function() {
          this.o = true;
        };
        r.Eb = function(a) {
          for (var b = t(this.g), c = b.next(); !c.done; c = b.next()) a(c.value);
        };
        function zg(a) {
          return a.g[0] || null;
        }
        r.find = function(a) {
          for (var b = this.g.length - 1, c = b; 0 <= c; --c) {
            var d = this.g[c], e = c < b ? this.g[c + 1].startTime : d.endTime;
            if (a >= d.startTime && a < e) return c + this.i;
          }
          return this.g.length && a < this.g[0].startTime ? this.i : null;
        };
        r.get = function(a) {
          if (0 == this.g.length) return null;
          a -= this.i;
          return 0 > a || a >= this.g.length ? null : this.g[a];
        };
        r.offset = function(a) {
          if (!this.o) for (var b = t(this.g), c = b.next(); !c.done; c = b.next()) c.value.offset(a);
        };
        r.ke = function(a) {
          if (!this.o && a.length) {
            var b = Math.round(1e3 * a[0].startTime) / 1e3;
            this.g = this.g.filter(function(c) {
              return Math.round(1e3 * c.startTime) / 1e3 < b;
            });
            this.g.push.apply(this.g, y(a));
          }
        };
        r.Bd = function(a, b) {
          var c = this;
          a = a.filter(function(d) {
            return d.endTime > b && (0 == c.g.length || d.endTime > c.g[0].startTime);
          });
          this.ke(a);
          this.Oa(b);
        };
        r.Oa = function(a) {
          if (!this.o) {
            var b = this.g.length;
            this.g = this.g.filter(function(c) {
              return c.endTime > a;
            });
            this.i += b - this.g.length;
          }
        };
        r.Nc = function(a, b, c) {
          c = void 0 === c ? false : c;
          if (!this.o) {
            for (; this.g.length; ) if (this.g[this.g.length - 1].startTime >= b) this.g.pop();
            else break;
            for (; this.g.length; ) if (this.g[0].endTime <= a) this.g.shift(), c || this.i++;
            else break;
            0 != this.g.length && (a = this.g[this.g.length - 1], b = new Bj(a.startTime, b, a.C, a.Sa, a.wa, a.ca, a.timestampOffset, a.appendWindowStart, a.appendWindowEnd, a.g, a.tilesLayout, a.B, a.h, a.status, a.aesKey), b.mimeType = a.mimeType, b.codecs = a.codecs, b.i = a.i, this.g[this.g.length - 1] = b);
          }
        };
        r.Ie = function(a, b) {
          var c = this;
          this.o || (this.m && this.m.stop(), this.m = new ec(function() {
            var d = b();
            d ? c.g.push.apply(c.g, y(d)) : (c.m.stop(), c.m = null);
          }), this.m.ua(a));
        };
        Pl.prototype[Symbol.iterator] = function() {
          return this.Gb(0);
        };
        Pl.prototype.Gb = function(a, b, c) {
          b = void 0 === b ? false : b;
          c = void 0 === c ? false : c;
          var d = this.find(a);
          if (null == d) return null;
          var e = this.get(d);
          c ? d++ : d--;
          var f = -1;
          if (e && 0 < e.g.length) for (var g = e.g.length - 1; 0 <= g; --g) {
            var h = e.g[g];
            if (a >= h.startTime && a < h.endTime) {
              if (!b) {
                for (; g && !h.l; ) g--, h = e.g[g];
                if (!h.l) return ab("No independent partial segment found!"), null;
              }
              c ? d-- : d++;
              f = g - 1;
              break;
            }
          }
          return new Ql(this, d, f, c);
        };
        function Rl(a, b, c) {
          a = new Bj(a, a + b, function() {
            return c;
          }, 0, null, null, a, a, a + b);
          return new Pl([a]);
        }
        T("shaka.media.SegmentIndex", Pl);
        Pl.forSingleSegment = Rl;
        Pl.prototype.getIteratorForTime = Pl.prototype.Gb;
        Pl.prototype.updateEvery = Pl.prototype.Ie;
        Pl.prototype.fit = Pl.prototype.Nc;
        Pl.prototype.evict = Pl.prototype.Oa;
        Pl.prototype.mergeAndEvict = Pl.prototype.Bd;
        Pl.prototype.offset = Pl.prototype.offset;
        Pl.prototype.get = Pl.prototype.get;
        Pl.prototype.find = Pl.prototype.find;
        Pl.prototype.markImmutable = Pl.prototype.$i;
        Pl.prototype.release = Pl.prototype.release;
        Pl.prototype.getNumEvicted = Pl.prototype.getNumEvicted;
        Pl.prototype.getNumReferences = Pl.prototype.getNumReferences;
        function Ql(a, b, c, d) {
          this.i = a;
          this.h = b;
          this.g = c;
          this.reverse = d;
        }
        r = Ql.prototype;
        r.ed = function(a) {
          this.reverse = a;
        };
        r.ai = function() {
          return this.h;
        };
        r.current = function() {
          var a = this.i.get(this.h);
          a && 0 < a.g.length && a.A && this.g >= a.g.length && (this.h++, this.g = 0, a = this.i.get(this.h));
          return a && 0 < a.g.length ? a.g[this.g] : a;
        };
        r.next = function() {
          var a = this.i.get(this.h);
          this.reverse ? a && 0 < a.g.length ? (this.g--, 0 > this.g && (this.h--, this.g = (a = this.i.get(this.h)) && 0 < a.g.length ? a.g.length - 1 : 0)) : (this.h--, this.g = 0) : a && 0 < a.g.length ? (this.g++, a.A && this.g == a.g.length && (this.h++, this.g = 0)) : (this.h++, this.g = 0);
          a = this.current();
          return { value: a, done: !a };
        };
        r.bg = function() {
          var a = this.current();
          if (a.o && !a.l && (a = this.i.get(this.h)) && 0 < a.g.length) for (var b = a.g[this.g]; b.l && !(0 >= this.g); ) this.g--, b = a.g[this.g];
        };
        T("shaka.media.SegmentIterator", Ql);
        Ql.prototype.resetToLastIndependent = Ql.prototype.bg;
        Ql.prototype.next = Ql.prototype.next;
        Ql.prototype.current = Ql.prototype.current;
        Ql.prototype.currentPosition = Ql.prototype.ai;
        Ql.prototype.setReverse = Ql.prototype.ed;
        function Sl() {
          Pl.call(this, []);
          this.h = [];
        }
        qa(Sl, Pl);
        r = Sl.prototype;
        r.clone = function() {
          var a = new Sl();
          a.h = this.h.slice();
          a.i = this.i;
          return a;
        };
        r.release = function() {
          for (var a = t(this.h), b = a.next(); !b.done; b = a.next()) b.value.release();
          this.h = [];
        };
        r.Eb = function(a) {
          for (var b = t(this.h), c = b.next(); !c.done; c = b.next()) c.value.Eb(a);
        };
        r.find = function(a) {
          for (var b = this.i, c = t(this.h), d = c.next(); !d.done; d = c.next()) {
            d = d.value;
            var e = d.find(a);
            if (null != e) return e + b;
            b += d.getNumEvicted() + d.getNumReferences();
          }
          return null;
        };
        r.get = function(a) {
          for (var b = this.i, c = t(this.h), d = c.next(); !d.done; d = c.next()) {
            d = d.value;
            var e = d.get(a - b);
            if (e) return e;
            e = d.getNumReferences();
            b += d.getNumEvicted() + e;
          }
          return null;
        };
        r.offset = function() {
        };
        r.ke = function() {
        };
        r.Oa = function(a) {
          for (var b = t(this.h), c = b.next(); !c.done; c = b.next()) c.value.Oa(a);
          for (; 1 < this.h.length && 0 == this.h[0].getNumReferences(); ) a = this.h.shift(), this.i += a.getNumEvicted(), a.release();
        };
        r.Bd = function() {
        };
        r.Nc = function() {
        };
        r.Ie = function() {
        };
        T("shaka.media.MetaSegmentIndex", Sl);
        Sl.prototype.updateEvery = Sl.prototype.Ie;
        Sl.prototype.fit = Sl.prototype.Nc;
        Sl.prototype.mergeAndEvict = Sl.prototype.Bd;
        Sl.prototype.evict = Sl.prototype.Oa;
        Sl.prototype.merge = Sl.prototype.ke;
        Sl.prototype.offset = Sl.prototype.offset;
        Sl.prototype.get = Sl.prototype.get;
        Sl.prototype.find = Sl.prototype.find;
        Sl.prototype.forEachTopLevelReference = Sl.prototype.Eb;
        Sl.prototype.release = Sl.prototype.release;
        function Tl(a) {
          var b = this;
          this.g = a;
          this.j = false;
          this.i = this.g.$d();
          this.h = new ec(function() {
            b.g.eh(0.25 * b.i);
          });
        }
        Tl.prototype.release = function() {
          this.set(this.rc());
          this.h && (this.h.stop(), this.h = null);
          this.g = null;
        };
        Tl.prototype.set = function(a) {
          this.i = a;
          Ul(this);
        };
        Tl.prototype.rc = function() {
          return this.g.rc();
        };
        function Ul(a) {
          a.h.stop();
          var b = a.j ? 0 : a.i;
          if (0 <= b) try {
            a.g.$d() != b && a.g.kg(b);
            return;
          } catch (c) {
          }
          a.h.ua(0.25);
          0 != a.g.$d() && a.g.kg(0);
        }
        ;
        function Vl(a) {
          var b = this;
          this.j = a;
          this.h = new lb();
          this.g = /* @__PURE__ */ new Set();
          this.i = new ec(function() {
            Wl(b, false);
          }).kb();
          a.paused || this.i.ua(0.25);
          this.h.D(a, "playing", function() {
            b.i.kb().ua(0.25);
          });
          this.h.D(a, "pause", function() {
            b.i.stop();
          });
        }
        Vl.prototype.release = function() {
          this.h && (this.h.release(), this.h = null);
          this.i.stop();
          for (var a = t(this.g), b = a.next(); !b.done; b = a.next()) b.value.release();
          this.g.clear();
        };
        function Wl(a, b) {
          var c = a.j.currentTime;
          a = t(a.g);
          for (var d = a.next(); !d.done; d = a.next()) d.value.j(c, b);
        }
        ;
        function Xl(a) {
          ch.call(this);
          this.g = /* @__PURE__ */ new Map();
          this.h = a;
        }
        qa(Xl, ch);
        Xl.prototype.release = function() {
          this.g.clear();
          ch.prototype.release.call(this);
        };
        function Yl(a, b) {
          var c = a.g.get(b);
          c || (c = { Jd: [], mf: null, contentType: b }, a.g.set(b, c));
          return c;
        }
        function Zl(a, b, c) {
          var d = Yl(a, b.contentType);
          $l(a, d);
          a = { Wc: b, position: c };
          d = d.Jd;
          b = d.findIndex(function(e) {
            return e.position >= c;
          });
          0 <= b ? d.splice(b, d[b].position == c ? 1 : 0, a) : d.push(a);
        }
        Xl.prototype.j = function(a) {
          for (var b = t(this.g.values()), c = b.next(); !c.done; c = b.next()) {
            c = c.value;
            var d = c.mf;
            a: {
              var e = c.Jd;
              for (var f = e.length - 1; 0 <= f; f--) {
                var g = e[f];
                if (g.position <= a) {
                  e = g.Wc;
                  break a;
                }
              }
              e = null;
            }
            f = e && !(d === e || d && e && d.bandwidth == e.bandwidth && d.audioSamplingRate == e.audioSamplingRate && d.codecs == e.codecs && d.contentType == e.contentType && d.frameRate == e.frameRate && d.height == e.height && d.mimeType == e.mimeType && d.channelsCount == e.channelsCount && d.pixelAspectRatio == e.pixelAspectRatio && d.width == e.width);
            g = e && d && e.label && d.label && d.label !== e.label;
            var h = e && d && e.language && d.language && d.language !== e.language;
            d = e && d && e.roles && d.roles && !Dd(d.roles, e.roles);
            (g || h || d) && am(this, a, e.contentType) && (c.mf = e, d = new V("audiotrackchange", /* @__PURE__ */ new Map([["quality", e], ["position", a]])), this.dispatchEvent(d));
            f && am(this, a, e.contentType) && (c.mf = e, JSON.stringify(e), c = new V("qualitychange", /* @__PURE__ */ new Map([["quality", e], ["position", a]])), this.dispatchEvent(c));
          }
        };
        function am(a, b, c) {
          return (a = a.h()[c]) && 0 < a.length && (c = a[a.length - 1].end, b >= a[0].start && b < c) ? true : false;
        }
        function $l(a, b) {
          if ((a = a.h()[b.contentType]) && 0 < a.length) {
            var c = a[0].start, d = a[a.length - 1].end, e = b.Jd;
            b.Jd = e.filter(function(f, g) {
              return f.position <= c && g + 1 < e.length && e[g + 1].position <= c || f.position >= d ? false : true;
            });
          } else b.Jd = [];
        }
        function bm(a) {
          var b = { bandwidth: a.bandwidth || 0, audioSamplingRate: null, codecs: a.codecs, contentType: a.type, frameRate: null, height: null, mimeType: a.mimeType, channelsCount: null, pixelAspectRatio: null, width: null, label: null, roles: a.roles, language: null };
          "video" == a.type && (b.frameRate = a.frameRate || null, b.height = a.height || null, b.pixelAspectRatio = a.pixelAspectRatio || null, b.width = a.width || null);
          "audio" == a.type && (b.audioSamplingRate = a.audioSamplingRate, b.channelsCount = a.channelsCount, b.label = a.label || null, b.language = a.language);
          return b;
        }
        ;
        function cm(a) {
          ch.call(this);
          this.h = /* @__PURE__ */ new Map();
          this.i = a;
          this.g = null;
        }
        qa(cm, ch);
        cm.prototype.release = function() {
          this.h.clear();
          this.g && (this.g.stop(), this.g = null);
          ch.prototype.release.call(this);
        };
        function dm(a, b) {
          var c = b.schemeIdUri + "_" + b.id + "_" + (b.startTime.toFixed(1) + "_" + b.endTime.toFixed(1));
          a.h.has(c) || (a.h.set(c, b), b = new V("regionadd", /* @__PURE__ */ new Map([["region", b]])), a.dispatchEvent(b), em(a));
        }
        function em(a) {
          a.g || (a.g = new ec(function() {
            for (var b = a.i(), c = t(a.h), d = c.next(); !d.done; d = c.next()) {
              var e = t(d.value);
              d = e.next().value;
              e = e.next().value;
              e.endTime < b.start && (a.h.delete(d), d = new V("regionremove", /* @__PURE__ */ new Map([["region", e]])), a.dispatchEvent(d));
            }
            !a.h.size && a.g && (a.g.stop(), a.g = null);
          }).ua(2));
        }
        ;
        function fm(a, b, c, d) {
          this.m = a;
          this.i = b;
          this.l = c;
          this.h = /* @__PURE__ */ new Map();
          this.j = /* @__PURE__ */ new Map();
          this.g = null;
          this.o = d;
        }
        function gm(a, b) {
          a.l = b;
          a = t(a.h.values());
          for (var c = a.next(); !c.done; c = a.next()) c.value.g = b;
        }
        function hm(a, b, c) {
          c = void 0 === c ? false : c;
          if (!a.i.segmentIndex) return Promise.resolve();
          a.g || (a.g = a.i.segmentIndex.Gb(b, true, a.o));
          if (!a.g) return Promise.resolve();
          c && a.g.next();
          for (b = []; a.h.size < a.m; ) {
            c = a.g.next().value;
            if (!c) break;
            var d = true;
            c.isPreload() && null != c.wa && (d = false);
            2 == c.cc() && (d = false);
            c.Qb(false) && (d = false);
            d && c.ca && b.push(im(a, c.ca));
            d && !a.h.has(c) && (d = new jm(a.l), b.push(km(d, c, a.i)), a.h.set(c, d));
          }
          lm(a);
          return Promise.all(b);
        }
        function im(a, b) {
          if (!a.i.segmentIndex || b.Qb() || Array.from(a.j.keys()).some(function(e) {
            return Aj(e, b);
          })) return Promise.resolve();
          var c = new jm(a.l), d = km(c, b, a.i);
          a.j.set(b, c);
          return d;
        }
        function mm(a, b) {
          b = t(b.keys());
          for (var c = b.next(); !c.done; c = b.next()) (c = c.value) && nm(a, c);
        }
        function om(a) {
          mm(a, a.h);
          mm(a, a.j);
          a.g = null;
        }
        fm.prototype.Oa = function(a, b) {
          b = void 0 === b ? false : b;
          for (var c = t(this.h.keys()), d = c.next(); !d.done; d = c.next()) d = d.value, a > d.endTime && nm(this, d);
          b && lm(this);
        };
        fm.prototype.ed = function(a) {
          this.o = a;
          this.g && this.g.ed(a);
        };
        function lm(a) {
          for (var b = Array.from(a.h.keys()), c = t(a.j.keys()), d = c.next(), e = {}; !d.done; e = { Mf: void 0 }, d = c.next()) e.Mf = d.value, b.some(/* @__PURE__ */ function(f) {
            return function(g) {
              return Aj(g.ca, f.Mf);
            };
          }(e)) || nm(a, e.Mf);
        }
        function pm(a, b) {
          a.m = b;
          for (var c = Array.from(a.h.keys()); c.length > b; ) {
            var d = c.pop();
            d && nm(a, d);
          }
          lm(a);
        }
        function qm(a, b) {
          b && b !== a.i && (om(a), a.i = b);
        }
        function nm(a, b) {
          var c = a.h;
          b instanceof zj && (c = a.j);
          a = c.get(b);
          c.delete(b);
          a && a.abort();
        }
        function jm(a) {
          this.g = a;
          this.Gd = this.ng = null;
        }
        function km(a, b, c) {
          var d = new Uint8Array(0);
          a.Gd = a.g(b, c, function(e) {
            return Q(function(f) {
              if (1 == f.g) return 0 < d.byteLength ? d = Vc(d, e) : d = e, a.ng ? G(f, a.ng(d), 3) : f.u(0);
              d = new Uint8Array(0);
              I(f);
            });
          });
          return a.Gd.promise.catch(function(e) {
            return e instanceof U && 7001 == e.code ? Promise.resolve() : Promise.reject(e);
          });
        }
        jm.prototype.abort = function() {
          this.Gd && this.Gd.abort();
        };
        function rm(a) {
          var b = uf(a), c = b.split("/")[0];
          a = vf(a);
          return { type: c, mimeType: b, codecs: a, language: null, height: null, width: null, channelCount: null, sampleRate: null, closedCaptions: /* @__PURE__ */ new Map(), Nd: null, colorGamut: null, frameRate: null };
        }
        function sm(a, b, c) {
          function d(A) {
            x = A.name;
            var H = A.reader;
            H.skip(24);
            var E = H.na(), L = H.na();
            H.skip(50);
            p = String(E);
            n = String(L);
            A.reader.ta() && Jh(A);
          }
          function e(A) {
            var H = hk(A.reader);
            q = H.channelCount;
            u = H.sampleRate;
            f(A.name);
          }
          function f(A) {
            A = A.toLowerCase();
            switch (A) {
              case "avc1":
              case "avc3":
                h.push(A + ".42E01E");
                l = true;
                break;
              case "hev1":
              case "hvc1":
                h.push(A + ".1.6.L93.90");
                l = true;
                break;
              case "dvh1":
              case "dvhe":
                h.push(A + ".05.04");
                l = true;
                break;
              case "vp09":
                h.push(A + ".00.10.08");
                l = true;
                break;
              case "av01":
                h.push(A + ".0.01M.08");
                l = true;
                break;
              case "mp4a":
                g.push("mp4a.40.2");
                k2 = true;
                break;
              case "ac-3":
              case "ec-3":
              case "ac-4":
              case "opus":
              case "flac":
                g.push(A), k2 = true;
            }
          }
          var g = [], h = [], k2 = false, l = false, m = null, n = null, p = null, q = null, u = null, w = null, v = null, x;
          new Eh().box("moov", Jh).box("trak", Jh).box("mdia", Jh).S("mdhd", function(A) {
            m = fk(A.reader, A.version).language;
          }).box("minf", Jh).box("stbl", Jh).S("stsd", Lh).box("mp4a", function(A) {
            var H = hk(A.reader);
            q = H.channelCount;
            u = H.sampleRate;
            A.reader.ta() ? Jh(A) : f(A.name);
          }).box("esds", function(A) {
            A = A.reader;
            for (var H = "mp4a", E, L; A.ta(); ) {
              E = A.X();
              for (var M = A.X(); M & 128; ) M = A.X();
              if (3 == E) A.na(), M = A.X(), M & 128 && A.na(), M & 64 && A.skip(A.X()), M & 32 && A.na();
              else if (4 == E) L = A.X(), A.skip(12);
              else if (5 == E) break;
            }
            L && (H += "." + kk(L), 5 == E && A.ta() && (E = A.X(), L = (E & 248) >> 3, 31 === L && A.ta() && (L = 32 + ((E & 7) << 3) + ((A.X() & 224) >> 5)), H += "." + L));
            g.push(H);
            k2 = true;
          }).box("ac-3", e).box("ec-3", e).box("ac-4", e).box("Opus", e).box("fLaC", e).box("avc1", d).box("avc3", d).box("hev1", d).box("hvc1", d).box("dva1", d).box("dvav", d).box("dvh1", d).box("dvhe", d).box(
            "vp09",
            d
          ).box("av01", d).box("avcC", function(A) {
            var H = x || "";
            switch (x) {
              case "dvav":
                H = "avc3";
                break;
              case "dva1":
                H = "avc1";
            }
            A = A.reader;
            A.skip(1);
            A = H + "." + kk(A.X()) + kk(A.X()) + kk(A.X());
            h.push(A);
            l = true;
          }).box("hvcC", function(A) {
            var H = x || "";
            switch (x) {
              case "dvh1":
                H = "hvc1";
                break;
              case "dvhe":
                H = "hev1";
            }
            var E = A.reader;
            E.skip(1);
            A = E.X();
            var L = ["", "A", "B", "C"][A >> 6], M = A & 31, J = E.R(), K = (A & 32) >> 5 ? "H" : "L";
            A = [E.X(), E.X(), E.X(), E.X(), E.X(), E.X()];
            E = E.X();
            for (var N = 0, O = 0; 32 > O; O++) {
              N |= J & 1;
              if (31 == O) break;
              N <<= 1;
              J >>= 1;
            }
            H = H + ("." + L + M) + ("." + kk(N, true));
            H += "." + K + E;
            L = "";
            for (M = A.length; M--; ) if ((K = A[M]) || L) L = "." + K.toString(16).toUpperCase() + L;
            H += L;
            h.push(H);
            l = true;
          }).box("dvcC", function(A) {
            var H = x || "";
            switch (x) {
              case "hvc1":
                H = "dvh1";
                break;
              case "hev1":
                H = "dvhe";
                break;
              case "avc1":
                H = "dva1";
                break;
              case "avc3":
                H = "dvav";
                break;
              case "av01":
                H = "dav1";
            }
            var E = A.reader;
            E.skip(2);
            A = E.X();
            E = E.X();
            h.push(H + "." + lk(A >> 1 & 127) + "." + lk(A << 5 & 32 | E >> 3 & 31));
            l = true;
          }).box("dvvC", function(A) {
            var H = x || "";
            switch (x) {
              case "hvc1":
                H = "dvh1";
                break;
              case "hev1":
                H = "dvhe";
                break;
              case "avc1":
                H = "dva1";
                break;
              case "avc3":
                H = "dvav";
                break;
              case "av01":
                H = "dav1";
            }
            var E = A.reader;
            E.skip(2);
            A = E.X();
            E = E.X();
            h.push(H + "." + lk(A >> 1 & 127) + "." + lk(A << 5 & 32 | E >> 3 & 31));
            l = true;
          }).S("vpcC", function(A) {
            var H = x || "", E = A.reader;
            A = E.X();
            var L = E.X();
            E = E.X() >> 4 & 15;
            h.push(H + "." + lk(A) + "." + lk(L) + "." + lk(E));
            l = true;
          }).box("av1C", function(A) {
            var H = x || "";
            switch (x) {
              case "dav1":
                H = "av01";
            }
            var E = A.reader;
            E.skip(1);
            A = E.X();
            E = E.X();
            var L = A >>> 5, M = (E & 64) >> 6;
            h.push(H + "." + L + "." + lk(A & 31) + (E >>> 7 ? "H" : "M") + "." + lk(2 === L && M ? (E & 32) >> 5 ? 12 : 10 : M ? 10 : 8) + "." + ((E & 16) >> 4) + "." + ((E & 8) >> 3) + ((E & 4) >> 2) + (E & 3) + "." + lk(1) + "." + lk(1) + "." + lk(1) + ".0");
            l = true;
          }).box("enca", Nh).box("encv", Mh).box("sinf", Jh).box("frma", function(A) {
            A = ik(A.reader).codec;
            f(A);
          }).box("colr", function(A) {
            h = h.map(function(L) {
              if (L.startsWith("av01.")) {
                var M = A.reader, J = M.Ba(), K = M.Cb(4);
                var N = String.fromCharCode(K[0]);
                N += String.fromCharCode(K[1]);
                N += String.fromCharCode(K[2]);
                N += String.fromCharCode(K[3]);
                if ("nclx" === N) {
                  K = M.na();
                  N = M.na();
                  var O = M.na(), P = M.X() >> 7, R = L.split(".");
                  10 == R.length && (R[6] = lk(K), R[7] = lk(N), R[8] = lk(O), R[9] = String(P), L = R.join("."));
                }
                M.seek(J);
              }
              return L;
            });
            var H = jk(A.reader), E = H.colorGamut;
            w = H.Nd;
            v = E;
          }).parse(a || b, true);
          if (!g.length && !h.length) return null;
          var z = k2 && !l, C = /* @__PURE__ */ new Map();
          if (l && !c) {
            c = new sd("video/mp4");
            a && c.init(a);
            try {
              c.i(b);
              for (var D = t(c.j()), F = D.next(); !F.done; F = D.next()) {
                var B = F.value;
                C.set(B, B);
              }
            } catch (A) {
            }
            c.g();
          }
          return {
            type: z ? "audio" : "video",
            mimeType: z ? "audio/mp4" : "video/mp4",
            codecs: tm(g.concat(h)).join(", "),
            language: m,
            height: n,
            width: p,
            channelCount: q,
            sampleRate: u,
            closedCaptions: C,
            Nd: w,
            colorGamut: v,
            frameRate: null
          };
        }
        function tm(a) {
          var b = /* @__PURE__ */ new Set(), c = [];
          a = t(a);
          for (var d = a.next(); !d.done; d = a.next()) {
            d = d.value;
            var e = tf(d);
            b.has(e) || (c.push(d), b.add(e));
          }
          b = dd("audio", c);
          d = dd("video", c);
          a = dd(cd, c);
          d = um(d);
          b = b.concat(d).concat(a);
          return c.length && !b.length ? c : b;
        }
        function um(a) {
          if (1 >= a.length) return a;
          var b = a.find(function(c) {
            return c.startsWith("dvav.") || c.startsWith("dva1.") || c.startsWith("dvh1.") || c.startsWith("dvhe.") || c.startsWith("dav1.") || c.startsWith("dvc1.") || c.startsWith("dvi1.");
          });
          return b ? ld('video/mp4; codecs="' + b + '"') ? [b] : a.filter(function(c) {
            return c != b;
          }) : a;
        }
        function vm(a) {
          var b = null;
          new Eh().box("moov", Jh).box("trak", Jh).box("mdia", Jh).box("minf", Jh).box("stbl", Jh).S("stsd", Lh).box("encv", Mh).box("enca", Nh).box("sinf", Jh).box("schi", Jh).S("tenc", function(c) {
            c = c.reader;
            c.X();
            c.X();
            c.X();
            c.X();
            b = Uc(c.Cb(16));
          }).parse(a, true);
          return b;
        }
        function wm(a, b, c) {
          var d, e, f, g, h;
          return Q(function(k2) {
            if (1 == k2.g) return d = b, d.cryptoKey ? k2.u(2) : G(k2, d.fetchKey(), 3);
            e = d.iv;
            if (!e) for (e = Qb(new ArrayBuffer(16)), f = d.firstMediaSequenceNumber + c, g = e.byteLength - 1; 0 <= g; g--) e[g] = f & 255, f >>= 8;
            "CBC" == b.blockCipherMode ? h = { name: "AES-CBC", iv: e } : h = { name: "AES-CTR", counter: e, length: 64 };
            return k2.return(window2.crypto.subtle.decrypt(h, d.cryptoKey, a));
          });
        }
        ;
        function xm(a, b, c, d, e) {
          a = kh(a, d, e);
          if (0 != b || null != c) a.headers.Range = c ? "bytes=" + b + "-" + c : "bytes=" + b + "-";
          return a;
        }
        ;
        function ym(a, b) {
          var c = this;
          this.g = b;
          this.j = a;
          this.h = null;
          this.K = /* @__PURE__ */ new Map();
          this.C = 1;
          this.s = this.l = null;
          this.O = 0;
          this.i = /* @__PURE__ */ new Map();
          this.H = false;
          this.P = null;
          this.B = false;
          this.m = new sh(function() {
            return zm(c);
          });
          this.L = Date.now() / 1e3;
          this.o = /* @__PURE__ */ new Map();
          this.M = { projection: null, hfov: null };
          this.W = 0;
          this.T = Infinity;
          this.G = null;
          this.A = new ec(function() {
            if (c.j && c.g) if (c.j.presentationTimeline.U()) {
              var d = c.j.presentationTimeline.Hb(), e = c.j.presentationTimeline.ob();
              1 < e - d ? ll(c.g.$, d, e) : ml(c.g.$);
            } else ml(c.g.$), c.A && c.A.stop();
          });
          this.I = null;
          this.F = new ec(function() {
            var d = c.g.video;
            !d.ended && c.I && (d.currentTime = c.I, c.I = null);
          });
        }
        r = ym.prototype;
        r.destroy = function() {
          return this.m.destroy();
        };
        function zm(a) {
          var b, c, d, e, f, g, h;
          return Q(function(k2) {
            if (1 == k2.g) {
              b = [];
              c = t(a.i.values());
              for (d = c.next(); !d.done; d = c.next()) e = d.value, Am(e), b.push(Bm(e)), e.aa && (om(e.aa), e.aa = null);
              f = t(a.o.values());
              for (g = f.next(); !g.done; g = f.next()) h = g.value, om(h);
              return G(k2, Promise.all(b), 2);
            }
            a.i.clear();
            a.o.clear();
            a.g = null;
            a.j = null;
            a.h = null;
            a.A && a.A.stop();
            a.A = null;
            a.F && a.F.stop();
            a.F = null;
            I(k2);
          });
        }
        r.configure = function(a) {
          this.h = a;
          this.P = new Qg({ maxAttempts: Math.max(a.retryParameters.maxAttempts, 2), baseDelay: a.retryParameters.baseDelay, backoffFactor: a.retryParameters.backoffFactor, fuzzFactor: a.retryParameters.fuzzFactor, timeout: 0, stallTimeout: 0, connectionTimeout: 0 }, true);
          if (a.disableAudioPrefetch) {
            var b = this.i.get("audio");
            b && b.aa && (om(b.aa), b.aa = null);
            b = t(this.o.keys());
            for (var c = b.next(); !c.done; c = b.next()) c = c.value, om(this.o.get(c)), this.o.delete(c);
          }
          a.disableTextPrefetch && (b = this.i.get(cd)) && b.aa && (om(b.aa), b.aa = null);
          a.disableVideoPrefetch && (b = this.i.get("video")) && b.aa && (om(b.aa), b.aa = null);
          b = t(this.i.keys());
          for (c = b.next(); !c.done; c = b.next()) c = this.i.get(c.value), c.aa ? (pm(c.aa, a.segmentPrefetchLimit), 0 < a.segmentPrefetchLimit || (om(c.aa), c.aa = null)) : 0 < a.segmentPrefetchLimit && (c.aa = Cm(this, c.stream));
          a.disableAudioPrefetch || Dm(this);
        };
        function Em(a, b, c) {
          a.j.presentationTimeline.U() || (a.W = b, a.T = c);
        }
        r.start = function(a) {
          var b = this;
          return Q(function(c) {
            if (1 == c.g) return G(c, Fm(b, a || /* @__PURE__ */ new Map()), 2);
            th(b.m);
            b.H = true;
            I(c);
          });
        };
        function Gm(a, b) {
          var c, d, e, f, g, h, k2;
          Q(function(l) {
            switch (l.g) {
              case 1:
                return c = ed, a.O++, d = a.O, xa(l, 2), G(l, gl(a.g.$, c.za), 4);
              case 4:
                za(l, 3);
                break;
              case 2:
                if (e = Aa(l), a.g) a.g.onError(e);
              case 3:
                f = kf(b.mimeType, b.codecs), Qk(a.g.$, f, a.j.sequenceMode, b.external), g = a.g.$.ea, (h = g.isTextVisible() || a.h.alwaysStreamText) && a.O == d && (k2 = Hm(a, b), a.i.set(c.za, k2), Im(a, k2, 0)), I(l);
            }
          });
        }
        function Jm(a) {
          var b = a.i.get(cd);
          b && (Am(b), Bm(b).catch(function() {
          }), a.G = a.i.get(cd), a.i.delete(cd));
          a.s = null;
        }
        function Km(a, b) {
          for (var c = 0 > a.g.gb(), d = t(a.i.values()), e = d.next(); !e.done; e = d.next()) e = e.value, e.ja && e.ja.ed(c), e.aa && e.aa.ed(c);
          d = t(a.o.values());
          for (e = d.next(); !e.done; e = d.next()) e.value.ed(c);
          if (c = a.i.get("video")) {
            if (d = c.stream) {
              if (b) (b = d.trickModeVideo) && !c.ec && (Lm(a, b, false, 0, false), c.ec = d);
              else if (b = c.ec) c.ec = null, Lm(a, b, true, 0, false);
            }
          }
        }
        function Mm(a, b, c, d, e, f) {
          c = void 0 === c ? false : c;
          d = void 0 === d ? 0 : d;
          e = void 0 === e ? false : e;
          f = void 0 === f ? false : f;
          a.l = b;
          a.H && (b.video && Lm(a, b.video, c, d, e, f), b.audio && Lm(a, b.audio, c, d, e, f));
        }
        function Nm(a, b) {
          Q(function(c) {
            if (1 == c.g) return a.G = null, a.s = b, a.H ? b.segmentIndex ? c.u(2) : G(c, b.createSegmentIndex(), 2) : c.return();
            Lm(a, b, true, 0, false);
            I(c);
          });
        }
        function Om(a, b) {
          for (var c = t(a.K.entries()), d = c.next(); !d.done; d = c.next()) {
            var e = t(d.value);
            d = e.next().value;
            e = e.next().value;
            d.includes(b.type) && (e(), a.K.delete(d));
          }
        }
        function Lm(a, b, c, d, e, f) {
          var g = a.i.get(b.type);
          g || b.type != cd ? g && (g.ec && (b.trickModeVideo ? (g.ec = b, b = b.trickModeVideo) : g.ec = null), g.stream != b || e) && (a.o.has(b) ? g.aa = a.o.get(b) : g.aa && qm(g.aa, b), b.type == cd && (e = kf(b.mimeType, b.codecs), Qk(a.g.$, e, a.j.sequenceMode, b.external)), !a.o.has(g.stream) && g.stream.closeSegmentIndex && (g.Da ? (e = "(" + g.type + ":" + g.stream.id + ")", a.K.has(e) || a.K.set(e, g.stream.closeSegmentIndex)) : g.stream.closeSegmentIndex()), e = g.stream.isAudioMuxedInVideo != b.isAudioMuxedInVideo, g.stream = b, g.ja = null, g.bf = !!f, b.dependencyStream ? g.nd = Hm(a, b.dependencyStream) : g.nd = null, e ? Pm(a, true, false) : (c ? g.mc ? g.Re = true : g.Da ? (g.kc = true, g.Vd = d, g.Re = true) : (Am(g), Qm(a, g, true, d).catch(function(h) {
            if (a.g) a.g.onError(h);
          })) : g.Da || g.lb || Im(a, g, 0), Rm(a, g).catch(function(h) {
            if (a.g) a.g.onError(h);
          }))) : Gm(a, b);
        }
        function Rm(a, b) {
          var c, d;
          return Q(function(e) {
            if (1 == e.g) {
              if (!b.rb) return e.return();
              c = b.stream;
              d = b.rb;
              return c.segmentIndex ? e.u(2) : G(e, c.createSegmentIndex(), 2);
            }
            if (b.rb != d || b.stream != c) return e.return();
            var f = a.g.Qc();
            var g = Wk(a.g.$, b.type), h = b.stream.segmentIndex.find(b.xa ? b.xa.endTime : f), k2 = null == h ? null : b.stream.segmentIndex.get(h);
            h = k2 ? k2.wa ? k2.wa - k2.Sa : null : null;
            k2 && !h && (h = (k2.endTime - k2.getStartTime()) * (b.stream.bandwidth || 0) / 8);
            h ? ((k2 = k2.ca) && (h += (k2.wa ? k2.wa - k2.Sa : null) || 0), k2 = a.g.getBandwidthEstimate(), f = 8 * h / k2 < (g || 0) - f - a.h.rebufferingGoal || b.rb.h.g > h ? true : false) : f = false;
            f && b.rb.abort();
            I(e);
          });
        }
        r.Ec = function() {
          if (this.g) {
            for (var a = this.g.Qc(), b = t(this.i.keys()), c = b.next(); !c.done; c = b.next()) {
              var d = c.value;
              c = this.i.get(d);
              var e = this.g.$;
              d == cd ? (e = e.h, e = null == e.g || null == e.h ? false : a >= e.g && a < e.h) : (e = Vk(e, d), e = Hj(e, a));
              if (!e) {
                this.L = 0;
                c.aa && (c.aa.g = null);
                if ("audio" === c.type) {
                  e = t(this.o.values());
                  for (var f = e.next(); !f.done; f = e.next()) f.value.g = null;
                }
                c.ja = null;
                (null != Wk(this.g.$, d) || c.Da) && Sm(this, c);
                c.rb && (c.rb.abort(), c.rb = null);
                d === cd && (d = this.g.$, d.L && d.L.g());
                c.Ec = true;
              }
            }
            "keep" !== this.h.crossBoundaryStrategy && Tm(this);
          }
        };
        function Sm(a, b) {
          b.mc || b.kc || (b.Da ? (b.kc = true, b.Vd = 0) : null == Uk(a.g.$, b.type) ? null == b.lb && Im(a, b, 0) : (Am(b), Qm(a, b, false, 0).catch(function(c) {
            if (a.g) a.g.onError(c);
          })));
        }
        function Fm(a, b) {
          var c, d, e, f, g, h, k2, l, m, n;
          return Q(function(p) {
            if (1 == p.g) {
              c = ed;
              if (!a.l) throw new U(2, 5, 5006);
              d = /* @__PURE__ */ new Map();
              e = /* @__PURE__ */ new Set();
              a.l.audio && (d.set(c.V, a.l.audio), e.add(a.l.audio));
              a.l.video && (d.set(c.la, a.l.video), e.add(a.l.video));
              a.s && (d.set(c.za, a.s), e.add(a.s));
              f = a.g.$;
              return G(p, f.init(d, a.j.sequenceMode, a.j.type, a.j.ignoreManifestTimestampsInSegmentsMode), 2);
            }
            th(a.m);
            a.updateDuration();
            g = t(d.keys());
            for (h = g.next(); !h.done; h = g.next()) k2 = h.value, l = d.get(k2), a.i.has(k2) || (m = Hm(a, l), b.has(l.id) && (n = b.get(l.id), gm(n, function(q, u, w) {
              return Um(q, u, w || null, a.h.retryParameters, a.g.Wb);
            }), m.aa = n), a.i.set(k2, m), Im(a, m, 0));
            I(p);
          });
        }
        function Hm(a, b) {
          var c = { stream: b, type: b.type, ja: null, aa: Cm(a, b), xa: null, yb: null, he: null, zc: null, yc: null, fe: null, ge: null, ec: null, endOfStream: false, Da: false, lb: null, kc: false, Vd: 0, Re: false, mc: false, Ec: true, bf: false, $f: false, sd: false, rb: null, nd: null };
          b.dependencyStream && (c.nd = Hm(a, b.dependencyStream));
          return c;
        }
        function Cm(a, b) {
          if ("video" === b.type && a.h.disableVideoPrefetch || "audio" === b.type && a.h.disableAudioPrefetch || b.type === cd && ("application/cea-608" == b.mimeType || "application/cea-708" == b.mimeType) || b.type === cd && a.h.disableTextPrefetch) return null;
          if (a.o.has(b)) return a.o.get(b);
          var c = a.i.get(b.type);
          return (c = c && c.aa) && b === c.i ? c : 0 < a.h.segmentPrefetchLimit ? new fm(a.h.segmentPrefetchLimit, b, function(d, e, f) {
            return Um(d, e, f || null, a.h.retryParameters, a.g.Wb);
          }, 0 > a.g.gb()) : null;
        }
        function Dm(a) {
          for (var b = a.h.segmentPrefetchLimit, c = a.h.prefetchAudioLanguages, d = t(a.j.variants), e = d.next(), f = {}; !e.done; f = { vb: void 0 }, e = d.next()) if (f.vb = e.value, f.vb.audio) if (a.o.has(f.vb.audio)) {
            if (e = a.o.get(f.vb.audio), pm(e, b), !(0 < b && c.some(/* @__PURE__ */ function(h) {
              return function(k2) {
                return Mf(h.vb.audio.language, k2);
              };
            }(f)))) {
              var g = a.i.get(f.vb.audio.type);
              e !== (g && g.aa) && om(e);
              a.o.delete(f.vb.audio);
            }
          } else 0 >= b || !c.some(/* @__PURE__ */ function(h) {
            return function(k2) {
              return Mf(h.vb.audio.language, k2);
            };
          }(f)) || !(e = Cm(a, f.vb.audio)) || (f.vb.audio.segmentIndex || f.vb.audio.createSegmentIndex(), a.o.set(f.vb.audio, e));
        }
        r.updateDuration = function() {
          var a = od(), b = this.j.presentationTimeline.getDuration();
          Infinity > b ? (a && (this.A && this.A.stop(), ml(this.g.$)), this.g.$.bb(b)) : a ? (this.A && this.A.ua(0.5), this.g.$.bb(Infinity)) : this.g.$.bb(Math.pow(2, 32));
        };
        function Vm(a, b) {
          var c, d, e, f, g, h;
          return Q(function(k2) {
            switch (k2.g) {
              case 1:
                th(a.m);
                if (b.Da || null == b.lb || b.mc) return k2.return();
                b.lb = null;
                if (!b.kc) {
                  k2.u(2);
                  break;
                }
                return G(k2, Qm(a, b, b.Re, b.Vd), 3);
              case 3:
                return k2.return();
              case 2:
                Om(a, b);
                if (b.stream.segmentIndex) {
                  k2.u(4);
                  break;
                }
                c = b.stream;
                xa(k2, 5);
                return G(k2, b.stream.createSegmentIndex(), 7);
              case 7:
                za(k2, 6);
                break;
              case 5:
                return d = Aa(k2), G(k2, Wm(a, b, d), 8);
              case 8:
                return k2.return();
              case 6:
                if (c != b.stream) return c.closeSegmentIndex && c.closeSegmentIndex(), b.Da || b.lb || Im(a, b, 0), k2.return();
              case 4:
                xa(k2, 9);
                e = Xm(a, b);
                null != e && (Im(a, b, e), b.sd = false);
                za(k2, 10);
                break;
              case 9:
                return f = Aa(k2), G(k2, Wm(a, b, f), 11);
              case 11:
                return k2.return();
              case 10:
                g = Array.from(a.i.values());
                if (!a.H || !g.every(function(l) {
                  return l.endOfStream;
                })) {
                  k2.u(0);
                  break;
                }
                return G(k2, a.g.$.endOfStream(), 13);
              case 13:
                th(a.m), h = a.g.$.getDuration(), 0 != h && h < a.j.presentationTimeline.getDuration() && a.j.presentationTimeline.bb(h), I(k2);
            }
          });
        }
        function Xm(a, b) {
          if (Ym(b)) return dl(a.g.$, b.stream.originalId || ""), null;
          b.type == cd && el(a.g.$);
          if (b.stream.isAudioMuxedInVideo) return null;
          var c = a.h.updateIntervalSeconds / Math.max(1, Math.abs(a.g.gb()));
          if (!Tk(a.g.$) && b.type != cd) return c / 2;
          var d = a.g.Qc();
          if ("audio" === b.type) for (var e = t(a.o.keys()), f = e.next(); !f.done; f = e.next()) f = a.o.get(f.value), f.Oa(d, true), hm(f, d);
          e = b.xa ? b.xa.endTime : d;
          var g = Xk(a.g.$, b.type, d), h = Math.max(1, Math.max(a.h.rebufferingGoal, a.h.bufferingGoal) * a.C), k2 = a.j.presentationTimeline.getDuration() - e;
          f = Wk(a.g.$, b.type);
          if (1e-6 > k2 && f) return b.endOfStream = true, "video" == b.type && (a = a.i.get(cd)) && Ym(a) && (a.endOfStream = true), null;
          b.endOfStream = false;
          if (g >= h) return c / 2;
          h = !b.ja;
          f = Zm(a, b, d, f);
          if (!f) return c;
          g = false;
          h && b.bf && (g = true, b.bf = false);
          h = Infinity;
          k2 = Array.from(a.i.values());
          k2 = t(k2);
          for (var l = k2.next(); !l.done; l = k2.next()) l = l.value, Ym(l) || l.ja && !l.ja.current() || (h = Math.min(h, l.xa ? l.xa.endTime : d));
          if (e >= h + a.j.presentationTimeline.h) return c;
          if ("keep" !== a.h.crossBoundaryStrategy && $m(a, b, f)) return null;
          b.aa && b.ja && !a.o.has(b.stream) && (b.aa.Oa(f.startTime), hm(b.aa, f.startTime).catch(function() {
          }));
          an(a, b, d, f, g).catch(function() {
          });
          b.nd && bn(a, b.nd, d);
          return null;
        }
        function Zm(a, b, c, d) {
          if (b.ja) return (c = b.ja.current()) && b.xa && 1e-3 > Math.abs(b.xa.startTime - c.startTime) && (c = b.ja.next().value), c;
          if (b.xa || d) return c = b.xa ? b.xa.endTime : d, a = 0 > a.g.gb(), b.stream.segmentIndex && (b.ja = b.stream.segmentIndex.Gb(c, false, a)), b.ja && b.ja.next().value;
          d = a.j.sequenceMode ? 0 : a.h.inaccurateManifestTolerance;
          var e = Math.max(c - d, 0);
          a = 0 > a.g.gb();
          var f = null;
          d && (b.stream.segmentIndex && (b.ja = b.stream.segmentIndex.Gb(e, false, a)), f = b.ja && b.ja.next().value);
          f || (b.stream.segmentIndex && (b.ja = b.stream.segmentIndex.Gb(
            c,
            false,
            a
          )), f = b.ja && b.ja.next().value);
          return f;
        }
        function an(a, b, c, d, e) {
          var f, g, h, k2, l, m, n, p, q, u, w, v, x, z, C, D, F, B;
          return Q(function(A) {
            switch (A.g) {
              case 1:
                f = ed;
                g = b.stream;
                h = b.ja;
                b.Da = true;
                xa(A, 2);
                if (2 == d.cc()) throw new U(1, 1, 1011);
                return G(A, cn(a, b, d, e), 4);
              case 4:
                th(a.m);
                if (a.B) return A.return();
                k2 = "video/mp4" == g.mimeType || "audio/mp4" == g.mimeType;
                l = window2.ReadableStream;
                if ((m = a.h.lowLatencyMode && a.j.isLowLatency) && l && k2 && ("HLS" != a.j.type || d.m)) return q = new Uint8Array(0), w = u = false, x = function(H) {
                  var E, L, M, J;
                  return Q(function(K) {
                    switch (K.g) {
                      case 1:
                        if (u) return K.return();
                        w = true;
                        th(a.m);
                        if (a.B) return K.return();
                        xa(K, 2);
                        q = dn(q, H);
                        E = false;
                        L = 0;
                        new Eh().box("mdat", function(N) {
                          L = N.size + N.start;
                          E = true;
                        }).parse(q, false, true);
                        if (!E) {
                          K.u(4);
                          break;
                        }
                        M = q.subarray(0, L);
                        q = q.subarray(L);
                        return G(K, en(a, b, c, g, d, M, true, e), 5);
                      case 5:
                        b.aa && b.ja && hm(b.aa, d.startTime, true);
                      case 4:
                        za(K, 0);
                        break;
                      case 2:
                        v = J = Aa(K), I(K);
                    }
                  });
                }, G(A, fn(a, b, d, x), 9);
                n = fn(a, b, d);
                return G(A, n, 7);
              case 7:
                p = A.h;
                th(a.m);
                if (a.B) return A.return();
                th(a.m);
                return b.kc ? (b.Da = false, Im(a, b, 0), A.return()) : G(A, en(a, b, c, g, d, p, false, e), 6);
              case 9:
                z = A.h;
                if (v) throw v;
                if (w) {
                  A.u(10);
                  break;
                }
                u = true;
                th(a.m);
                return a.B ? A.return() : b.kc ? (b.Da = false, Im(a, b, 0), A.return()) : G(A, en(a, b, c, g, d, z, false, e), 10);
              case 10:
                b.aa && b.ja && hm(b.aa, d.startTime, true);
              case 6:
                th(a.m);
                if (a.B) return A.return();
                b.xa = d;
                h.next();
                b.Da = false;
                b.$f = false;
                C = a.g.$.Fb();
                D = C[b.type];
                hb(JSON.stringify(D));
                b.kc || (F = null, b.type === f.la ? F = a.i.get(f.V) : b.type === f.V && (F = a.i.get(f.la)), F && F.type == f.V ? a.g.qe(d, b.stream, F.stream.isAudioMuxedInVideo) : a.g.qe(d, b.stream, b.stream.codecs.includes(",")));
                Im(a, b, 0);
                za(A, 0);
                break;
              case 2:
                B = Aa(A);
                th(a.m, B);
                if (a.B) return A.return();
                b.Da = false;
                if (7001 == B.code) b.Da = false, Am(b), Im(a, b, 0), A.u(0);
                else if (b.type == f.za && a.h.ignoreTextStreamFailures) a.i.delete(f.za), A.u(0);
                else {
                  if (3017 == B.code) return G(A, gn(a, b, B), 0);
                  b.sd = true;
                  1 == B.category && b.aa && nm(b.aa, d);
                  B.severity = 2;
                  return G(A, Wm(a, b, B), 0);
                }
            }
          });
        }
        function bn(a, b, c) {
          var d, e, f, g, h, k2, l, m;
          Q(function(n) {
            switch (n.g) {
              case 1:
                d = b.stream;
                f = (e = d.segmentIndex.Gb(c)) && e.next().value;
                if (!f) {
                  n.u(0);
                  break;
                }
                g = f.ca;
                if (!g || Aj(g, b.yb)) {
                  n.u(3);
                  break;
                }
                b.yb = g;
                xa(n, 4);
                return G(n, fn(a, b, g), 6);
              case 6:
                h = n.h;
                var p = a.g.$;
                p.I && id(p.I, h, 0, d);
                za(n, 3);
                break;
              case 4:
                throw k2 = Aa(n), b.yb = null, k2;
              case 3:
                if (b.xa && b.xa == f) {
                  n.u(0);
                  break;
                }
                b.xa = f;
                xa(n, 8);
                return G(n, fn(a, b, f), 10);
              case 10:
                l = n.h;
                p = a.g.$;
                p.I && id(p.I, l, 0, d);
                za(n, 0);
                break;
              case 8:
                throw m = Aa(n), b.xa = null, m;
            }
          });
        }
        function dn(a, b) {
          var c = new Uint8Array(a.length + b.length);
          c.set(a);
          c.set(b, a.length);
          return c;
        }
        function gn(a, b, c) {
          var d, e, f, g, h, k2;
          return Q(function(l) {
            if (1 == l.g) {
              d = Array.from(a.i.values());
              if (e = d.some(function(m) {
                return m != b && m.$f;
              })) return l.u(2);
              f = 0 === a.h.maxDisabledTime && 1011 == c.code ? 1 : a.h.maxDisabledTime;
              if (g = a.g.disableStream(b.stream, f)) return l.return();
              if (a.h.avoidEvictionOnQuotaExceededError) return Im(a, b, 4), l.return();
              h = Math.round(100 * a.C);
              if (20 < h) a.C -= 0.2;
              else if (4 < h) a.C -= 0.04;
              else return b.sd = true, a.B = true, a.g.onError(c), l.return();
              b.$f = true;
              k2 = a.g.Qc();
              return G(l, hn(a, b, k2), 2);
            }
            Im(a, b, 4);
            I(l);
          });
        }
        function cn(a, b, c, d) {
          var e, f, g, h, k2, l, m, n, p, q, u, w, v, x, z, C;
          return Q(function(D) {
            switch (D.g) {
              case 1:
                e = ed;
                f = null == b.xa;
                g = [];
                h = Math.max(0, Math.max(c.appendWindowStart, a.W) - 0.1);
                k2 = Math.min(c.appendWindowEnd, a.T) + 0.01;
                l = c.codecs || b.stream.codecs;
                m = tf(l);
                n = uf(c.mimeType || b.stream.mimeType);
                p = c.timestampOffset;
                if (p == b.he && h == b.zc && k2 == b.yc && m == b.fe && n == b.ge) {
                  D.u(2);
                  break;
                }
                q = b.fe && b.ge && tl(a.g.$, b.type, n, l);
                if (!q) {
                  D.u(3);
                  break;
                }
                u = null;
                b.type === e.la ? u = a.i.get(e.V) : b.type === e.V && (u = a.i.get(e.la));
                if (!u) {
                  D.u(3);
                  break;
                }
                return G(
                  D,
                  Bm(u).catch(function() {
                  }),
                  5
                );
              case 5:
                u.yb = null, u.zc = null, u.yc = null, Sm(a, u);
              case 3:
                return G(D, jn(a, b, p, h, k2, c, m, n), 2);
              case 2:
                return Aj(c.ca, b.yb) || (b.yb = c.ca, c.l && c.ca && (w = fn(a, b, c.ca), v = function() {
                  var F, B, A, H, E, L, M;
                  return Q(function(J) {
                    switch (J.g) {
                      case 1:
                        return xa(J, 2), G(J, w, 4);
                      case 4:
                        return F = J.h, th(a.m), B = null, A = /* @__PURE__ */ new Map(), H = { projection: null, hfov: null }, E = new Eh(), E.box("moov", Jh).box("trak", Jh).box("mdia", Jh).S("mdhd", function(K) {
                          B = fk(K.reader, K.version).timescale;
                        }).box("hdlr", function(K) {
                          K = K.reader;
                          K.skip(8);
                          switch (K.Bc()) {
                            case "soun":
                              A.set(e.V, B);
                              break;
                            case "vide":
                              A.set(e.la, B);
                          }
                          B = null;
                        }).box("minf", Jh).box("stbl", Jh).S("stsd", Lh).box("encv", Mh).box("avc1", Mh).box("avc3", Mh).box("hev1", Mh).box("hvc1", Mh).box("dvav", Mh).box("dva1", Mh).box("dvh1", Mh).box("dvhe", Mh).box("dvc1", Mh).box("dvi1", Mh).box("vexu", Jh).box("proj", Jh).S("prji", function(K) {
                          K = K.reader.Bc();
                          H.projection = K;
                        }).box("hfov", function(K) {
                          K = K.reader.R() / 1e3;
                          H.hfov = K;
                        }).parse(F), b.type === e.la && kn(a, H), A.has(b.type) ? c.ca.timescale = A.get(b.type) : null != B && (c.ca.timescale = B), L = b.stream.closedCaptions && 0 < b.stream.closedCaptions.size, G(J, a.g.Dg(b.type, F), 5);
                      case 5:
                        return G(J, Zk(a.g.$, b.type, F, null, b.stream, L, b.Ec, d), 6);
                      case 6:
                        za(J, 0);
                        break;
                      case 2:
                        throw M = Aa(J), b.yb = null, M;
                    }
                  });
                }, x = c.startTime, f && (z = Wk(a.g.$, b.type), null != z && (x = z)), a.g.dj(x, c.ca), g.push(v()))), C = b.xa ? b.xa.i : null, c.i != C && g.push(jl(a.g.$, b.type, c.startTime)), G(D, Promise.all(g), 0);
            }
          });
        }
        function jn(a, b, c, d, e, f, g, h) {
          var k2, l, m, n;
          return Q(function(p) {
            if (1 == p.g) return k2 = ed, l = /* @__PURE__ */ new Map(), a.l.audio && l.set(k2.V, a.l.audio), a.l.video && l.set(k2.la, a.l.video), xa(p, 2), b.zc = d, b.yc = e, g && (b.fe = g), h && (b.ge = h), b.he = c, m = a.j.sequenceMode || "HLS" == a.j.type, G(p, hl(a.g.$, b.type, c, d, e, m, f.mimeType || b.stream.mimeType, f.codecs || b.stream.codecs, l), 4);
            if (2 != p.g) return za(p, 0);
            n = Aa(p);
            b.zc = null;
            b.yc = null;
            b.fe = null;
            b.ge = null;
            b.he = null;
            throw n;
          });
        }
        function en(a, b, c, d, e, f, g, h) {
          g = void 0 === g ? false : g;
          h = void 0 === h ? false : h;
          var k2, l, m, n, p, q;
          return Q(function(u) {
            switch (u.g) {
              case 1:
                return k2 = d.closedCaptions && 0 < d.closedCaptions.size, a.h.shouldFixTimestampOffset && (m = "video/mp4" == d.mimeType || "audio/mp4" == d.mimeType, n = null, e.ca && (n = e.ca.timescale), (p = m && n && "video" === d.type && "DASH" == a.j.type) && (l = new Eh()), p && l.box("moof", Jh).box("traf", Jh).S("tfdt", function(w) {
                  var v, x, z, C, D, F;
                  return Q(function(B) {
                    v = Wj(w.reader, w.version);
                    x = v.baseMediaDecodeTime;
                    if (!x) return B.return();
                    z = -x / n;
                    C = Number(b.he) || 0;
                    if (!(C < z)) return B.u(0);
                    D = b.zc;
                    F = b.yc;
                    return G(B, jn(a, b, z, D, F, e), 0);
                  });
                }), p && l.parse(f, false, g)), G(u, hn(a, b, c), 2);
              case 2:
                return th(a.m), q = b.Ec, b.Ec = false, G(u, a.g.Dg(b.type, f), 3);
              case 3:
                return G(u, Zk(a.g.$, b.type, f, e, d, k2, q, h, g), 4);
              case 4:
                th(a.m), I(u);
            }
          });
        }
        function hn(a, b, c) {
          var d, e, f, g, h, k2, l, m;
          return Q(function(n) {
            if (1 == n.g) {
              d = b.stream.segmentIndex;
              d instanceof Sl && d.Oa(a.j.presentationTimeline.pb());
              e = Math.max(a.h.bufferBehind * a.C, a.j.presentationTimeline.h);
              f = Uk(a.g.$, b.type);
              if (null == f) return a.G == b && (a.G = null), n.return();
              g = c - f;
              h = a.h.evictionGoal;
              k2 = a.j.presentationTimeline.Hb();
              l = a.j.presentationTimeline.ob();
              m = g - e;
              l - k2 > h && (m = Math.max(g - e, k2 - h - f));
              return m <= h ? n.return() : G(n, a.g.$.remove(b.type, f, f + m), 2);
            }
            if (4 != n.g) return th(a.m), a.G ? G(
              n,
              hn(a, a.G, c),
              4
            ) : n.u(0);
            th(a.m);
            I(n);
          });
        }
        function Ym(a) {
          return a && a.type == cd && ("application/cea-608" == a.stream.mimeType || "application/cea-708" == a.stream.mimeType);
        }
        function fn(a, b, c, d) {
          var e, f, g, h, k2;
          return Q(function(l) {
            switch (l.g) {
              case 1:
                if (e = c.Qb()) return l.return(e);
                f = null;
                if (b.aa) {
                  var m = b.aa, n = m.h;
                  c instanceof zj && (n = m.j);
                  n.has(c) ? (m = n.get(c), d && (m.ng = d), f = m.Gd) : f = null;
                }
                f || (f = Um(c, b.stream, d || null, a.h.retryParameters, a.g.Wb));
                g = 0;
                b.ja && (g = b.ja.h);
                b.rb = f;
                return G(l, f.promise, 2);
              case 2:
                h = l.h;
                b.rb = null;
                k2 = h.data;
                if (!c.aesKey) {
                  l.u(3);
                  break;
                }
                return G(l, wm(k2, c.aesKey, g), 4);
              case 4:
                k2 = l.h;
              case 3:
                return l.return(k2);
            }
          });
        }
        function Um(a, b, c, d, e, f) {
          f = void 0 === f ? false : f;
          var g = a instanceof Bj ? a : void 0, h = g ? 1 : 0;
          a = xm(a.N(), a.Sa, a.wa, d, c);
          a.contentType = b.type;
          return e.request(qh, a, { type: h, stream: b, segment: g, isPreload: f });
        }
        function Qm(a, b, c, d) {
          var e, f;
          return Q(function(g) {
            if (1 == g.g) return b.kc = false, b.Re = false, b.Vd = 0, b.mc = true, b.xa = null, b.ja = null, b.aa && !a.o.has(b.stream) && om(b.aa), d ? (e = a.g.Qc(), f = a.g.$.getDuration(), G(g, a.g.$.remove(b.type, e + d, f), 3)) : G(g, gl(a.g.$, b.type), 4);
            if (3 != g.g) return th(a.m), c ? G(g, a.g.$.flush(b.type), 3) : g.u(3);
            th(a.m);
            b.mc = false;
            b.endOfStream = false;
            b.Da || b.lb || Im(a, b, 0);
            I(g);
          });
        }
        function Im(a, b, c) {
          var d = b.type;
          if (d != cd || a.i.has(d)) b.lb = new dc(function() {
            var e;
            return Q(function(f) {
              if (1 == f.g) return xa(f, 2), G(f, Vm(a, b), 4);
              if (2 != f.g) return za(f, 0);
              e = Aa(f);
              if (a.g) a.g.onError(e);
              I(f);
            });
          }).da(c);
        }
        function Am(a) {
          null != a.lb && (a.lb.stop(), a.lb = null);
        }
        function Bm(a) {
          return Q(function(b) {
            return a.rb ? G(b, a.rb.abort(), 0) : b.u(0);
          });
        }
        function Wm(a, b, c) {
          var d;
          return Q(function(e) {
            if (1 == e.g) return 3024 == c.code ? (b.Da = false, Am(b), Im(a, b, 0), e.return()) : G(e, Sg(a.P), 2);
            th(a.m);
            if (1 === c.category && 1003 != c.code) {
              if (b.ec) return Km(a, false), e.return();
              d = 0 === a.h.maxDisabledTime && 1011 == c.code ? 1 : a.h.maxDisabledTime;
              c.handled = a.g.disableStream(b.stream, d);
              c.handled && (c.severity = 1);
            }
            if (!c.handled || 1011 != c.code) a.g.onError(c);
            c.handled || a.h.failureCallback(c);
            I(e);
          });
        }
        function Pm(a, b, c) {
          b = void 0 === b ? false : b;
          c = void 0 === c ? true : c;
          var d, e, f, g, h, k2;
          return Q(function(l) {
            if (1 == l.g) {
              d = Date.now() / 1e3;
              e = a.h.minTimeBetweenRecoveries;
              if (!b) {
                if (!a.h.allowMediaSourceRecoveries || d - a.L < e) return l.return(false);
                a.L = d;
              }
              f = ed;
              if (g = a.i.get(f.V)) g.yb = null, g.zc = null, g.yc = null, c && Sm(a, g), Bm(g).catch(function() {
              }), g.ja && g.ja.bg();
              if (h = a.i.get(f.la)) h.yb = null, h.zc = null, h.yc = null, c && Sm(a, h), Bm(h).catch(function() {
              }), h.ja && h.ja.bg();
              k2 = /* @__PURE__ */ new Map();
              a.l.audio && k2.set(f.V, a.l.audio);
              a.l.video && k2.set(f.la, a.l.video);
              return G(l, rl(a.g.$, k2), 2);
            }
            !h || h.mc || h.Da || h.lb || Im(a, h, 0);
            !g || g.mc || g.Da || g.lb || Im(a, g, 0);
            return l.return(true);
          });
        }
        function kn(a, b) {
          if (a.M.projection != b.projection || a.M.hfov != b.hfov) {
            if (null != b.projection || null != b.hfov) {
              var c = (/* @__PURE__ */ new Map()).set("detail", b);
              c = new V("spatialvideoinfo", c);
            } else c = new V("nospatialvideoinfo");
            c.cancelable = true;
            a.g.onEvent(c);
            a.M = b;
          }
        }
        function Tm(a, b) {
          b = void 0 === b ? false : b;
          if ("keep" !== a.h.crossBoundaryStrategy) {
            a.g.video.seeking && (b = false);
            a.F.stop();
            var c = a.g.Qc(), d = a.i.get("video") || a.i.get("audio");
            d && (d = d.yb) && (d = d.g, null != d && (c = d - c, 0 < c && 1 > c && (a.I = d + 0.01, b ? a.F.kb() : a.F.da(c))));
          }
        }
        function $m(a, b, c) {
          if (b.type === cd) return false;
          var d = b.yb;
          if (!d) return false;
          c = c.ca;
          var e = d.g !== c.g;
          "reset_to_encrypted" === a.h.crossBoundaryStrategy && (d.encrypted || c.encrypted || (e = false), d.encrypted && (a.h.crossBoundaryStrategy = "keep"));
          "RESET_ON_ENCRYPTION_CHANGE" === a.h.crossBoundaryStrategy && d.encrypted == c.encrypted && (e = false);
          if (e && b.Ec) {
            var f = a.g.video, g = f.paused;
            Pm(a, true).then(function() {
              a.g.onEvent(new V("boundarycrossed"));
              g || f.play();
            });
          }
          return e;
        }
        ;
        function ln() {
        }
        function mn(a, b, c, d, e) {
          var f = e in d;
          var g = f ? c.constructor == Object && 0 == Object.keys(d).length : c.constructor == Object && 0 == Object.keys(c).length;
          var h = f || g, k2 = true, l;
          for (l in b) {
            var m = e + "." + l, n = f ? d[e] : c[l];
            h || l in c ? void 0 === b[l] ? void 0 === n || h ? delete a[l] : a[l] = Md(n) : g ? a[l] = b[l] : n.constructor == Object && b[l] && b[l].constructor == Object ? (a[l] || (a[l] = Md(n)), m = mn(a[l], b[l], n, d, m), k2 = k2 && m) : typeof b[l] != typeof n || null == b[l] || "function" != typeof b[l] && b[l].constructor != n.constructor ? (ab("Invalid config, wrong type for " + m), k2 = false) : ("function" == typeof c[l] && c[l].length != b[l].length && db("Unexpected number of arguments for " + m), a[l] = b[l]) : (ab("Invalid config, unrecognized key " + m), k2 = false);
          }
          return k2;
        }
        function nn(a, b) {
          for (var c = {}, d = c, e = 0, f = 0; ; ) {
            e = a.indexOf(".", e);
            if (0 > e) break;
            if (0 == e || "\\" != a[e - 1]) f = a.substring(f, e).replace(/\\\./g, "."), d[f] = {}, d = d[f], f = e + 1;
            e += 1;
          }
          d[a.substring(f).replace(/\\\./g, ".")] = b;
          return c;
        }
        function on(a, b) {
          return a && b;
        }
        function pn(a, b) {
          function c(f) {
            for (var g = t(Object.keys(f)), h = g.next(); !h.done; h = g.next()) if (h = h.value, !(f[h] instanceof HTMLElement)) if (e(f[h]) && 0 === Object.keys(f[h]).length) delete f[h];
            else {
              var k2 = f[h];
              Array.isArray(k2) && 0 === k2.length ? delete f[h] : "function" == typeof f[h] ? delete f[h] : e(f[h]) && (c(f[h]), 0 === Object.keys(f[h]).length && delete f[h]);
            }
          }
          function d(f, g) {
            return Object.keys(f).reduce(function(h, k2) {
              var l = f[k2];
              if (g.hasOwnProperty(k2)) if (l instanceof HTMLElement && g[k2] instanceof HTMLElement) l.isEqualNode(g[k2]) || (h[k2] = l);
              else if (e(l) && e(g[k2])) {
                if (l = d(l, g[k2]), 0 < Object.keys(l).length || !e(l)) h[k2] = l;
              } else Array.isArray(l) && Array.isArray(g[k2]) ? Cd(l, g[k2]) || (h[k2] = l) : Number.isNaN(l) && Number.isNaN(g[k2]) || l !== g[k2] && (h[k2] = l);
              else h[k2] = l;
              return h;
            }, {});
          }
          function e(f) {
            return f && "object" === typeof f && !Array.isArray(f);
          }
          a = d(a, b);
          c(a);
          return a;
        }
        T("shaka.util.ConfigUtils", ln);
        ln.getDifferenceFromConfigObjects = pn;
        ln.convertToConfigObject = nn;
        ln.mergeConfigObjects = mn;
        function qn() {
        }
        function rn(a) {
          a = Jc(a);
          return new yb(a).wb;
        }
        function sn(a, b, c) {
          function d(h) {
            Vb(f).setUint32(g, h.byteLength, true);
            g += 4;
            f.set(Qb(h), g);
            g += h.byteLength;
          }
          if (!c || !c.byteLength) throw new U(2, 6, 6015);
          var e;
          "string" == typeof b ? e = Lc(b, true) : e = b;
          a = Jc(a);
          a = Lc(a, true);
          var f = new Uint8Array(12 + a.byteLength + e.byteLength + c.byteLength), g = 0;
          d(a);
          d(e);
          d(c);
          return f;
        }
        function tn(a, b, c) {
          if ("skd" !== b) return a;
          b = c.serverCertificate;
          c = Jc(a).split("skd://").pop();
          return sn(a, c, b);
        }
        function un(a, b) {
          2 === a && (a = b.drmInfo) && ac(a.keySystem) && (b.headers["Content-Type"] = "application/octet-stream");
        }
        T("shaka.drm.FairPlay", qn);
        qn.commonFairPlayResponse = function(a, b) {
          if (2 === a && (a = b.originalRequest.drmInfo) && ac(a.keySystem)) {
            try {
              var c = Gc(b.data);
            } catch (e) {
              return;
            }
            a = false;
            c = c.trim();
            "<ckc>" === c.substr(0, 5) && "</ckc>" === c.substr(-6) && (c = c.slice(5, -6), a = true);
            if (!a) try {
              var d = JSON.parse(c);
              d.ckc && (c = d.ckc, a = true);
              d.CkcMessage && (c = d.CkcMessage, a = true);
              d.License && (c = d.License, a = true);
            } catch (e) {
            }
            a && (b.data = Sb(Sc(c)));
          }
        };
        qn.muxFairPlayRequest = function(a, b) {
          un(a, b);
        };
        qn.expressplayFairPlayRequest = function(a, b) {
          if (2 === a) {
            var c = b.drmInfo;
            c && ac(c.keySystem) && un(a, b);
          }
        };
        qn.conaxFairPlayRequest = function(a, b) {
          un(a, b);
        };
        qn.ezdrmFairPlayRequest = function(a, b) {
          un(a, b);
        };
        qn.verimatrixFairPlayRequest = function(a, b) {
          2 === a && (a = b.drmInfo) && ac(a.keySystem) && (a = Qb(b.body), a = Rc(a), b.headers["Content-Type"] = "application/x-www-form-urlencoded", b.body = Kc("spc=" + a));
        };
        qn.muxInitDataTransform = function(a, b, c) {
          return tn(a, b, c);
        };
        qn.expressplayInitDataTransform = function(a, b, c) {
          return tn(a, b, c);
        };
        qn.conaxInitDataTransform = function(a, b, c) {
          if ("skd" !== b) return a;
          b = c.serverCertificate;
          c = Jc(a).split("skd://").pop().split("?").shift();
          c = window2.atob(c);
          var d = new ArrayBuffer(2 * c.length);
          d = Ub(d);
          for (var e = 0, f = c.length; e < f; e++) d[e] = c.charCodeAt(e);
          return sn(a, d, b);
        };
        qn.ezdrmInitDataTransform = function(a, b, c) {
          if ("skd" !== b) return a;
          b = c.serverCertificate;
          c = Jc(a).split(";").pop();
          return sn(a, c, b);
        };
        qn.verimatrixInitDataTransform = function(a, b, c) {
          return tn(a, b, c);
        };
        qn.initDataTransform = sn;
        qn.defaultGetContentId = rn;
        qn.isFairPlaySupported = function() {
          var a;
          return Q(function(b) {
            if (1 == b.g) return a = { initDataTypes: ["cenc", "sinf", "skd"], videoCapabilities: [{ contentType: 'video/mp4; codecs="avc1.42E01E"' }] }, xa(b, 2), G(b, navigator.requestMediaKeySystemAccess("com.apple.fps", [a]), 4);
            if (2 != b.g) return b.return(true);
            Aa(b);
            return b.return(false);
          });
        };
        function vn() {
          this.g = null;
        }
        vn.prototype.configure = function(a) {
          this.g = a;
        };
        vn.prototype.create = function(a) {
          var b;
          if (this.g.language) {
            var c = wn(a, this.g.language);
            c.length && (b = c);
          }
          b || (b = a.filter(function(d) {
            return d.primary;
          }), b = b.length ? b : a);
          a = xn(b, this.g.role);
          a.length && (b = a);
          this.g.videoLayout && (a = yn(b, this.g.videoLayout), a.length && (b = a));
          this.g.Rc && (a = zn(b, this.g.Rc), a.length && (b = a));
          this.g.channelCount && (a = An(b, this.g.channelCount), a.length && (b = a));
          this.g.Jc && (a = Bn(b, this.g.Jc), a.length && (b = a));
          this.g.fd && (a = Cn(b, this.g.fd), a.length && (b = a));
          a = Dn(b, this.g.spatialAudio);
          a.length && (b = a);
          this.g.audioCodec && (a = En(b, this.g.audioCodec), a.length && (b = a));
          return new Ci(b[0], b, !("smooth" == this.g.codecSwitchingStrategy && nd()));
        };
        function wn(a, b) {
          b = Nf(b);
          var c = $f(b, a.map(function(d) {
            return Vf(d);
          }));
          return c ? a.filter(function(d) {
            return c == Vf(d);
          }) : [];
        }
        function xn(a, b) {
          return a.filter(function(c) {
            return c.audio ? b ? c.audio.roles.includes(b) : 0 == c.audio.roles.length : false;
          });
        }
        function Bn(a, b) {
          return a.filter(function(c) {
            return c.audio && c.audio.label ? c.audio.label.toLowerCase() == b.toLowerCase() : false;
          });
        }
        function Cn(a, b) {
          return a.filter(function(c) {
            return c.video && c.video.label ? c.video.label.toLowerCase() == b.toLowerCase() : false;
          });
        }
        function An(a, b) {
          return a.filter(function(c) {
            return c.audio && c.audio.channelsCount && c.audio.channelsCount > b ? false : true;
          }).sort(function(c, d) {
            return c.audio || d.audio ? c.audio ? d.audio ? (d.audio.channelsCount || 0) - (c.audio.channelsCount || 0) : 1 : -1 : 0;
          });
        }
        function zn(a, b) {
          "AUTO" == b && (b = window2.matchMedia("(color-gamut: p3)").matches ? a.some(function(c) {
            return c.video && c.video.hdr && "HLG" == c.video.hdr ? true : false;
          }) ? "HLG" : "PQ" : "SDR");
          return a.filter(function(c) {
            return c.video && c.video.hdr && c.video.hdr != b ? false : true;
          });
        }
        function yn(a, b) {
          return a.filter(function(c) {
            return c.video && c.video.videoLayout && c.video.videoLayout != b ? false : true;
          });
        }
        function Dn(a, b) {
          return a.filter(function(c) {
            return c.audio && c.audio.spatialAudio != b ? false : true;
          });
        }
        function En(a, b) {
          return a.filter(function(c) {
            return c.audio && c.audio.codecs != b ? false : true;
          });
        }
        ;
        function Fn() {
        }
        function Gn() {
          var a = Infinity;
          navigator.connection && navigator.connection.saveData && (a = 360);
          var b = {
            retryParameters: Rg(),
            servers: {},
            clearKeys: {},
            advanced: {},
            delayLicenseRequestUntilPlayed: false,
            persistentSessionOnlinePlayback: false,
            persistentSessionsMetadata: [],
            initDataTransform: function(m, n, p) {
              "apple" === window2.shakaMediaKeysPolyfill && "skd" == n && (n = p.serverCertificate, p = rn(m), m = sn(m, p, n));
              return m;
            },
            logLicenseExchange: false,
            updateExpirationTime: 1,
            preferredKeySystems: [],
            keySystemsMapping: {},
            parseInbandPsshEnabled: jc(),
            minHdcpVersion: "",
            ignoreDuplicateInitData: !kc("Tizen 2"),
            defaultAudioRobustnessForWidevine: "SW_SECURE_CRYPTO",
            defaultVideoRobustnessForWidevine: "SW_SECURE_DECODE"
          };
          (jc() || uc()) && b.preferredKeySystems.push("com.microsoft.playready");
          var c = "reload", d = false;
          !nd() || lc() || uc() || tc() || nc() && 79 === pc() || qc() && !yc() && !zc() || xc() && ic() || (c = "smooth", d = true);
          d = {
            retryParameters: Rg(),
            availabilityWindowOverride: NaN,
            disableAudio: false,
            disableVideo: false,
            disableText: false,
            disableThumbnails: false,
            disableIFrames: false,
            defaultPresentationDelay: 0,
            segmentRelativeVttTiming: false,
            raiseFatalErrorOnManifestUpdateRequestFailure: false,
            continueLoadingWhenPaused: true,
            ignoreSupplementalCodecs: false,
            updatePeriod: -1,
            ignoreDrmInfo: false,
            dash: { clockSyncUri: "", disableXlinkProcessing: true, xlinkFailGracefully: false, ignoreMinBufferTime: false, autoCorrectDrift: true, initialSegmentLimit: 1e3, ignoreSuggestedPresentationDelay: false, ignoreEmptyAdaptationSet: false, ignoreMaxSegmentDuration: false, keySystemsByURI: {
              "urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b": "org.w3.clearkey",
              "urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e": "org.w3.clearkey",
              "urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed": "com.widevine.alpha",
              "urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95": "com.microsoft.playready",
              "urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95": "com.microsoft.playready",
              "urn:uuid:94ce86fb-07ff-4f43-adb8-93d2fa968ca2": "com.apple.fps",
              "urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c": "com.huawei.wiseplay"
            }, manifestPreprocessor: Hn, manifestPreprocessorTXml: In, sequenceMode: false, multiTypeVariantsAllowed: d, useStreamOnceInPeriodFlattening: false, enableFastSwitching: true },
            hls: { ignoreTextStreamFailures: false, ignoreImageStreamFailures: false, defaultAudioCodec: "mp4a.40.2", defaultVideoCodec: "avc1.42E01E", ignoreManifestProgramDateTime: false, ignoreManifestProgramDateTimeForTypes: [], mediaPlaylistFullMimeType: 'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"', liveSegmentsDelay: 3, sequenceMode: Dc(), ignoreManifestTimestampsInSegmentsMode: false, disableCodecGuessing: false, disableClosedCaptionsDetection: false, allowLowLatencyByteRangeOptimization: true, allowRangeRequestsToGuessMimeType: false },
            mss: {
              manifestPreprocessor: Hn,
              manifestPreprocessorTXml: In,
              sequenceMode: false,
              keySystemsBySystemId: { "9a04f079-9840-4286-ab92-e65be0885f95": "com.microsoft.playready", "79f0049a-4098-8642-ab92-e65be0885f95": "com.microsoft.playready" }
            }
          };
          var e = {
            retryParameters: Rg(),
            failureCallback: function(m) {
              return on([m]);
            },
            rebufferingGoal: 0,
            bufferingGoal: 10,
            bufferBehind: 30,
            evictionGoal: 1,
            ignoreTextStreamFailures: false,
            alwaysStreamText: false,
            startAtSegmentBoundary: false,
            gapDetectionThreshold: 0.5,
            gapPadding: 0,
            gapJumpTimerTime: 0.25,
            durationBackoff: 1,
            safeSeekOffset: 5,
            safeSeekEndOffset: 0,
            stallEnabled: true,
            stallThreshold: 1,
            stallSkip: 0.1,
            useNativeHlsForFairPlay: true,
            inaccurateManifestTolerance: 2,
            lowLatencyMode: false,
            forceHTTP: false,
            forceHTTPS: false,
            minBytesForProgressEvents: 16e3,
            preferNativeDash: false,
            preferNativeHls: false,
            updateIntervalSeconds: 1,
            observeQualityChanges: false,
            maxDisabledTime: 30,
            segmentPrefetchLimit: 1,
            prefetchAudioLanguages: [],
            disableAudioPrefetch: false,
            disableTextPrefetch: false,
            disableVideoPrefetch: false,
            liveSync: {
              enabled: false,
              targetLatency: 0.5,
              targetLatencyTolerance: 0.5,
              maxPlaybackRate: 1.1,
              minPlaybackRate: 0.95,
              panicMode: false,
              panicThreshold: 60,
              dynamicTargetLatency: { enabled: false, stabilityThreshold: 60, rebufferIncrement: 0.5, maxAttempts: 10, maxLatency: 4, minLatency: 1 }
            },
            allowMediaSourceRecoveries: true,
            minTimeBetweenRecoveries: 5,
            vodDynamicPlaybackRate: false,
            vodDynamicPlaybackRateLowBufferRate: 0.95,
            vodDynamicPlaybackRateBufferRatio: 0.5,
            preloadNextUrlWindow: 30,
            loadTimeout: 30,
            clearDecodingCache: uc() || tc(),
            dontChooseCodecs: false,
            shouldFixTimestampOffset: nc() || lc(),
            avoidEvictionOnQuotaExceededError: false,
            crossBoundaryStrategy: "keep"
          };
          if (nc() || lc() || qc() || vc()) e.stallSkip = 0;
          if (navigator.userAgent.match(/Edge\//) || jc()) e.gapPadding = 0.01;
          lc() && (e.gapPadding = 2);
          oc() && (e.crossBoundaryStrategy = "reset");
          mc() && (e.crossBoundaryStrategy = "reset_to_encrypted");
          rc() && (e.crossBoundaryStrategy = "RESET_ON_ENCRYPTION_CHANGE");
          var f = { trackSelectionCallback: function(m) {
            return Q(function(n) {
              return n.return(m);
            });
          }, downloadSizeCallback: function(m) {
            var n;
            return Q(function(p) {
              if (1 == p.g) return navigator.storage && navigator.storage.estimate ? G(
                p,
                navigator.storage.estimate(),
                3
              ) : p.return(true);
              n = p.h;
              return p.return(n.usage + m < 0.95 * n.quota);
            });
          }, progressCallback: function(m, n) {
            return on([m, n]);
          }, usePersistentLicense: true, numberOfParallelDownloads: 5 };
          a = {
            enabled: true,
            useNetworkInformation: true,
            defaultBandwidthEstimate: 1e6,
            switchInterval: 8,
            bandwidthUpgradeTarget: 0.85,
            bandwidthDowngradeTarget: 0.95,
            restrictions: { minWidth: 0, maxWidth: Infinity, minHeight: 0, maxHeight: a, minPixels: 0, maxPixels: Infinity, minFrameRate: 0, maxFrameRate: Infinity, minBandwidth: 0, maxBandwidth: Infinity, minChannelsCount: 0, maxChannelsCount: Infinity },
            advanced: { minTotalBytes: 128e3, minBytes: 16e3, fastHalfLife: 2, slowHalfLife: 5 },
            restrictToElementSize: false,
            restrictToScreenSize: false,
            ignoreDevicePixelRatio: false,
            clearBufferSwitch: false,
            safeMarginSwitch: 0,
            cacheLoadThreshold: 20,
            minTimeToSwitch: rc() ? 0.5 : 0,
            preferNetworkInformationBandwidth: false
          };
          c = { codecSwitchingStrategy: c, addExtraFeaturesToSourceBuffer: function(m) {
            return on([m], "");
          }, forceTransmux: false, insertFakeEncryptionInInit: true, modifyCueCallback: function(m, n) {
            return on([m, n]);
          }, dispatchAllEmsgBoxes: false };
          var g = false, h = false, k2 = true;
          Ac() && (h = g = true, k2 = false);
          var l = {
            drm: b,
            manifest: d,
            streaming: e,
            mediaSource: c,
            offline: f,
            abrFactory: function() {
              return new Lg();
            },
            adaptationSetCriteriaFactory: function() {
              return new (Function.prototype.bind.apply(vn, [null].concat(y(Na.apply(0, arguments)))))();
            },
            abr: a,
            autoShowText: 3,
            preferredAudioLanguage: "",
            preferredAudioLabel: "",
            preferredTextLanguage: "",
            preferredVariantRole: "",
            preferredTextRole: "",
            preferredAudioChannelCount: 2,
            preferredVideoHdrLevel: "AUTO",
            preferredVideoLayout: "",
            preferredVideoLabel: "",
            preferredVideoCodecs: [],
            preferredAudioCodecs: [],
            preferredTextFormats: [],
            preferForcedSubs: false,
            preferSpatialAudio: false,
            preferredDecodingAttributes: [],
            restrictions: { minWidth: 0, maxWidth: Infinity, minHeight: 0, maxHeight: Infinity, minPixels: 0, maxPixels: Infinity, minFrameRate: 0, maxFrameRate: Infinity, minBandwidth: 0, maxBandwidth: Infinity, minChannelsCount: 0, maxChannelsCount: Infinity },
            playRangeStart: 0,
            playRangeEnd: Infinity,
            textDisplayer: { captionsUpdatePeriod: 0.25, fontScaleFactor: 1 },
            textDisplayFactory: function() {
              return null;
            },
            cmcd: {
              enabled: false,
              sessionId: "",
              contentId: "",
              rtpSafetyFactor: 5,
              useHeaders: false,
              includeKeys: [],
              version: 1
            },
            cmsd: { enabled: true, applyMaximumSuggestedBitrate: true, estimatedThroughputWeightRatio: 0.5 },
            lcevc: { enabled: false, dynamicPerformanceScaling: true, logLevel: 0, drawLogo: false },
            ads: { customPlayheadTracker: g, skipPlayDetection: h, supportsMultipleMediaElements: k2, disableHLSInterstitial: false, disableDASHInterstitial: false, allowPreloadOnDomElements: true },
            ignoreHardwareResolution: false
          };
          f.trackSelectionCallback = function(m) {
            return Q(function(n) {
              return n.return(Jn(
                m,
                l.preferredAudioLanguage,
                l.preferredVideoHdrLevel
              ));
            });
          };
          return l;
        }
        function Kn() {
          return { streaming: { inaccurateManifestTolerance: 0, segmentPrefetchLimit: 2, updateIntervalSeconds: 0.1, maxDisabledTime: 1, retryParameters: { baseDelay: 100 } }, manifest: { dash: { autoCorrectDrift: false }, retryParameters: { baseDelay: 100 } }, drm: { retryParameters: { baseDelay: 100 } } };
        }
        function Ln(a, b, c) {
          var d = { ".drm.keySystemsMapping": "", ".drm.servers": "", ".drm.clearKeys": "", ".drm.advanced": { distinctiveIdentifierRequired: false, persistentStateRequired: false, videoRobustness: [], audioRobustness: [], sessionType: "", serverCertificate: new Uint8Array(0), serverCertificateUri: "", individualizationServer: "", headers: {} } };
          return mn(a, b, c || Gn(), d, "");
        }
        function Jn(a, b, c) {
          var d = c;
          "AUTO" == d && (d = window2.matchMedia("(color-gamut: p3)").matches ? a.some(function(h) {
            return h.hdr && "HLG" == h.hdr ? true : false;
          }) ? "HLG" : "PQ" : "SDR");
          var e = a.filter(function(h) {
            return "variant" != h.type || h.hdr && h.hdr != d ? false : true;
          });
          c = [];
          var f = $f(b, e.map(function(h) {
            return h.language;
          }));
          f && (c = e.filter(function(h) {
            return Nf(h.language) == f;
          }));
          0 == c.length && (c = e.filter(function(h) {
            return h.primary;
          }));
          0 == c.length && (e.map(function(h) {
            return h.language;
          }), c = e);
          var g = c.filter(function(h) {
            return h.height && 480 >= h.height;
          });
          g.length && (g.sort(function(h, k2) {
            return k2.height - h.height;
          }), c = g.filter(function(h) {
            return h.height == g[0].height;
          }));
          b = [];
          c.length && (e = Math.floor(c.length / 2), c.sort(function(h, k2) {
            return h.bandwidth - k2.bandwidth;
          }), b.push(c[e]));
          a = t(a);
          for (c = a.next(); !c.done; c = a.next()) c = c.value, c.type != cd && "image" != c.type || b.push(c);
          return b;
        }
        function Hn(a) {
          return on([a], a);
        }
        function In(a) {
          return on([a], a);
        }
        T("shaka.util.PlayerConfiguration", Fn);
        Fn.mergeConfigObjects = Ln;
        Fn.createDefaultForLL = Kn;
        Fn.createDefault = Gn;
        function Mn() {
          this.g = null;
          this.h = [];
        }
        function Nn(a, b) {
          var c = 0;
          a.g && a.g.state == b && (c += a.g.duration);
          a = t(a.h);
          for (var d = a.next(); !d.done; d = a.next()) d = d.value, c += d.state == b ? d.duration : 0;
          return c;
        }
        function On(a) {
          function b(f) {
            return { timestamp: f.timestamp, state: f.state, duration: f.duration };
          }
          for (var c = [], d = t(a.h), e = d.next(); !e.done; e = d.next()) c.push(b(e.value));
          a.g && c.push(b(a.g));
          return c;
        }
        ;
        function Pn() {
          this.i = this.h = null;
          this.g = [];
        }
        function eo(a, b, c) {
          a.i != b && (a.i = b, a.g.push({ timestamp: Date.now() / 1e3, id: b.id, type: "text", fromAdaptation: c, bandwidth: null }));
        }
        ;
        function fo() {
          this.lc = this.$g = this.s = this.A = this.I = this.B = this.o = this.j = this.H = this.C = this.i = this.P = this.T = this.L = this.M = this.O = this.l = this.m = NaN;
          this.K = 0;
          this.F = this.G = NaN;
          this.g = new Mn();
          this.h = new Pn();
        }
        ;
        function go(a, b, c, d) {
          ch.call(this);
          this.O = a;
          this.Y = b;
          this.Fa = d.networkingEngine;
          this.B = c;
          this.o = null;
          this.ya = 0;
          this.Ma = d.Kc;
          this.F = d.Xi;
          this.Na = d.Yi;
          this.g = d.config;
          this.l = this.G = this.h = null;
          this.pa = false;
          this.H = d.ij;
          this.sa = false;
          this.i = null;
          this.ka = false;
          this.j = this.C = null;
          this.ea = false;
          this.M = /* @__PURE__ */ new Map();
          this.Aa = false;
          this.Ga = d.hj;
          this.Z = new fo();
          this.oa = new Tg();
          this.m = new Tg();
          this.P = null;
          this.s = false;
          this.fa = d.Sh;
          this.W = this.K = null;
          this.La = d.Rh;
          this.T = false;
          this.L = [];
          this.I = [];
          this.A = true;
        }
        qa(go, ch);
        function ho(a, b, c) {
          (a = b ? a.I : a.L) ? a.push(c) : c();
        }
        function io(a) {
          if (a.I) for (var b = t(a.I), c = b.next(); !c.done; c = b.next()) c = c.value, c();
          a.I = null;
        }
        function jo(a, b) {
          a.P = b;
          a.T = true;
          if (a.L) {
            b = t(a.L);
            for (var c = b.next(); !c.done; c = b.next()) c = c.value, c();
          }
          a.L = null;
        }
        r = go.prototype;
        r.getStartTime = function() {
          return this.B;
        };
        r.Pc = function() {
          return this.O;
        };
        r.Gf = function() {
          return this.h;
        };
        function ko(a) {
          a.ea = true;
          return a.j;
        }
        function lo(a) {
          a.sa = true;
          return a.H;
        }
        r.getStats = function() {
          return this.Z;
        };
        function mo(a) {
          a.ka = true;
          return a.i;
        }
        r.yi = function() {
          return this.K ? wg(this.K) : null;
        };
        r.xi = function() {
          return this.W ? xg(this.W) : null;
        };
        function no(a) {
          a.Aa = true;
          return a.M;
        }
        r.start = function() {
          var a = this;
          (function() {
            var b;
            return Q(function(c) {
              switch (c.g) {
                case 1:
                  return G(c, Promise.resolve(), 2);
                case 2:
                  return xa(c, 3), G(c, oo(a), 5);
                case 5:
                  po(a);
                  if ("webkit" === window2.shakaMediaKeysPolyfill) {
                    c.u(6);
                    break;
                  }
                  return G(c, qo(a), 7);
                case 7:
                  po(a);
                case 6:
                  return G(c, ro(a), 8);
                case 8:
                  po(a);
                  if (!a.fa || !a.i) {
                    c.u(9);
                    break;
                  }
                  return G(c, xi(a.i), 10);
                case 10:
                  po(a);
                case 9:
                  a.m.resolve();
                  za(c, 0);
                  break;
                case 3:
                  b = Aa(c), b instanceof U && (7001 == b.code || 7003 == b.code) || a.m.reject(b), I(c);
              }
            });
          })();
        };
        r.dispatchEvent = function(a) {
          return this.P ? this.P.dispatchEvent(a) : ch.prototype.dispatchEvent.call(this, a);
        };
        r.onError = function(a) {
          2 === a.severity && (this.m.reject(a), this.destroy());
          var b = (/* @__PURE__ */ new Map()).set("detail", a);
          b = new V("error", b);
          this.dispatchEvent(b);
          b.defaultPrevented && (a.handled = true);
        };
        function po(a) {
          if (a.s) throw new U(2, 7, 7003);
        }
        function so(a, b) {
          a.dispatchEvent(new V("onstatechange", (/* @__PURE__ */ new Map()).set("state", b)));
        }
        function oo(a) {
          var b, c, d, e, f, g, h, k2, l;
          return Q(function(m) {
            switch (m.g) {
              case 1:
                so(a, "manifest-parser");
                a.l || (a.G = Ui(a.O, a.Y), a.l = a.G(), a.l.configure(a.g.manifest, function() {
                  return a.A;
                }));
                b = Date.now() / 1e3;
                so(a, "manifest");
                if (a.h) {
                  m.u(2);
                  break;
                }
                return G(m, a.l.start(a.O, a.Na), 3);
              case 3:
                a.h = m.h;
                if (1 != a.h.variants.length) {
                  m.u(2);
                  break;
                }
                c = [];
                d = a.h.variants[0];
                e = t([d.video, d.audio]);
                for (f = e.next(); !f.done; f = e.next()) (g = f.value) && !g.segmentIndex && c.push(g.createSegmentIndex());
                if (!(0 < c.length)) {
                  m.u(2);
                  break;
                }
                return G(
                  m,
                  Promise.all(c),
                  2
                );
              case 2:
                return a.oa.resolve(), h = new V("manifestparsed", void 0), G(m, Promise.resolve(), 7);
              case 7:
                a.dispatchEvent(h);
                if (0 == a.h.variants.length) throw new U(2, 4, 4036);
                to(a.h);
                k2 = Date.now() / 1e3;
                l = k2 - b;
                a.Z.H = l;
                I(m);
            }
          });
        }
        function qo(a, b) {
          var c, d, e, f, g, h;
          return Q(function(k2) {
            switch (k2.g) {
              case 1:
                if (!a.h || a.i) return k2.return();
                so(a, "drm-engine");
                a.ya = Date.now() / 1e3;
                a.i = a.Ma();
                a.F.h = a.i;
                a.i.configure(a.g.drm, function() {
                  return a.A;
                });
                c = Mi(a.F, a.h);
                if (!c) {
                  k2.u(2);
                  break;
                }
                d = new V("trackschanged", void 0);
                return G(k2, Promise.resolve(), 3);
              case 3:
                po(a), a.dispatchEvent(d);
              case 2:
                return e = Gg(a.h.variants), f = true, a.h && a.h.presentationTimeline && "HLS" != a.h.type && (f = a.h.presentationTimeline.U()), G(k2, Yh(a.i, e, a.h.offlineSessionIds, f), 4);
              case 4:
                po(a);
                if (!b) {
                  k2.u(5);
                  break;
                }
                return G(k2, a.i.Kb(b), 6);
              case 6:
                po(a);
              case 5:
                return G(k2, Ki(a.F, a.h), 7);
              case 7:
                g = k2.h;
                if (!g) {
                  k2.u(0);
                  break;
                }
                h = new V("trackschanged", void 0);
                return G(k2, Promise.resolve(), 9);
              case 9:
                a.dispatchEvent(h), I(k2);
            }
          });
        }
        r.configure = function(a, b) {
          a = nn(a, b);
          Ln(this.g, a);
        };
        r.getConfiguration = function() {
          return Md(this.g);
        };
        function ro(a) {
          var b, c, d, e, f, g, h;
          return Q(function(k2) {
            a.o || (a.o = a.g.adaptationSetCriteriaFactory(), a.o.configure({ language: a.g.preferredAudioLanguage, role: a.g.preferredVariantRole, channelCount: a.g.preferredAudioChannelCount, Rc: a.g.preferredVideoHdrLevel, spatialAudio: a.g.preferSpatialAudio, videoLayout: a.g.preferredVideoLayout, Jc: a.g.preferredAudioLabel, fd: a.g.preferredVideoLabel, codecSwitchingStrategy: a.g.mediaSource.codecSwitchingStrategy, audioCodec: "" }));
            a.La && (b = a.g.abrFactory, a.C = b, a.j = b(), a.j.configure(a.g.abr));
            if (!a.fa) return k2.u(0);
            c = a.h.presentationTimeline.U();
            d = Gg(a.h.variants);
            e = a.o.create(d);
            a.j.configure(a.g.abr);
            a.j.setVariants(Array.from(e.values()));
            f = a.j.chooseVariant();
            if (!f) return k2.u(0);
            g = [];
            a.K = f;
            f.video && g.push(uo(a, f.video, c));
            f.audio && g.push(uo(a, f.audio, c));
            (h = Hg(a.h.textStreams, a.g.preferredTextLanguage, a.g.preferredTextRole, a.g.preferForcedSubs)[0] || null) && Kg(f.audio, h, a.g) && (g.push(uo(a, h, c)), a.W = h);
            return G(k2, Promise.all(g), 0);
          });
        }
        function uo(a, b, c) {
          var d, e, f, g, h;
          return Q(function(k2) {
            if (1 == k2.g) return d = a.g.streaming.segmentPrefetchLimit || 2, e = new fm(d, b, function(l, m, n) {
              return Um(l, m, n || null, a.g.streaming.retryParameters, a.Fa, a.A);
            }, false), a.M.set(b.id, e), b.segmentIndex ? k2.u(2) : G(k2, b.createSegmentIndex(), 2);
            f = a.B || 0;
            (h = (g = b.segmentIndex.Gb(f)) ? g.current() : null) || (h = zg(b.segmentIndex));
            return h ? c ? h.ca ? G(k2, im(e, h.ca), 0) : k2.u(0) : G(k2, hm(e, h.startTime), 0) : k2.u(0);
          });
        }
        r.Jj = function() {
          return this.m;
        };
        r.destroy = function() {
          var a = this, b, c, d;
          return Q(function(e) {
            switch (e.g) {
              case 1:
                a.s = true;
                if (!a.l || a.pa) {
                  e.u(2);
                  break;
                }
                return G(e, a.l.stop(), 2);
              case 2:
                if (!a.j || a.ea) {
                  e.u(4);
                  break;
                }
                return G(e, a.j.stop(), 4);
              case 4:
                a.H && !a.sa && a.H.release();
                if (!a.i || a.ka) {
                  e.u(6);
                  break;
                }
                return G(e, a.i.destroy(), 6);
              case 6:
                if (0 < a.M.size && !a.Aa) for (b = t(a.M.values()), c = b.next(); !c.done; c = b.next()) d = c.value, om(d);
                I(e);
            }
          });
        };
        function to(a) {
          function b(c) {
            return c.video && c.audio || c.video && c.video.codecs.includes(",");
          }
          a.variants.some(b) && (a.variants = a.variants.filter(b));
        }
        T("shaka.media.PreloadManager", go);
        go.prototype.destroy = go.prototype.destroy;
        go.prototype.waitForFinish = go.prototype.Jj;
        go.prototype.getPrefetchedTextTrack = go.prototype.xi;
        go.prototype.getPrefetchedVariantTrack = go.prototype.yi;
        function vo(a, b) {
          ch.call(this);
          var c = this;
          this.i = a;
          this.l = b;
          this.g = /* @__PURE__ */ new Map();
          this.m = [{ Ic: null, Hc: wo, wc: function(d, e) {
            return xo(c, "enter", d, e);
          } }, { Ic: yo, Hc: wo, wc: function(d, e) {
            return xo(c, "enter", d, e);
          } }, { Ic: zo, Hc: wo, wc: function(d, e) {
            return xo(c, "enter", d, e);
          } }, { Ic: wo, Hc: yo, wc: function(d, e) {
            return xo(c, "exit", d, e);
          } }, { Ic: wo, Hc: zo, wc: function(d, e) {
            return xo(c, "exit", d, e);
          } }, { Ic: yo, Hc: zo, wc: function(d, e) {
            e ? xo(c, "skip", d, e) : (xo(c, "enter", d, e), xo(c, "exit", d, e));
          } }, { Ic: zo, Hc: yo, wc: function(d, e) {
            return xo(
              c,
              "skip",
              d,
              e
            );
          } }];
          this.h = new lb();
          this.h.D(this.i, "regionremove", function(d) {
            c.g.delete(d.region);
          });
        }
        qa(vo, ch);
        vo.prototype.release = function() {
          this.i = null;
          this.g.clear();
          this.h.release();
          this.h = null;
          ch.prototype.release.call(this);
        };
        vo.prototype.j = function(a, b) {
          if (!this.l || 0 != a) {
            this.l = false;
            for (var c = t(this.i.h.values()), d = c.next(); !d.done; d = c.next()) {
              d = d.value;
              var e = this.g.get(d), f = a < d.startTime ? yo : a > d.endTime ? zo : wo;
              this.g.set(d, f);
              for (var g = t(this.m), h = g.next(); !h.done; h = g.next()) h = h.value, h.Ic == e && h.Hc == f && h.wc(d, b);
            }
          }
        };
        function xo(a, b, c, d) {
          b = new V(b, /* @__PURE__ */ new Map([["region", c], ["seeking", d]]));
          a.dispatchEvent(b);
        }
        var yo = 1, wo = 2, zo = 3;
        function Ao(a, b, c) {
          var d, e, f, g, h, k2, l;
          return Q(function(m) {
            switch (m.g) {
              case 1:
                var n = new yb(a).ab.split("/").pop().split(".");
                d = 1 == n.length ? "" : n.pop().toLowerCase();
                if (e = Bo.get(d)) return m.return(e);
                f = 0;
                g = kh([a], c);
                xa(m, 2);
                g.method = "HEAD";
                return G(m, b.request(f, g).promise, 4);
              case 4:
                h = m.h;
                e = h.headers["content-type"];
                za(m, 3);
                break;
              case 2:
                k2 = Aa(m);
                if (!k2 || 1002 != k2.code && 1001 != k2.code) {
                  m.u(3);
                  break;
                }
                g.method = "GET";
                return G(m, b.request(f, g).promise, 6);
              case 6:
                l = m.h, e = l.headers["content-type"];
              case 3:
                return m.return(e ? e.toLowerCase().split(";").shift() : "");
            }
          });
        }
        var Bo = (/* @__PURE__ */ new Map()).set("mp4", "video/mp4").set("m4v", "video/mp4").set("m4a", "audio/mp4").set("webm", "video/webm").set("weba", "audio/webm").set("mkv", "video/webm").set("ts", "video/mp2t").set("ogv", "video/ogg").set("ogg", "audio/ogg").set("mpg", "video/mpeg").set("mpeg", "video/mpeg").set("mov", "video/quicktime").set("m3u8", "application/x-mpegurl").set("mpd", "application/dash+xml").set("ism", "application/vnd.ms-sstr+xml").set("mp3", "audio/mpeg").set("aac", "audio/aac").set("flac", "audio/flac").set("wav", "audio/wav").set(
          "sbv",
          "text/x-subviewer"
        ).set("srt", "text/srt").set("vtt", "text/vtt").set("webvtt", "text/vtt").set("ttml", "application/ttml+xml").set("lrc", "application/x-subtitle-lrc").set("ssa", "text/x-ssa").set("ass", "text/x-ssa").set("jpeg", "image/jpeg").set("jpg", "image/jpeg").set("png", "image/png").set("svg", "image/svg+xml").set("webp", "image/webp").set("avif", "image/avif").set("html", "text/html").set("htm", "text/html");
        function Co(a, b) {
          if (a.lineBreak) return "\n";
          if (a.nestedCues.length) return a.nestedCues.map(function(g) {
            return Co(g, a);
          }).join("");
          if (!a.payload) return a.payload;
          var c = [], d = a.fontWeight >= Ue, e = a.fontStyle == Ve, f = a.textDecoration.includes(We);
          d && c.push(["b"]);
          e && c.push(["i"]);
          f && c.push(["u"]);
          e = a.color;
          "" == e && b && (e = b.color);
          d = "";
          (e = Do(e)) && (d += "." + e);
          e = a.backgroundColor;
          "" == e && b && (e = b.backgroundColor);
          (b = Do(e)) && (d += ".bg_" + b);
          d && c.push(["c", d]);
          return c.reduceRight(function(g, h) {
            var k2 = t(h);
            h = k2.next().value;
            k2 = k2.next().value;
            return "<" + h + (void 0 === k2 ? "" : k2) + ">" + g + "</" + h + ">";
          }, a.payload);
        }
        function Do(a) {
          a = a.toLowerCase();
          var b = a.replace(/\s/g, "").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);
          b ? a = "#" + (parseInt(b[1], 10) | 256).toString(16).slice(1) + (parseInt(b[2], 10) | 256).toString(16).slice(1) + (parseInt(b[3], 10) | 256).toString(16).slice(1) : a.startsWith("#") && 7 < a.length && (a = a.slice(0, 7));
          switch (a) {
            case "white":
            case "#fff":
            case "#ffffff":
              return "white";
            case "lime":
            case "#0f0":
            case "#00ff00":
              return "lime";
            case "cyan":
            case "#0ff":
            case "#00ffff":
              return "cyan";
            case "red":
            case "#f00":
            case "#ff0000":
              return "red";
            case "yellow":
            case "#ff0":
            case "#ffff00":
              return "yellow";
            case "magenta":
            case "#f0f":
            case "#ff00ff":
              return "magenta";
            case "blue":
            case "#00f":
            case "#0000ff":
              return "blue";
            case "black":
            case "#000":
            case "#000000":
              return "black";
          }
          return null;
        }
        function Eo(a, b) {
          var c = [];
          a = t(Fo(a));
          for (var d = a.next(); !d.done; d = a.next()) if (d = d.value, d.isContainer) c.push.apply(c, y(Eo(d.nestedCues, d)));
          else {
            var e = d.clone();
            e.nestedCues = [];
            e.payload = Co(d, b);
            c.push(e);
          }
          return c;
        }
        function Fo(a) {
          var b = [];
          a = t(a);
          for (var c = a.next(), d = {}; !c.done; d = { jf: void 0 }, c = a.next()) d.jf = c.value, b.some(/* @__PURE__ */ function(e) {
            return function(f) {
              return Ke(e.jf, f);
            };
          }(d)) || b.push(d.jf);
          return b;
        }
        function Go(a) {
          function b(d) {
            for (var e = 5381, f = d.length; f; ) e = 33 * e ^ d.charCodeAt(--f);
            return (e >>> 0).toString();
          }
          if (a.startTime >= a.endTime) return null;
          var c = new VTTCue(a.startTime, a.endTime, a.payload);
          c.id = b(a.startTime.toString()) + b(a.endTime.toString()) + b(a.payload);
          c.lineAlign = a.lineAlign;
          c.positionAlign = a.positionAlign;
          a.size && (c.size = a.size);
          try {
            c.align = a.textAlign;
          } catch (d) {
          }
          "center" == a.textAlign && "center" != c.align && (c.align = "middle");
          "vertical-lr" == a.writingMode ? c.vertical = "lr" : "vertical-rl" == a.writingMode && (c.vertical = "rl");
          1 == a.lineInterpretation && (c.snapToLines = false);
          null != a.line && (c.line = a.line);
          null != a.position && (c.position = a.position);
          return c;
        }
        ;
        function Ho(a, b) {
          this.h = a;
          this.i = b;
          this.g = null;
          a = t(Array.from(this.h.textTracks));
          for (b = a.next(); !b.done; b = a.next()) b = b.value, "metadata" !== b.kind && "chapters" !== b.kind && (b.mode = "disabled", b.label == this.i && (this.g = b));
          this.g && (this.g.mode = "hidden");
        }
        r = Ho.prototype;
        r.configure = function() {
        };
        r.remove = function(a, b) {
          if (!this.g) return false;
          Io(this.g, function(c) {
            return c.startTime < b && c.endTime > a;
          });
          return true;
        };
        r.append = function(a) {
          if (this.g) {
            var b = Eo(a), c = [];
            a = this.g.cues ? Array.from(this.g.cues) : [];
            b = t(b);
            for (var d = b.next(), e = {}; !d.done; e = { Sc: void 0 }, d = b.next()) e.Sc = d.value, !a.some(/* @__PURE__ */ function(f) {
              return function(g) {
                return g.startTime == f.Sc.startTime && g.endTime == f.Sc.endTime && g.text == f.Sc.payload ? true : false;
              };
            }(e)) && e.Sc.payload && (d = Go(e.Sc)) && c.push(d);
            a = c.slice().sort(function(f, g) {
              return f.startTime != g.startTime ? f.startTime - g.startTime : f.endTime != g.endTime ? f.endTime - g.startTime : "line" in VTTCue.prototype ? c.indexOf(g) - c.indexOf(f) : c.indexOf(f) - c.indexOf(g);
            });
            a = t(a);
            for (b = a.next(); !b.done; b = a.next()) this.g.addCue(b.value);
          }
        };
        r.destroy = function() {
          this.g && (Io(this.g, function() {
            return true;
          }), this.g.mode = "disabled");
          this.g = this.h = null;
          return Promise.resolve();
        };
        r.isTextVisible = function() {
          return this.g ? "showing" == this.g.mode : false;
        };
        r.setTextVisibility = function(a) {
          a && !this.g && Jo(this);
          this.g && (this.g.mode = a ? "showing" : "hidden");
        };
        r.setTextLanguage = function() {
        };
        r.enableTextDisplayer = function() {
          Jo(this);
        };
        function Jo(a) {
          a.h && !a.g && (a.g = a.h.addTextTrack("subtitles", a.i), a.g.mode = "hidden");
        }
        function Io(a, b) {
          var c = a.mode;
          a.mode = "showing" == c ? "showing" : "hidden";
          for (var d = t(Array.from(a.cues)), e = d.next(); !e.done; e = d.next()) (e = e.value) && b(e) && a.removeCue(e);
          a.mode = c;
        }
        T("shaka.text.SimpleTextDisplayer", Ho);
        Ho.prototype.enableTextDisplayer = Ho.prototype.enableTextDisplayer;
        Ho.prototype.setTextLanguage = Ho.prototype.setTextLanguage;
        Ho.prototype.setTextVisibility = Ho.prototype.setTextVisibility;
        Ho.prototype.isTextVisible = Ho.prototype.isTextVisible;
        Ho.prototype.destroy = Ho.prototype.destroy;
        Ho.prototype.append = Ho.prototype.append;
        Ho.prototype.remove = Ho.prototype.remove;
        Ho.prototype.configure = Ho.prototype.configure;
        function Ko() {
        }
        r = Ko.prototype;
        r.configure = function() {
        };
        r.remove = function() {
        };
        r.append = function() {
        };
        r.destroy = function() {
        };
        r.isTextVisible = function() {
          return false;
        };
        r.setTextVisibility = function() {
        };
        r.setTextLanguage = function() {
        };
        r.enableTextDisplayer = function() {
        };
        T("shaka.text.StubTextDisplayer", Ko);
        Ko.prototype.enableTextDisplayer = Ko.prototype.enableTextDisplayer;
        Ko.prototype.setTextLanguage = Ko.prototype.setTextLanguage;
        Ko.prototype.setTextVisibility = Ko.prototype.setTextVisibility;
        Ko.prototype.isTextVisible = Ko.prototype.isTextVisible;
        Ko.prototype.destroy = Ko.prototype.destroy;
        Ko.prototype.append = Ko.prototype.append;
        Ko.prototype.remove = Ko.prototype.remove;
        Ko.prototype.configure = Ko.prototype.configure;
        function Lo(a, b) {
          var c = this;
          document.fullscreenEnabled || db("Using UITextDisplayer in a browser without Fullscreen API support causes subtitles to not be rendered in fullscreen");
          this.A = false;
          this.h = [];
          this.j = a;
          this.C = b;
          this.s = this.m = null;
          this.g = document.createElement("div");
          this.g.classList.add("shaka-text-container");
          this.g.style.textAlign = "center";
          this.g.style.display = "flex";
          this.g.style.flexDirection = "column";
          this.g.style.alignItems = "center";
          this.g.style.justifyContent = "flex-end";
          this.C.appendChild(this.g);
          this.o = new ec(function() {
            c.j.paused || Mo(c);
          });
          No(this);
          this.l = /* @__PURE__ */ new Map();
          this.i = new lb();
          this.i.D(document, "fullscreenchange", function() {
            Mo(c, true);
          });
          this.i.D(this.j, "seeking", function() {
            Mo(c, true);
          });
          this.i.D(this.j, "ratechange", function() {
            No(c);
          });
          this.i.D(this.j, "resize", function() {
            var d = c.j, e = d.videoWidth;
            d = d.videoHeight;
            e && d ? c.m = e / d : c.m = null;
          });
          this.B = null;
          "ResizeObserver" in window2 && (this.B = new ResizeObserver(function() {
            Mo(c, true);
          }), this.B.observe(this.g));
          this.F = /* @__PURE__ */ new Map();
        }
        r = Lo.prototype;
        r.configure = function(a) {
          this.s = a;
          No(this);
          Mo(this, true);
        };
        r.append = function(a) {
          var b = [].concat(y(this.h));
          a = t(Fo(a));
          for (var c = a.next(), d = {}; !c.done; d = { kf: void 0 }, c = a.next()) d.kf = c.value, b.some(/* @__PURE__ */ function(e) {
            return function(f) {
              return Ke(f, e.kf);
            };
          }(d)) || this.h.push(d.kf);
          this.h.length && No(this);
          Mo(this);
        };
        r.destroy = function() {
          if (!this.g) return Promise.resolve();
          this.C.removeChild(this.g);
          this.g = null;
          this.A = false;
          this.h = [];
          this.o && (this.o.stop(), this.o = null);
          this.l.clear();
          this.i && (this.i.release(), this.i = null);
          this.B && (this.B.disconnect(), this.B = null);
          return Promise.resolve();
        };
        r.remove = function(a, b) {
          if (!this.g) return false;
          var c = this.h.length;
          this.h = this.h.filter(function(d) {
            return d.startTime < a || d.endTime >= b;
          });
          Mo(this, c > this.h.length);
          this.h.length || No(this);
          return true;
        };
        r.isTextVisible = function() {
          return this.A;
        };
        r.setTextVisibility = function(a) {
          this.A = a;
          Mo(this, true);
        };
        r.setTextLanguage = function(a) {
          a && "und" != a ? this.g.setAttribute("lang", a) : this.g.setAttribute("lang", "");
        };
        r.enableTextDisplayer = function() {
        };
        function No(a) {
          a.o && (a.h.length ? a.o.ua((a.s ? a.s.captionsUpdatePeriod : 0.25) / Math.max(1, Math.abs(a.j.playbackRate))) : a.o.stop());
        }
        function Oo(a, b) {
          for (; null != b; ) {
            if (b == a.g) return true;
            b = b.parentElement;
          }
          return false;
        }
        function Po(a, b, c, d, e) {
          var f = false, g = [], h = [];
          b = t(b);
          for (var k2 = b.next(); !k2.done; k2 = b.next()) {
            k2 = k2.value;
            e.push(k2);
            var l = a.l.get(k2), m = k2.startTime <= d && k2.endTime > d, n = l ? l.Lh : null;
            l && (g.push(l.lf), l.Dc && g.push(l.Dc), m || (f = true, a.l.delete(k2), l = null));
            m && (h.push(k2), l ? Oo(a, n) || (f = true) : (Qo(a, k2, e), l = a.l.get(k2), n = l.Lh, f = true));
            0 < k2.nestedCues.length && n && Po(a, k2.nestedCues, n, d, e);
            e.pop();
          }
          if (f) {
            d = t(g);
            for (e = d.next(); !e.done; e = d.next()) e = e.value, e.parentElement && e.parentElement.removeChild(e);
            h.sort(function(p, q) {
              return p.startTime != q.startTime ? p.startTime - q.startTime : p.endTime - q.endTime;
            });
            h = t(h);
            for (d = h.next(); !d.done; d = h.next()) d = a.l.get(d.value), d.Dc ? (d.Dc.contains(c) && d.Dc.removeChild(c), c.appendChild(d.Dc), d.Dc.appendChild(d.lf)) : c.appendChild(d.lf);
          }
        }
        function Mo(a, b) {
          if (a.g) {
            var c = a.j.currentTime;
            if (!a.A || (void 0 === b ? 0 : b)) {
              b = t(a.F.values());
              for (var d = b.next(); !d.done; d = b.next()) Nj(d.value);
              Nj(a.g);
              a.l.clear();
              a.F.clear();
            }
            a.A && Po(a, a.h, a.g, c, []);
          }
        }
        function Qo(a, b, c) {
          var d = 1 < c.length, e = d ? "span" : "div";
          b.lineBreak && (e = "br");
          b.rubyTag && (e = b.rubyTag);
          d = !d && 0 < b.nestedCues.length;
          var f = document.createElement(e);
          "br" != e && Ro(a, f, b, c, d);
          c = null;
          if (b.region && b.region.id) {
            var g = b.region, h = a.m === 4 / 3 ? 2.5 : 1.9;
            c = g.id + "_" + g.width + "x" + g.height + (g.heightUnits == yd ? "%" : "px") + "-" + g.viewportAnchorX + "x" + g.viewportAnchorY + (g.viewportAnchorUnits == yd ? "%" : "px");
            if (a.F.has(c)) c = a.F.get(c);
            else {
              e = document.createElement("span");
              var k2 = g.heightUnits == yd ? "%" : "px", l = g.widthUnits == yd ? "%" : "px", m = g.viewportAnchorUnits == yd ? "%" : "px";
              e.id = "shaka-text-region---" + c;
              e.classList.add("shaka-text-region");
              e.style.position = "absolute";
              var n = g.height, p = g.width;
              2 === g.heightUnits && (n = 5.33 * g.height, k2 = "%");
              2 === g.widthUnits && (p = g.width * h, l = "%");
              e.style.height = n + k2;
              e.style.width = p + l;
              2 === g.viewportAnchorUnits ? (h = g.viewportAnchorY / 75 * 100, k2 = g.viewportAnchorX / (a.m === 4 / 3 ? 160 : 210) * 100, h -= g.regionAnchorY * n / 100, k2 -= g.regionAnchorX * p / 100, e.style.top = h + "%", e.style.left = k2 + "%") : (e.style.top = g.viewportAnchorY - g.regionAnchorY * n / 100 + m, e.style.left = g.viewportAnchorX - g.regionAnchorX * p / 100 + m);
              0 !== g.heightUnits && 0 !== g.widthUnits && 0 !== g.viewportAnchorUnits && (g = Math.max(0, Math.min(100 - (parseInt(e.style.width.slice(0, -1), 10) || 0), parseInt(e.style.left.slice(0, -1), 10) || 0)), e.style.top = Math.max(0, Math.min(100 - (parseInt(e.style.height.slice(0, -1), 10) || 0), parseInt(e.style.top.slice(0, -1), 10) || 0)) + "%", e.style.left = g + "%");
              e.style.display = "flex";
              e.style.flexDirection = "column";
              e.style.alignItems = "center";
              e.style.justifyContent = "before" == b.displayAlign ? "flex-start" : "center" == b.displayAlign ? "center" : "flex-end";
              a.F.set(c, e);
              c = e;
            }
          }
          e = f;
          d && (e = document.createElement("span"), e.classList.add("shaka-text-wrapper"), e.style.backgroundColor = b.backgroundColor, e.style.lineHeight = "normal", f.appendChild(e));
          a.l.set(b, { lf: f, Lh: e, Dc: c });
        }
        function So(a) {
          var b = a.direction, c = a.positionAlign;
          a = a.textAlign;
          return c !== Ae ? c : "left" === a || "start" === a && b === Ce || "end" === a && "rtl" === b ? "line-left" : "right" === a || "start" === a && "rtl" === b || "end" === a && b === Ce ? "line-right" : "center";
        }
        function Ro(a, b, c, d, e) {
          var f = b.style, g = 0 == c.nestedCues.length, h = 1 < d.length;
          f.whiteSpace = "pre-wrap";
          var k2 = c.payload.replace(/\s+$/g, function(m) {
            return "\xA0".repeat(m.length);
          });
          f.webkitTextStrokeColor = c.textStrokeColor;
          f.webkitTextStrokeWidth = c.textStrokeWidth;
          f.color = c.color;
          f.direction = c.direction;
          f.opacity = c.opacity;
          f.paddingLeft = To(c.linePadding, c, a.C);
          f.paddingRight = To(c.linePadding, c, a.C);
          f.textCombineUpright = c.textCombineUpright;
          f.textShadow = c.textShadow;
          if (c.backgroundImage) f.backgroundImage = "url('" + c.backgroundImage + "')", f.backgroundRepeat = "no-repeat", f.backgroundSize = "contain", f.backgroundPosition = "center", c.backgroundColor && (f.backgroundColor = c.backgroundColor), f.width = "100%", f.height = "100%";
          else {
            if (c.nestedCues.length) var l = b;
            else l = document.createElement("span"), b.appendChild(l);
            c.border && (l.style.border = c.border);
            e || ((b = Uo(d, function(m) {
              return m.backgroundColor;
            })) ? l.style.backgroundColor = b : k2 && (l.style.backgroundColor = "rgba(0, 0, 0, 0.8)"));
            k2 && (l.textContent = k2);
          }
          if (h && !d[d.length - 1].isContainer) f.display = "inline";
          else {
            f.display = "flex";
            f.flexDirection = "column";
            f.alignItems = "center";
            if ("left" == c.textAlign || "start" == c.textAlign) f.width = "100%", f.alignItems = "start";
            else if ("right" == c.textAlign || "end" == c.textAlign) f.width = "100%", f.alignItems = "end";
            f.justifyContent = "before" == c.displayAlign ? "flex-start" : "center" == c.displayAlign ? "center" : "flex-end";
          }
          g || (f.margin = "0");
          f.fontFamily = c.fontFamily;
          f.fontWeight = c.fontWeight.toString();
          f.fontStyle = c.fontStyle;
          f.letterSpacing = c.letterSpacing;
          f.fontSize = To(c.fontSize, c, a.C, a.s ? a.s.fontScaleFactor : 1);
          d = c.line;
          null != d && (g = c.lineInterpretation, g == Ee && (g = 1, h = 16, a.m && 1 > a.m && (h = 32), d = 0 > d ? 100 + d / h * 100 : d / h * 100), 1 == g && (f.position = "absolute", c.writingMode == De ? (f.width = "100%", c.lineAlign == Fe ? f.top = d + "%" : "end" == c.lineAlign && (f.bottom = 100 - d + "%")) : "vertical-lr" == c.writingMode ? (f.height = "100%", c.lineAlign == Fe ? f.left = d + "%" : "end" == c.lineAlign && (f.right = 100 - d + "%")) : (f.height = "100%", c.lineAlign == Fe ? f.right = d + "%" : "end" == c.lineAlign && (f.left = 100 - d + "%"))));
          f.lineHeight = c.lineHeight;
          a = So(c);
          "line-left" == a ? (f.cssFloat = "left", null !== c.position && (f.position = "absolute", c.writingMode == De ? (f.left = c.position + "%", f.width = "auto") : f.top = c.position + "%")) : "line-right" == a ? (f.cssFloat = "right", null !== c.position && (f.position = "absolute", c.writingMode == De ? (f.right = 100 - c.position + "%", f.width = "auto") : f.bottom = c.position + "%")) : null !== c.position && 50 != c.position && (f.position = "absolute", c.writingMode == De ? (f.left = c.position + "%", f.width = "auto") : f.top = c.position + "%");
          f.textAlign = c.textAlign;
          f.textDecoration = c.textDecoration.join(" ");
          f.writingMode = c.writingMode;
          "writingMode" in document.documentElement.style && f.writingMode == c.writingMode || (f.webkitWritingMode = c.writingMode);
          c.size && (c.writingMode == De ? f.width = c.size + "%" : f.height = c.size + "%");
        }
        function To(a, b, c, d) {
          d = void 0 === d ? 1 : d;
          var e = (e = new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(a)) ? { value: Number(e[1]), unit: e[2] } : null;
          if (!e) return a;
          a = e.unit;
          d *= e.value;
          switch (a) {
            case "%":
              return d / 100 * c.clientHeight / b.cellResolution.rows + "px";
            case "c":
              return c.clientHeight * d / b.cellResolution.rows + "px";
            default:
              return d + a;
          }
        }
        function Uo(a, b) {
          for (var c = a.length - 1; 0 <= c; c--) {
            var d = b(a[c]);
            if (d || 0 === d) return d;
          }
          return null;
        }
        T("shaka.text.UITextDisplayer", Lo);
        Lo.prototype.enableTextDisplayer = Lo.prototype.enableTextDisplayer;
        Lo.prototype.setTextLanguage = Lo.prototype.setTextLanguage;
        Lo.prototype.setTextVisibility = Lo.prototype.setTextVisibility;
        Lo.prototype.isTextVisible = Lo.prototype.isTextVisible;
        Lo.prototype.remove = Lo.prototype.remove;
        Lo.prototype.destroy = Lo.prototype.destroy;
        Lo.prototype.append = Lo.prototype.append;
        Lo.prototype.configure = Lo.prototype.configure;
        function Vo(a, b) {
          function c(f) {
            for (var g = f, h = t(b), k2 = h.next(); !k2.done; k2 = h.next()) k2 = k2.value, k2.end && k2.start < f && (g += k2.end - k2.start);
            f = Math.floor(g / 3600);
            h = Math.floor(g / 60 % 60);
            k2 = Math.floor(g % 60);
            g = Math.floor(1e3 * g % 1e3);
            return (10 > f ? "0" : "") + f + ":" + (10 > h ? "0" : "") + h + ":" + (10 > k2 ? "0" : "") + k2 + "." + (100 > g ? 10 > g ? "00" : "0" : "") + g;
          }
          var d = Eo(a);
          a = "WEBVTT\n\n";
          d = t(d);
          for (var e = d.next(); !e.done; e = d.next()) e = e.value, a += c(e.startTime) + " --> " + c(e.endTime) + function(f) {
            var g = [];
            switch (f.textAlign) {
              case "left":
                g.push("align:left");
                break;
              case "right":
                g.push("align:right");
                break;
              case Be:
                g.push("align:middle");
                break;
              case "start":
                g.push("align:start");
                break;
              case "end":
                g.push("align:end");
            }
            switch (f.writingMode) {
              case "vertical-lr":
                g.push("vertical:lr");
                break;
              case "vertical-rl":
                g.push("vertical:rl");
            }
            return g.length ? " " + g.join(" ") : "";
          }(e) + "\n", a += e.payload + "\n\n";
          return a;
        }
        T("shaka.text.WebVttGenerator", function() {
        });
        function Wo(a, b) {
          this.h = a;
          this.g = b;
          this.i = void 0;
          this.s = false;
          this.F = true;
          this.l = this.B = false;
          this.o = this.m = void 0;
          this.A = 0;
          this.G = false;
          this.C = new lb();
          this.j = null;
        }
        Wo.prototype.setMediaElement = function(a) {
          this.j = a;
          Xo(this);
        };
        Wo.prototype.configure = function(a) {
          this.g = a;
        };
        function Yo(a) {
          a.s = false;
          a.F = true;
          a.B = false;
          a.l = false;
          a.m = 0;
          a.o = 0;
          a.A = 0;
          a.G = false;
          a.j = null;
          a.C.Qa();
        }
        function Zo(a, b) {
          a.l = b;
          a.l ? a.i == $o ? a.i = ap : a.i == bp && (a.i = cp) : a.i == ap ? a.i = $o : a.i == cp && (a.i = bp);
        }
        function dp(a, b) {
          if (a.g && a.g.enabled && a.g.version == ep && a.j && a.j.autoplay) {
            var c = a.j.play();
            c && c.then(function() {
              a.A = b;
            }).catch(function() {
              a.A = 0;
            });
          }
        }
        function fp(a, b, c) {
          try {
            if (!a.g.enabled) return b;
            var d = gp(a);
            a: {
              switch (c.toLowerCase()) {
                case "audio/mp4":
                case "audio/webm":
                case "audio/ogg":
                case "audio/mpeg":
                case "audio/aac":
                case "audio/flac":
                case "audio/wav":
                  var e = hp;
                  break a;
                case "video/webm":
                case "video/mp4":
                case "video/mpeg":
                case "video/mp2t":
                  e = ip;
                  break a;
                case "application/x-mpegurl":
                case "application/vnd.apple.mpegurl":
                case "application/dash+xml":
                case "video/vnd.mpeg.dash.mpd":
                case "application/vnd.ms-sstr+xml":
                  e = jp;
                  break a;
              }
              e = void 0;
            }
            d.ot = e;
            d.su = true;
            var f = kp(d);
            return lp(b, f);
          } catch (g) {
            return eb("CMCD_SRC_ERROR", "Could not generate src CMCD data.", g), b;
          }
        }
        function Xo(a) {
          a.C.ma(a.j, "play", function() {
            a.m || (a.m = Date.now());
          });
          a.C.ma(a.j, "playing", function() {
            a.o || (a.o = Date.now());
          });
        }
        function gp(a) {
          a.g.sessionId || (a.g.sessionId = window2.crypto.randomUUID());
          return { v: a.g.version, sf: a.i, sid: a.g.sessionId, cid: a.g.contentId, mtp: a.h.getBandwidthEstimate() / 1e3 };
        }
        function mp(a, b, c) {
          c = void 0 === c ? {} : c;
          var d = void 0 === d ? a.g.useHeaders : d;
          if (a.g.enabled) {
            Object.assign(c, gp(a));
            c.pr = a.h.gb();
            var e = c.ot === np || c.ot === ip;
            a.B && e && (c.bs = true, c.su = true, a.B = false);
            null == c.su && (c.su = a.F);
            c.v === ep && (a.h.U() && (c.ltc = a.h.Zd()), e = !a.G && a.o && a.m ? a.o - (a.A || a.m) : void 0, void 0 != e && (c.msd = e, a.G = true));
            a = op(a, c);
            if (d) d = pp(a), Object.keys(d).length && Object.assign(b.headers, d);
            else {
              var f = kp(a);
              f && (b.uris = b.uris.map(function(g) {
                return lp(g, f);
              }));
            }
          }
        }
        function op(a, b) {
          var c = a.g.includeKeys;
          return c.length ? Object.keys(b).reduce(function(d, e) {
            c.includes(e) && (d[e] = b[e]);
            return d;
          }, {}) : b;
        }
        function qp(a) {
          if (0 === a.type) return rp;
          if (a = a.stream) {
            var b = a.type;
            if ("video" == b) return a.codecs && a.codecs.includes(",") ? ip : np;
            if ("audio" == b) return hp;
            if ("text" == b) return "application/mp4" === a.mimeType ? sp : tp;
          }
        }
        function up(a, b) {
          b = a.h.Fb()[b];
          if (!b.length) return NaN;
          var c = a.h.getCurrentTime();
          return (a = b.find(function(d) {
            return d.start <= c && d.end >= c;
          })) ? 1e3 * (a.end - c) : NaN;
        }
        function vp(a, b) {
          b = a.h.Fb()[b];
          if (!b.length) return 0;
          var c = a.h.getCurrentTime();
          return (a = b.find(function(d) {
            return d.start <= c && d.end >= c;
          })) ? 1e3 * (a.end - c) : 0;
        }
        function wp(a, b) {
          var c = a.h.Rb();
          if (!c.length) return NaN;
          a = c[0];
          c = t(c);
          for (var d = c.next(); !d.done; d = c.next()) d = d.value, "variant" === d.type && d.bandwidth > a.bandwidth && (a = d);
          switch (b) {
            case np:
              return a.videoBandwidth || NaN;
            case hp:
              return a.audioBandwidth || NaN;
            default:
              return a.bandwidth;
          }
        }
        function kp(a) {
          function b(n) {
            return 100 * c(n / 100);
          }
          function c(n) {
            return Math.round(n);
          }
          function d(n) {
            return !Number.isNaN(n) && null != n && "" !== n && false !== n;
          }
          var e = [], f = { br: c, d: c, bl: b, dl: b, mtp: b, nor: function(n) {
            return encodeURIComponent(n);
          }, rtp: b, tb: c }, g = Object.keys(a || {}).sort();
          g = t(g);
          for (var h = g.next(); !h.done; h = g.next()) {
            h = h.value;
            var k2 = a[h];
            if (d(k2) && ("v" !== h || 1 !== k2) && ("pr" != h || 1 !== k2)) {
              var l = f[h];
              l && (k2 = l(k2));
              l = typeof k2;
              var m = void 0;
              m = "string" === l && "ot" !== h && "sf" !== h && "st" !== h ? h + "=" + JSON.stringify(k2) : "boolean" === l ? h : "symbol" === l ? h + "=" + k2.description : h + "=" + k2;
              e.push(m);
            }
          }
          return e.join(",");
        }
        function pp(a) {
          var b = Object.keys(a), c = {}, d = ["Object", "Request", "Session", "Status"], e = [{}, {}, {}, {}], f = { br: 0, d: 0, ot: 0, tb: 0, bl: 1, dl: 1, mtp: 1, nor: 1, nrr: 1, su: 1, ltc: 1, cid: 2, pr: 2, sf: 2, sid: 2, st: 2, v: 2, msd: 2, bs: 3, rtp: 3 };
          b = t(b);
          for (var g = b.next(); !g.done; g = b.next()) g = g.value, e[null != f[g] ? f[g] : 1][g] = a[g];
          for (a = 0; a < e.length; a++) (f = kp(e[a])) && (c["CMCD-" + d[a]] = f);
          return c;
        }
        function lp(a, b) {
          if (!b || a.includes("offline:")) return a;
          a = new yb(a);
          a.g.set("CMCD", b);
          return a.toString();
        }
        var jp = "m", hp = "a", np = "v", ip = "av", rp = "i", tp = "c", sp = "tt", ep = 2, $o = "d", ap = "ld", bp = "h", cp = "lh";
        T("shaka.util.CmcdManager.StreamingFormat", { DASH: $o, fk: ap, HLS: bp, gk: cp, uk: "s", OTHER: "o" });
        function xp(a) {
          this.h = a;
          this.g = null;
        }
        r = xp.prototype;
        r.configure = function(a) {
          this.h = a;
        };
        r.Sg = function() {
          return this.h.enabled && this.h.applyMaximumSuggestedBitrate && this.g && this.g.has(yp) ? 1e3 * this.g.get(yp) : null;
        };
        r.Qg = function() {
          return this.h.enabled && this.g && this.g.has(zp) ? 1e3 * this.g.get(zp) : null;
        };
        r.Ai = function() {
          return this.h.enabled && this.g && this.g.has(Ap) ? this.g.get(Ap) : null;
        };
        r.Bi = function() {
          return this.h.enabled && this.g && this.g.has(Bp) ? this.g.get(Bp) : null;
        };
        r.getBandwidthEstimate = function(a) {
          var b = this.Qg();
          if (!b) return a;
          var c = this.h.estimatedThroughputWeightRatio;
          return 0 < c && 1 >= c ? a * (1 - c) + b * c : a;
        };
        function Cp(a) {
          return a ? "false" === a.toLowerCase() ? false : /^[-0-9]/.test(a) ? parseInt(a, 10) : a.replace(/["]+/g, "") : true;
        }
        T("shaka.util.CmsdManager", xp);
        xp.prototype.getBandwidthEstimate = xp.prototype.getBandwidthEstimate;
        xp.prototype.getRoundTripTime = xp.prototype.Bi;
        xp.prototype.getResponseDelay = xp.prototype.Ai;
        xp.prototype.getEstimatedThroughput = xp.prototype.Qg;
        xp.prototype.getMaxBitrate = xp.prototype.Sg;
        var zp = "etp", yp = "mb", Ap = "rd", Bp = "rtt";
        function Dp() {
          this.g = null;
          this.h = [];
        }
        function Ep(a, b) {
          return Q(function(c) {
            if (1 == c.g) return a.g ? G(c, new Promise(function(d) {
              return a.h.push(d);
            }), 2) : c.u(2);
            a.g = b;
            I(c);
          });
        }
        Dp.prototype.release = function() {
          0 < this.h.length ? this.h.shift()() : this.g = null;
        };
        function X(a, b, c) {
          b = void 0 === b ? null : b;
          ch.call(this);
          var d = this;
          this.m = Fp;
          this.h = null;
          this.ue = b;
          this.oa = false;
          this.Qe = new lb();
          this.zd = new lb();
          this.j = new lb();
          this.Na = new lb();
          this.Sb = new lb();
          this.G = this.I = this.C = this.F = null;
          this.Te = 0;
          this.Z = new Dp();
          this.Y = this.Ob = this.T = this.i = this.Pb = this.H = this.l = this.xd = this.O = this.wg = this.fa = this.L = this.Ga = this.Aa = this.yd = this.M = this.pa = this.K = this.La = null;
          this.sa = false;
          this.Fa = this.o = null;
          this.We = 1e9;
          this.Oe = [];
          this.Ve = -1;
          this.g = Gp(this);
          this.Xe = Kn();
          this.P = null;
          this.Ue = -1;
          this.Ma = null;
          this.ka = { width: Infinity, height: Infinity };
          this.te = new Ji(this.g, this.ka, null);
          this.Ee = [];
          this.A = null;
          this.W = this.g.adaptationSetCriteriaFactory();
          this.W.configure({
            language: this.g.preferredAudioLanguage,
            role: this.g.preferredVariantRole,
            channelCount: this.g.preferredAudioChannelCount,
            Rc: this.g.preferredVideoHdrLevel,
            spatialAudio: this.g.preferSpatialAudio,
            videoLayout: this.g.preferredVideoLayout,
            Jc: this.g.preferredAudioLabel,
            fd: this.g.preferredVideoLabel,
            codecSwitchingStrategy: this.g.mediaSource.codecSwitchingStrategy,
            audioCodec: ""
          });
          this.Tb = this.g.preferredTextLanguage;
          this.Hd = this.g.preferredTextRole;
          this.Fd = this.g.preferForcedSubs;
          this.Cd = [];
          c && c(this);
          this.L = Hp(this);
          this.fa = new xp(this.g.cmsd);
          this.F = Ip(this);
          this.F.ig(this.g.streaming.forceHTTP);
          this.F.jg(this.g.streaming.forceHTTPS);
          this.F.o = this.g.streaming.minBytesForProgressEvents;
          this.Uc = this.ea = this.s = null;
          this.Ze = false;
          this.Ye = new ec(function() {
            return Q(function(e) {
              if (1 == e.g) return d.ea ? G(e, d.Kb(d.Uc, true), 3) : e.u(0);
              if (4 != e.g) return G(e, d.load(d.ea), 4);
              d.Ze ? d.Uc.pause() : d.Uc.play();
              d.ea = null;
              d.Ze = false;
              I(e);
            });
          });
          Jp && (this.s = Jp(), this.s.configure(this.g.ads), this.Sb.D(this.s, "ad-content-pause-requested", function(e) {
            var f;
            return Q(function(g) {
              if (1 == g.g) {
                d.Ye.stop();
                if (d.ea) return g.u(0);
                d.Uc = d.h;
                d.Ze = d.Tc();
                f = e.saveLivePosition || false;
                return G(g, d.Jg(true, f), 3);
              }
              d.ea = g.h;
              I(g);
            });
          }), this.Sb.D(this.s, "ad-content-resume-requested", function(e) {
            e = e.offset || 0;
            if (d.ea) {
              var f = d.ea;
              f.B && e && (f.B += e);
            }
            d.Ye.da(0.1);
          }), this.Sb.D(this.s, "ad-content-attach-requested", function() {
            return Q(function(e) {
              return d.h || !d.Uc ? e.u(0) : G(e, d.Kb(d.Uc, true), 0);
            });
          }));
          this.Qe.D(window2, "online", function() {
            Kp(d);
            d.cg();
          });
          this.xe = new ec(function() {
            for (var e = Date.now() / 1e3, f = false, g = true, h = t(d.i.variants), k2 = h.next(); !k2.done; k2 = h.next()) k2 = k2.value, 0 < k2.disabledUntilTime && k2.disabledUntilTime <= e && (k2.disabledUntilTime = 0, f = true), 0 < k2.disabledUntilTime && (g = false);
            g && d.xe.stop();
            f && Lp(d, false, void 0, false, false);
          });
          this.ya = null;
          a && (sb("Player w/ mediaElement", "Please migrate from initializing Player with a mediaElement; use the attach method instead."), this.Kb(
            a,
            true
          ));
          this.B = null;
        }
        qa(X, ch);
        function Mp(a) {
          null != a.O && (jd(a.O), a.O.release(), a.O = null);
        }
        function Np(a, b, c) {
          c || b.lcevc.enabled ? (Mp(a), null == a.O && (a.O = new gd(a.h, a.wg, b.lcevc, c), a.I && (a.I.I = a.O))) : Mp(a);
        }
        function Op(a, b) {
          return new V(a, b);
        }
        r = X.prototype;
        r.destroy = function() {
          var a = this, b;
          return Q(function(c) {
            switch (c.g) {
              case 1:
                if (a.m == Pp) return c.return();
                Mp(a);
                b = a.detach();
                a.m = Pp;
                return G(c, b, 2);
              case 2:
                return G(c, a.nf(), 3);
              case 3:
                a.Qe && (a.Qe.release(), a.Qe = null);
                a.zd && (a.zd.release(), a.zd = null);
                a.j && (a.j.release(), a.j = null);
                a.Na && (a.Na.release(), a.Na = null);
                a.Sb && (a.Sb.release(), a.Sb = null);
                a.Fa = null;
                a.g = null;
                a.A = null;
                a.ue = null;
                a.L = null;
                a.fa = null;
                if (!a.F) {
                  c.u(4);
                  break;
                }
                return G(c, a.F.destroy(), 5);
              case 5:
                a.F = null;
              case 4:
                a.o && (a.o.release(), a.o = null), ch.prototype.release.call(a), I(c);
            }
          });
        };
        function Qp(a, b) {
          Rp.set(a, b);
        }
        function Sp(a, b) {
          a.dispatchEvent(Op("onstatechange", (/* @__PURE__ */ new Map()).set("state", b)));
        }
        r.Kb = function(a, b) {
          b = void 0 === b ? true : b;
          var c = this, d, e, f;
          return Q(function(g) {
            switch (g.g) {
              case 1:
                if (c.m == Pp) throw new U(2, 7, 7e3);
                d = c.h && c.h == a;
                if (!c.h || c.h == a) {
                  g.u(2);
                  break;
                }
                return G(g, c.detach(), 2);
              case 2:
                return G(g, Tp(c, "attach"), 4);
              case 4:
                if (g.h) return g.return();
                xa(g, 5, 6);
                d || (Sp(c, "attach"), e = function() {
                  var h = Up(c, false);
                  h && Vp(c, h);
                }, c.zd.D(a, "error", e), c.h = a, c.L && c.L.setMediaElement(a));
                if (!b || !fc() || c.I) {
                  g.u(6);
                  break;
                }
                return G(g, Wp(c), 6);
              case 6:
                Da(g);
                c.Z.release();
                Ea(g, 0);
                break;
              case 5:
                return f = Aa(g), G(g, c.detach(), 10);
              case 10:
                throw f;
            }
          });
        };
        r.Th = function(a) {
          this.wg = a;
        };
        r.detach = function(a) {
          a = void 0 === a ? false : a;
          var b = this;
          return Q(function(c) {
            if (1 == c.g) {
              if (b.m == Pp) throw new U(2, 7, 7e3);
              return G(c, b.jc(false, a), 2);
            }
            if (3 != c.g) return G(c, Tp(b, "detach"), 3);
            if (c.h) return c.return();
            try {
              b.h && (b.zd.Qa(), b.h = null), Sp(b, "detach"), b.s && !a && b.s.release();
            } finally {
              b.Z.release();
            }
            I(c);
          });
        };
        function Tp(a, b) {
          var c;
          return Q(function(d) {
            return 1 == d.g ? (c = ++a.Te, G(d, Ep(a.Z, b), 2)) : c != a.Te ? (a.Z.release(), d.return(true)) : d.return(false);
          });
        }
        r.jc = function(a, b) {
          a = void 0 === a ? true : a;
          b = void 0 === b ? false : b;
          var c = this, d, e, f, g, h, k2, l, m, n, p;
          return Q(function(q) {
            switch (q.g) {
              case 1:
                return c.m != Pp && (c.m = Fp), G(q, Tp(c, "unload"), 2);
              case 2:
                if (q.h) return q.return();
                ya(q, 3);
                c.sa = false;
                Sp(c, "unload");
                Mp(c);
                d = c.Cd.map(function(u) {
                  return u();
                });
                c.Cd = [];
                return G(q, Promise.all(d), 5);
              case 5:
                c.dispatchEvent(Op("unloading"));
                c.yd && (c.yd.release(), c.yd = null);
                c.Aa && (c.Aa.release(), c.Aa = null);
                c.Ga && (c.Ga.release(), c.Ga = null);
                c.h && (c.j.Qa(), c.Na.Qa());
                c.xe.stop();
                c.La && (c.La.release(), c.La = null);
                c.pa && (c.pa.stop(), c.pa = null);
                if (!c.H) {
                  q.u(6);
                  break;
                }
                return G(q, c.H.stop(), 7);
              case 7:
                c.H = null, c.Pb = null;
              case 6:
                if (!c.o) {
                  q.u(8);
                  break;
                }
                return G(q, c.o.stop(), 8);
              case 8:
                if (!c.l) {
                  q.u(10);
                  break;
                }
                return G(q, c.l.destroy(), 11);
              case 11:
                c.l = null;
              case 10:
                c.K && (c.K.release(), c.K = null);
                c.G && (c.G.release(), c.G = null);
                if ("webkit" !== window2.shakaMediaKeysPolyfill || !c.C) {
                  q.u(12);
                  break;
                }
                return G(q, c.C.destroy(), 13);
              case 13:
                c.C = null;
              case 12:
                if (!c.I) {
                  q.u(14);
                  break;
                }
                return G(q, c.I.destroy(), 15);
              case 15:
                c.I = null;
              case 14:
                if (c.s && !b) c.s.onAssetUnload();
                c.ea && !b && (c.ea.destroy(), c.ea = null);
                b || c.Ye.stop();
                c.L && Yo(c.L);
                c.fa && (c.fa.g = null);
                if (!c.B) {
                  q.u(16);
                  break;
                }
                return G(q, c.B.destroy(), 17);
              case 17:
                c.B = null;
              case 16:
                c.h && (Nj(c.h), c.h.src && (c.h.removeAttribute("src"), c.h.load()));
                if (!c.C) {
                  q.u(18);
                  break;
                }
                return G(q, c.C.destroy(), 19);
              case 19:
                c.C = null;
              case 18:
                c.ya && c.T != c.ya.Pc() && (c.ya.s || c.ya.destroy(), c.ya = null);
                c.T = null;
                c.Ob = null;
                c.M = null;
                if (c.i) {
                  e = t(c.i.variants);
                  for (f = e.next(); !f.done; f = e.next()) for (g = f.value, h = t([g.audio, g.video]), k2 = h.next(); !k2.done; k2 = h.next()) (l = k2.value) && l.segmentIndex && l.segmentIndex.release();
                  m = t(c.i.textStreams);
                  for (n = m.next(); !n.done; n = m.next()) p = n.value, p.segmentIndex && p.segmentIndex.release();
                }
                c.g && c.g.streaming.clearDecodingCache && (og.clear(), cc.clear());
                c.i = null;
                c.A = new fo();
                c.Se = null;
                c.Ma = null;
                c.P = null;
                c.Ue = -1;
                c.Oe = [];
                c.Ve = -1;
                c.F && c.F.Fg();
                Xp(c);
              case 3:
                Da(q);
                c.Z.release();
                Ea(q, 4);
                break;
              case 4:
                if (a && fc() && !c.I && c.h) return G(q, Wp(c), 0);
                q.u(0);
            }
          });
        };
        r.Ij = function(a) {
          this.Y = a;
        };
        r.load = function(a, b, c) {
          b = void 0 === b ? null : b;
          var d = this, e, f, g, h, k2, l, m, n, p, q, u, w, v;
          return Q(function(x) {
            switch (x.g) {
              case 1:
                if (d.m == Pp) throw new U(2, 7, 7e3);
                e = null;
                f = "";
                if (a instanceof go) {
                  if (a.s) throw new U(2, 7, 7006);
                  e = a;
                  f = e.Pc() || "";
                } else f = a || "";
                return G(x, Ep(d.Z, "load"), 2);
              case 2:
                d.Z.release();
                if (!d.h) throw new U(2, 7, 7002);
                if (!d.T) {
                  x.u(3);
                  break;
                }
                d.T = f;
                return G(x, d.jc(false), 3);
              case 3:
                g = ++d.Te;
                h = function() {
                  return Q(function(z) {
                    if (1 == z.g) return d.Te == g ? z.u(0) : e ? G(z, e.destroy(), 3) : z.u(3);
                    throw new U(2, 7, 7e3);
                  });
                };
                k2 = function(z, C) {
                  return Q(function(D) {
                    switch (D.g) {
                      case 1:
                        return ya(D, 2), G(D, Ep(d.Z, C), 4);
                      case 4:
                        return G(D, h(), 5);
                      case 5:
                        return G(D, z(), 6);
                      case 6:
                        return G(D, h(), 7);
                      case 7:
                        e && d.g && (e.g = d.g);
                      case 2:
                        Da(D), d.Z.release(), Ea(D, 0);
                    }
                  });
                };
                xa(x, 5, 6);
                null == b && e && (b = e.getStartTime());
                d.Y = b;
                d.sa = false;
                d.dispatchEvent(Op("loading"));
                if (e) {
                  c = e.Y;
                  x.u(8);
                  break;
                }
                if (c) {
                  x.u(8);
                  break;
                }
                return G(x, k2(function() {
                  return Q(function(z) {
                    if (1 == z.g) return G(z, Yp(d, f), 2);
                    c = z.h;
                    I(z);
                  });
                }, "guessMimeType_"), 8);
              case 8:
                l = !!e;
                if (e) {
                  jo(e, d);
                  d.A = e.getStats();
                  x.u(11);
                  break;
                }
                return G(x, Zp(d, f, b, c, true), 12);
              case 12:
                (e = x.h) ? (e.A = false, jo(e, d), d.A = e.getStats(), e.start(), e.m.catch(function() {
                })) : d.A = new fo();
              case 11:
                m = !e;
                n = Date.now() / 1e3;
                d.A = e ? e.getStats() : new fo();
                d.T = f;
                d.Ob = c || null;
                d.Aa = new cm(function() {
                  return d.Ra();
                });
                if (m) return G(x, k2(function() {
                  return Q(function(z) {
                    return G(z, $p(d, c), 0);
                  });
                }, "initializeSrcEqualsDrmInner_"), 23);
                d.Ga = new cm(function() {
                  return d.Ra();
                });
                return G(x, k2(function() {
                  return Q(function(z) {
                    if (1 == z.g) return G(z, Promise.race([
                      e.oa,
                      e.m
                    ]), 2);
                    d.Pb = e.G;
                    var C = e;
                    C.pa = true;
                    d.H = C.l;
                    d.i = e.Gf();
                    I(z);
                  });
                }, "waitForFinish"), 15);
              case 15:
                if (d.I) {
                  x.u(16);
                  break;
                }
                return G(x, k2(function() {
                  return Q(function(z) {
                    return G(z, Wp(d), 0);
                  });
                }, "initializeMediaSourceEngineInner_"), 16);
              case 16:
                return d.i && d.i.textStreams.length && (d.B.enableTextDisplayer ? d.B.enableTextDisplayer() : sb("Text displayer w/ enableTextDisplayer", 'Text displayer should have a "enableTextDisplayer" method!')), G(x, k2(function() {
                  return Q(function(z) {
                    return G(z, e.m, 0);
                  });
                }, "waitForFinish"), 18);
              case 18:
                d.g = e.getConfiguration();
                d.te = e.F;
                d.H && d.H.setMediaElement && d.h && d.H.setMediaElement(d.h);
                d.yd = lo(e);
                d.xd = e.Ga;
                if (p = e.o) d.W = p;
                l && d.h && "AUDIO" === d.h.nodeName && (aq(d), d.configure("manifest.disableVideo", true));
                if (e.i) {
                  x.u(19);
                  break;
                }
                return G(x, k2(function() {
                  return Q(function(z) {
                    return G(z, qo(e, d.h), 0);
                  });
                }, "drmEngine_.init"), 19);
              case 19:
                return d.C = mo(e), G(x, k2(function() {
                  return Q(function(z) {
                    return G(z, d.C.Kb(d.h), 0);
                  });
                }, "drmEngine_.attach"), 21);
              case 21:
                return !(q = e.C) || d.Fa && d.Fa == q || (d.o = ko(e), d.Fa = e.C, "function" != typeof d.o.setMediaElement && (sb("AbrManager w/o setMediaElement", "Please use an AbrManager with setMediaElement function."), d.o.setMediaElement = function() {
                }), "function" != typeof d.o.setCmsdManager && (sb("AbrManager w/o setCmsdManager", "Please use an AbrManager with setCmsdManager function."), d.o.setCmsdManager = function() {
                }), "function" != typeof d.o.trySuggestStreams && (sb("AbrManager w/o trySuggestStreams", "Please use an AbrManager with trySuggestStreams function."), d.o.trySuggestStreams = function() {
                })), u = no(e), w = e.K, G(x, k2(function() {
                  return Q(function(z) {
                    return G(z, bq(d, n, w, u), 0);
                  });
                }, "loadInner_"), 22);
              case 22:
                io(e);
                d.Ob && rc() && wf(d.Ob) && Kk(d.I, d.T, d.Ob);
                x.u(14);
                break;
              case 23:
                return G(x, k2(function() {
                  return Q(function(z) {
                    return G(z, cq(d, n, c), 0);
                  });
                }, "srcEqualsInner_"), 14);
              case 14:
                d.dispatchEvent(Op("loaded"));
              case 6:
                Da(x);
                if (!e) {
                  x.u(25);
                  break;
                }
                return G(x, e.destroy(), 25);
              case 25:
                d.ya = null;
                Ea(x, 0);
                break;
              case 5:
                v = Aa(x);
                if (!v || 7e3 == v.code) {
                  x.u(27);
                  break;
                }
                return G(x, d.jc(false), 27);
              case 27:
                throw v;
            }
          });
        };
        function aq(a) {
          for (var b = t(a.i.variants), c = b.next(); !c.done; c = b.next()) c = c.value, c.video && (c.video.closeSegmentIndex(), c.video = null), c.bandwidth = c.audio && c.audio.bandwidth ? c.audio.bandwidth : 0;
          a.i.variants = a.i.variants.filter(function(d) {
            return d.audio;
          });
        }
        r.Ej = function(a, b) {
          a = void 0 === a ? true : a;
          b = void 0 === b ? false : b;
          var c = this, d;
          return Q(function(e) {
            return 1 == e.g ? G(e, dq(c), 2) : 3 != e.g ? (d = e.h, G(e, c.jc(a, b), 3)) : e.return(d);
          });
        };
        r.Jg = function(a, b) {
          a = void 0 === a ? false : a;
          b = void 0 === b ? false : b;
          var c = this, d;
          return Q(function(e) {
            return 1 == e.g ? G(e, dq(c, b), 2) : 3 != e.g ? (d = e.h, G(e, c.detach(a), 3)) : e.return(d);
          });
        };
        function dq(a, b) {
          b = void 0 === b ? false : b;
          var c, d;
          return Q(function(e) {
            if (1 == e.g) {
              c = null;
              if (!(a.i && a.H && a.Pb && a.T)) return e.u(2);
              d = a.h.currentTime;
              a.U() && !b && (d = null);
              return G(e, eq(a, a.T, d, a.Ob, true, false, false), 3);
            }
            if (2 != e.g) {
              c = e.h;
              a.Ee.push(c);
              a.H && a.H.setMediaElement && a.H.setMediaElement(null);
              var f = c, g = a.H, h = a.Pb;
              f.h = a.i;
              f.l = g;
              f.G = h;
              f = c;
              g = a.Fa;
              f.j = a.o;
              f.C = g;
              c.o = a.W;
              c.start();
              a.i = null;
              a.H = null;
              a.Pb = null;
              a.o = null;
              a.Fa = null;
            }
            return e.return(c);
          });
        }
        r.preload = function(a, b, c) {
          b = void 0 === b ? null : b;
          var d = this, e;
          return Q(function(f) {
            if (1 == f.g) return G(f, Zp(d, a, b, c), 2);
            (e = f.h) ? e.start() : Vp(d, new U(2, 7, 7005));
            return f.return(e);
          });
        };
        r.nf = function() {
          var a = this, b, c, d, e;
          return Q(function(f) {
            b = [];
            c = t(a.Ee);
            for (d = c.next(); !d.done; d = c.next()) e = d.value, e.s || b.push(e.destroy());
            a.Ee = [];
            return G(f, Promise.all(b), 0);
          });
        };
        function Zp(a, b, c, d, e) {
          e = void 0 === e ? false : e;
          var f, g, h, k2;
          return Q(function(l) {
            if (1 == l.g) return d ? l.u(2) : G(l, Yp(a, b), 3);
            2 != l.g && (d = l.h);
            if (f = fq(a, d)) return l.return(null);
            g = false;
            h = true;
            e && (a.o && a.Fa == a.g.abrFactory && (h = false), a.h && "AUDIO" === a.h.nodeName && (g = true));
            k2 = eq(a, b, c, d || null, !e, g, h);
            k2 = e ? k2.then(function(m) {
              m.A = false;
              return m;
            }) : k2.then(function(m) {
              a.Ee.push(m);
              return m;
            });
            return l.return(k2);
          });
        }
        function eq(a, b, c, d, e, f, g) {
          e = void 0 === e ? true : e;
          f = void 0 === f ? false : f;
          g = void 0 === g ? true : g;
          var h, k2, l, m, n, p, q, u, w, v, x, z, C, D;
          return Q(function(F) {
            if (1 == F.g) return h = null, k2 = Md(a.g), f && (k2.manifest.disableVideo = true), l = function() {
              return h.T && h.s ? null : h;
            }, m = function() {
              return l() ? l().getConfiguration() : a.g;
            }, Infinity != a.ka.width || Infinity != a.ka.height || a.g.ignoreHardwareResolution ? F.u(2) : G(F, Ec(), 3);
            2 != F.g && (n = F.h, a.ka.width = n.width, a.ka.height = n.height);
            p = new Ji(k2, a.ka, null);
            q = { networkingEngine: a.F, filter: function(B) {
              var A, H;
              return Q(function(E) {
                if (1 == E.g) return G(E, Ki(p, B), 2);
                if (4 != E.g) {
                  A = E.h;
                  if (!A) return E.u(0);
                  H = Op("trackschanged");
                  return G(E, Promise.resolve(), 4);
                }
                h.dispatchEvent(H);
                I(E);
              });
            }, makeTextStreamsForClosedCaptions: function(B) {
              return gq(a, B);
            }, onTimelineRegionAdded: function(B) {
              dm(h.H, B);
            }, onEvent: function(B) {
              return h.dispatchEvent(B);
            }, onError: function(B) {
              return h.onError(B);
            }, isLowLatencyMode: function() {
              return m().streaming.lowLatencyMode;
            }, updateDuration: function() {
              a.l && h.T && a.l.updateDuration();
            }, newDrmInfo: function(B) {
              var A = h.i, H = A ? A.h : null;
              H && A.A && Ni(p, H.keySystem, B);
            }, onManifestUpdated: function() {
              var B = (/* @__PURE__ */ new Map()).set("isLive", a.U());
              h.dispatchEvent(Op("manifestupdated", B));
              ho(h, false, function() {
                if (a.s) a.s.onManifestUpdated(a.U());
              });
            }, getBandwidthEstimate: function() {
              return a.o.getBandwidthEstimate();
            }, onMetadata: function(B, A, H, E) {
              var L = B;
              if ("com.apple.hls.interstitial" == B && (L = "com.apple.quicktime.HLS", B = { startTime: A, endTime: H, values: E }, a.s)) a.s.onHLSInterstitialMetadata(a, a.h, B);
              E = t(E);
              B = E.next();
              for (var M = {}; !B.done; M = { Yf: void 0 }, B = E.next()) M.Yf = B.value, "ID" != M.Yf.name && ho(h, false, /* @__PURE__ */ function(J) {
                return function() {
                  hq(a, A, H, L, J.Yf);
                };
              }(M));
            }, disableStream: function(B) {
              return a.disableStream(B, a.g.streaming.maxDisabledTime);
            }, addFont: function(B, A) {
              return a.addFont(B, A);
            } };
            u = new cm(function() {
              return a.Ra();
            });
            u.addEventListener("regionadd", function(B) {
              var A = B.region;
              iq(a, "timelineregionadded", A, h);
              ho(h, false, function() {
                a.s && (a.s.onDashTimedMetadata(A), a.s.onDASHInterstitialMetadata(a, a.h, A));
              });
            });
            w = null;
            k2.streaming.observeQualityChanges && (w = new Xl(function() {
              return a.Fb();
            }), w.addEventListener("qualitychange", function(B) {
              jq(a, B.quality, B.position);
            }), w.addEventListener("audiotrackchange", function(B) {
              jq(a, B.quality, B.position, true);
            }));
            v = true;
            x = { Wb: a.F, onError: function(B) {
              return h.onError(B);
            }, pe: function(B) {
              ho(h, true, function() {
                a: {
                  var A = B, H = Op("keystatuschanged");
                  a.dispatchEvent(H);
                  var E = Object.keys(A);
                  1 == E.length && "" == E[0] && (E = ["00"], A = { "00": A[""] });
                  H = 1 == E.length && "00" == E[0];
                  var L = false;
                  if (E.length) {
                    E = a.keySystem();
                    for (var M = wh(a.g.drm.clearKeys), J = t(a.i.variants), K = J.next(); !K.done; K = J.next()) {
                      K = K.value;
                      var N = [];
                      K.audio && N.push(K.audio);
                      K.video && N.push(K.video);
                      N = t(N);
                      for (var O = N.next(); !O.done; O = N.next()) {
                        var P = O.value;
                        O = K.allowedByKeySystem;
                        if (P.keyIds.size) {
                          if (P.drmInfos.length && !M.size) {
                            P = t(P.drmInfos);
                            for (var R = P.next(); !R.done; R = P.next()) if (R = R.value, R.keyIds.size && R.keySystem == E) {
                              K.allowedByKeySystem = true;
                              R = t(R.keyIds);
                              for (var S = R.next(); !S.done; S = R.next()) if (S = S.value, (S = A[H ? "00" : S]) || a.C.F) K.allowedByKeySystem = K.allowedByKeySystem && !!S && !Pi.includes(S);
                            }
                          } else for (K.allowedByKeySystem = true, P = t(P.keyIds), R = P.next(); !R.done; R = P.next()) if (R = R.value, (R = A[H ? "00" : R]) || a.C.F) K.allowedByKeySystem = K.allowedByKeySystem && !!R && !Pi.includes(R);
                        }
                        O != K.allowedByKeySystem && (L = true);
                      }
                    }
                  }
                  if (L && (kq(a), !lq(a))) break a;
                  (A = a.l.l) && !A.allowedByKeySystem && Lp(a);
                }
              });
            }, onExpirationUpdated: function(B, A) {
              var H = Op("expirationupdated");
              h.dispatchEvent(H);
              if ((H = h.l) && H.onExpirationUpdated) H.onExpirationUpdated(B, A);
            }, onEvent: function(B) {
              h.dispatchEvent(B);
              "drmsessionupdate" == B.type && v && (v = false, B = Date.now() / 1e3 - h.ya, (a.A || h.getStats()).j = B, a.O && jd(a.O));
            } };
            z = Ip(a, l);
            jh(a.F, z);
            C = function() {
              return a.Kc(x);
            };
            D = { config: k2, Yi: q, ij: u, hj: w, Kc: C, Xi: p, networkingEngine: z, Sh: e, Rh: g };
            h = new go(b, d, c, D);
            return F.return(h);
          });
        }
        function Yp(a, b) {
          var c, d;
          return Q(function(e) {
            if (1 == e.g) return c = a.g.manifest.retryParameters, G(e, Ao(b, a.F, c), 2);
            d = e.h;
            "application/x-mpegurl" == d && rc() && (d = "application/vnd.apple.mpegurl");
            return e.return(d);
          });
        }
        function fq(a, b) {
          if (!fc()) return true;
          if (b) {
            if ("" == (a.h || hc()).canPlayType(b)) return false;
            if (!fc() || !Si.has(b)) return true;
            if (wf(b)) return rc() && (a.g.drm.servers["com.apple.fps"] || a.g.drm.servers["com.apple.fps.1_0"]) ? a.g.streaming.useNativeHlsForFairPlay : a.g.streaming.preferNativeHls;
            if ("application/dash+xml" === b || "video/vnd.mpeg.dash.mpd" === b) return a.g.streaming.preferNativeDash;
          }
          return false;
        }
        function mq(a) {
          var b = a.g.textDisplayFactory;
          b !== a.Se && (a.B = b(), a.B.configure ? a.B.configure(a.g.textDisplayer) : sb("Text displayer w/ configure", 'Text displayer should have a "configure" method!'), a.Se = b, a.B.setTextVisibility(a.oa));
        }
        function Wp(a) {
          var b, c, d;
          return Q(function(e) {
            if (1 == e.g) return Sp(a, "media-source"), a.h.removeAttribute("src"), Nj(a.h), mq(a), b = nq(a.h, a.B, { pi: function() {
              return a.keySystem();
            }, onMetadata: function(f, g, h) {
              f = t(f);
              for (var k2 = f.next(); !k2.done; k2 = f.next()) if (k2 = k2.value, k2.data && "number" == typeof k2.cueTime && k2.frames) {
                var l = k2.cueTime + g, m = h;
                m && l > m && (m = l);
                for (var n = t(k2.frames), p = n.next(); !p.done; p = n.next()) hq(a, l, m, "org.id3", p.value);
                if (a.s) a.s.onHlsTimedMetadata(k2, l);
              }
            }, cj: function(f) {
              a.Ga && dm(a.Ga, {
                schemeIdUri: f.schemeIdUri,
                startTime: f.startTime,
                endTime: f.endTime,
                id: String(f.id),
                emsg: f
              });
            }, onEvent: function(f) {
              return a.dispatchEvent(f);
            }, ej: function() {
              a.H && a.H.update && a.H.update();
            } }, a.O), b.configure(a.g.mediaSource), c = a.g.manifest, d = c.segmentRelativeVttTiming, b.Ea = d, G(e, b.G, 2);
            a.I = b;
            I(e);
          });
        }
        function oq(a, b, c) {
          function d() {
            return pq(a);
          }
          a.j.D(b, "playing", d);
          a.j.D(b, "pause", d);
          a.j.D(b, "ended", d);
          a.j.D(b, "ratechange", function() {
            var f = a.h.playbackRate;
            0 != f && (a.K && (a.K.set(f), a.m == qq && a.o.playbackRateChanged(f), rq(a, f)), f = Op("ratechange"), a.dispatchEvent(f));
          });
          b.remote && (a.j.D(b.remote, "connect", function() {
            return kq(a);
          }), a.j.D(b.remote, "connecting", function() {
            return kq(a);
          }), a.j.D(b.remote, "disconnect", function() {
            return Q(function(f) {
              if (1 == f.g) return a.l && "disconnected" == b.remote.state ? G(
                f,
                Pm(a.l),
                2
              ) : f.u(2);
              kq(a);
              I(f);
            });
          }));
          b.audioTracks && (a.j.D(b.audioTracks, "addtrack", function() {
            return kq(a);
          }), a.j.D(b.audioTracks, "removetrack", function() {
            return kq(a);
          }), a.j.D(b.audioTracks, "change", function() {
            return kq(a);
          }));
          if (b.textTracks && (a.j.D(b.textTracks, "addtrack", function(f) {
            if (f.track) switch (f = f.track, f.kind) {
              case "metadata":
                sq(a, f);
                break;
              case "chapters":
                tq(a, f);
                break;
              default:
                kq(a);
            }
          }), a.j.D(b.textTracks, "removetrack", function() {
            return kq(a);
          }), a.j.D(b.textTracks, "change", function() {
            return kq(a);
          }), "keep" !== a.g.streaming.crossBoundaryStrategy)) {
            var e = function(f) {
              a.l && Tm(a.l, void 0 === f ? false : f);
            };
            a.j.D(b, "waiting", function() {
              return e(true);
            });
            a.j.D(b, "timeupdate", function() {
              return e();
            });
          }
          "none" != b.preload && a.j.ma(b, "loadedmetadata", function() {
            a.A.C = Date.now() / 1e3 - c;
          });
        }
        function bq(a, b, c, d) {
          var e, f, g, h, k2, l, m, n, p, q, u, w, v, x, z, C, D, F, B, A, H, E, L, M, J, K;
          return Q(function(N) {
            switch (N.g) {
              case 1:
                Sp(a, "load");
                e = a.h;
                a.K = new Tl({ $d: function() {
                  return e.playbackRate;
                }, rc: function() {
                  return e.defaultPlaybackRate;
                }, kg: function(O) {
                  e.playbackRate = O;
                }, eh: function(O) {
                  e.currentTime += O;
                } });
                oq(a, e, b);
                f = false;
                g = t(a.i.variants);
                for (h = g.next(); !h.done; h = g.next()) k2 = h.value, (l = k2.video && k2.video.dependencyStream) && (f = kd(l));
                Np(a, a.g, f);
                a.Tb = a.g.preferredTextLanguage;
                a.Hd = a.g.preferredTextRole;
                a.Fd = a.g.preferForcedSubs;
                uq(a.i.presentationTimeline, a.g.playRangeStart, a.g.playRangeEnd);
                a.o.init(function(O, P, R) {
                  a.i && a.l && O != a.l.l && vq(a, O, true, void 0 === P ? false : P, void 0 === R ? 0 : R);
                });
                a.o.setMediaElement(e);
                a.o.setCmsdManager(a.fa);
                a.l = wq(a);
                a.l.configure(a.g.streaming);
                a.m = qq;
                a.dispatchEvent(Op("streaming"));
                m = c;
              case 2:
                (p = a.l.l) || m || (m = lq(a) ? a.o.chooseVariant() : null);
                q = [];
                n = p || m;
                u = t([n.video, n.audio]);
                for (w = u.next(); !w.done; w = u.next()) (v = w.value) && !v.segmentIndex && (q.push(v.createSegmentIndex()), v.dependencyStream && q.push(v.dependencyStream.createSegmentIndex()));
                if (!(0 < q.length)) {
                  N.u(4);
                  break;
                }
                return G(N, Promise.all(q), 4);
              case 4:
                if (!n || 0 != n.disabledUntilTime) {
                  N.u(2);
                  break;
                }
                if (a.H && a.H.onInitialVariantChosen) a.H.onInitialVariantChosen(n);
                a.i.isLowLatency && (a.g.streaming.lowLatencyMode ? a.configure(a.Xe) : db("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."));
                a.L && (Zo(a.L, a.i.isLowLatency && a.g.streaming.lowLatencyMode), dp(a.L, 1e3 * b));
                uq(a.i.presentationTimeline, a.g.playRangeStart, a.g.playRangeEnd);
                Em(a.l, a.g.playRangeStart, a.g.playRangeEnd);
                x = function(O) {
                  a.G = xq(a, O);
                  a.La = yq(a, O);
                  zq(a, e, false);
                };
                a.g.streaming.startAtSegmentBoundary || (z = a.Y, null == z && a.i.startTime && (z = a.i.startTime), x(z));
                if (p) {
                  N.u(7);
                  break;
                }
                if (!a.g.streaming.startAtSegmentBoundary) {
                  N.u(8);
                  break;
                }
                C = a.i.presentationTimeline;
                D = a.Y || a.h.currentTime;
                null == a.Y && a.i.startTime && (D = a.i.startTime);
                F = C.Hb();
                B = C.ob();
                D < F ? D = F : D > B && (D = B);
                return G(N, Aq(m, D), 9);
              case 9:
                A = N.h, x(A);
              case 8:
                vq(a, m, true, false, 0);
              case 7:
                return a.G.ready(), H = a.uc().find(function(O) {
                  return O.active;
                }), H || ((E = Hg(a.i.textStreams, a.Tb, a.Hd, a.Fd)[0] || null) && eo(a.A.h, E, true), m && (E ? (Kg(m.audio, E, a.g) && (a.oa = true), a.oa && a.B.setTextVisibility(true), Bq(a)) : a.oa = false), E && (a.g.streaming.alwaysStreamText || a.Of()) && (Nm(a.l, E), Cq(a))), G(N, a.l.start(d), 10);
              case 10:
                a.g.abr.enabled && (a.o.enable(), Dq(a));
                kq(a);
                lq(a);
                a.i.variants.some(function(O) {
                  return O.primary;
                });
                if ((L = a.U()) && (a.g.streaming.liveSync && a.g.streaming.liveSync.enabled || a.i.serviceDescription || a.g.streaming.liveSync.panicMode) || a.g.streaming.vodDynamicPlaybackRate) M = function() {
                  return Eq(a);
                }, a.j.D(e, "timeupdate", M);
                L || (J = function() {
                  return Fq(a);
                }, a.j.D(e, "timeupdate", J), Fq(a), a.i.nextUrl && (0 < a.g.streaming.preloadNextUrlWindow && (K = function() {
                  var O;
                  return Q(function(P) {
                    if (1 == P.g) {
                      O = a.Ra().end - a.h.currentTime;
                      if (isNaN(O) || !(O <= a.g.streaming.preloadNextUrlWindow)) return P.u(0);
                      a.j.Ja(e, "timeupdate", K);
                      return G(P, a.preload(a.i.nextUrl), 4);
                    }
                    a.ya = P.h;
                    I(P);
                  });
                }, a.j.D(
                  e,
                  "timeupdate",
                  K
                )), a.j.D(e, "ended", function() {
                  a.load(a.ya || a.i.nextUrl);
                })));
                if (a.s) a.s.onManifestUpdated(L);
                a.sa = true;
                I(N);
            }
          });
        }
        function $p(a, b) {
          var c, d, e, f, g;
          return Q(function(h) {
            return 1 == h.g ? (c = ed, d = Date.now() / 1e3, e = true, a.C = a.Kc({ Wb: a.F, onError: function(k2) {
              Vp(a, k2);
            }, pe: function() {
            }, onExpirationUpdated: function() {
              var k2 = Op("expirationupdated");
              a.dispatchEvent(k2);
            }, onEvent: function(k2) {
              a.dispatchEvent(k2);
              "drmsessionupdate" == k2.type && e && (e = false, a.A.j = Date.now() / 1e3 - d);
            } }), a.C.configure(a.g.drm), f = { id: 0, language: "und", disabledUntilTime: 0, primary: false, audio: null, video: null, bandwidth: 100, allowedByApplication: true, allowedByKeySystem: true, decodingInfos: [] }, g = {
              id: 0,
              originalId: null,
              groupId: null,
              createSegmentIndex: function() {
                return Promise.resolve();
              },
              segmentIndex: null,
              mimeType: b ? uf(b) : "",
              codecs: b ? vf(b) : "",
              encrypted: true,
              drmInfos: [],
              keyIds: /* @__PURE__ */ new Set(),
              language: "und",
              originalLanguage: null,
              label: null,
              type: c.la,
              primary: false,
              trickModeVideo: null,
              dependencyStream: null,
              emsgSchemeIdUris: null,
              roles: [],
              forced: false,
              channelsCount: null,
              audioSamplingRate: null,
              spatialAudio: false,
              closedCaptions: null,
              accessibilityPurpose: null,
              external: false,
              fastSwitching: false,
              fullMimeTypes: /* @__PURE__ */ new Set(),
              isAudioMuxedInVideo: false,
              baseOriginalId: null
            }, g.fullMimeTypes.add(kf(g.mimeType, g.codecs)), b.startsWith("audio/") ? (g.type = c.V, f.audio = g) : f.video = g, a.C.Z = true, G(h, Yh(a.C, [f], []), 2)) : G(h, a.C.Kb(a.h), 0);
          });
        }
        function cq(a, b, c) {
          var d, e, f, g, h, k2, l, m, n, p, q, u;
          return Q(function(w) {
            switch (w.g) {
              case 1:
                Sp(a, "src-equals");
                d = a.h;
                a.G = new Kl(d);
                e = false;
                a.Cd.push(function() {
                  e = true;
                });
                null != a.Y && a.G.af(a.Y);
                a.La = Gq(a, a.Y || 0);
                a.K = new Tl({ $d: function() {
                  return d.playbackRate;
                }, rc: function() {
                  return d.defaultPlaybackRate;
                }, kg: function(v) {
                  d.playbackRate = v;
                }, eh: function(v) {
                  d.currentTime += v;
                } });
                zq(a, d, true);
                d.textTracks && (mq(a), f = function() {
                  var v = Hq(a).find(function(x) {
                    return "disabled" !== x.mode;
                  });
                  v && (v.mode = "showing");
                }, g = function() {
                  var v = Hq(a).find(function(x) {
                    return "disabled" !== x.mode;
                  });
                  v && (v.mode = "hidden");
                }, a.j.D(d, "enterpictureinpicture", function() {
                  return f();
                }), a.j.D(d, "leavepictureinpicture", function() {
                  return g();
                }), d.remote ? (a.j.D(d.remote, "connect", function() {
                  return g();
                }), a.j.D(d.remote, "connecting", function() {
                  return g();
                }), a.j.D(d.remote, "disconnect", function() {
                  return g();
                })) : "webkitCurrentPlaybackTargetIsWireless" in d && a.j.D(d, "webkitcurrentplaybacktargetiswirelesschanged", function() {
                  return g();
                }), h = d, h.webkitSupportsFullscreen && a.j.D(h, "webkitpresentationmodechanged", function() {
                  "inline" != h.webkitPresentationMode ? f() : g();
                }));
                oq(a, d, b);
                k2 = fp(a.L, a.T, c);
                !k2.includes("#t=") && (0 < a.g.playRangeStart || isFinite(a.g.playRangeEnd)) && (k2 += "#t=", 0 < a.g.playRangeStart && (k2 += a.g.playRangeStart), isFinite(a.g.playRangeEnd) && (k2 += "," + a.g.playRangeEnd));
                if (!a.I) {
                  w.u(2);
                  break;
                }
                return G(w, a.I.destroy(), 3);
              case 3:
                a.I = null;
              case 2:
                return Nj(d), d.src = k2, (lc() || nc()) && d.load(), "none" != d.preload && !d.autoplay && wf(c) && rc() && d.load(), a.m = Iq, a.dispatchEvent(Op("streaming")), l = new Tg(), Bl(d, HTMLMediaElement.HAVE_METADATA, a.j, function() {
                  a.G.ready();
                  l.resolve();
                }), m = function() {
                  return new Promise(function(v) {
                    var x = new ec(v);
                    a.j.D(d.textTracks, "change", function() {
                      return x.da(0.5);
                    });
                    x.da(0.5);
                  });
                }, Bl(d, HTMLMediaElement.HAVE_CURRENT_DATA, a.j, function() {
                  var v, x, z, C, D;
                  return Q(function(F) {
                    if (1 == F.g) return G(F, m(), 2);
                    if (e) return F.return();
                    Jq(a);
                    v = Hq(a);
                    v.some(function(B) {
                      return "showing" === B.mode;
                    }) && (a.oa = true, a.B.setTextVisibility(true));
                    v.length && (a.B.enableTextDisplayer ? a.B.enableTextDisplayer() : sb("Text displayer w/ enableTextDisplayer", 'Text displayer should have a "enableTextDisplayer" method!'));
                    x = false;
                    z = t(v);
                    for (C = z.next(); !C.done; C = z.next()) D = C.value, "disabled" !== D.mode && (x ? (D.mode = "disabled", db("Found more than one enabled text track, disabling it", D)) : (Kq(a, D), x = true));
                    Lq(a);
                    I(F);
                  });
                }), d.error ? l.reject(Up(a)) : "none" == d.preload && (db('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'), l.resolve()), a.j.ma(d, "error", function() {
                  l.reject(Up(a));
                }), G(w, Kf(a.g.streaming.loadTimeout, l), 4);
              case 4:
                if ((n = a.U()) && (a.g.streaming.liveSync && a.g.streaming.liveSync.enabled || a.g.streaming.liveSync.panicMode) || a.g.streaming.vodDynamicPlaybackRate) p = function() {
                  return Eq(a);
                }, a.j.D(d, "timeupdate", p);
                n || (q = function() {
                  return Fq(a);
                }, a.j.D(d, "timeupdate", q), Fq(a));
                a.s && (a.s.onManifestUpdated(n), n && (u = a.Ra().end, a.j.D(d, "progress", function() {
                  var v = a.Ra().end;
                  u != v && (a.s.onManifestUpdated(a.U()), u = v);
                })));
                a.sa = true;
                I(w);
            }
          });
        }
        function Jq(a) {
          var b = a.g.preferredAudioLanguage;
          "" != b && a.qh(b, a.g.preferredVariantRole);
        }
        function Lq(a) {
          var b = a.g.preferredTextLanguage;
          "" != b && a.fg(b, a.g.preferredTextRole, a.g.preferForcedSubs);
        }
        function sq(a, b) {
          if ("metadata" == b.kind) {
            b.mode = "hidden";
            a.j.D(b, "cuechange", function() {
              if (b.activeCues) {
                for (var d = t(b.activeCues), e = d.next(); !e.done; e = d.next()) if (e = e.value, hq(a, e.startTime, e.endTime, e.type, e.value), a.s) a.s.onCueMetadataChange(e.value);
              }
              if (b.cues) {
                d = [];
                e = t(b.cues);
                for (var f = e.next(), g = {}; !f.done; g = { ac: void 0 }, f = e.next()) g.ac = f.value, "com.apple.quicktime.HLS" == g.ac.type && null != g.ac.startTime && (f = d.find(/* @__PURE__ */ function(h) {
                  return function(k2) {
                    return k2.startTime == h.ac.startTime && k2.endTime == h.ac.endTime;
                  };
                }(g)), f || (f = { startTime: g.ac.startTime, endTime: g.ac.endTime, values: [] }, d.push(f)), f.values.push(g.ac.value));
                d = t(d);
                for (e = d.next(); !e.done; e = d.next()) e = e.value, e.values.some(function(h) {
                  return "X-ASSET-URI" == h.key || "X-ASSET-LIST" == h.key;
                }) && a.s && (e.values.push({ key: "CUE", description: "", data: 0 != e.startTime || a.U() ? "ONCE" : "ONCE,PRE", mimeType: null, pictureType: null }), a.s.onHLSInterstitialMetadata(a, a.h, e));
              }
            });
            var c = new ec(function() {
              var d = Mq(a);
              d = t(d);
              for (var e = d.next(); !e.done; e = d.next()) e.value.mode = "hidden";
            }).kb().da(0.5);
            a.Cd.push(function() {
              c.stop();
            });
          }
        }
        function Nq(a, b) {
          b = (/* @__PURE__ */ new Map()).set("startTime", b.startTime).set("endTime", b.endTime).set("metadataType", b.schemeIdUri).set("payload", b.payload);
          a.dispatchEvent(Op("metadata", b));
        }
        function hq(a, b, c, d, e) {
          a.Aa && (b = { schemeIdUri: d, startTime: b, endTime: c || Infinity, id: "", payload: e }, b.id = JSON.stringify(b), dm(a.Aa, b));
        }
        function tq(a, b) {
          if (b && "chapters" == b.kind) {
            b.mode = "hidden";
            var c = new ec(function() {
              b.mode = "hidden";
            }).kb().da(0.5);
            a.Cd.push(function() {
              c.stop();
            });
          }
        }
        r.mj = function() {
          for (var a = this.Z; a.g; ) a.release();
        };
        r.Kc = function(a) {
          return new Rh(a);
        };
        function Ip(a, b) {
          function c(e) {
            b() ? b().dispatchEvent(e) : a.dispatchEvent(e);
          }
          function d(e) {
            b() ? ho(b(), true, e) : e();
          }
          b || (b = function() {
            return null;
          });
          return new fh(function(e, f, g, h) {
            var k2 = b() ? b().j : a.o;
            k2 && k2.segmentDownloaded(e, f, g, h);
          }, function(e, f, g) {
            f = (/* @__PURE__ */ new Map()).set("headers", e).set("request", f).set("requestType", g);
            c(Op("downloadheadersreceived", f));
            d(function() {
              if (a.fa) {
                var h = a.fa;
                if (h.h.enabled) {
                  var k2 = e["cmsd-static"];
                  if (k2) try {
                    var l = /* @__PURE__ */ new Map(), m = k2.split(",");
                    for (k2 = 0; k2 < m.length; k2++) {
                      var n = m[k2].split("=");
                      l.set(
                        n[0],
                        Cp(n[1])
                      );
                    }
                  } catch (v) {
                  }
                  if (l = e["cmsd-dynamic"]) {
                    try {
                      var p = /* @__PURE__ */ new Map(), q = l.split(";");
                      for (l = 1; l < q.length; l++) {
                        var u = q[l].split("=");
                        p.set(u[0], Cp(u[1]));
                      }
                      var w = p;
                    } catch (v) {
                      w = null;
                    }
                    w && (h.g = w);
                  }
                }
              }
            });
          }, function(e, f) {
            e = (/* @__PURE__ */ new Map()).set("request", e).set("response", f);
            c(Op("downloadcompleted", e));
          }, function(e, f, g, h) {
            e = (/* @__PURE__ */ new Map()).set("request", e).set("error", f).set("httpResponseCode", g).set("aborted", h);
            c(Op("downloadfailed", e));
          }, function(e, f, g) {
            d(function() {
              var h = a.L, k2 = g;
              k2 = void 0 === k2 ? {} : k2;
              if (h.g.enabled) if ("HEAD" === f.method) mp(
                h,
                f
              );
              else switch (e) {
                case 0:
                  try {
                    if (h.g.enabled) {
                      if (k2.type) {
                        a: {
                          switch (k2.type) {
                            case 4:
                              var l = h.l ? ap : $o;
                              break a;
                            case 3:
                            case 2:
                              l = h.l ? cp : bp;
                              break a;
                            case 5:
                              l = "s";
                              break a;
                          }
                          l = void 0;
                        }
                        h.i = l;
                      }
                      mp(h, f, { ot: jp, su: !h.s });
                    }
                  } catch (N) {
                    eb("CMCD_MANIFEST_ERROR", "Could not generate manifest CMCD data.", N);
                  }
                  break;
                case qh:
                  try {
                    if (h.g.enabled) {
                      var m = k2.segment;
                      l = 0;
                      m && (l = m.endTime - m.startTime);
                      var n = { d: 1e3 * l, st: h.h.U() ? "l" : "v" };
                      n.ot = qp(k2);
                      var p = n.ot === np || n.ot === hp || n.ot === ip || n.ot === sp, q = k2.stream;
                      if (q) {
                        var u = h.h.gb();
                        if (p && (n.bl = up(
                          h,
                          q.type
                        ), n.ot !== sp)) {
                          var w = vp(h, q.type);
                          n.dl = u ? w / Math.abs(u) : w;
                        }
                        q.bandwidth && (n.br = q.bandwidth / 1e3);
                        if (q.segmentIndex && m) {
                          var v = q.segmentIndex.Gb(m.endTime, true, 0 > u);
                          if (v) {
                            var x = v.next().value;
                            if (x && x != m) {
                              if (!Dd(m.N(), x.N())) {
                                var z = x.N()[0], C = f.uris[0], D = new URL(z), F = new URL(C);
                                if (D.origin !== F.origin) var B = z;
                                else {
                                  for (var A = D.pathname.split("/").slice(1), H = F.pathname.split("/").slice(1, -1); A[0] === H[0]; ) A.shift(), H.shift();
                                  for (; H.length; ) H.shift(), A.unshift("..");
                                  B = A.join("/");
                                }
                                n.nor = B;
                              }
                              if ((x.Sa || x.wa) && (m.Sa != x.Sa || m.wa != x.wa)) {
                                var E = x.Sa + "-";
                                x.wa && (E += x.wa);
                                n.nrr = E;
                              }
                            }
                          }
                          var L = h.h.gb() || 1, M = vp(h, q.type) || 500, J = q.bandwidth;
                          var K = J ? J * (m.endTime - m.startTime) / 1e3 / (M / L / 1e3) * h.g.rtpSafetyFactor : NaN;
                          isNaN(K) || (n.rtp = K);
                        }
                      }
                      p && n.ot !== sp && (n.tb = wp(h, n.ot) / 1e3);
                      mp(h, f, n);
                    }
                  } catch (N) {
                    eb("CMCD_SEGMENT_ERROR", "Could not generate segment CMCD data.", N);
                  }
                  break;
                case 2:
                case 5:
                case 6:
                  mp(h, f, { ot: "k" });
                  break;
                case 4:
                  mp(h, f, { ot: "o" });
              }
            });
          }, function(e, f, g, h) {
            (e = b() ? b().l : a.H) && e.banLocation && e.banLocation(h);
          }, function(e, f) {
            if (f.data) {
              f = f.data.byteLength;
              var g = b() ? b().getStats() : a.A;
              g && (g.lc = isNaN(g.lc) ? f : g.lc + f, 0 === e && (g.$g = f));
            }
          });
        }
        function xq(a, b) {
          return new Ll(a.h, a.i, a.g.streaming, b, function() {
            a.La && Wl(a.La, true);
            a.l && a.l.Ec();
            a.M && Oq(a);
          }, function(c) {
            return a.dispatchEvent(c);
          });
        }
        function yq(a, b) {
          var c = a.U() || 0 < b;
          b = new vo(a.yd, c);
          b.addEventListener("enter", function(f) {
            iq(a, "timelineregionenter", f.region);
          });
          b.addEventListener("exit", function(f) {
            iq(a, "timelineregionexit", f.region);
          });
          b.addEventListener("skip", function(f) {
            var g = f.region;
            f.seeking || (iq(a, "timelineregionenter", g), iq(a, "timelineregionexit", g));
          });
          var d = new vo(a.Aa, c);
          d.addEventListener("enter", function(f) {
            Nq(a, f.region);
          });
          c = new vo(a.Ga, c);
          c.addEventListener("enter", function(f) {
            f = (/* @__PURE__ */ new Map()).set("detail", f.region.emsg);
            a.dispatchEvent(Op("emsg", f));
          });
          var e = new Vl(a.h);
          e.g.add(b);
          e.g.add(d);
          e.g.add(c);
          a.xd && e.g.add(a.xd);
          return e;
        }
        function Gq(a, b) {
          b = new vo(a.Aa, 0 < b);
          b.addEventListener("enter", function(d) {
            Nq(a, d.region);
          });
          var c = new Vl(a.h);
          c.g.add(b);
          return c;
        }
        function zq(a, b, c) {
          a.M = new Gi();
          a.M.g = Ii;
          Pq(a);
          Xp(a);
          a.pa = new ec(function() {
            Oq(a);
          });
          a.g.streaming.rebufferingGoal && a.pa.ua(0.25);
          a.j.D(b, "waiting", function() {
            return Oq(a);
          });
          a.j.D(b, "canplaythrough", function() {
            return Oq(a);
          });
          a.j.D(b, "playing", function() {
            return Oq(a);
          });
          a.j.D(b, "seeked", function() {
            return Oq(a);
          });
          c && (a.j.D(b, "stalled", function() {
            return Oq(a);
          }), a.j.D(b, "progress", function() {
            return Oq(a);
          }), a.j.D(b, "timeupdate", function() {
            return Oq(a);
          }));
        }
        function Pq(a) {
          var b = a.g.streaming.rebufferingGoal;
          a.M.i.set(Hi, Math.min(0.5, b / 2)).set(Ii, b);
        }
        function Oq(a) {
          switch (a.m) {
            case Iq:
              if (a.Tc()) var b = true;
              else {
                var c = Gj(a.h.buffered);
                b = null != c && c >= a.h.duration - 1;
              }
              break;
            case qq:
              a: if (a.Tc() || Nk(a.I)) b = true;
              else {
                if (a.i.presentationTimeline.U()) {
                  c = a.i.presentationTimeline.bc();
                  var d = Gj(a.h.buffered);
                  if (null != d && d >= c) {
                    b = true;
                    break a;
                  }
                }
                b = false;
              }
              break;
            default:
              b = false;
          }
          d = Ij(a.h.buffered, a.h.currentTime);
          c = a.M;
          var e = b, f = c.i.get(c.g);
          b = c.g;
          d = e || d >= f && 0 < d ? Hi : Ii;
          c.g = d;
          (b = b != d) && d === Hi && (c.h = Date.now());
          b && Xp(a);
        }
        function nq(a, b, c, d) {
          return new Gk(a, b, c, d);
        }
        function Hp(a) {
          return new Wo({ getBandwidthEstimate: function() {
            return a.o ? a.o.getBandwidthEstimate() : NaN;
          }, Fb: function() {
            return a.Fb();
          }, getCurrentTime: function() {
            return a.h ? a.h.currentTime : 0;
          }, gb: function() {
            return a.gb();
          }, xb: function() {
            return a.xb();
          }, Rb: function() {
            return a.Rb();
          }, U: function() {
            return a.U();
          }, Zd: function() {
            return a.Zd();
          } }, a.g.cmcd);
        }
        function wq(a) {
          return new ym(a.i, { Qc: function() {
            return a.G ? a.G.Od() : 0;
          }, getBandwidthEstimate: function() {
            return a.o.getBandwidthEstimate();
          }, gb: function() {
            return a.gb();
          }, video: a.h, $: a.I, Wb: a.F, onError: function(b) {
            return Vp(a, b);
          }, onEvent: function(b) {
            return a.dispatchEvent(b);
          }, qe: function(b, c, d) {
            var e = b.startTime;
            b = b.endTime;
            c = c.type;
            if (c != cd) {
              if (a.G) {
                a.G.gh();
                var f = Uk(a.I, c);
                !a.U() && a.h.paused && !a.h.seeking && null != f && 0 < f && a.G.Od() < f && a.G.af(f);
              }
              Oq(a);
            }
            d = (/* @__PURE__ */ new Map()).set("start", e).set("end", b).set(
              "contentType",
              c
            ).set("isMuxed", d);
            a.dispatchEvent(Op("segmentappended", d));
          }, dj: function(b, c) {
            (c = c.Wc) && a.xd && Zl(a.xd, c, b);
          }, Dg: function(b, c) {
            var d = a.C;
            if (d.g.parseInbandPsshEnabled && !d.F && ["audio", "video"].includes(b)) {
              b = new Ph(Qb(c));
              c = 0;
              for (var e = t(b.data), f = e.next(); !f.done; f = e.next()) c += f.value.length;
              if (0 == c) d = Promise.resolve();
              else {
                c = new Uint8Array(c);
                e = 0;
                b = t(b.data);
                for (f = b.next(); !f.done; f = b.next()) f = f.value, c.set(f, e), e += f.length;
                gi(d, "cenc", c);
                d = d.m;
              }
            } else d = Promise.resolve();
            return d;
          }, disableStream: function(b, c) {
            return a.disableStream(b, c);
          } });
        }
        r.configure = function(a, b) {
          2 == arguments.length && "string" == typeof a && (a = nn(a, b));
          a.streaming && "forceTransmuxTS" in a.streaming && (sb("streaming.forceTransmuxTS configuration", "Please Use mediaSource.forceTransmux instead."), a.mediaSource.mediaSource = a.streaming.forceTransmuxTS, delete a.streaming.forceTransmuxTS);
          a.streaming && "forceTransmux" in a.streaming && (sb("streaming.forceTransmux configuration", "Please Use mediaSource.forceTransmux instead."), a.mediaSource.mediaSource = a.streaming.forceTransmux, delete a.streaming.forceTransmux);
          a.streaming && "useNativeHlsOnSafari" in a.streaming && (sb("streaming.useNativeHlsOnSafari configuration", "Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead."), a.streaming.preferNativeHls = a.streaming.useNativeHlsOnSafari && rc(), delete a.streaming.useNativeHlsOnSafari);
          if (a.streaming && "boolean" == typeof a.streaming.liveSync) {
            sb("streaming.liveSync", "Please Use streaming.liveSync.enabled instead.");
            var c = a.streaming.liveSync;
            a.streaming.liveSync = {};
            a.streaming.liveSync.enabled = c;
          }
          if (a.streaming && !(a.streaming.liveSync && "targetLatency" in a.streaming.liveSync) && ("liveSyncMinLatency" in a.streaming || "liveSyncMaxLatency" in a.streaming)) {
            c = a.streaming.liveSyncMinLatency || 0;
            var d = Math.abs((a.streaming.liveSyncMaxLatency || 1) - c) / 2;
            a.streaming.liveSync = a.streaming.liveSync || {};
            a.streaming.liveSync.targetLatency = c + d;
            a.streaming.liveSync.targetLatencyTolerance = d;
          }
          a.streaming && "liveSyncMaxLatency" in a.streaming && (sb("streaming.liveSyncMaxLatency", "Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"), delete a.streaming.liveSyncMaxLatency);
          a.streaming && "liveSyncMinLatency" in a.streaming && (sb("streaming.liveSyncMinLatency", "Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"), delete a.streaming.liveSyncMinLatency);
          a.streaming && "liveSyncTargetLatency" in a.streaming && (sb("streaming.liveSyncTargetLatency", "Please Use streaming.liveSync.targetLatency instead."), a.streaming.liveSync = a.streaming.liveSync || {}, a.streaming.liveSync.targetLatency = a.streaming.liveSyncTargetLatency, delete a.streaming.liveSyncTargetLatency);
          a.streaming && "liveSyncTargetLatencyTolerance" in a.streaming && (sb("streaming.liveSyncTargetLatencyTolerance", "Please Use streaming.liveSync.targetLatencyTolerance instead."), a.streaming.liveSync = a.streaming.liveSync || {}, a.streaming.liveSync.targetLatencyTolerance = a.streaming.liveSyncTargetLatencyTolerance, delete a.streaming.liveSyncTargetLatencyTolerance);
          a.streaming && "liveSyncPlaybackRate" in a.streaming && (sb(
            "streaming.liveSyncPlaybackRate",
            "Please Use streaming.liveSync.maxPlaybackRate instead."
          ), a.streaming.liveSync = a.streaming.liveSync || {}, a.streaming.liveSync.maxPlaybackRate = a.streaming.liveSyncPlaybackRate, delete a.streaming.liveSyncPlaybackRate);
          a.streaming && "liveSyncMinPlaybackRate" in a.streaming && (sb("streaming.liveSyncMinPlaybackRate", "Please Use streaming.liveSync.minPlaybackRate instead."), a.streaming.liveSync = a.streaming.liveSync || {}, a.streaming.liveSync.minPlaybackRate = a.streaming.liveSyncMinPlaybackRate, delete a.streaming.liveSyncMinPlaybackRate);
          a.streaming && "liveSyncPanicMode" in a.streaming && (sb("streaming.liveSyncPanicMode", "Please Use streaming.liveSync.panicMode instead."), a.streaming.liveSync = a.streaming.liveSync || {}, a.streaming.liveSync.panicMode = a.streaming.liveSyncPanicMode, delete a.streaming.liveSyncPanicMode);
          a.streaming && "liveSyncPanicThreshold" in a.streaming && (sb("streaming.liveSyncPanicThreshold", "Please Use streaming.liveSync.panicThreshold instead."), a.streaming.liveSync = a.streaming.liveSync || {}, a.streaming.liveSync.panicThreshold = a.streaming.liveSyncPanicThreshold, delete a.streaming.liveSyncPanicThreshold);
          if (a.mediaSource && "sourceBufferExtraFeatures" in a.mediaSource) {
            sb("mediaSource.sourceBufferExtraFeatures configuration", "Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");
            var e = a.mediaSource.sourceBufferExtraFeatures;
            a.mediaSource.addExtraFeaturesToSourceBuffer = function() {
              return e;
            };
            delete a.mediaSource.sourceBufferExtraFeatures;
          }
          a.manifest && a.manifest.hls && "useSafariBehaviorForLive" in a.manifest.hls && (sb(
            "manifest.hls.useSafariBehaviorForLive configuration",
            "Please Use liveSync config to keep on live Edge instead."
          ), delete a.manifest.hls.useSafariBehaviorForLive);
          a.streaming && "parsePrftBox" in a.streaming && (sb("streaming.parsePrftBox configuration", "Now fired without needing a configuration."), delete a.streaming.parsePrftBox);
          a.manifest && a.manifest.dash && "enableAudioGroups" in a.manifest.dash && (sb("manifest.dash.enableAudioGroups configuration", "It is now enabled by default and cannot be disabled."), delete a.manifest.dash.enableAudioGroups);
          a.streaming && "dispatchAllEmsgBoxes" in a.streaming && (sb("streaming.dispatchAllEmsgBoxes configuration", "Please Use mediaSource.dispatchAllEmsgBoxes instead."), a.mediaSource.dispatchAllEmsgBoxes = a.streaming.dispatchAllEmsgBoxes, delete a.streaming.dispatchAllEmsgBoxes);
          a.streaming && "autoLowLatencyMode" in a.streaming && (sb("streaming.autoLowLatencyMode configuration", "Please Use streaming.lowLatencyMode instead."), a.streaming.lowLatencyMode = a.streaming.autoLowLatencyMode, delete a.streaming.autoLowLatencyMode);
          a.manifest && a.manifest.dash && "ignoreSupplementalCodecs" in a.manifest.dash && (sb("manifest.dash.ignoreSupplementalCodecs configuration", "Please Use manifest.ignoreSupplementalCodecs instead."), a.manifest.ignoreSupplementalCodecs = a.manifest.dash.ignoreSupplementalCodecs, delete a.manifest.dash.ignoreSupplementalCodecs);
          a.manifest && a.manifest.hls && "ignoreSupplementalCodecs" in a.manifest.hls && (sb("manifest.hls.ignoreSupplementalCodecs configuration", "Please Use manifest.ignoreSupplementalCodecs instead."), a.manifest.ignoreSupplementalCodecs = a.manifest.hls.ignoreSupplementalCodecs, delete a.manifest.hls.ignoreSupplementalCodecs);
          a.manifest && a.manifest.dash && "updatePeriod" in a.manifest.dash && (sb("manifest.dash.updatePeriod configuration", "Please Use manifest.updatePeriod instead."), a.manifest.updatePeriod = a.manifest.dash.updatePeriod, delete a.manifest.dash.updatePeriod);
          a.manifest && a.manifest.hls && "updatePeriod" in a.manifest.hls && (sb("manifest.hls.updatePeriod configuration", "Please Use manifest.updatePeriod instead."), a.manifest.updatePeriod = a.manifest.hls.updatePeriod, delete a.manifest.hls.updatePeriod);
          a.manifest && a.manifest.dash && "ignoreDrmInfo" in a.manifest.dash && (sb("manifest.dash.ignoreDrmInfo configuration", "Please Use manifest.ignoreDrmInfo instead."), a.manifest.ignoreDrmInfo = a.manifest.dash.ignoreDrmInfo, delete a.manifest.dash.ignoreDrmInfo);
          if (a.drm && a.drm.advanced) {
            c = false;
            for (var f in a.drm.advanced) {
              var g = a.drm.advanced[f];
              d = g.videoRobustness;
              g = g.audioRobustness;
              "videoRobustness" in a.drm.advanced[f] && !Array.isArray(a.drm.advanced[f].videoRobustness) && (a.drm.advanced[f].videoRobustness = [d], c = true);
              "audioRobustness" in a.drm.advanced[f] && !Array.isArray(a.drm.advanced[f].audioRobustness) && (a.drm.advanced[f].audioRobustness = [g], c = true);
            }
            c && sb("AdvancedDrmConfiguration's videoRobustness and audioRobustness", "These properties are no longer strings but array of strings, please update your usage of these properties.");
          }
          a.streaming && "crossBoundaryStrategy" in a.streaming && "keep" != a.streaming.crossBoundaryStrategy && (a.streaming.inaccurateManifestTolerance = 0);
          f = Ln(this.g, a, Gp(this));
          Qq(this);
          return f;
        };
        r.$h = function(a) {
          this.Xe = a;
        };
        function Qq(a) {
          a.te = new Ji(a.g, a.ka, a.C);
          if (a.H) {
            var b = Md(a.g.manifest);
            a.h && "AUDIO" === a.h.nodeName && (b.disableVideo = true);
            a.H.configure(b);
          }
          a.C && a.C.configure(a.g.drm);
          if (a.l) {
            a.l.configure(a.g.streaming);
            try {
              a.m != Pp && Li(a.te, a.i) && kq(a);
            } catch (e) {
              Vp(a, e);
            }
            a.o && lq(a);
            b = a.l.l;
            !b || b.allowedByApplication && b.allowedByKeySystem || Lp(a);
          }
          a.F && (a.F.ig(a.g.streaming.forceHTTP), a.F.jg(a.g.streaming.forceHTTPS), a.F.o = a.g.streaming.minBytesForProgressEvents);
          a.I && (a.I.configure(a.g.mediaSource), a.I.Ea = a.g.manifest.segmentRelativeVttTiming);
          if (a.B) if (b = a.g.textDisplayFactory, a.Se != b) {
            var c = a.B;
            a.B = b();
            a.B.configure ? a.B.configure(a.g.textDisplayer) : sb("Text displayer w/ configure", 'Text displayer should have a "configure" method!');
            a.B.setTextLanguage || sb("Text displayer w/ setTextLanguage", 'Text displayer should have a "setTextLanguage" method!');
            a.B.setTextVisibility(c.isTextVisible());
            c.destroy();
            if (a.I) {
              c = a.I;
              var d = a.B;
              c.ea = d;
              c.h && (c.h.j = d);
            }
            a.Se = b;
            a.l && (b = a.l, (c = b.i.get(cd)) && Lm(b, c.stream, true, 0, true));
          } else a.B.configure && a.B.configure(a.g.textDisplayer);
          a.o && (a.o.configure(a.g.abr), a.g.abr.enabled ? a.o.enable() : a.o.disable(), Dq(a));
          a.M && Pq(a);
          a.pa && (a.g.streaming.rebufferingGoal ? a.pa.ua(0.25) : a.pa.stop());
          a.i && uq(a.i.presentationTimeline, a.g.playRangeStart, a.g.playRangeEnd);
          a.s && a.s.configure(a.g.ads);
          a.L && a.L.configure(a.g.cmcd);
          a.fa && a.fa.configure(a.g.cmsd);
        }
        r.getConfiguration = function() {
          var a = Gp(this);
          Ln(a, this.g, Gp(this));
          return a;
        };
        r.ii = function() {
          return this.Xe;
        };
        r.Tg = function() {
          var a = Gp(this);
          Ln(a, this.g, Gp(this));
          return pn(this.g, Gp(this));
        };
        r.Og = function() {
          if (this.h) {
            var a = this.h.buffered.length;
            a = a ? this.h.buffered.end(a - 1) : 0;
            var b = this.getConfiguration().streaming.bufferingGoal;
            b = Math.min(this.h.currentTime + b, this.Ra().end);
            if (a >= b) return 1;
            if (!(a <= this.h.currentTime) && a < b) return (a - this.h.currentTime) / (b - this.h.currentTime);
          }
          return 0;
        };
        r.qj = function() {
          for (var a in this.g) delete this.g[a];
          Ln(this.g, Gp(this), Gp(this));
          Qq(this);
        };
        r.ri = function() {
          return this.m;
        };
        r.Rg = function() {
          return this.i ? this.i.type : null;
        };
        r.vi = function() {
          return this.h;
        };
        r.xb = function() {
          return this.F;
        };
        r.Pc = function() {
          return this.T;
        };
        r.Ng = function() {
          return this.s ? this.s : null;
        };
        r.U = function() {
          return this.i && !this.Pa() ? this.i.presentationTimeline.U() : this.h && this.h.src ? Infinity == this.h.duration : false;
        };
        r.xc = function() {
          return this.i ? this.i.presentationTimeline.xc() : false;
        };
        r.Oi = function() {
          if (this.i && !this.Pa()) {
            var a = this.i.variants;
            return a.length ? !a[0].video : false;
          }
          return this.h && this.h.src ? this.h.videoTracks ? 0 == this.h.videoTracks.length : 0 == this.h.videoHeight : false;
        };
        r.Ra = function() {
          if (this.i && !this.Pa()) {
            if (!this.sa && "HLS" == this.i.type) return { start: 0, end: 0 };
            var a = this.i.presentationTimeline;
            return { start: a.Hb(), end: a.ob() };
          }
          if (this.h && this.h.src && (a = this.h.seekable) && a.length) {
            var b = this.g ? this.g.playRangeStart : 0;
            b = Math.max(a.start(0), b);
            var c = this.g ? this.g.playRangeEnd : Infinity;
            a = Math.min(a.end(a.length - 1), c);
            return { start: b, end: a };
          }
          return { start: 0, end: 0 };
        };
        r.Li = function() {
          this.U() && (this.h.currentTime = this.Ra().end);
        };
        r.Pi = function() {
          return this.sa;
        };
        r.keySystem = function() {
          var a = this.drmInfo();
          return a ? a.keySystem : "";
        };
        r.drmInfo = function() {
          return this.C ? this.C.h : null;
        };
        r.pd = function() {
          return this.C ? this.C.pd() : Infinity;
        };
        r.Ff = function() {
          return this.C ? this.C.Ff() : [];
        };
        r.Yd = function() {
          return this.C ? this.C.Yd() : {};
        };
        r.Nf = function() {
          return this.M ? this.M.g == Ii : false;
        };
        r.gb = function() {
          return this.h ? this.K ? this.K.i : 1 : 0;
        };
        r.Md = function(a, b) {
          b = void 0 === b ? true : b;
          0 == a ? db("A trick play rate of 0 is unsupported!") : (this.K.set(a), this.m == qq && (this.o.playbackRateChanged(a), Km(this.l, b && 1 < Math.abs(a))), rq(this, a));
        };
        r.gd = function() {
          var a = this.K.rc();
          this.m == Iq && this.K.set(a);
          this.m == qq && (this.K.set(a), this.o.playbackRateChanged(a), Km(this.l, false));
          this.Na.Qa();
        };
        r.Rb = function() {
          if (this.i && !this.Pa()) {
            for (var a = this.l ? this.l.l : null, b = [], c = 0, d = t(this.i.variants), e = d.next(); !e.done; e = d.next()) if (e = e.value, Fg(e)) {
              var f = wg(e);
              f.active = e == a;
              f.active || 1 == c || null == a || e.video != a.video || e.audio != a.audio || (f.active = true);
              f.active && c++;
              b.push(f);
            }
            return b;
          }
          return this.h && this.h.audioTracks ? Array.from(this.h.audioTracks).map(function(g) {
            return Eg(g);
          }) : [];
        };
        r.uc = function() {
          if (this.i && !this.Pa()) {
            for (var a = this.l ? this.l.s : null, b = [], c = t(this.i.textStreams), d = c.next(); !d.done; d = c.next()) {
              d = d.value;
              var e = xg(d);
              e.active = d == a;
              b.push(e);
            }
            return b;
          }
          return this.h && this.h.src && this.h.textTracks ? Hq(this).map(function(f) {
            return Cg(f);
          }) : [];
        };
        r.ni = function() {
          var a = this.Oe;
          this.i && (a = this.i.imageStreams);
          return a.map(function(b) {
            return yg(b);
          });
        };
        r.di = function(a) {
          var b = this, c, d;
          return Q(function(e) {
            if (1 == e.g) return G(e, Rq(b, a), 2);
            c = e.h;
            if (!c) return e.return(null);
            d = [];
            c.segmentIndex.Eb(function(f) {
              var g = Sq(f.tilesLayout || c.tilesLayout);
              if (g) {
                g = g.rows * g.nc;
                for (var h = f.j - f.startTime, k2 = 0; k2 < g; k2++) {
                  var l = Tq(c, f.startTime + h * k2 / g);
                  l && d.push(l);
                }
              }
            });
            c.closeSegmentIndex && c.closeSegmentIndex();
            return e.return(d);
          });
        };
        function Sq(a) {
          return a ? (a = /(\d+)x(\d+)/.exec(a)) ? { nc: parseInt(a[1], 10), rows: parseInt(a[2], 10) } : null : null;
        }
        r.Fi = function(a, b) {
          var c = this, d;
          return Q(function(e) {
            return 1 == e.g ? G(e, Rq(c, a), 2) : (d = e.h) ? e.return(Tq(d, b)) : e.return(null);
          });
        };
        function Rq(a, b) {
          var c, d;
          return Q(function(e) {
            if (1 == e.g) {
              if (a.m != qq && a.m != Iq) return e.return(null);
              c = a.Oe;
              a.i && (c = a.i.imageStreams);
              d = c[0];
              if (!d) return e.return(null);
              null != b && (d = c.find(function(f) {
                return f.id == b;
              }));
              return d ? d.segmentIndex ? e.u(2) : G(e, d.createSegmentIndex(), 2) : e.return(null);
            }
            return e.return(d);
          });
        }
        function Tq(a, b) {
          var c = a.segmentIndex.find(b);
          if (null == c) return null;
          c = a.segmentIndex.get(c);
          var d = Sq(c.tilesLayout || a.tilesLayout);
          if (!d) return null;
          var e = a.width || 0, f = a.height || 0, g = e / d.nc, h = f / d.rows, k2 = d.nc * d.rows, l = c.j - c.startTime;
          l = c.B || l / k2;
          var m = c.startTime, n = 0, p = 0;
          1 < k2 && (b = Math.floor((b - c.startTime) / l), m = c.startTime + b * l, n = b % d.nc * g, p = Math.floor(b / d.nc) * h);
          b = false;
          if (d = c.thumbnailSprite) b = true, h = d.height, n = d.positionX, p = d.positionY, g = d.width;
          return {
            segment: c,
            imageHeight: f,
            imageWidth: e,
            height: h,
            positionX: n,
            positionY: p,
            startTime: m,
            duration: l,
            uris: c.N(),
            width: g,
            sprite: b,
            mimeType: c.mimeType || a.mimeType,
            codecs: c.codecs || a.codecs
          };
        }
        r.rh = function(a) {
          function b() {
            var d = c.i.textStreams.find(function(e) {
              return e.id == a.id;
            });
            d && d != c.l.s && (eo(c.A.h, d, false), Nm(c.l, d), Uq(c), Cq(c), c.Tb = d.language);
          }
          var c = this;
          if (this.i && this.G && (b(), !this.Pa())) return;
          (function() {
            if (c.h && c.h.textTracks) {
              var d = Hq(c), e = d.find(function(f) {
                return "disabled" !== f.mode;
              });
              if (d = d.find(function(f) {
                return Ag(f) === a.id;
              })) e !== d && (e && (e.mode = "disabled", c.j.Ja(e, "cuechange"), c.B.remove(0, Infinity)), d && Kq(c, d)), Uq(c), Cq(c);
            }
          })();
        };
        function Kq(a, b) {
          a.j.D(b, "cuechange", function() {
            a.B.remove(0, Math.max(0, a.h.currentTime - a.g.streaming.bufferBehind));
            var c = { periodStart: 0, segmentStart: 0, segmentEnd: a.h.duration, vttOffset: 0 }, d = [], e = Array.from(b.activeCues || []);
            e = t(e);
            for (var f = e.next(); !f.done; f = e.next()) {
              f = f.value;
              if (Infinity === f.endTime || f.endTime < f.startTime) f = null;
              else {
                var g = new ze(f.startTime, f.endTime, f.text);
                g.line = "number" === typeof f.line ? f.line : null;
                f.lineAlign && (g.lineAlign = f.lineAlign);
                g.lineInterpretation = f.snapToLines ? Ee : 1;
                g.position = "number" === typeof f.position ? f.position : null;
                f.positionAlign && (g.positionAlign = f.positionAlign);
                g.size = f.size;
                g.textAlign = f.align;
                "lr" === f.vertical ? g.writingMode = "vertical-lr" : "rl" === f.vertical && (g.writingMode = "vertical-rl");
                f.region && (g.region.id = f.region.id, g.region.height = f.region.lines, g.region.heightUnits = 2, g.region.regionAnchorX = f.region.regionAnchorX, g.region.regionAnchorY = f.region.regionAnchorY, g.region.scroll = f.region.scroll, g.region.viewportAnchorX = f.region.viewportAnchorX, g.region.viewportAnchorY = f.region.viewportAnchorY, g.region.viewportAnchorUnits = yd, g.region.width = f.region.width, g.region.widthUnits = yd);
                Le(g);
                f = g;
              }
              f && ((g = a.g.mediaSource.modifyCueCallback) && g(f, null, c), d.push(f));
            }
            a.B.append(d);
          });
          b.mode = document.pictureInPictureElement ? "showing" : "hidden";
        }
        r.Be = function(a, b, c) {
          function d() {
            var f = e.i.variants.find(function(h) {
              return h.id == a.id;
            });
            if (f && Fg(f)) {
              var g = e.l.l;
              e.g.abr.enabled && (g.video != f.video || g.audio && f.audio && g.audio.language == f.audio.language && g.audio.channelsCount == f.audio.channelsCount && g.audio.label == f.audio.label) && db("Changing tracks while abr manager is enabled will likely result in the selected track being overridden. Consider disabling abr before calling selectVariantTrack().");
              e.Pa() ? vq(e, f, false, false, 0) : vq(e, f, false, b || false, c || 0);
              e.W.configure({
                language: f.language,
                role: f.audio && f.audio.roles && f.audio.roles[0] || "",
                channelCount: f.audio && f.audio.channelsCount ? f.audio.channelsCount : 0,
                Rc: f.video && f.video.hdr ? f.video.hdr : "",
                spatialAudio: f.audio && f.audio.spatialAudio ? f.audio.spatialAudio : false,
                videoLayout: f.video && f.video.videoLayout ? f.video.videoLayout : "",
                Jc: f.audio && f.audio.label ? f.audio.label : "",
                fd: "",
                codecSwitchingStrategy: e.g.mediaSource.codecSwitchingStrategy,
                audioCodec: f.audio && f.audio.codecs ? f.audio.codecs : ""
              });
              lq(e);
            }
          }
          var e = this;
          b = void 0 === b ? false : b;
          c = void 0 === c ? 0 : c;
          if (this.i && this.G && (d(), !this.Pa())) return;
          (function() {
            if (e.h && e.h.audioTracks) {
              var f = Array.from(e.h.audioTracks);
              f = t(f);
              for (var g = f.next(); !g.done; g = f.next()) if (g = g.value, Ag(g) == a.id) {
                Vq(e, g);
                break;
              }
            }
          })();
        };
        r.vj = function(a, b) {
          b = void 0 === b ? 0 : b;
          var c = this.Rb();
          if (c.length) {
            var d = c.find(function(e) {
              return e.active;
            });
            d && (c = c.find(function(e) {
              return e.videoId === d.videoId && e.language == a.language && e.label == a.label && e.audioMimeType == a.mimeType && e.audioCodec == a.codecs && e.primary == a.primary && Dd(e.audioRoles, a.roles) && e.accessibilityPurpose == a.accessibilityPurpose && e.channelsCount == a.channelsCount && e.audioSamplingRate == a.audioSamplingRate && e.spatialAudio == a.spatialAudio;
            })) && !c.active && this.Be(c, true, b);
          }
        };
        r.getAudioTracks = function() {
          var a = this.Rb();
          if (!a.length) return [];
          var b = a.find(function(e) {
            return e.active;
          });
          if (!b) return [];
          var c = a;
          this.m == qq && (c = a.filter(function(e) {
            return e.originalVideoId === b.originalVideoId && e.audioCodec;
          }));
          if (!c.length) return [];
          a = /* @__PURE__ */ new Set();
          c = t(c);
          for (var d = c.next(); !d.done; d = c.next()) d = d.value, a.add({
            active: d.active,
            language: d.language,
            label: d.label,
            mimeType: d.audioMimeType,
            codecs: d.audioCodec,
            primary: d.primary,
            roles: d.audioRoles || [],
            accessibilityPurpose: d.accessibilityPurpose,
            channelsCount: d.channelsCount,
            audioSamplingRate: d.audioSamplingRate,
            spatialAudio: d.spatialAudio,
            originalLanguage: d.originalLanguage
          });
          return a.size ? Array.from(a) : [];
        };
        r.fi = function() {
          return Wq(this.Rb());
        };
        r.Di = function() {
          return Wq(this.uc());
        };
        r.ei = function() {
          return Array.from(Xq(this.Rb()));
        };
        r.Ci = function() {
          return Array.from(Xq(this.uc()));
        };
        r.qh = function(a, b, c, d, e, f, g) {
          function h() {
            function l(u, w) {
              return u.video || w.video ? u.video && w.video ? Math.abs((u.video.height || 0) - (w.video.height || 0)) + Math.abs((u.video.width || 0) - (w.video.width || 0)) : Infinity : 0;
            }
            k2.W = k2.g.adaptationSetCriteriaFactory();
            k2.W.configure({ language: a, role: b || "", channelCount: c || 0, Rc: "", spatialAudio: f || false, videoLayout: "", Jc: g || "", fd: "", codecSwitchingStrategy: k2.g.mediaSource.codecSwitchingStrategy, audioCodec: e || "" });
            var m = k2.l.l, n = k2.W.create(k2.i.variants), p = null;
            n = t(n.values());
            for (var q = n.next(); !q.done; q = n.next()) q = q.value, Fg(q) && (!p || l(p, m) > l(q, m)) && (p = q);
            p != m && (p ? (m = wg(p), k2.Be(m, true, d || 0)) : Lp(k2));
          }
          var k2 = this;
          c = void 0 === c ? 0 : c;
          d = void 0 === d ? 0 : d;
          e = void 0 === e ? "" : e;
          f = void 0 === f ? false : f;
          g = void 0 === g ? "" : g;
          if (this.i && this.G && (h(), !this.Pa())) return;
          (function() {
            if (k2.h && k2.h.audioTracks) {
              var l = Hg(k2.Rb(), a, b || "", false)[0];
              l && k2.Be(l);
            }
          })();
        };
        r.fg = function(a, b, c) {
          function d() {
            e.Tb = a;
            e.Hd = b || "";
            e.Fd = c || false;
            var f = Hg(e.i.textStreams, e.Tb, e.Hd, e.Fd)[0] || null;
            f && f != e.l.s && (eo(e.A.h, f, false), e.g.streaming.alwaysStreamText || e.Of()) && (Nm(e.l, f), Uq(e), Cq(e));
          }
          var e = this;
          c = void 0 === c ? false : c;
          if (this.i && this.G && (d(), !this.Pa())) return;
          (function() {
            var f = Hg(e.uc(), a, b || "", c || false)[0];
            f && e.rh(f);
          })();
        };
        r.wj = function(a, b, c) {
          function d() {
            for (var f = null, g = t(e.i.variants), h = g.next(); !h.done; h = g.next()) if (h = h.value, h.audio.label == a) {
              f = h;
              break;
            }
            null != f && (e.W = e.g.adaptationSetCriteriaFactory(), e.W.configure({ language: f.language, role: "", channelCount: 0, Rc: "", spatialAudio: false, videoLayout: "", fd: "", Jc: a, codecSwitchingStrategy: e.g.mediaSource.codecSwitchingStrategy, audioCodec: "" }), Lp(e, b, c));
          }
          var e = this;
          b = void 0 === b ? true : b;
          c = void 0 === c ? 0 : c;
          if (this.i && this.G && (d(), !this.Pa())) return;
          (function() {
            if (e.h && e.h.audioTracks) {
              var f = Array.from(e.h.audioTracks), g = null;
              f = t(f);
              for (var h = f.next(); !h.done; h = f.next()) h = h.value, h.label == a && (g = h);
              g && Vq(e, g);
            }
          })();
        };
        r.Of = function() {
          var a = this.oa;
          return this.B ? this.B.isTextVisible() : a;
        };
        r.Pg = function() {
          return this.h && this.h.currentSrc && this.h.textTracks ? Yq(this).map(function(a) {
            return Cg(a);
          }) : [];
        };
        r.hi = function(a) {
          if (!this.h || !this.h.currentSrc || !this.h.textTracks) return [];
          var b = Nf(a), c = Yq(this).filter(function(h) {
            return Nf(h.language) == b;
          });
          if (!c || !c.length) return [];
          a = [];
          var d = /* @__PURE__ */ new Set();
          c = t(c);
          for (var e = c.next(); !e.done; e = c.next()) if ((e = e.value) && e.cues) {
            e = t(e.cues);
            for (var f = e.next(); !f.done; f = e.next()) {
              var g = f.value;
              (f = g.id) && "" != f || (f = g.startTime + "-" + g.endTime + "-" + g.text);
              g = { id: f, title: g.text, startTime: g.startTime, endTime: g.endTime };
              d.has(f) || (a.push(g), d.add(f));
            }
          }
          return a;
        };
        function Hq(a) {
          return Array.from(a.h.textTracks).filter(function(b) {
            return "metadata" != b.kind && "chapters" != b.kind && "Shaka Player TextTrack" != b.label;
          });
        }
        function Mq(a) {
          return Array.from(a.h.textTracks).filter(function(b) {
            return "metadata" == b.kind;
          });
        }
        function Yq(a) {
          return Array.from(a.h.textTracks).filter(function(b) {
            return "chapters" == b.kind;
          });
        }
        r.xh = function(a) {
          a = !!a;
          this.oa != a && (this.oa = a, this.m == qq ? (this.B.setTextVisibility(a), this.g.streaming.alwaysStreamText || (a ? this.l.s || (a = Hg(this.i.textStreams, this.Tb, this.Hd, this.Fd), 0 < a.length && (Nm(this.l, a[0]), Uq(this), Cq(this))) : Jm(this.l))) : this.h && this.h.src && this.h.textTracks && this.B.setTextVisibility(a), Bq(this));
        };
        r.wi = function() {
          if (this.G) var a = this.G.Od();
          else {
            if (null == this.Y) return /* @__PURE__ */ new Date();
            a = this.Y;
          }
          if (this.i && !this.Pa()) {
            var b = this.i.presentationTimeline;
            return new Date(1e3 * ((b.m || b.i) + a));
          }
          return this.h && this.h.getStartDate ? (b = this.h.getStartDate(), isNaN(b.getTime()) ? null : new Date(b.getTime() + 1e3 * a)) : null;
        };
        r.Ug = function() {
          if (this.i && !this.Pa()) {
            var a = this.i.presentationTimeline;
            return new Date(1e3 * (a.m || a.i));
          }
          return this.h && this.h.getStartDate ? (a = this.h.getStartDate(), isNaN(a.getTime()) ? null : a) : null;
        };
        r.ae = function() {
          return this.U() ? this.i ? this.i.presentationTimeline.ae() : null : null;
        };
        r.Fb = function() {
          if (this.m == qq) return this.I.Fb();
          var a = { total: [], audio: [], video: [], text: [] };
          this.m == Iq && (a.total = Jj(this.h.buffered));
          return a;
        };
        r.Zd = function() {
          if (!this.h || !this.h.currentTime) return null;
          var a = this.Ug().getTime() + 1e3 * this.h.currentTime;
          return Math.floor(Date.now() - a);
        };
        r.getStats = function() {
          if (this.m != qq && this.m != Iq) return {
            width: NaN,
            height: NaN,
            streamBandwidth: NaN,
            decodedFrames: NaN,
            droppedFrames: NaN,
            corruptedFrames: NaN,
            stallsDetected: NaN,
            gapsJumped: NaN,
            estimatedBandwidth: NaN,
            completionPercent: NaN,
            loadLatency: NaN,
            manifestTimeSeconds: NaN,
            drmTimeSeconds: NaN,
            playTime: NaN,
            pauseTime: NaN,
            bufferingTime: NaN,
            licenseTime: NaN,
            liveLatency: NaN,
            maxSegmentDuration: NaN,
            manifestSizeBytes: NaN,
            bytesDownloaded: NaN,
            nonFatalErrorCount: NaN,
            manifestPeriodCount: NaN,
            manifestGapCount: NaN,
            switchHistory: [],
            stateHistory: []
          };
          pq(this);
          var a = this.h, b = a.currentTime / a.duration;
          if (!isNaN(b) && !this.U()) {
            var c = this.A;
            b = Math.round(100 * b);
            c.i = isNaN(c.i) ? b : Math.max(c.i, b);
          }
          this.G && (this.A.P = this.G.xg(), this.A.T = this.G.yg());
          if (a.getVideoPlaybackQuality) {
            c = a.getVideoPlaybackQuality();
            b = this.A;
            var d = Number(c.totalVideoFrames);
            b.O = Number(c.droppedVideoFrames);
            b.M = d;
            this.A.L = Number(c.corruptedVideoFrames);
          }
          this.C ? (c = this.C, c = c.H ? c.H : NaN) : c = NaN;
          this.A.o = c;
          if (this.m == qq) {
            c = this.l.l;
            b = this.l.s;
            if (c) {
              d = this.K ? this.K.i : 1;
              var e = d * c.bandwidth;
              b && b.bandwidth && (e += d * b.bandwidth);
              this.A.A = e;
            }
            c && c.video && (b = this.A, d = c.video.height || NaN, b.m = c.video.width || NaN, b.l = d);
            this.U() && (c = this.Zd() || 0, this.A.B = c / 1e3);
            this.i && (this.A.G = this.i.periodCount, this.A.F = this.i.gapCount, this.i.presentationTimeline && (this.A.I = this.i.presentationTimeline.h));
            c = this.o.getBandwidthEstimate();
            this.A.s = c;
          }
          this.m == Iq && (c = this.A, c.lc = isNaN(c.lc) ? NaN : c.lc + NaN, c = this.A, b = a.videoHeight || NaN, c.m = a.videoWidth || NaN, c.l = b);
          var f = this.A;
          a = f.m;
          c = f.l;
          b = f.A;
          d = f.M;
          e = f.O;
          var g = f.L, h = f.T, k2 = f.P, l = f.s, m = f.i, n = f.C, p = f.H, q = f.j, u = Nn(f.g, "playing"), w = Nn(f.g, "paused"), v = Nn(f.g, "buffering"), x = f.o, z = f.B, C = f.I, D = f.$g, F = f.lc, B = f.K, A = f.G, H = f.F, E = On(f.g), L = [];
          f = t(f.h.g);
          for (var M = f.next(); !M.done; M = f.next()) M = M.value, L.push({ timestamp: M.timestamp, id: M.id, type: M.type, fromAdaptation: M.fromAdaptation, bandwidth: M.bandwidth });
          return {
            width: a,
            height: c,
            streamBandwidth: b,
            decodedFrames: d,
            droppedFrames: e,
            corruptedFrames: g,
            stallsDetected: h,
            gapsJumped: k2,
            estimatedBandwidth: l,
            completionPercent: m,
            loadLatency: n,
            manifestTimeSeconds: p,
            drmTimeSeconds: q,
            playTime: u,
            pauseTime: w,
            bufferingTime: v,
            licenseTime: x,
            liveLatency: z,
            maxSegmentDuration: C,
            manifestSizeBytes: D,
            bytesDownloaded: F,
            nonFatalErrorCount: B,
            manifestPeriodCount: A,
            manifestGapCount: H,
            stateHistory: E,
            switchHistory: L
          };
        };
        r.Ph = function(a, b, c, d, e, f, g) {
          g = void 0 === g ? false : g;
          var h = this, k2, l, m, n, p, q, u, w, v, x, z, C, D;
          return Q(function(F) {
            switch (F.g) {
              case 1:
                if (h.m != qq && h.m != Iq) throw new U(1, 7, 7004);
                "subtitles" != c && "captions" != c && db("Using a kind value different of `subtitles` or `captions` can cause unwanted issues.");
                if (d) {
                  F.u(2);
                  break;
                }
                return G(F, Zq(h, a), 3);
              case 3:
                d = F.h;
              case 2:
                k2 = [];
                h.s && (k2 = h.s.getCuePoints());
                if (h.m != Iq) {
                  F.u(4);
                  break;
                }
                g && (c = "forced");
                return G(F, $q(h, a, b, c, d, f || "", k2), 5);
              case 5:
                l = Nf(b);
                m = h.uc();
                if (n = m.find(function(B) {
                  return Nf(B.language) == l && B.label == (f || "") && B.kind == c;
                })) return kq(h), F.return(n);
                throw new U(1, 2, 2012);
              case 4:
                p = ed;
                q = h.Ra();
                u = q.end - q.start;
                h.i && (u = h.i.presentationTimeline.getDuration());
                if (Infinity == u) throw new U(1, 4, 4033);
                if (!k2.length) {
                  F.u(6);
                  break;
                }
                return G(F, ar(h, a, h.F, h.g.streaming.retryParameters), 7);
              case 7:
                w = F.h, v = br(h, w, d, k2), x = new Blob([v], { type: "text/vtt" }), a = Jk(x), d = "text/vtt";
              case 6:
                z = { id: h.We++, originalId: null, groupId: null, createSegmentIndex: function() {
                  return Promise.resolve();
                }, segmentIndex: Rl(0, u, [a]), mimeType: d || "", codecs: e || "", kind: c, encrypted: false, drmInfos: [], keyIds: /* @__PURE__ */ new Set(), language: b, originalLanguage: b, label: f || null, type: p.za, primary: false, trickModeVideo: null, dependencyStream: null, emsgSchemeIdUris: null, roles: [], forced: !!g, channelsCount: null, audioSamplingRate: null, spatialAudio: false, closedCaptions: null, accessibilityPurpose: null, external: true, fastSwitching: false, fullMimeTypes: /* @__PURE__ */ new Set([kf(d || "", e || "")]), isAudioMuxedInVideo: false, baseOriginalId: null };
                C = kf(z.mimeType, z.codecs);
                D = Bf(C);
                if (!D) throw new U(2, 2, 2014, d);
                h.i.textStreams.push(z);
                kq(h);
                return F.return(xg(z));
            }
          });
        };
        r.Qh = function(a, b) {
          var c = this, d, e, f, g, h, k2, l, m, n, p, q, u, w, v, x, z, C, D;
          return Q(function(F) {
            switch (F.g) {
              case 1:
                if (c.m != qq && c.m != Iq) throw new U(1, 7, 7004);
                if (b) {
                  F.u(2);
                  break;
                }
                return G(F, Zq(c, a), 3);
              case 3:
                b = F.h;
              case 2:
                if ("text/vtt" != b) throw new U(1, 2, 2017, a);
                d = ed;
                e = c.Ra();
                f = e.end - e.start;
                c.i && (f = c.i.presentationTimeline.getDuration());
                if (Infinity == f) throw new U(1, 4, 4045);
                return G(F, ar(c, a, c.F, c.g.streaming.retryParameters), 4);
              case 4:
                g = F.h;
                h = Af(b);
                if (!h) throw new U(2, 2, 2014, b);
                k2 = h();
                l = {
                  periodStart: 0,
                  segmentStart: 0,
                  segmentEnd: f,
                  vttOffset: 0
                };
                m = Qb(g);
                n = k2.parseMedia(m, l, a, []);
                p = [];
                q = t(n);
                u = q.next();
                for (w = {}; !u.done; w = { Ne: void 0, Lc: void 0 }, u = q.next()) w.Lc = u.value, w.Ne = null, v = /* @__PURE__ */ function(B) {
                  return function() {
                    null == B.Ne && (B.Ne = Wc([a], [B.Lc.payload]));
                    return B.Ne || [];
                  };
                }(w), x = new Bj(w.Lc.startTime, w.Lc.endTime, v, 0, null, null, 0, 0, Infinity), w.Lc.payload.includes("#xywh") && (z = w.Lc.payload.split("#xywh=")[1].split(","), 4 === z.length && x.De({ height: parseInt(z[3], 10), positionX: parseInt(z[0], 10), positionY: parseInt(z[1], 10), width: parseInt(
                  z[2],
                  10
                ) })), p.push(x);
                C = b;
                if (!p.length) {
                  F.u(5);
                  break;
                }
                return G(F, Ao(p[0].N()[0], c.F, c.g.manifest.retryParameters), 6);
              case 6:
                C = F.h;
              case 5:
                return D = {
                  id: c.We++,
                  originalId: null,
                  groupId: null,
                  createSegmentIndex: function() {
                    return Promise.resolve();
                  },
                  segmentIndex: new Pl(p),
                  mimeType: C || "",
                  codecs: "",
                  kind: "",
                  encrypted: false,
                  drmInfos: [],
                  keyIds: /* @__PURE__ */ new Set(),
                  language: "und",
                  originalLanguage: null,
                  label: null,
                  type: d.$e,
                  primary: false,
                  trickModeVideo: null,
                  dependencyStream: null,
                  emsgSchemeIdUris: null,
                  roles: [],
                  forced: false,
                  channelsCount: null,
                  audioSamplingRate: null,
                  spatialAudio: false,
                  closedCaptions: null,
                  tilesLayout: "1x1",
                  accessibilityPurpose: null,
                  external: true,
                  fastSwitching: false,
                  fullMimeTypes: /* @__PURE__ */ new Set([kf(C || "", "")]),
                  isAudioMuxedInVideo: false,
                  baseOriginalId: null
                }, c.m == Iq ? c.Oe.push(D) : c.i.imageStreams.push(D), kq(c), F.return(yg(D));
            }
          });
        };
        r.Oh = function(a, b, c) {
          var d = this, e, f, g, h;
          return Q(function(k2) {
            switch (k2.g) {
              case 1:
                if (d.m != qq && d.m != Iq) throw new U(1, 7, 7004);
                if (c) {
                  k2.u(2);
                  break;
                }
                return G(k2, Zq(d, a), 3);
              case 3:
                c = k2.h;
              case 2:
                return e = [], d.s && (e = d.s.getCuePoints()), G(k2, $q(d, a, b, "chapters", c, "", e), 4);
              case 4:
                f = k2.h;
                g = d.Pg();
                h = g.find(function(l) {
                  return l.language == b;
                });
                if (!h) {
                  k2.u(5);
                  break;
                }
                return G(k2, new Promise(function(l, m) {
                  d.j.ma(f, "load", l);
                  d.j.ma(f, "error", function() {
                    m(new U(1, 2, 2015));
                  });
                }), 6);
              case 6:
                return kq(d), k2.return(h);
              case 5:
                throw new U(
                  1,
                  2,
                  2012
                );
            }
          });
        };
        function Zq(a, b) {
          var c;
          return Q(function(d) {
            switch (d.g) {
              case 1:
                return xa(d, 2), G(d, Ao(b, a.F, a.g.streaming.retryParameters), 4);
              case 4:
                c = d.h;
                za(d, 3);
                break;
              case 2:
                Aa(d);
              case 3:
                if (c) return d.return(c);
                throw new U(1, 2, 2011, b);
            }
          });
        }
        function $q(a, b, c, d, e, f, g) {
          var h, k2, l, m;
          return Q(function(n) {
            if (1 == n.g) return "text/vtt" != e || g.length ? G(n, ar(a, b, a.F, a.g.streaming.retryParameters), 3) : n.u(2);
            2 != n.g && (h = n.h, k2 = br(a, h, e, g), l = new Blob([k2], { type: "text/vtt" }), b = Jk(l), e = "text/vtt");
            m = document.createElement("track");
            var p = a.L, q = b;
            try {
              if (p.g.enabled) {
                var u = gp(p);
                u.ot = tp;
                u.su = true;
                var w = kp(u);
                var v = lp(q, w);
              } else v = q;
            } catch (x) {
              eb("CMCD_TEXT_TRACK_ERROR", "Could not generate text track CMCD data.", x), v = q;
            }
            m.src = v;
            m.label = f;
            m.kind = d;
            m.srclang = c;
            a.h.getAttribute("crossorigin") || a.h.setAttribute("crossorigin", "anonymous");
            a.h.appendChild(m);
            return n.return(m);
          });
        }
        function ar(a, b, c, d) {
          var e, f, g;
          return Q(function(h) {
            if (1 == h.g) {
              e = qh;
              f = kh([b], d);
              f.method = "GET";
              var k2 = a.L;
              try {
                k2.g.enabled && mp(k2, f, { ot: tp, su: true });
              } catch (l) {
                eb("CMCD_TEXT_ERROR", "Could not generate text CMCD data.", l);
              }
              return G(h, c.request(e, f).promise, 2);
            }
            g = h.h;
            return h.return(g.data);
          });
        }
        function br(a, b, c, d) {
          var e = Af(c);
          if (e) return c = e(), a = { periodStart: 0, segmentStart: 0, segmentEnd: a.h.duration, vttOffset: 0 }, b = Qb(b), b = c.parseMedia(b, a, null, []), Vo(b, d);
          throw new U(2, 2, 2014, c);
        }
        r.Bj = function(a, b) {
          this.ka.width = a;
          this.ka.height = b;
        };
        r.cg = function(a) {
          if (this.m == qq) {
            var b = this.l;
            a = void 0 === a ? 0.1 : a;
            if (b.m.g) b = false;
            else if (b.B) b = false;
            else {
              for (var c = t(b.i.values()), d = c.next(); !d.done; d = c.next()) d = d.value, !d.sd || d.Da || d.lb || (d.sd = false, Im(b, d, a));
              b = true;
            }
          } else b = false;
          return b;
        };
        r.Gf = function() {
          db("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for.");
          return this.i;
        };
        r.si = function() {
          return this.Pb;
        };
        r.li = function() {
          var a = { video: null, audio: null, text: null };
          if (this.m != qq) return a;
          var b = this.l.l, c = this.h.currentTime;
          b = t([b.video, b.audio, this.l.s]);
          for (var d = b.next(); !d.done; d = b.next()) if ((d = d.value) && d.segmentIndex) {
            var e = d.segmentIndex.find(c);
            e = d.segmentIndex.get(e);
            e = { codecs: e.codecs || d.codecs, mimeType: e.mimeType || d.mimeType, bandwidth: e.bandwidth || d.bandwidth };
            "video" == d.type ? (e.width = d.width, e.height = d.height, a.video = e) : "audio" == d.type ? a.audio = e : d.type == cd && (a.text = e);
          }
          return a;
        };
        function Gp(a) {
          var b = Gn();
          b.streaming.failureCallback = function(c) {
            if (a.U()) {
              var d = null;
              1001 == c.code || 1002 == c.code ? (d = 1, a.g.streaming.lowLatencyMode && (d = 0.1)) : 1003 == c.code && (d = 0.1);
              null != d && (c.severity = 1, a.cg(d));
            }
          };
          b.textDisplayFactory = function() {
            return !a.ue || rc() && !document.fullscreenEnabled ? HTMLMediaElement.prototype.addTextTrack ? new Ho(a.h, "Shaka Player TextTrack") : new Ko() : new Lo(a.h, a.ue);
          };
          return b;
        }
        r.Ah = function(a) {
          this.ue = a;
        };
        function gq(a, b) {
          for (var c = /* @__PURE__ */ new Set(), d = t(b.textStreams), e = d.next(); !e.done; e = d.next()) e = e.value, "application/cea-608" != e.mimeType && "application/cea-708" != e.mimeType || c.add(e.originalId);
          d = t(b.variants);
          for (e = d.next(); !e.done; e = d.next()) if ((e = e.value.video) && e.closedCaptions) {
            for (var f = t(e.closedCaptions.keys()), g = f.next(); !g.done; g = f.next()) if (g = g.value, !c.has(g)) {
              var h = g.startsWith("CC") ? "application/cea-608" : "application/cea-708", k2 = new Sl(), l = e.closedCaptions.get(g);
              h = {
                id: a.We++,
                originalId: g,
                groupId: null,
                createSegmentIndex: function() {
                  return Promise.resolve();
                },
                segmentIndex: k2,
                mimeType: h,
                codecs: "",
                kind: "caption",
                encrypted: false,
                drmInfos: [],
                keyIds: /* @__PURE__ */ new Set(),
                language: l,
                originalLanguage: l,
                label: null,
                type: cd,
                primary: false,
                trickModeVideo: null,
                dependencyStream: null,
                emsgSchemeIdUris: null,
                roles: e.roles,
                forced: false,
                channelsCount: null,
                audioSamplingRate: null,
                spatialAudio: false,
                closedCaptions: null,
                accessibilityPurpose: null,
                external: false,
                fastSwitching: false,
                fullMimeTypes: /* @__PURE__ */ new Set([kf(h, "")]),
                isAudioMuxedInVideo: false,
                baseOriginalId: null
              };
              b.textStreams.push(h);
              c.add(g);
            }
          }
        }
        function Aq(a, b) {
          var c, d, e, f, g;
          return Q(function(h) {
            if (1 == h.g) return c = a.audio, d = a.video, e = function(k2, l) {
              var m, n, p;
              return Q(function(q) {
                if (1 == q.g) return k2 ? k2.segmentIndex ? q.u(2) : G(q, k2.createSegmentIndex(), 2) : q.return(null);
                n = (m = k2.segmentIndex.Gb(l)) ? m.next().value : null;
                if (!n) return q.return(null);
                p = n.startTime;
                return q.return(p);
              });
            }, G(h, e(c, b), 2);
            if (3 != h.g) return f = h.h, G(h, e(d, b), 3);
            g = h.h;
            return null != g && null != f ? h.return(Math.max(g, f)) : null != g ? h.return(g) : null != f ? h.return(f) : h.return(b);
          });
        }
        function Xp(a) {
          var b = a.Nf();
          if (a.A && a.M && a.G) {
            if (0 == a.g.streaming.rebufferingGoal) {
              var c = a.K;
              c.j = false;
              Ul(c);
            } else c = a.K, c.j = b, Ul(c);
            a.L && (c = a.L, b || c.s || (c.s = true), c.s && b && (c.B = true), c.F = b);
            pq(a);
            c = a.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;
            if (a.g.streaming.liveSync.dynamicTargetLatency.enabled && b && a.Ue < c) {
              c = a.g.streaming.liveSync.dynamicTargetLatency.maxLatency;
              var d = a.g.streaming.liveSync.targetLatencyTolerance, e = a.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;
              a.P && (a.P = Math.min(a.P + ++a.Ue * e, c - d));
            }
          }
          b = (/* @__PURE__ */ new Map()).set("buffering", b);
          a.dispatchEvent(Op("buffering", b));
        }
        function rq(a, b) {
          a.Na.Qa();
          a.U() && a.Na.D(a.h, "timeupdate", function() {
            var c = a.h.currentTime, d = a.Ra(), e = a.g.streaming.safeSeekOffset;
            0 < b ? Math.floor(c) >= Math.floor(d.end) && a.gd() : Math.floor(c) <= Math.floor(d.start + e) && a.gd();
          });
        }
        function pq(a) {
          if (a.A && a.M) {
            var b = a.A.g, c = "playing";
            a.M.g == Ii ? c = "buffering" : a.Tc() ? c = "ended" : a.h.paused && (c = "paused");
            var d = c;
            if (null == b.g) b.g = { timestamp: Date.now() / 1e3, state: d, duration: 0 }, b = true;
            else {
              var e = Date.now() / 1e3;
              b.g.duration = e - b.g.timestamp;
              b.g.state == d ? b = false : (b.h.push(b.g), b.g = { timestamp: e, state: d, duration: 0 }, b = true);
            }
            b && (c = (/* @__PURE__ */ new Map()).set("newstate", c), a.dispatchEvent(Op("statechanged", c)));
          }
        }
        function Eq(a) {
          var b = a.h.playbackRate, c = a.U();
          if (a.g.streaming.vodDynamicPlaybackRate && !c) {
            var d = a.g.streaming.vodDynamicPlaybackRateLowBufferRate, e = a.Og();
            e <= a.g.streaming.vodDynamicPlaybackRateBufferRatio ? b != d && a.Md(d, false) : 1 == e && b !== a.K.rc() && a.gd();
          }
          if (c && (c = a.Ra(), Number.isFinite(c.end) && !(a.h.currentTime < c.start || a.h.paused))) {
            d = a.g.streaming.liveSync.targetLatencyTolerance;
            e = a.g.streaming.liveSync.dynamicTargetLatency.enabled;
            var f = a.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;
            if (a.g.streaming.liveSync && a.g.streaming.liveSync.enabled) {
              var g = a.g.streaming.liveSync.targetLatency;
              var h = g + d;
              var k2 = Math.max(0, g - d);
              var l = a.g.streaming.liveSync.maxPlaybackRate;
              var m = a.g.streaming.liveSync.minPlaybackRate;
            } else a.i && a.i.serviceDescription && (g = a.i.serviceDescription.targetLatency, null != a.i.serviceDescription.targetLatency ? h = a.i.serviceDescription.targetLatency + d : null != a.i.serviceDescription.maxLatency && (h = a.i.serviceDescription.maxLatency), null != a.i.serviceDescription.targetLatency ? k2 = Math.max(0, a.i.serviceDescription.targetLatency - d) : null != a.i.serviceDescription.minLatency && (k2 = a.i.serviceDescription.minLatency), l = a.i.serviceDescription.maxPlaybackRate || a.g.streaming.liveSync.maxPlaybackRate, m = a.i.serviceDescription.minPlaybackRate || a.g.streaming.liveSync.minPlaybackRate);
            a.P || "number" !== typeof g || (a.P = g);
            var n = a.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;
            e && a.Ma && null !== a.P && "number" === typeof g && a.Ue < n && Date.now() - a.Ma > 1e3 * f && (f = a.g.streaming.liveSync.dynamicTargetLatency.minLatency, a.P = Math.max(a.P - (g - f) / 2, f + d), a.Ma = Date.now());
            e && null !== a.P && (h = a.P + d, k2 = a.P - d);
            g = c.end - a.h.currentTime;
            d = 0;
            a.m == Iq && (e = a.h.buffered, 0 < e.length && (d = e.end(e.length - 1), d = Math.max(l, d - c.end)));
            c = a.g.streaming.liveSync.panicMode;
            e = 1e3 * a.g.streaming.liveSync.panicThreshold;
            f = Date.now() - a.M.h;
            c && !m && (m = a.g.streaming.liveSync.minPlaybackRate);
            c && m && f <= e ? b != m && a.Md(m, false) : void 0 != h && l && g - d > h ? (b != l && a.Md(l, false), a.Ma = null) : void 0 != k2 && m && g - d < k2 ? (b != m && a.Md(m, false), a.Ma = null) : b !== a.K.rc() && (a.gd(), a.Ma = Date.now());
          }
        }
        function Fq(a) {
          if (a.h) {
            var b = function(e, f) {
              var g = void 0 === g ? Number.EPSILON : g;
              if (e === f) g = true;
              else {
                var h = Math.abs(e - f);
                g = h <= g ? true : g !== Number.EPSILON ? Math.abs(h - g) <= Number.EPSILON : false;
              }
              return (g || f > e) && a.Ve < e ? (a.Ve = e, true) : false;
            }, c = a.Ra();
            c = c.end - c.start;
            c = 0 < c ? a.h.currentTime / c : 0;
            if (!isNaN(c)) {
              c *= 100;
              if (b(0, c)) var d = Op("started");
              else b(25, c) ? d = Op("firstquartile") : b(50, c) ? d = Op("midpoint") : b(75, c) ? d = Op("thirdquartile") : (b(100, c) && (d = Op("complete")), a.g && Infinity != a.g.playRangeEnd && a.Tc() && a.h.pause());
              d && a.dispatchEvent(d);
            }
          }
        }
        function lq(a) {
          try {
            Oi(a.te, a.i);
          } catch (c) {
            return Vp(a, c), false;
          }
          var b = Gg(a.i.variants);
          b = a.W.create(b);
          a.o.setVariants(Array.from(b.values()));
          return true;
        }
        function Lp(a, b, c, d, e) {
          b = void 0 === b ? true : b;
          c = void 0 === c ? 0 : c;
          d = void 0 === d ? false : d;
          e = void 0 === e ? true : e;
          var f;
          (f = lq(a) ? a.o.chooseVariant() : null) && vq(a, f, e, b, c, d);
        }
        function vq(a, b, c, d, e, f) {
          f = void 0 === f ? false : f;
          var g = a.l.l;
          if (b == g) d && Mm(a.l, b, d, e, true);
          else {
            var h = a.A.h;
            h.h != b && (h.h = b, h.g.push({ timestamp: Date.now() / 1e3, id: b.id, type: "variant", fromAdaptation: c, bandwidth: b.bandwidth }));
            Mm(a.l, b, d, e, f, c);
            d = null;
            g && (d = wg(g));
            g = wg(b);
            g.active = true;
            if (a.O && (e = a.O, b = b.video)) {
              b.dependencyStream && (b = b.dependencyStream);
              f = 0;
              h = -1;
              switch (b.mimeType) {
                case "video/webm":
                  f = 1;
                  break;
                case "video/mp4":
                  f = 2;
              }
              switch (a.Rg()) {
                case "DASH":
                  h = 1;
                  break;
                case "HLS":
                  h = 0;
              }
              e.g && (e.g.setLevelSwitching(
                b.id,
                true
              ), e.g.setContainerFormat(f), e.j || e.g.setStreamingFormat(h));
            }
            c ? (c = (/* @__PURE__ */ new Map()).set("oldTrack", d).set("newTrack", g), c = Op("adaptation", c), cr(a, c)) : dr(a, d, g);
            er(a, d, g);
          }
        }
        function Vq(a, b) {
          var c = Array.from(a.h.audioTracks).find(function(d) {
            return d.enabled;
          });
          b.enabled = true;
          c && (b.id !== c.id && (c.enabled = false), c = Eg(c), b = Eg(b), dr(a, c, b), er(a, c, b));
        }
        function kq(a) {
          var b = Op("trackschanged");
          cr(a, b);
          fr(a);
        }
        function dr(a, b, c) {
          b = (/* @__PURE__ */ new Map()).set("oldTrack", b).set("newTrack", c);
          b = Op("variantchanged", b);
          cr(a, b);
        }
        function er(a, b, c) {
          var d = false;
          b && b.audioId == c.audioId && b.audioGroupId == c.audioGroupId || (d = true);
          d && fr(a);
        }
        function fr(a) {
          var b = Op("audiotrackschanged");
          cr(a, b);
        }
        function Uq(a) {
          var b = Op("textchanged");
          cr(a, b);
        }
        function Bq(a) {
          var b = Op("texttrackvisibility");
          cr(a, b);
        }
        function Dq(a) {
          a.g.abr.enabled || Kp(a);
          var b = (/* @__PURE__ */ new Map()).set("newStatus", a.g.abr.enabled);
          cr(a, Op("abrstatuschanged", b));
        }
        function Cq(a) {
          var b = a.uc().find(function(c) {
            return c.active;
          });
          b && a.B && a.B.setTextLanguage && a.B.setTextLanguage(b.language);
        }
        function Kp(a, b) {
          b = void 0 === b ? true : b;
          if (a.m == qq) {
            a.xe.stop();
            for (var c = t(a.i.variants), d = c.next(); !d.done; d = c.next()) d.value.disabledUntilTime = 0;
            b && lq(a);
          }
        }
        r.disableStream = function(a, b) {
          if (!this.g.abr.enabled || this.m === Pp || !navigator.onLine || 0 == b || !this.i) return false;
          if (this.i.variants.some(function(h) {
            var k2 = h[a.type];
            return k2 && k2.id !== a.id && !h.disabledUntilTime ? "audio" == a.type ? a.language === k2.language : true : false;
          })) {
            for (var c = false, d = false, e = t(this.i.variants), f = e.next(); !f.done; f = e.next()) {
              f = f.value;
              var g = f[a.type];
              g && (g.id === a.id ? (f.disabledUntilTime = Date.now() / 1e3 + b, c = true) : g.trickModeVideo && g.trickModeVideo.id == a.id && (d = true));
            }
            if (!c && d) return false;
            this.xe.ua(1);
            b = this.Fb().video.reduce(function(h, k2) {
              return h + k2.end - k2.start;
            }, 0);
            Lp(this, false, b, true, false);
            return true;
          }
          return false;
        };
        function Vp(a, b) {
          var c, d, e, f;
          return Q(function(g) {
            switch (g.g) {
              case 1:
                if (a.m == Pp) return g.return();
                1 === b.severity && a.A.K++;
                c = true;
                if (!(a.sa && a.i && a.l) || 3016 != b.code && 3014 != b.code && 3015 != b.code && 3018 != b.code) {
                  g.u(2);
                  break;
                }
                if (rc() && 3016 == b.code) return g.return();
                xa(g, 3);
                return G(g, Pm(a.l), 5);
              case 5:
                d = g.h;
                c = !d;
                d && (e = Op("mediasourcerecovered"), a.dispatchEvent(e));
                za(g, 2);
                break;
              case 3:
                Aa(g), c = true;
              case 2:
                if (!c) return g.return();
                2 === b.severity && Kp(a, false);
                f = Op("error", (/* @__PURE__ */ new Map()).set("detail", b));
                a.dispatchEvent(f);
                f.defaultPrevented && (b.handled = true);
                I(g);
            }
          });
        }
        r.addFont = function(a, b) {
          var c, d, e, f, g;
          return Q(function(h) {
            if (1 == h.g) return "fonts" in document && "FontFace" in window2 ? G(h, document.fonts.ready, 3) : h.u(0);
            if (!("entries" in document.fonts)) return h.return();
            c = function(k2) {
              k2 = k2.entries();
              for (var l = [], m = k2.next(); false === m.done; ) l.push(m.value), m = k2.next();
              return l;
            };
            d = t(c(document.fonts));
            for (e = d.next(); !e.done; e = d.next()) if (f = e.value, f.family == a && "swap" == f.display) return h.return();
            g = new FontFace(a, "url(" + b + ")", { display: "swap" });
            document.fonts.add(g);
            I(h);
          });
        };
        function iq(a, b, c, d) {
          d = void 0 === d ? a : d;
          a = (/* @__PURE__ */ new Map()).set("detail", { schemeIdUri: c.schemeIdUri, value: c.value, startTime: c.startTime, endTime: c.endTime, id: c.id, timescale: c.timescale, eventElement: c.eventElement, eventNode: c.eventNode });
          d.dispatchEvent(Op(b, a));
        }
        function jq(a, b, c, d) {
          d = void 0 === d ? false : d;
          b = (/* @__PURE__ */ new Map()).set("mediaQuality", { bandwidth: b.bandwidth, audioSamplingRate: b.audioSamplingRate, codecs: b.codecs, contentType: b.contentType, frameRate: b.frameRate, height: b.height, mimeType: b.mimeType, channelsCount: b.channelsCount, pixelAspectRatio: b.pixelAspectRatio, width: b.width, label: b.label, roles: b.roles, language: b.language }).set("position", c);
          a.dispatchEvent(Op(d ? "audiotrackchanged" : "mediaqualitychanged", b));
        }
        function Up(a, b) {
          b = void 0 === b ? true : b;
          if (!a.h.error) return b ? new U(2, 3, 3016) : null;
          var c = a.h.error.code;
          if (!b && 1 == c) return null;
          if (b = a.h.error.msExtendedCode) 0 > b && (b += Math.pow(2, 32)), b = b.toString(16);
          return new U(2, 3, 3016, c, b, a.h.error.message);
        }
        function uq(a, b, c) {
          0 < b && (a.U() || a.zh(b));
          b = a.getDuration();
          c < b && (a.U() || a.bb(c));
        }
        function cr(a, b) {
          Q(function(c) {
            if (1 == c.g) return G(c, Promise.resolve(), 2);
            a.m != Pp && a.dispatchEvent(b);
            I(c);
          });
        }
        function Xq(a) {
          var b = /* @__PURE__ */ new Set();
          a = t(a);
          for (var c = a.next(); !c.done; c = a.next()) c = c.value, c.language ? b.add(Nf(c.language)) : b.add("und");
          return b;
        }
        function Wq(a) {
          var b = /* @__PURE__ */ new Map(), c = /* @__PURE__ */ new Map();
          a = t(a);
          for (var d = a.next(); !d.done; d = a.next()) {
            d = d.value;
            var e = "und", f = [];
            d.language && (e = Nf(d.language));
            "variant" == d.type ? f = d.audioRoles : f = d.roles;
            f && f.length || (f = [""]);
            b.has(e) || b.set(e, /* @__PURE__ */ new Set());
            f = t(f);
            for (var g = f.next(); !g.done; g = f.next()) g = g.value, b.get(e).add(g), d.label && (c.has(e) || c.set(e, /* @__PURE__ */ new Map()), c.get(e).set(g, d.label));
          }
          var h = [];
          b.forEach(function(k2, l) {
            k2 = t(k2);
            for (var m = k2.next(); !m.done; m = k2.next()) {
              m = m.value;
              var n = null;
              c.has(l) && c.get(l).has(m) && (n = c.get(l).get(m));
              h.push({ language: l, role: m, label: n });
            }
          });
          return h;
        }
        r.Pa = function() {
          return this.h && this.h.remote ? "disconnected" != this.h.remote.state : false;
        };
        r.Tc = function() {
          return !this.h || this.h.ended ? true : this.sa && !this.U() && this.h.currentTime >= this.Ra().end;
        };
        T("shaka.Player", X);
        X.prototype.isEnded = X.prototype.Tc;
        X.prototype.isRemotePlayback = X.prototype.Pa;
        X.prototype.addFont = X.prototype.addFont;
        X.prototype.setVideoContainer = X.prototype.Ah;
        X.prototype.getFetchedPlaybackInfo = X.prototype.li;
        X.prototype.getManifestParserFactory = X.prototype.si;
        X.prototype.getManifest = X.prototype.Gf;
        X.prototype.retryStreaming = X.prototype.cg;
        X.prototype.setMaxHardwareResolution = X.prototype.Bj;
        X.prototype.addChaptersTrack = X.prototype.Oh;
        X.prototype.addThumbnailsTrack = X.prototype.Qh;
        X.prototype.addTextTrackAsync = X.prototype.Ph;
        X.prototype.getStats = X.prototype.getStats;
        X.prototype.getBufferedInfo = X.prototype.Fb;
        X.prototype.getSegmentAvailabilityDuration = X.prototype.ae;
        X.prototype.getPresentationStartTimeAsDate = X.prototype.Ug;
        X.prototype.getPlayheadTimeAsDate = X.prototype.wi;
        X.prototype.setTextTrackVisibility = X.prototype.xh;
        X.prototype.getChapters = X.prototype.hi;
        X.prototype.getChaptersTracks = X.prototype.Pg;
        X.prototype.isTextTrackVisible = X.prototype.Of;
        X.prototype.selectVariantsByLabel = X.prototype.wj;
        X.prototype.selectTextLanguage = X.prototype.fg;
        X.prototype.selectAudioLanguage = X.prototype.qh;
        X.prototype.getTextLanguages = X.prototype.Ci;
        X.prototype.getAudioLanguages = X.prototype.ei;
        X.prototype.getTextLanguagesAndRoles = X.prototype.Di;
        X.prototype.getAudioLanguagesAndRoles = X.prototype.fi;
        X.prototype.getAudioTracks = X.prototype.getAudioTracks;
        X.prototype.selectAudioTrack = X.prototype.vj;
        X.prototype.selectVariantTrack = X.prototype.Be;
        X.prototype.selectTextTrack = X.prototype.rh;
        X.prototype.getThumbnails = X.prototype.Fi;
        X.prototype.getAllThumbnails = X.prototype.di;
        X.prototype.getImageTracks = X.prototype.ni;
        X.prototype.getTextTracks = X.prototype.uc;
        X.prototype.getVariantTracks = X.prototype.Rb;
        X.prototype.cancelTrickPlay = X.prototype.gd;
        X.prototype.trickPlay = X.prototype.Md;
        X.prototype.getPlaybackRate = X.prototype.gb;
        X.prototype.isBuffering = X.prototype.Nf;
        X.prototype.getKeyStatuses = X.prototype.Yd;
        X.prototype.getActiveSessionsMetadata = X.prototype.Ff;
        X.prototype.getExpiration = X.prototype.pd;
        X.prototype.drmInfo = X.prototype.drmInfo;
        X.prototype.keySystem = X.prototype.keySystem;
        X.prototype.isFullyLoaded = X.prototype.Pi;
        X.prototype.goToLive = X.prototype.Li;
        X.prototype.seekRange = X.prototype.Ra;
        X.prototype.isAudioOnly = X.prototype.Oi;
        X.prototype.isInProgress = X.prototype.xc;
        X.prototype.isLive = X.prototype.U;
        X.prototype.getAdManager = X.prototype.Ng;
        X.prototype.getAssetUri = X.prototype.Pc;
        X.prototype.getNetworkingEngine = X.prototype.xb;
        X.prototype.getMediaElement = X.prototype.vi;
        X.prototype.getManifestType = X.prototype.Rg;
        X.prototype.getLoadMode = X.prototype.ri;
        X.prototype.resetConfiguration = X.prototype.qj;
        X.prototype.getBufferFullness = X.prototype.Og;
        X.prototype.getNonDefaultConfiguration = X.prototype.Tg;
        X.prototype.getConfigurationForLowLatency = X.prototype.ii;
        X.prototype.getConfiguration = X.prototype.getConfiguration;
        X.prototype.configurationForLowLatency = X.prototype.$h;
        X.prototype.configure = X.prototype.configure;
        X.prototype.releaseAllMutexes = X.prototype.mj;
        X.prototype.destroyAllPreloads = X.prototype.nf;
        X.prototype.preload = X.prototype.preload;
        X.prototype.detachAndSavePreload = X.prototype.Jg;
        X.prototype.unloadAndSavePreload = X.prototype.Ej;
        X.prototype.load = X.prototype.load;
        X.prototype.updateStartTime = X.prototype.Ij;
        X.prototype.unload = X.prototype.jc;
        X.prototype.detach = X.prototype.detach;
        X.prototype.attachCanvas = X.prototype.Th;
        X.prototype.attach = X.prototype.Kb;
        X.probeSupport = function(a) {
          a = void 0 === a ? true : a;
          var b, c, d, e, f, g;
          return Q(function(h) {
            switch (h.g) {
              case 1:
                b = {};
                if (!a) {
                  h.u(2);
                  break;
                }
                return G(h, Ai(), 3);
              case 3:
                b = h.h;
              case 2:
                return c = Ti(), d = Mk(), G(h, Ec(), 4);
              case 4:
                return e = h.h, f = { manifest: c, media: d, drm: b, hardwareResolution: e }, g = Rp, g.forEach(function(k2, l) {
                  f[l] = k2();
                }), h.return(f);
            }
          });
        };
        X.isBrowserSupported = function() {
          window2.Promise || db("A Promise implementation or polyfill is required");
          return window2.Promise && window2.Uint8Array && Array.prototype.forEach && !kc("Trident/") ? fc() ? true : gc("application/x-mpegurl") : false;
        };
        X.setAdManagerFactory = function(a) {
          Jp = a;
        };
        X.registerSupportPlugin = Qp;
        X.prototype.destroy = X.prototype.destroy;
        var Pp = 0, Fp = 1, qq = 2, Iq = 3;
        X.LoadMode = { DESTROYED: Pp, NOT_LOADED: Fp, MEDIA_SOURCE: qq, SRC_EQUALS: Iq };
        X.version = "v4.14.5";
        var gr = ["4", "14"];
        tb = new function(a) {
          this.g = a;
          this.i = vb;
          this.h = wb;
        }(new rb(Number(gr[0]), Number(gr[1])));
        var Rp = /* @__PURE__ */ new Map(), Jp = null;
        function hr() {
          this.g = [];
          this.i = this.m = this.l = this.j = this.h = 0;
        }
        function ir(a) {
          return a.g.length ? a.g.reduce(function(b, c) {
            return b + c;
          }, 0) / a.g.length : 0;
        }
        ;
        function jr(a, b, c) {
          var d = this;
          this.g = a;
          this.h = b;
          this.j = c;
          this.i = false;
          this.l = this.h.getVolume();
          this.m = new lb();
          this.m.D(this.h, google.ima.AdEvent.Type.PAUSED, function() {
            d.i = true;
          });
          this.m.D(this.h, google.ima.AdEvent.Type.RESUMED, function() {
            d.i = false;
          });
        }
        r = jr.prototype;
        r.needsSkipUI = function() {
          return false;
        };
        r.isClientRendering = function() {
          return true;
        };
        r.hasCustomClick = function() {
          return true;
        };
        r.isUsingAnotherMediaElement = function() {
          return true;
        };
        r.getDuration = function() {
          return this.g.getDuration();
        };
        r.getMinSuggestedDuration = function() {
          return this.g.getMinSuggestedDuration();
        };
        r.getRemainingTime = function() {
          return this.h.getRemainingTime();
        };
        r.isPaused = function() {
          return this.i;
        };
        r.isSkippable = function() {
          return 0 <= this.g.getSkipTimeOffset();
        };
        r.getTimeUntilSkippable = function() {
          var a = this.g.getSkipTimeOffset();
          a = this.getRemainingTime() - a;
          return Math.max(a, 0);
        };
        r.canSkipNow = function() {
          return this.h.getAdSkippableState();
        };
        r.skip = function() {
          return this.h.skip();
        };
        r.pause = function() {
          return this.h.pause();
        };
        r.play = function() {
          return this.h.resume();
        };
        r.getVolume = function() {
          return this.h.getVolume();
        };
        r.setVolume = function(a) {
          this.j.volume = a;
          return this.h.setVolume(a);
        };
        r.isMuted = function() {
          return 0 == this.h.getVolume();
        };
        r.isLinear = function() {
          return this.g.isLinear();
        };
        r.resize = function(a, b) {
          var c = false, d = this.j;
          document.fullscreenEnabled ? c = !!document.fullscreenElement : d.webkitSupportsFullscreen && (c = d.webkitDisplayingFullscreen);
          this.h.resize(a, b, c ? google.ima.ViewMode.FULLSCREEN : google.ima.ViewMode.NORMAL);
        };
        r.setMuted = function(a) {
          (this.j.muted = a) ? (this.l = this.getVolume(), this.h.setVolume(0)) : this.h.setVolume(this.l);
        };
        r.getSequenceLength = function() {
          var a = this.g.getAdPodInfo();
          return null == a ? 1 : a.getTotalAds();
        };
        r.getPositionInSequence = function() {
          var a = this.g.getAdPodInfo();
          return null == a ? 1 : a.getAdPosition();
        };
        r.getTitle = function() {
          return this.g.getTitle();
        };
        r.getDescription = function() {
          return this.g.getDescription();
        };
        r.getVastMediaBitrate = function() {
          return this.g.getVastMediaBitrate();
        };
        r.getVastMediaHeight = function() {
          return this.g.getVastMediaHeight();
        };
        r.getVastMediaWidth = function() {
          return this.g.getVastMediaWidth();
        };
        r.getAdId = function() {
          return this.g.getAdId();
        };
        r.getCreativeAdId = function() {
          return this.g.getCreativeAdId();
        };
        r.getAdvertiserName = function() {
          return this.g.getAdvertiserName();
        };
        r.getMediaUrl = function() {
          return this.g.getMediaUrl();
        };
        r.getTimeOffset = function() {
          var a = this.g.getAdPodInfo();
          return null == a ? 0 : a.getTimeOffset();
        };
        r.getPodIndex = function() {
          var a = this.g.getAdPodInfo();
          return null == a ? 0 : a.getPodIndex();
        };
        r.release = function() {
          this.h = this.g = null;
        };
        T("shaka.ads.ClientSideAd", jr);
        jr.prototype.release = jr.prototype.release;
        jr.prototype.getPodIndex = jr.prototype.getPodIndex;
        jr.prototype.getTimeOffset = jr.prototype.getTimeOffset;
        jr.prototype.getMediaUrl = jr.prototype.getMediaUrl;
        jr.prototype.getAdvertiserName = jr.prototype.getAdvertiserName;
        jr.prototype.getCreativeAdId = jr.prototype.getCreativeAdId;
        jr.prototype.getAdId = jr.prototype.getAdId;
        jr.prototype.getVastMediaWidth = jr.prototype.getVastMediaWidth;
        jr.prototype.getVastMediaHeight = jr.prototype.getVastMediaHeight;
        jr.prototype.getVastMediaBitrate = jr.prototype.getVastMediaBitrate;
        jr.prototype.getDescription = jr.prototype.getDescription;
        jr.prototype.getTitle = jr.prototype.getTitle;
        jr.prototype.getPositionInSequence = jr.prototype.getPositionInSequence;
        jr.prototype.getSequenceLength = jr.prototype.getSequenceLength;
        jr.prototype.setMuted = jr.prototype.setMuted;
        jr.prototype.resize = jr.prototype.resize;
        jr.prototype.isLinear = jr.prototype.isLinear;
        jr.prototype.isMuted = jr.prototype.isMuted;
        jr.prototype.setVolume = jr.prototype.setVolume;
        jr.prototype.getVolume = jr.prototype.getVolume;
        jr.prototype.play = jr.prototype.play;
        jr.prototype.pause = jr.prototype.pause;
        jr.prototype.skip = jr.prototype.skip;
        jr.prototype.canSkipNow = jr.prototype.canSkipNow;
        jr.prototype.getTimeUntilSkippable = jr.prototype.getTimeUntilSkippable;
        jr.prototype.isSkippable = jr.prototype.isSkippable;
        jr.prototype.isPaused = jr.prototype.isPaused;
        jr.prototype.getRemainingTime = jr.prototype.getRemainingTime;
        jr.prototype.getMinSuggestedDuration = jr.prototype.getMinSuggestedDuration;
        jr.prototype.getDuration = jr.prototype.getDuration;
        jr.prototype.isUsingAnotherMediaElement = jr.prototype.isUsingAnotherMediaElement;
        jr.prototype.hasCustomClick = jr.prototype.hasCustomClick;
        jr.prototype.isClientRendering = jr.prototype.isClientRendering;
        jr.prototype.needsSkipUI = jr.prototype.needsSkipUI;
        function kr() {
        }
        function lr(a, b) {
          var c = [];
          a = t(Xd(a, "Ad"));
          for (var d = a.next(); !d.done; d = a.next()) if (d = ae(d.value, "InLine")) {
            if (d = ae(d, "Creatives")) {
              d = t(Xd(d, "Creative"));
              for (var e = d.next(); !e.done; e = d.next()) {
                e = e.value;
                var f = ae(e, "Linear");
                f && mr(c, b, f);
                if (e = ae(e, "NonLinearAds")) {
                  e = Xd(e, "NonLinear");
                  e = t(e);
                  for (var g = e.next(); !g.done; g = e.next()) a: {
                    f = c;
                    var h = b, k2 = g.value, l = ae(k2, "StaticResource");
                    if (l) g = l.attributes.creativeType;
                    else {
                      l = ae(k2, "HTMLResource");
                      if (!l) break a;
                      g = "text/html";
                    }
                    if (l = Zd(l)) {
                      "text/html" === g && (l = "data:text/html;charset=UTF-8," + encodeURIComponent(l));
                      var m = ge(k2, "width", me) || ge(k2, "expandedWidth", me), n = ge(k2, "height", me) || ge(k2, "expandedHeight", me);
                      if (m || n) {
                        var p = null;
                        (k2 = k2.attributes.minSuggestedDuration) && (p = Ld(k2));
                        k2 = 0;
                        null != h && (k2 = h);
                        f.push({
                          id: null,
                          groupId: null,
                          startTime: k2,
                          endTime: null,
                          uri: l,
                          mimeType: g,
                          isSkippable: false,
                          skipOffset: null,
                          skipFor: null,
                          canJump: false,
                          resumeOffset: 0,
                          playoutLimit: p,
                          once: true,
                          pre: null == h,
                          post: Infinity == h,
                          timelineRange: false,
                          loop: false,
                          overlay: { viewport: { x: 0, y: 0 }, topLeft: { x: 0, y: 0 }, size: { x: m || 0, y: n || 0 } },
                          displayOnBackground: false,
                          currentVideo: null,
                          background: null
                        });
                      }
                    }
                  }
                }
              }
            }
          }
          return c;
        }
        function mr(a, b, c) {
          var d = 0;
          null != b && (d = b);
          var e = null;
          c.attributes.skipoffset && (e = Ld(c.attributes.skipoffset), isNaN(e) && (e = null));
          if (c = ae(c, "MediaFiles")) {
            var f = Xd(c, "MediaFile");
            c = f;
            f = f.filter(function(h) {
              return "streaming" == h.attributes.delivery;
            });
            f.length && (c = f);
            c = c.sort(function(h, k2) {
              return (parseInt(k2.attributes.height, 10) || 0) - (parseInt(h.attributes.height, 10) || 0);
            });
            c = t(c);
            for (f = c.next(); !f.done; f = c.next()) if (f = f.value, !f.attributes.apiFramework) {
              var g = Zd(f);
              if (g) {
                a.push({
                  id: null,
                  groupId: null,
                  startTime: d,
                  endTime: null,
                  uri: g,
                  mimeType: f.attributes.type || null,
                  isSkippable: null != e,
                  skipOffset: e,
                  skipFor: null,
                  canJump: false,
                  resumeOffset: 0,
                  playoutLimit: null,
                  once: true,
                  pre: null == b,
                  post: Infinity == b,
                  timelineRange: false,
                  loop: false,
                  overlay: null,
                  displayOnBackground: false,
                  currentVideo: null,
                  background: null
                });
                break;
              }
            }
          }
        }
        T("shaka.ads.Utils", kr);
        kr.ADS_LOADED = "ads-loaded";
        kr.AD_STARTED = "ad-started";
        kr.AD_FIRST_QUARTILE = "ad-first-quartile";
        kr.AD_MIDPOINT = "ad-midpoint";
        kr.AD_THIRD_QUARTILE = "ad-third-quartile";
        kr.AD_COMPLETE = "ad-complete";
        kr.AD_STOPPED = "ad-stopped";
        kr.AD_SKIPPED = "ad-skipped";
        kr.AD_VOLUME_CHANGED = "ad-volume-changed";
        kr.AD_MUTED = "ad-muted";
        kr.AD_PAUSED = "ad-paused";
        kr.AD_RESUMED = "ad-resumed";
        kr.AD_SKIP_STATE_CHANGED = "ad-skip-state-changed";
        kr.CUEPOINTS_CHANGED = "ad-cue-points-changed";
        kr.IMA_AD_MANAGER_LOADED = "ima-ad-manager-loaded";
        kr.IMA_STREAM_MANAGER_LOADED = "ima-stream-manager-loaded";
        kr.AD_CLICKED = "ad-clicked";
        kr.AD_PROGRESS = "ad-progress";
        kr.AD_BUFFERING = "ad-buffering";
        kr.AD_IMPRESSION = "ad-impression";
        kr.AD_DURATION_CHANGED = "ad-duration-changed";
        kr.AD_CLOSED = "ad-closed";
        kr.AD_LOADED = "ad-loaded";
        kr.ALL_ADS_COMPLETED = "all-ads-completed";
        kr.AD_LINEAR_CHANGED = "ad-linear-changed";
        kr.AD_METADATA = "ad-metadata";
        kr.AD_RECOVERABLE_ERROR = "ad-recoverable-error";
        kr.AD_ERROR = "ad-error";
        kr.AD_BREAK_READY = "ad-break-ready";
        kr.AD_INTERACTION = "ad-interaction";
        kr.AD_CONTENT_PAUSE_REQUESTED = "ad-content-pause-requested";
        kr.AD_CONTENT_RESUME_REQUESTED = "ad-content-resume-requested";
        kr.AD_CONTENT_ATTACH_REQUESTED = "ad-content-attach-requested";
        function nr(a, b, c, d, e) {
          var f = this;
          this.s = a;
          this.i = b;
          this.F = false;
          this.A = this.o = null;
          this.G = NaN;
          this.l = e;
          this.j = null;
          this.h = new lb();
          google.ima.settings.setLocale(c);
          google.ima.settings.setDisableCustomPlaybackForIOS10Plus(true);
          this.C = new google.ima.AdDisplayContainer(this.s, this.i);
          this.C.initialize();
          this.m = new google.ima.AdsLoader(this.C);
          this.m.getSettings().setPlayerType("shaka-player");
          this.m.getSettings().setPlayerVersion("v4.14.5");
          this.g = null;
          this.B = d || new google.ima.AdsRenderingSettings();
          this.h.D(
            this.m,
            google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,
            function(g) {
              or(f, g);
            }
          );
          this.h.D(this.m, google.ima.AdErrorEvent.Type.AD_ERROR, function(g) {
            pr(f, g);
          });
          this.h.D(this.i, "ended", function() {
            f.m.contentComplete();
          });
          this.h.ma(this.i, "play", function() {
            f.F = true;
          });
        }
        nr.prototype.configure = function(a) {
          this.o = a;
        };
        nr.prototype.stop = function() {
          this.g && this.g.stop();
          this.s && Nj(this.s);
        };
        nr.prototype.release = function() {
          this.stop();
          this.A && this.A.disconnect();
          this.h && this.h.release();
          this.g && this.g.destroy();
          this.m.destroy();
          this.C.destroy();
        };
        function pr(a, b) {
          b.getError();
          b = (/* @__PURE__ */ new Map()).set("originalEvent", b);
          a.l(new V("ad-error", b));
          qr(a, null);
          a.l(new V("ad-cue-points-changed", (/* @__PURE__ */ new Map()).set("cuepoints", [])));
        }
        function or(a, b) {
          a.l(new V("ads-loaded", (/* @__PURE__ */ new Map()).set("loadTime", Date.now() / 1e3 - a.G)));
          if (a.o.customPlayheadTracker) {
            var c = { currentTime: a.i.currentTime };
            a.g = b.getAdsManager(c, a.B);
            a.i.muted ? a.g.setVolume(0) : a.g.setVolume(a.i.volume);
            a.h.D(a.i, "timeupdate", function() {
              a.i.duration && (c.currentTime = a.i.currentTime);
            });
            a.h.D(a.i, "volumechange", function() {
              a.j && (a.j.setVolume(a.i.volume), a.i.muted && a.j.setMuted(true));
            });
          } else a.g = b.getAdsManager(a.i, a.B);
          a.l(new V("ima-ad-manager-loaded", (/* @__PURE__ */ new Map()).set(
            "imaAdManager",
            a.g
          )));
          var d = a.g.getCuePoints();
          if (d.length) {
            b = [];
            d = t(d);
            for (var e = d.next(); !e.done; e = d.next()) b.push({ start: e.value, end: null });
            a.l(new V("ad-cue-points-changed", (/* @__PURE__ */ new Map()).set("cuepoints", b)));
          }
          rr(a);
          try {
            a.g.init(a.i.offsetWidth, a.i.offsetHeight, sr(a) ? google.ima.ViewMode.FULLSCREEN : google.ima.ViewMode.NORMAL), a.h.D(a.i, "loadeddata", function() {
              a.g.resize(a.i.offsetWidth, a.i.offsetHeight, sr(a) ? google.ima.ViewMode.FULLSCREEN : google.ima.ViewMode.NORMAL);
            }), "ResizeObserver" in window2 ? (a.A = new ResizeObserver(function() {
              a.g.resize(
                a.i.offsetWidth,
                a.i.offsetHeight,
                sr(a) ? google.ima.ViewMode.FULLSCREEN : google.ima.ViewMode.NORMAL
              );
            }), a.A.observe(a.i)) : a.h.D(document, "fullscreenchange", function() {
              a.g.resize(a.i.offsetWidth, a.i.offsetHeight, sr(a) ? google.ima.ViewMode.FULLSCREEN : google.ima.ViewMode.NORMAL);
            }), a.F || a.o.skipPlayDetection ? a.g.start() : a.h.ma(a.i, "play", function() {
              a.F = true;
              a.g.start();
            });
          } catch (f) {
            qr(a, null);
          }
        }
        function sr(a) {
          if (document.fullscreenEnabled) return !!document.fullscreenElement;
          a = a.i;
          return a.webkitSupportsFullscreen ? a.webkitDisplayingFullscreen : false;
        }
        function rr(a) {
          function b(c, d) {
            c = (/* @__PURE__ */ new Map()).set("originalEvent", c);
            a.l(new V(d, c));
          }
          a.h.D(a.g, google.ima.AdErrorEvent.Type.AD_ERROR, function(c) {
            pr(a, c);
          });
          a.h.D(a.g, google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED, function(c) {
            tr(a, c);
          });
          a.h.D(a.g, google.ima.AdEvent.Type.STARTED, function(c) {
            tr(a, c);
          });
          a.h.D(a.g, google.ima.AdEvent.Type.FIRST_QUARTILE, function(c) {
            b(c, "ad-first-quartile");
          });
          a.h.D(a.g, google.ima.AdEvent.Type.MIDPOINT, function(c) {
            b(c, "ad-midpoint");
          });
          a.h.D(
            a.g,
            google.ima.AdEvent.Type.THIRD_QUARTILE,
            function(c) {
              b(c, "ad-third-quartile");
            }
          );
          a.h.D(a.g, google.ima.AdEvent.Type.COMPLETE, function(c) {
            b(c, "ad-complete");
          });
          a.h.D(a.g, google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED, function(c) {
            qr(a, c);
          });
          a.h.D(a.g, google.ima.AdEvent.Type.ALL_ADS_COMPLETED, function(c) {
            qr(a, c);
          });
          a.h.D(a.g, google.ima.AdEvent.Type.SKIPPED, function(c) {
            b(c, "ad-skipped");
          });
          a.h.D(a.g, google.ima.AdEvent.Type.VOLUME_CHANGED, function(c) {
            b(c, "ad-volume-changed");
          });
          a.h.D(a.g, google.ima.AdEvent.Type.VOLUME_MUTED, function(c) {
            b(c, "ad-muted");
          });
          a.h.D(a.g, google.ima.AdEvent.Type.PAUSED, function(c) {
            a.j && (a.j.i = true, b(c, "ad-paused"));
          });
          a.h.D(a.g, google.ima.AdEvent.Type.RESUMED, function(c) {
            a.j && (a.j.i = false, b(c, "ad-resumed"));
          });
          a.h.D(a.g, google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED, function(c) {
            a.j && b(c, "ad-skip-state-changed");
          });
          a.h.D(a.g, google.ima.AdEvent.Type.CLICK, function(c) {
            b(c, "ad-clicked");
          });
          a.h.D(a.g, google.ima.AdEvent.Type.AD_PROGRESS, function(c) {
            b(c, "ad-progress");
          });
          a.h.D(a.g, google.ima.AdEvent.Type.AD_BUFFERING, function(c) {
            b(c, "ad-buffering");
          });
          a.h.D(a.g, google.ima.AdEvent.Type.IMPRESSION, function(c) {
            b(c, "ad-impression");
          });
          a.h.D(a.g, google.ima.AdEvent.Type.DURATION_CHANGE, function(c) {
            b(c, "ad-duration-changed");
          });
          a.h.D(a.g, google.ima.AdEvent.Type.USER_CLOSE, function(c) {
            b(c, "ad-closed");
          });
          a.h.D(a.g, google.ima.AdEvent.Type.LOADED, function(c) {
            b(c, "ad-loaded");
          });
          a.h.D(a.g, google.ima.AdEvent.Type.ALL_ADS_COMPLETED, function(c) {
            b(c, "all-ads-completed");
          });
          a.h.D(a.g, google.ima.AdEvent.Type.LINEAR_CHANGED, function(c) {
            b(c, "ad-linear-changed");
          });
          a.h.D(
            a.g,
            google.ima.AdEvent.Type.AD_METADATA,
            function(c) {
              b(c, "ad-metadata");
            }
          );
          a.h.D(a.g, google.ima.AdEvent.Type.LOG, function(c) {
            b(c, "ad-recoverable-error");
          });
          a.h.D(a.g, google.ima.AdEvent.Type.AD_BREAK_READY, function(c) {
            b(c, "ad-break-ready");
          });
          a.h.D(a.g, google.ima.AdEvent.Type.INTERACTION, function(c) {
            b(c, "ad-interaction");
          });
        }
        function tr(a, b) {
          var c = b.getAd();
          c ? (a.j = new jr(c, a.g, a.i), b.type != google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED || a.o.supportsMultipleMediaElements || a.l(new V("ad-content-pause-requested")), b = (/* @__PURE__ */ new Map()).set("ad", a.j).set("sdkAdObject", c).set("originalEvent", b), a.l(new V("ad-started", b)), a.j.isLinear() && (a.s.setAttribute("ad-active", "true"), a.o.customPlayheadTracker || a.i.pause(), a.i.muted ? (b = a.j, b.l = a.i.volume, b.h.setVolume(0)) : a.j.setVolume(a.i.volume))) : db("The IMA SDK fired a " + b.type + " event with no associated ad. Unable to play ad!");
        }
        function qr(a, b) {
          b && b.type == google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED && !a.o.supportsMultipleMediaElements && a.l(new V("ad-content-resume-requested"));
          a.l(new V("ad-stopped", (/* @__PURE__ */ new Map()).set("originalEvent", b)));
          a.j && a.j.isLinear() && (a.s.removeAttribute("ad-active"), a.o.customPlayheadTracker || a.i.ended || a.i.play());
        }
        ;
        function ur(a, b, c, d, e, f) {
          this.g = a;
          this.i = b;
          this.j = (this.h = b.isSkippable) ? b.skipOffset || 0 : b.skipOffset;
          this.l = b.skipFor;
          this.A = c;
          this.o = d;
          this.m = e;
          this.s = f;
          this.B = b.overlay;
        }
        r = ur.prototype;
        r.needsSkipUI = function() {
          return true;
        };
        r.isClientRendering = function() {
          return true;
        };
        r.hasCustomClick = function() {
          return false;
        };
        r.isUsingAnotherMediaElement = function() {
          return this.s;
        };
        r.getDuration = function() {
          var a = this.g.duration;
          return isNaN(a) ? -1 : a;
        };
        r.getMinSuggestedDuration = function() {
          return this.getDuration();
        };
        r.getRemainingTime = function() {
          var a = this.g.duration;
          return isNaN(a) ? -1 : a - this.g.currentTime;
        };
        r.isPaused = function() {
          return this.g.paused;
        };
        r.isSkippable = function() {
          return this.h && null != this.l ? this.getDuration() - this.getRemainingTime() < this.j + this.l : this.h;
        };
        r.getTimeUntilSkippable = function() {
          if (this.isSkippable()) {
            var a = this.getRemainingTime() + this.j - this.getDuration();
            return Math.max(a, 0);
          }
          return Math.max(this.getRemainingTime(), 0);
        };
        r.canSkipNow = function() {
          return this.h && 0 == this.getTimeUntilSkippable();
        };
        r.skip = function() {
          this.canSkipNow() && this.A();
        };
        r.pause = function() {
          return this.g.pause();
        };
        r.play = function() {
          return this.g.play();
        };
        r.getVolume = function() {
          return this.g.volume;
        };
        r.setVolume = function(a) {
          this.g.volume = a;
        };
        r.isMuted = function() {
          return this.g.muted;
        };
        r.isLinear = function() {
          return null == this.B;
        };
        r.resize = function() {
        };
        r.setMuted = function(a) {
          this.g.muted = a;
        };
        r.getSequenceLength = function() {
          return this.o;
        };
        r.getPositionInSequence = function() {
          return this.m;
        };
        r.getTitle = function() {
          return "";
        };
        r.getDescription = function() {
          return "";
        };
        r.getVastMediaBitrate = function() {
          return 0;
        };
        r.getVastMediaHeight = function() {
          return 0;
        };
        r.getVastMediaWidth = function() {
          return 0;
        };
        r.getAdId = function() {
          return this.i.id || "";
        };
        r.getCreativeAdId = function() {
          return "";
        };
        r.getAdvertiserName = function() {
          return "";
        };
        r.getMediaUrl = function() {
          return this.i.uri;
        };
        r.getTimeOffset = function() {
          return 0;
        };
        r.getPodIndex = function() {
          return 0;
        };
        r.release = function() {
          this.g = null;
        };
        T("shaka.ads.InterstitialAd", ur);
        ur.prototype.release = ur.prototype.release;
        ur.prototype.getPodIndex = ur.prototype.getPodIndex;
        ur.prototype.getTimeOffset = ur.prototype.getTimeOffset;
        ur.prototype.getMediaUrl = ur.prototype.getMediaUrl;
        ur.prototype.getAdvertiserName = ur.prototype.getAdvertiserName;
        ur.prototype.getCreativeAdId = ur.prototype.getCreativeAdId;
        ur.prototype.getAdId = ur.prototype.getAdId;
        ur.prototype.getVastMediaWidth = ur.prototype.getVastMediaWidth;
        ur.prototype.getVastMediaHeight = ur.prototype.getVastMediaHeight;
        ur.prototype.getVastMediaBitrate = ur.prototype.getVastMediaBitrate;
        ur.prototype.getDescription = ur.prototype.getDescription;
        ur.prototype.getTitle = ur.prototype.getTitle;
        ur.prototype.getPositionInSequence = ur.prototype.getPositionInSequence;
        ur.prototype.getSequenceLength = ur.prototype.getSequenceLength;
        ur.prototype.setMuted = ur.prototype.setMuted;
        ur.prototype.resize = ur.prototype.resize;
        ur.prototype.isLinear = ur.prototype.isLinear;
        ur.prototype.isMuted = ur.prototype.isMuted;
        ur.prototype.setVolume = ur.prototype.setVolume;
        ur.prototype.getVolume = ur.prototype.getVolume;
        ur.prototype.play = ur.prototype.play;
        ur.prototype.pause = ur.prototype.pause;
        ur.prototype.skip = ur.prototype.skip;
        ur.prototype.canSkipNow = ur.prototype.canSkipNow;
        ur.prototype.getTimeUntilSkippable = ur.prototype.getTimeUntilSkippable;
        ur.prototype.isSkippable = ur.prototype.isSkippable;
        ur.prototype.isPaused = ur.prototype.isPaused;
        ur.prototype.getRemainingTime = ur.prototype.getRemainingTime;
        ur.prototype.getMinSuggestedDuration = ur.prototype.getMinSuggestedDuration;
        ur.prototype.getDuration = ur.prototype.getDuration;
        ur.prototype.isUsingAnotherMediaElement = ur.prototype.isUsingAnotherMediaElement;
        ur.prototype.hasCustomClick = ur.prototype.hasCustomClick;
        ur.prototype.isClientRendering = ur.prototype.isClientRendering;
        ur.prototype.needsSkipUI = ur.prototype.needsSkipUI;
        function vr(a, b, c) {
          this.g = a;
          this.j = b;
          this.h = c;
          this.i = null == a.overlay;
        }
        r = vr.prototype;
        r.needsSkipUI = function() {
          return true;
        };
        r.isClientRendering = function() {
          return true;
        };
        r.hasCustomClick = function() {
          return false;
        };
        r.isUsingAnotherMediaElement = function() {
          return false;
        };
        r.getDuration = function() {
          return -1;
        };
        r.getMinSuggestedDuration = function() {
          return this.getDuration();
        };
        r.getRemainingTime = function() {
          return -1;
        };
        r.isPaused = function() {
          return false;
        };
        r.isSkippable = function() {
          return false;
        };
        r.getTimeUntilSkippable = function() {
          return 0;
        };
        r.canSkipNow = function() {
          return false;
        };
        r.skip = function() {
        };
        r.pause = function() {
        };
        r.play = function() {
        };
        r.getVolume = function() {
          return 1;
        };
        r.setVolume = function() {
        };
        r.isMuted = function() {
          return false;
        };
        r.isLinear = function() {
          return this.i;
        };
        r.resize = function() {
        };
        r.setMuted = function() {
        };
        r.getSequenceLength = function() {
          return this.j;
        };
        r.getPositionInSequence = function() {
          return this.h;
        };
        r.getTitle = function() {
          return "";
        };
        r.getDescription = function() {
          return "";
        };
        r.getVastMediaBitrate = function() {
          return 0;
        };
        r.getVastMediaHeight = function() {
          return 0;
        };
        r.getVastMediaWidth = function() {
          return 0;
        };
        r.getAdId = function() {
          return this.g.id || "";
        };
        r.getCreativeAdId = function() {
          return "";
        };
        r.getAdvertiserName = function() {
          return "";
        };
        r.getMediaUrl = function() {
          return this.g.uri;
        };
        r.getTimeOffset = function() {
          return 0;
        };
        r.getPodIndex = function() {
          return 0;
        };
        r.release = function() {
        };
        T("shaka.ads.InterstitialStaticAd", vr);
        vr.prototype.release = vr.prototype.release;
        vr.prototype.getPodIndex = vr.prototype.getPodIndex;
        vr.prototype.getTimeOffset = vr.prototype.getTimeOffset;
        vr.prototype.getMediaUrl = vr.prototype.getMediaUrl;
        vr.prototype.getAdvertiserName = vr.prototype.getAdvertiserName;
        vr.prototype.getCreativeAdId = vr.prototype.getCreativeAdId;
        vr.prototype.getAdId = vr.prototype.getAdId;
        vr.prototype.getVastMediaWidth = vr.prototype.getVastMediaWidth;
        vr.prototype.getVastMediaHeight = vr.prototype.getVastMediaHeight;
        vr.prototype.getVastMediaBitrate = vr.prototype.getVastMediaBitrate;
        vr.prototype.getDescription = vr.prototype.getDescription;
        vr.prototype.getTitle = vr.prototype.getTitle;
        vr.prototype.getPositionInSequence = vr.prototype.getPositionInSequence;
        vr.prototype.getSequenceLength = vr.prototype.getSequenceLength;
        vr.prototype.setMuted = vr.prototype.setMuted;
        vr.prototype.resize = vr.prototype.resize;
        vr.prototype.isLinear = vr.prototype.isLinear;
        vr.prototype.isMuted = vr.prototype.isMuted;
        vr.prototype.setVolume = vr.prototype.setVolume;
        vr.prototype.getVolume = vr.prototype.getVolume;
        vr.prototype.play = vr.prototype.play;
        vr.prototype.pause = vr.prototype.pause;
        vr.prototype.skip = vr.prototype.skip;
        vr.prototype.canSkipNow = vr.prototype.canSkipNow;
        vr.prototype.getTimeUntilSkippable = vr.prototype.getTimeUntilSkippable;
        vr.prototype.isSkippable = vr.prototype.isSkippable;
        vr.prototype.isPaused = vr.prototype.isPaused;
        vr.prototype.getRemainingTime = vr.prototype.getRemainingTime;
        vr.prototype.getMinSuggestedDuration = vr.prototype.getMinSuggestedDuration;
        vr.prototype.getDuration = vr.prototype.getDuration;
        vr.prototype.isUsingAnotherMediaElement = vr.prototype.isUsingAnotherMediaElement;
        vr.prototype.hasCustomClick = vr.prototype.hasCustomClick;
        vr.prototype.isClientRendering = vr.prototype.isClientRendering;
        vr.prototype.needsSkipUI = vr.prototype.needsSkipUI;
        function wr(a, b, c, d) {
          var e = this;
          this.T = null;
          this.A = a;
          this.H = b;
          this.g = c;
          this.F = null;
          this.B = true;
          this.h = this.g;
          this.i = d;
          this.W = /* @__PURE__ */ new Set();
          this.G = /* @__PURE__ */ new Set();
          this.C = /* @__PURE__ */ new Map();
          this.L = /* @__PURE__ */ new Map();
          this.j = new X();
          xr(this);
          this.I = new lb();
          this.l = new lb();
          this.K = false;
          this.ea = this.m = this.s = this.o = null;
          this.fa = false;
          this.O = -1;
          this.Z = function() {
            if (!e.K && e.o && !e.H.Pa()) {
              e.o = e.g.currentTime;
              e.s && !e.s.pre && !e.s.post && e.o < e.s.startTime && (e.s = null);
              var f = yr(e);
              f && zr(e, f, 1, 1, Date.now());
            }
          };
          this.Y = function() {
            if (!(e.K || e.o || e.H.Pa())) {
              e.o = e.g.currentTime;
              var f = yr(e, true);
              f && zr(e, f, 1, 1, Date.now());
            }
          };
          this.P = new ec(this.Z);
          this.M = new ec(function() {
            var f, g, h, k2, l, m, n, p, q, u, w;
            return Q(function(v) {
              switch (v.g) {
                case 1:
                  if (!e.G.size || null == e.o) {
                    v.u(0);
                    break;
                  }
                  f = e.H.m;
                  if (f == Pp || f == Fp) return v.return();
                  g = false;
                  h = Array.from(e.G);
                  k2 = e.H.Ra();
                  l = t(h);
                  m = l.next();
                case 3:
                  if (m.done) {
                    v.u(5);
                    break;
                  }
                  n = m.value;
                  if (n == e.s) {
                    v.u(4);
                    break;
                  }
                  p = n.endTime || n.startTime;
                  if (!(1 <= k2.start - p)) {
                    q = n.startTime - e.o;
                    0 < q && 10 >= q && (!e.C.has(n) && Ar(n) && e.C.set(n, e.j.preload(n.uri, null, n.mimeType || void 0)), Br(e, n));
                    v.u(4);
                    break;
                  }
                  if (!e.C.has(n)) {
                    v.u(7);
                    break;
                  }
                  return G(v, e.C.get(n), 8);
                case 8:
                  (u = v.h) && u.destroy(), e.C.delete(n);
                case 7:
                  Cr(e, n), w = JSON.stringify(n), e.W.has(w) && e.W.delete(w), e.G.delete(n), Dr(e), n.overlay || (g = true);
                case 4:
                  m = l.next();
                  v.u(3);
                  break;
                case 5:
                  g && Er(e), I(v);
              }
            });
          });
        }
        r = wr.prototype;
        r.configure = function(a) {
          this.T = a;
          Fr(this);
        };
        function Gr(a) {
          if (!a.fa && a.G.size) {
            a.I.D(a.g, "playing", a.Y);
            a.I.D(a.g, "timeupdate", a.Y);
            a.I.D(a.g, "ended", a.Z);
            if ("requestVideoFrameCallback" in a.g && !Ac()) {
              var b = a.g, c = function() {
                -1 != a.O && (a.Z(), -1 != a.O && (a.O = b.requestVideoFrameCallback(c)));
              };
              a.O = b.requestVideoFrameCallback(c);
            } else a.P.ua(0.025);
            a.M && a.M.ua(1);
            a.fa = true;
          }
        }
        function Dr(a) {
          a.fa && !a.G.size && (a.I.Ja(a.g, "playing", a.Y), a.I.Ja(a.g, "timeupdate", a.Y), a.I.Ja(a.g, "ended", a.Z), -1 != a.O && (a.g.cancelVideoFrameCallback(a.O), a.O = -1), a.P && a.P.stop(), a.M && a.M.stop(), a.fa = false);
        }
        function Fr(a) {
          if (a.A && a.T && !a.K) {
            var b = a.T.supportsMultipleMediaElements, c = a.g;
            c.webkitSupportsFullscreen && c.webkitDisplayingFullscreen && (b = false);
            a.B == b && (a.B = !b, a.B ? (a.h = a.g, a.F && (a.F.parentElement && a.A.removeChild(a.F), a.F = null)) : (a.F || (b = document.createElement(a.g.tagName), b.autoplay = true, b.style.position = "absolute", b.style.top = "0", b.style.left = "0", b.style.width = "100%", b.style.height = "100%", b.style.display = "none", b.setAttribute("playsinline", ""), a.F = b), a.h = a.F));
          }
        }
        r.stop = function() {
          this.l && this.l.Qa();
          this.W.clear();
          this.G.clear();
          this.j.nf();
          if (this.C.size) {
            var a = Array.from(this.C.values());
            a = t(a);
            for (var b = a.next(); !b.done; b = a.next()) (b = b.value) && b.then(function(c) {
              c && c.destroy();
            });
          }
          this.C.clear();
          if (this.L.size) for (a = Array.from(this.L.keys()), a = t(a), b = a.next(); !b.done; b = a.next()) Cr(this, b.value);
          this.L.clear();
          this.j.detach();
          this.K = false;
          this.s = this.o = null;
          this.B = true;
          this.h = this.g;
          this.F = null;
          Hr(this);
          Dr(this);
          this.A && Nj(this.A);
          this.m && (this.m.stop(), this.m = null);
        };
        r.release = function() {
          this.stop();
          this.I && this.I.release();
          this.l && this.l.release();
          this.P && (this.P.stop(), this.P = null);
          this.M && (this.M.stop(), this.M = null);
          this.j.destroy();
        };
        r.Hf = function() {
          return this.j;
        };
        function Ir(a, b) {
          var c;
          Q(function(d) {
            if (1 == d.g) return xr(a), G(d, Jr(a, b), 2);
            c = d.h;
            c.length ? Kr(a, c) : db("Unsupported HLS interstitial", b);
            I(d);
          });
        }
        function Lr(a, b) {
          var c = ae(b.eventNode, "OverlayEvent"), d = c.attributes.uri, e = c.attributes.mimeType, f = "true" == c.attributes.loop, g = ge(c, "z", me);
          if (d && 0 != g) {
            var h = { viewport: { x: 1920, y: 1080 }, topLeft: { x: 0, y: 0 }, size: { x: 1920, y: 1080 } }, k2 = ae(c, "Viewport"), l = ae(c, "TopLeft"), m = ae(c, "Size");
            if (k2 && l && m) {
              h = ge(k2, "x", me);
              if (null == h) return;
              k2 = ge(k2, "y", me);
              if (null == k2) return;
              var n = ge(l, "x", me);
              if (null == n) return;
              l = ge(l, "y", me);
              if (null == l) return;
              var p = ge(m, "x", me);
              if (null == p) return;
              m = ge(m, "y", me);
              if (null == m) return;
              h = { viewport: {
                x: h,
                y: k2
              }, topLeft: { x: n, y: l }, size: { x: p, y: m } };
            }
            m = ae(c, "SqueezeCurrent");
            c = null;
            m && (m = ge(m, "percentage", pe)) && (c = { viewport: { x: 1920, y: 1080 }, topLeft: { x: 0, y: 0 }, size: { x: 1920 * m, y: 1080 * m } });
            Kr(a, [{ id: b.id, groupId: null, startTime: b.startTime, endTime: b.endTime, uri: d, mimeType: e, isSkippable: false, skipOffset: null, skipFor: null, canJump: true, resumeOffset: null, playoutLimit: null, once: false, pre: false, post: false, timelineRange: true, loop: f, overlay: h, displayOnBackground: -1 == g, currentVideo: c, background: null }]);
          }
        }
        r.addAdUrlInterstitial = function(a) {
          var b = this, c, d, e, f, g, h, k2, l, m;
          return Q(function(n) {
            switch (n.g) {
              case 1:
                return c = { type: 12 }, G(n, Mr(b, a, c), 2);
              case 2:
                d = n.h;
                e = Pd(d, "VAST,vmap:VMAP");
                if (!e) throw new U(2, 10, 10007);
                f = [];
                if ("VAST" == e.tagName) {
                  f = lr(e, b.o);
                  n.u(3);
                  break;
                }
                if ("vmap:VMAP" != e.tagName) {
                  n.u(3);
                  break;
                }
                for (var p = [], q = t(Xd(e, "vmap:AdBreak")), u = q.next(); !u.done; u = q.next()) {
                  var w = u.value, v = w.attributes.timeOffset;
                  v && (u = null, "start" == v ? u = 0 : "end" == v ? u = Infinity : u = Ld(v), (w = ae(w, "vmap:AdSource")) && (w = ae(w, "vmap:AdTagURI")) && (w = Yd(w)) && p.push({ time: u, uri: w }));
                }
                g = t(p);
                h = g.next();
              case 5:
                if (h.done) {
                  n.u(3);
                  break;
                }
                k2 = h.value;
                return G(n, Mr(b, k2.uri, c), 8);
              case 8:
                l = n.h;
                m = Pd(l, "VAST");
                if (!m) throw new U(2, 10, 10007);
                f.push.apply(f, y(lr(m, k2.time)));
                h = g.next();
                n.u(5);
                break;
              case 3:
                Kr(b, f), I(n);
            }
          });
        };
        function Kr(a, b) {
          var c, d, e, f, g, h, k2, l;
          Q(function(m) {
            switch (m.g) {
              case 1:
                c = false, d = t(b), e = d.next();
              case 2:
                if (e.done) {
                  m.u(4);
                  break;
                }
                f = e.value;
                if (!f.uri) {
                  db("Missing URL in interstitial", f);
                  m.u(3);
                  break;
                }
                if (f.mimeType) {
                  m.u(5);
                  break;
                }
                xa(m, 6);
                g = a.j.xb();
                return G(m, Ao(f.uri, g, a.H.getConfiguration().streaming.retryParameters), 8);
              case 8:
                f.mimeType = m.h;
                za(m, 5);
                break;
              case 6:
                Aa(m);
              case 5:
                h = f.id || JSON.stringify(f);
                if (a.W.has(h)) {
                  m.u(3);
                  break;
                }
                f.loop && !f.overlay && db("Loop is only supported in overlay interstitials", f);
                f.overlay || (c = true);
                a.W.add(h);
                a.G.add(f);
                k2 = false;
                f.pre && null == a.o ? k2 = true : 0 != f.startTime || f.canJump ? null != a.o && (l = f.startTime - a.o, 0 < l && 10 >= l && (k2 = true)) : k2 = true;
                k2 && (!a.C.has(f) && Ar(f) && a.C.set(f, a.j.preload(f.uri, null, f.mimeType || void 0)), Br(a, f));
              case 3:
                e = d.next();
                m.u(2);
                break;
              case 4:
                c && Er(a), Gr(a), I(m);
            }
          });
        }
        function yr(a, b, c) {
          b = void 0 === b ? false : b;
          c = void 0 === c ? null : c;
          var d = 0, e = null;
          if (a.G.size && null != a.o) {
            var f = a.g.ended, g = Array.from(a.G).sort(function(m, n) {
              return n.startTime - m.startTime;
            }), h = g;
            h = b ? g.filter(function(m) {
              return m.pre;
            }) : f ? g.filter(function(m) {
              return m.post;
            }) : g.filter(function(m) {
              return !m.pre && !m.post;
            });
            g = t(h);
            for (h = g.next(); !h.done; h = g.next()) {
              h = h.value;
              var k2 = false;
              if (b) k2 = h.pre;
              else if (f) k2 = h.post;
              else if (!h.pre && !h.post) {
                var l = a.o - Math.round(1e3 * h.startTime) / 1e3;
                0 < l && (1 >= l || !h.canJump) && (k2 = null == c && a.s && !a.s.pre && !a.s.post && a.s.startTime >= h.startTime ? false : true);
              }
              k2 && (!a.s || h.startTime >= a.s.startTime) && (d == (c || 0) ? e = h : e && !h.canJump && 1e-3 < Math.round(1e3 * h.startTime) / 1e3 - Math.round(1e3 * e.startTime) / 1e3 && (e = h, d = 0), d++);
            }
          }
          return e;
        }
        function zr(a, b, c, d, e, f) {
          f = void 0 === f ? 0 : f;
          a.s = b;
          Fr(a);
          !a.h.parentElement && a.A && a.A.appendChild(a.h);
          1 == d && 1 == c && (c = Array.from(a.G).filter(function(g) {
            return b.pre ? g.pre == b.pre : b.post ? g.post == b.post : 1e-3 > Math.abs(g.startTime - b.startTime);
          }).length);
          b.once && (f++, a.G.delete(b), Dr(a), b.overlay || Er(a));
          b.mimeType && (b.mimeType.startsWith("image/") || "text/html" === b.mimeType) ? b.overlay ? Nr(a, b, c, d, f) : db("Unsupported interstitial", b) : a.B && b.overlay ? db("Unsupported interstitial", b) : Or(a, b, c, d, e, f);
        }
        function Nr(a, b, c, d, e) {
          function f() {
            a.m && (a.m.stop(), a.m = null);
            a.A.removeChild(k2);
            Hr(a, b);
            a.i(new V("ad-stopped"));
            var p = yr(a, b.pre, d - e);
            p ? (a.l.Qa(), zr(a, p, c, ++d, Date.now(), e)) : a.K = false;
          }
          var g = b.overlay, h = "text/html" == b.mimeType ? "iframe" : "img", k2 = document.createElement(h);
          k2.style.objectFit = "contain";
          k2.style.position = "absolute";
          k2.style.border = "none";
          Pr(a, b);
          a.i(new V("ad-started", (/* @__PURE__ */ new Map()).set("ad", new vr(b, c, d))));
          "iframe" == h ? k2.src = b.uri : (k2.src = b.uri, k2.onerror = function(p) {
            a.i(new V("ad-error", (/* @__PURE__ */ new Map()).set(
              "originalEvent",
              p
            )));
            f();
          });
          var l = g.viewport, m = g.topLeft;
          g = g.size;
          0 == l.x && 0 == l.y ? (k2.width = b.overlay.size.x, k2.height = b.overlay.size.y, k2.style.bottom = "10%", k2.style.left = "0", k2.style.right = "0", k2.style.width = "100%", b.overlay.size.y || "iframe" != h || (k2.style.height = "auto")) : (k2.style.height = g.y / l.y * 100 + "%", k2.style.left = m.x / l.x * 100 + "%", k2.style.top = m.y / l.y * 100 + "%", k2.style.width = g.x / l.x * 100 + "%");
          a.A.appendChild(k2);
          var n = Date.now();
          a.m && a.m.stop();
          a.m = new ec(function() {
            b.playoutLimit && (Date.now() - n) / 1e3 > b.playoutLimit ? (a.i(new V("ad-complete")), f()) : b.endTime && a.g.currentTime > b.endTime ? (a.i(new V("ad-complete")), f()) : a.g.currentTime < b.startTime && (a.i(new V("ad-skipped")), f());
          });
          b.playoutLimit && !b.endTime ? a.m.da(b.playoutLimit) : b.endTime && a.m.ua(0.025);
          a.l.D(a.g, "seeked", function() {
            var p = a.g.currentTime;
            if (p < b.startTime || b.endTime && p > b.endTime) a.m && a.m.stop(), a.i(new V("ad-skipped")), f();
          });
        }
        function Or(a, b, c, d, e, f) {
          var g, h, k2, l, m, n, p, q, u, w, v, x, z, C, D, F, B;
          Q(function(A) {
            switch (A.g) {
              case 1:
                g = Date.now();
                a.K = true;
                if (!a.B || 1 != d) {
                  A.u(2);
                  break;
                }
                a.i(new V("ad-content-pause-requested", (/* @__PURE__ */ new Map()).set("saveLivePosition", true)));
                h = new Tg();
                k2 = function(H) {
                  return Q(function(E) {
                    if (1 == E.g) return "detach" != H.state ? E.u(0) : Ac() ? G(E, new Promise(function(L) {
                      return new ec(L).da(0.1);
                    }), 3) : E.u(3);
                    h.resolve();
                    a.l.Ja(a.H, "onstatechange", k2);
                    I(E);
                  });
                };
                a.l.D(a.H, "onstatechange", k2);
                return G(A, h, 2);
              case 2:
                return Pr(a, b), a.B || (a.h.style.display = "", b.overlay ? (a.h.loop = b.loop, l = b.overlay.viewport, m = b.overlay.topLeft, n = b.overlay.size, a.h.style.height = n.y / l.y * 100 + "%", a.h.style.left = m.x / l.x * 100 + "%", a.h.style.top = m.y / l.y * 100 + "%", a.h.style.width = n.x / l.x * 100 + "%") : (a.g.pause(), null != b.resumeOffset && 0 != b.resumeOffset && (a.g.currentTime += b.resumeOffset), a.h.loop = false, a.h.style.height = "100%", a.h.style.left = "0", a.h.style.top = "0", a.h.style.width = "100%")), p = false, q = function() {
                  if (!a.B && !b.overlay && null == b.resumeOffset) if (b.timelineRange && b.endTime && Infinity != b.endTime) a.g.currentTime != b.endTime && (a.g.currentTime = b.endTime);
                  else {
                    var H = Date.now();
                    a.g.currentTime += (H - e) / 1e3;
                    e = H;
                  }
                }, u = function(H) {
                  var E, L;
                  return Q(function(M) {
                    if (1 == M.g) {
                      q();
                      E = yr(a, b.pre, d - f);
                      if (H && b.groupId) for (; E && E.groupId == b.groupId; ) d++, E = yr(a, b.pre, d - f);
                      a.m && (!b.groupId || E && E.groupId != b.groupId) && (a.m.stop(), a.m = null);
                      Hr(a, b);
                      if (E && !E.overlay) return M.u(2);
                      b.post && (a.o = null, a.s = null);
                      return a.B ? G(M, a.j.detach(), 4) : G(M, a.j.jc(), 4);
                    }
                    2 != M.g && (a.B && (L = b.resumeOffset, null == L && (L = b.timelineRange && b.endTime && Infinity != b.endTime ? b.endTime - (a.o || 0) : (Date.now() - e) / 1e3), a.i(new V("ad-content-resume-requested", (/* @__PURE__ */ new Map()).set("offset", L)))), a.i(new V("ad-stopped")), a.l.Qa(), a.K = false, a.B ? Er(a) : (a.h.style.display = "none", q(), a.g.ended || a.g.play()));
                    Fr(a);
                    E && (a.i(new V("ad-stopped")), a.l.Qa(), zr(a, E, c, ++d, e, f));
                    I(M);
                  });
                }, w = function(H) {
                  return Q(function(E) {
                    if (p) return E.return();
                    p = true;
                    a.i(new V("ad-error", (/* @__PURE__ */ new Map()).set("originalEvent", H)));
                    return G(E, u(false), 0);
                  });
                }, v = function() {
                  return Q(function(H) {
                    if (1 == H.g) {
                      if (p) return H.return();
                      p = true;
                      return G(H, u(false), 2);
                    }
                    a.i(new V("ad-complete"));
                    I(H);
                  });
                }, a.ea = function() {
                  return Q(function(H) {
                    if (p) return H.return();
                    p = true;
                    a.i(new V("ad-skipped"));
                    return G(H, u(true), 0);
                  });
                }, x = new ur(a.h, b, a.ea, c, d, !a.B), a.B || (x.setMuted(a.g.muted), x.setVolume(a.g.volume)), a.i(new V("ad-started", (/* @__PURE__ */ new Map()).set("ad", x))), (z = x.canSkipNow()) && a.i(new V("ad-skip-state-changed")), a.l.ma(a.j, "error", w), a.l.D(a.h, "timeupdate", function() {
                  if (a.h.duration) {
                    var H = x.canSkipNow();
                    z != H && 0 < x.getRemainingTime() && 0 < x.getDuration() && a.i(new V("ad-skip-state-changed"));
                    z = H;
                  }
                }), a.l.ma(a.j, "firstquartile", function() {
                  q();
                  a.i(new V("ad-first-quartile"));
                }), a.l.ma(a.j, "midpoint", function() {
                  q();
                  a.i(new V("ad-midpoint"));
                }), a.l.ma(a.j, "thirdquartile", function() {
                  q();
                  a.i(new V("ad-third-quartile"));
                }), a.l.ma(a.j, "complete", v), a.l.D(a.h, "play", function() {
                  a.i(new V("ad-resumed"));
                }), a.l.D(a.h, "pause", function() {
                  var H = a.j.getConfiguration();
                  a.h.currentTime >= H.playRangeEnd ? v() : a.i(new V("ad-paused"));
                }), a.l.D(a.h, "volumechange", function() {
                  a.h.muted ? a.i(new V("ad-muted")) : a.i(new V("ad-volume-changed"));
                }), xa(A, 4), xr(a), b.startTime && b.endTime && Infinity != b.endTime && b.startTime != b.endTime && (C = b.endTime - b.startTime, 0 < C && a.j.configure("playRangeEnd", C)), b.playoutLimit && !a.m && (a.m = new ec(function() {
                  a.ea();
                }).da(b.playoutLimit), a.j.configure("playRangeEnd", b.playoutLimit)), G(A, a.j.Kb(a.h), 6);
              case 6:
                return a.C.has(b) ? G(A, a.C.get(b), 10) : G(A, a.j.load(b.uri, null, b.mimeType || void 0), 8);
              case 10:
                return D = A.h, a.C.delete(b), D ? G(A, a.j.load(D), 8) : G(A, a.j.load(
                  b.uri,
                  null,
                  b.mimeType || void 0
                ), 8);
              case 8:
                a.h.play();
                F = (Date.now() - g) / 1e3;
                a.i(new V("ads-loaded", (/* @__PURE__ */ new Map()).set("loadTime", F)));
                a.B && a.g.play();
                b.overlay && (a.l.D(a.g, "seeking", function() {
                  var H = a.g.currentTime - b.startTime;
                  0.1 < Math.abs(H - a.h.currentTime) && (a.h.currentTime = H);
                }), a.l.D(a.g, "seeked", function() {
                  var H = a.g.currentTime;
                  (H < b.startTime || b.endTime && H > b.endTime) && a.ea();
                }));
                za(A, 0);
                break;
              case 4:
                B = Aa(A);
                if (!a.K) return A.return();
                w(B);
                I(A);
            }
          });
        }
        function Pr(a, b) {
          b.displayOnBackground && (a.g.style.zIndex = "1");
          if (null != b.currentVideo) {
            var c = b.currentVideo;
            a.g.style.transformOrigin = "top left";
            var d = true, e = [], f = c.topLeft.x / c.viewport.x * 100;
            0 < f && 100 >= f && (e.push("translateX(" + f + "%)"), d = false);
            f = c.topLeft.y / c.viewport.y * 100;
            0 < f && 100 >= f && (e.push("translateY(" + f + "%)"), d = false);
            f = c.size.x / c.viewport.x;
            1 > f && e.push("scaleX(" + f + ")");
            c = c.size.y / c.viewport.y;
            1 > f && e.push("scaleY(" + c + ")");
            e.length && (a.g.style.transform = e.join(" "));
            d && (a.g.style.transition = "transform 250ms");
          }
          a.A && (a.A.style.pointerEvents = "none", b.background && (a.A.style.background = b.background));
          a.F && (a.F.style.background = b.overlay ? "" : "rgb(0, 0, 0)");
        }
        function Hr(a, b) {
          if (!b || b.displayOnBackground) a.g.style.zIndex = "";
          b && null == b.currentVideo || (a.g.style.transformOrigin = "", a.g.style.transition = "", a.g.style.transform = "");
          a.A && (a.A.style.pointerEvents = "", !b || b.background) && (a.A.style.background = "");
          a.F && (a.F.style.background = "");
        }
        function Jr(a, b) {
          var c, d, e, f, g, h, k2, l, m, n, p, q, u, w, v, x, z, C, D, F, B, A, H, E, L, M, J, K, N, O, P, R, S, oa, Z, Fa, Ia, ka, ua, Ba, na, Ca;
          return Q(function(ra) {
            switch (ra.g) {
              case 1:
                c = [];
                if (!b) return ra.return(c);
                d = b.values.find(function(sa) {
                  return "X-ASSET-URI" == sa.key;
                });
                e = b.values.find(function(sa) {
                  return "X-ASSET-LIST" == sa.key;
                });
                if (!d && !e) return ra.return(c);
                f = null;
                if (g = b.values.find(function(sa) {
                  return "ID" == sa.key;
                })) f = g.data;
                h = null == f ? Math.floor(10 * b.startTime) / 10 : b.startTime;
                (k2 = b.endTime) && Infinity != b.endTime && "number" == typeof b.endTime && (k2 = null == f ? Math.floor(10 * b.endTime) / 10 : b.endTime);
                l = b.values.find(function(sa) {
                  return "X-RESTRICT" == sa.key;
                });
                n = m = true;
                l && l.data && (p = l.data, m = !p.includes("SKIP"), n = !p.includes("JUMP"));
                q = m ? 0 : null;
                if (u = b.values.find(function(sa) {
                  return "X-ENABLE-SKIP-AFTER" == sa.key;
                })) w = u.data, q = parseFloat(w), isNaN(q) && (q = m ? 0 : null);
                v = null;
                if (x = b.values.find(function(sa) {
                  return "X-ENABLE-SKIP-FOR" == sa.key;
                })) z = x.data, v = parseFloat(z), isNaN(q) && (v = null);
                C = null;
                if (D = b.values.find(function(sa) {
                  return "X-RESUME-OFFSET" == sa.key;
                })) F = D.data, C = parseFloat(F), isNaN(C) && (C = null);
                B = null;
                if (A = b.values.find(function(sa) {
                  return "X-PLAYOUT-LIMIT" == sa.key;
                })) H = A.data, B = parseFloat(H), isNaN(B) && (B = null);
                M = L = E = false;
                if (J = b.values.find(function(sa) {
                  return "CUE" == sa.key;
                })) K = J.data, E = K.includes("ONCE"), L = K.includes("PRE"), M = K.includes("POST");
                N = false;
                (O = b.values.find(function(sa) {
                  return "X-TIMELINE-OCCUPIES" == sa.key;
                })) ? (P = O.data, N = P.includes("RANGE")) : !D && a.H.U() && (N = !L && !M);
                if (d) {
                  R = d.data;
                  if (!R) return ra.return(c);
                  c.push({
                    id: f,
                    groupId: null,
                    startTime: h,
                    endTime: k2,
                    uri: R,
                    mimeType: null,
                    isSkippable: m,
                    skipOffset: q,
                    skipFor: v,
                    canJump: n,
                    resumeOffset: C,
                    playoutLimit: B,
                    once: E,
                    pre: L,
                    post: M,
                    timelineRange: N,
                    loop: false,
                    overlay: null,
                    displayOnBackground: false,
                    currentVideo: null,
                    background: null
                  });
                  ra.u(2);
                  break;
                }
                if (!e) {
                  ra.u(2);
                  break;
                }
                S = e.data;
                if (!S) return ra.return(c);
                xa(ra, 4);
                oa = { type: 11 };
                return G(ra, Mr(a, S, oa), 6);
              case 6:
                Z = ra.h;
                Fa = Gc(Z);
                Ia = JSON.parse(Fa);
                if (ka = Ia["SKIP-CONTROL"]) ua = ka["ENABLE-SKIP-AFTER"], "number" == typeof ua && (q = parseFloat(ua), isNaN(ua) && (q = m ? 0 : null)), Ba = ka["ENABLE-SKIP-FOR"], "number" == typeof Ba && (v = parseFloat(Ba), isNaN(Ba) && (v = null));
                for (na = 0; na < Ia.ASSETS.length; na++) Ca = Ia.ASSETS[na], Ca.URI && c.push({ id: f + "_shaka_asset_" + na, groupId: f, startTime: h, endTime: k2, uri: Ca.URI, mimeType: null, isSkippable: m, skipOffset: q, skipFor: v, canJump: n, resumeOffset: C, playoutLimit: B, once: E, pre: L, post: M, timelineRange: N, loop: false, overlay: null, displayOnBackground: false, currentVideo: null, background: null });
                za(ra, 2);
                break;
              case 4:
                Aa(ra);
              case 2:
                return ra.return(c);
            }
          });
        }
        function Er(a) {
          for (var b = [], c = t(a.G), d = c.next(), e = {}; !d.done; e = { Zb: void 0 }, d = c.next()) d = d.value, d.overlay || (e.Zb = { start: d.startTime, end: null }, d.pre ? (e.Zb.start = 0, e.Zb.end = null) : d.post ? (e.Zb.start = -1, e.Zb.end = null) : d.timelineRange && (e.Zb.end = d.endTime), b.find(/* @__PURE__ */ function(f) {
            return function(g) {
              return f.Zb.start == g.start && f.Zb.end == g.end;
            };
          }(e)) || b.push(e.Zb));
          a.i(new V("ad-cue-points-changed", (/* @__PURE__ */ new Map()).set("cuepoints", b)));
        }
        function xr(a) {
          a.j.configure(a.H.Tg());
          a.j.configure("ads.disableHLSInterstitial", true);
          a.j.configure("ads.disableDASHInterstitial", true);
          a.j.configure("playRangeEnd", Infinity);
          jh(a.H.xb(), a.j.xb());
        }
        function Mr(a, b, c) {
          var d, e, f;
          return Q(function(g) {
            if (1 == g.g) return d = kh([b], Rg()), e = a.H.xb().request(7, d, c), G(g, e.promise, 2);
            f = g.h;
            return g.return(f.data);
          });
        }
        function Ar(a) {
          return (a = a.mimeType) ? !a.startsWith("image/") && "text/html" !== a : true;
        }
        function Br(a, b) {
          if (!(a.L.has(b) || a.T && !a.T.allowPreloadOnDomElements)) {
            var c = function(f) {
              var g = document.createElement("link");
              g.rel = "preload";
              g.href = f;
              g.as = "image";
              document.head.appendChild(g);
              return g;
            }, d = [];
            if (b.background) {
              var e = b.background.match(/url\(('|")?([^'"()]+)('|")\)?/);
              e && d.push(c(e[2]));
            }
            b.mimeType.startsWith("image/") && d.push(c(b.uri));
            a.L.set(b, d);
          }
        }
        function Cr(a, b) {
          if (a.L.has(b)) {
            var c = a.L.get(b);
            c = t(c);
            for (var d = c.next(); !d.done; d = c.next()) d = d.value, d.parentNode.removeChild(d);
            a.L.delete(b);
          }
        }
        ;
        function Qr(a, b, c, d, e) {
          this.h = a;
          this.j = Ld(this.h.skipOffset);
          this.g = e;
          this.i = b;
          this.l = c;
          this.o = d;
          this.m = false;
        }
        r = Qr.prototype;
        r.needsSkipUI = function() {
          return true;
        };
        r.isClientRendering = function() {
          return false;
        };
        r.hasCustomClick = function() {
          return false;
        };
        r.isUsingAnotherMediaElement = function() {
          return false;
        };
        r.getDuration = function() {
          return this.h.durationInSeconds;
        };
        r.getMinSuggestedDuration = function() {
          return this.getDuration();
        };
        r.getRemainingTime = function() {
          return this.h.startTimeInSeconds + this.h.durationInSeconds - this.g.currentTime;
        };
        r.isPaused = function() {
          return this.g.paused;
        };
        r.isSkippable = function() {
          return "number" == typeof this.j ? true : false;
        };
        r.getTimeUntilSkippable = function() {
          if ("number" != typeof this.j) return this.getRemainingTime();
          var a = this.getRemainingTime() + this.j - this.getDuration();
          return Math.max(a, 0);
        };
        r.canSkipNow = function() {
          return 0 == this.getTimeUntilSkippable();
        };
        r.skip = function() {
          this.m = true;
          this.g.currentTime += this.getRemainingTime();
        };
        r.pause = function() {
          return this.g.pause();
        };
        r.play = function() {
          return this.g.play();
        };
        r.getVolume = function() {
          return this.g.volume;
        };
        r.setVolume = function(a) {
          this.g.volume = a;
        };
        r.isMuted = function() {
          return this.g.muted;
        };
        r.isLinear = function() {
          return this.o;
        };
        r.resize = function() {
        };
        r.setMuted = function(a) {
          this.g.muted = a;
        };
        r.getSequenceLength = function() {
          return this.l ? this.l : 1;
        };
        r.getPositionInSequence = function() {
          return this.i ? this.i : 1;
        };
        r.getTitle = function() {
          return this.h.adTitle;
        };
        r.getDescription = function() {
          return "";
        };
        r.getVastMediaBitrate = function() {
          return 0;
        };
        r.getVastMediaHeight = function() {
          return 0;
        };
        r.getVastMediaWidth = function() {
          return 0;
        };
        r.getAdId = function() {
          return this.h.adId;
        };
        r.getCreativeAdId = function() {
          return this.h.creativeId;
        };
        r.getAdvertiserName = function() {
          return "";
        };
        r.getMediaUrl = function() {
          return null;
        };
        r.getTimeOffset = function() {
          return 0;
        };
        r.getPodIndex = function() {
          return 0;
        };
        r.release = function() {
          this.l = this.i = this.g = this.h = null;
        };
        T("shaka.ads.MediaTailorAd", Qr);
        Qr.prototype.release = Qr.prototype.release;
        Qr.prototype.getPodIndex = Qr.prototype.getPodIndex;
        Qr.prototype.getTimeOffset = Qr.prototype.getTimeOffset;
        Qr.prototype.getMediaUrl = Qr.prototype.getMediaUrl;
        Qr.prototype.getAdvertiserName = Qr.prototype.getAdvertiserName;
        Qr.prototype.getCreativeAdId = Qr.prototype.getCreativeAdId;
        Qr.prototype.getAdId = Qr.prototype.getAdId;
        Qr.prototype.getVastMediaWidth = Qr.prototype.getVastMediaWidth;
        Qr.prototype.getVastMediaHeight = Qr.prototype.getVastMediaHeight;
        Qr.prototype.getVastMediaBitrate = Qr.prototype.getVastMediaBitrate;
        Qr.prototype.getDescription = Qr.prototype.getDescription;
        Qr.prototype.getTitle = Qr.prototype.getTitle;
        Qr.prototype.getPositionInSequence = Qr.prototype.getPositionInSequence;
        Qr.prototype.getSequenceLength = Qr.prototype.getSequenceLength;
        Qr.prototype.setMuted = Qr.prototype.setMuted;
        Qr.prototype.resize = Qr.prototype.resize;
        Qr.prototype.isLinear = Qr.prototype.isLinear;
        Qr.prototype.isMuted = Qr.prototype.isMuted;
        Qr.prototype.setVolume = Qr.prototype.setVolume;
        Qr.prototype.getVolume = Qr.prototype.getVolume;
        Qr.prototype.play = Qr.prototype.play;
        Qr.prototype.pause = Qr.prototype.pause;
        Qr.prototype.skip = Qr.prototype.skip;
        Qr.prototype.canSkipNow = Qr.prototype.canSkipNow;
        Qr.prototype.getTimeUntilSkippable = Qr.prototype.getTimeUntilSkippable;
        Qr.prototype.isSkippable = Qr.prototype.isSkippable;
        Qr.prototype.isPaused = Qr.prototype.isPaused;
        Qr.prototype.getRemainingTime = Qr.prototype.getRemainingTime;
        Qr.prototype.getMinSuggestedDuration = Qr.prototype.getMinSuggestedDuration;
        Qr.prototype.getDuration = Qr.prototype.getDuration;
        Qr.prototype.isUsingAnotherMediaElement = Qr.prototype.isUsingAnotherMediaElement;
        Qr.prototype.hasCustomClick = Qr.prototype.hasCustomClick;
        Qr.prototype.isClientRendering = Qr.prototype.isClientRendering;
        Qr.prototype.needsSkipUI = Qr.prototype.needsSkipUI;
        function Rr(a, b, c, d) {
          this.B = a;
          this.K = b;
          this.h = c;
          this.l = null;
          this.P = NaN;
          this.i = d;
          this.I = false;
          this.A = null;
          this.j = [];
          this.M = [];
          this.L = this.C = this.g = null;
          this.F = /* @__PURE__ */ new Map();
          this.m = [];
          this.s = [];
          this.G = "";
          this.O = true;
          this.H = "";
          this.o = new lb();
        }
        Rr.prototype.stop = function() {
          for (var a = t(this.m), b = a.next(); !b.done; b = a.next()) b = b.value, this.o.Ja(b.target, b.type, b.listener);
          Sr(this);
          this.m = [];
          this.s = [];
          this.G = "";
          this.O = true;
          this.H = "";
          this.A = null;
          this.j = [];
          this.M = [];
          this.F.clear();
        };
        Rr.prototype.release = function() {
          this.stop();
          this.o && this.o.release();
        };
        Rr.prototype.onManifestUpdated = function(a) {
          this.I = a;
          "" != this.G && (Tr(this, this.G, this.O), this.O = false);
        };
        Rr.prototype.getCuePoints = function() {
          for (var a = [], b = t(this.j), c = b.next(); !c.done; c = b.next()) {
            c = t(c.value.ads);
            for (var d = c.next(); !d.done; d = c.next()) d = d.value, a.push({ start: d.startTimeInSeconds, end: d.startTimeInSeconds + d.durationInSeconds });
          }
          return a;
        };
        function Ur(a, b, c) {
          var d, e, f, g, h, k2, l, m, n, p, q, u;
          Q(function(w) {
            if (1 == w.g) return d = { type: 7 }, e = kh([b], Rg()), e.method = "POST", c && (f = JSON.stringify(c), e.body = Kc(f)), g = a.K.request(7, e, d), xa(w, 2), G(w, g.promise, 4);
            if (2 != w.g) {
              h = w.h;
              k2 = Gc(h.data);
              l = JSON.parse(k2);
              if (l.manifestUrl && l.trackingUrl) m = new yb(b), n = new yb(l.trackingUrl), a.G = m.resolve(n).toString(), p = Date.now() / 1e3, q = p - a.P, a.i(new V("ads-loaded", (/* @__PURE__ */ new Map()).set("loadTime", q))), u = new yb(l.manifestUrl), a.l.resolve(m.resolve(u).toString()), a.l = null;
              else throw Error("Insufficient data from MediaTailor.");
              return za(w, 0);
            }
            Aa(w);
            if (!a.H.length) return a.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."), a.l = null, w.return();
            a.l.resolve(a.H);
            a.l = null;
            I(w);
          });
        }
        function Tr(a, b, c) {
          var d, e, f, g, h, k2, l, m, n, p, q, u, w, v, x, z;
          Q(function(C) {
            if (1 == C.g) return d = { type: 8 }, e = kh([b], Rg()), f = a.K.request(7, e, d), xa(C, 2), G(C, f.promise, 4);
            if (2 != C.g) {
              g = C.h;
              h = [];
              k2 = Gc(g.data);
              l = JSON.parse(k2);
              if (0 < l.avails.length) {
                if (JSON.stringify(a.j) != JSON.stringify(l.avails)) {
                  a.j = l.avails;
                  m = t(a.j);
                  for (n = m.next(); !n.done; n = m.next()) for (p = n.value, q = t(p.nonLinearAdsList), u = q.next(); !u.done; u = q.next()) for (w = u.value, v = t(w.nonLinearAdList), x = v.next(); !x.done; x = v.next()) z = x.value, Vr(a, z);
                  h = a.getCuePoints();
                  a.i(new V("ad-cue-points-changed", (/* @__PURE__ */ new Map()).set("cuepoints", h)));
                }
              } else a.j.length && a.i(new V("ad-cue-points-changed", (/* @__PURE__ */ new Map()).set("cuepoints", h))), Sr(a), a.j = [];
              c && (a.I || 0 < h.length) && Wr(a);
              return za(C, 0);
            }
            Aa(C);
            I(C);
          });
        }
        function Vr(a, b) {
          var c, d, e, f, g, h, k2, l, m;
          Q(function(n) {
            if (1 == n.g) {
              if (!b.staticResource) return n.return();
              c = Xr(b);
              if (d = a.F.get(c)) return n.return();
              e = { type: 9 };
              f = kh([b.staticResource], Rg());
              g = a.K.request(7, f, e);
              xa(n, 2);
              a.F.set(c, []);
              return G(n, g.promise, 4);
            }
            if (2 != n.g) return h = n.h, k2 = Gc(h.data), l = JSON.parse(k2), m = l.apps, a.F.set(c, m), za(n, 0);
            Aa(n);
            a.F.delete(c);
            I(n);
          });
        }
        function Xr(a) {
          return [a.adId, a.adParameters, a.adSystem, a.adTitle, a.creativeAdId, a.creativeId, a.creativeSequence, a.height, a.width, a.staticResource].join("");
        }
        function Wr(a) {
          Yr(a);
          a.I || (Zr(a), a.o.D(a.h, "seeked", function() {
            Zr(a);
          }), a.o.D(a.h, "ended", function() {
            Sr(a);
          }));
          a.o.D(a.h, "timeupdate", function() {
            Yr(a);
          });
        }
        function Zr(a) {
          var b = a.h.currentTime;
          if (0 != b && null == a.A) {
            for (var c, d, e = t(a.j), f = e.next(); !f.done; f = e.next()) {
              f = f.value;
              for (var g = t(f.ads), h = g.next(); !h.done; h = g.next()) if (h = h.value, !d) h.startTimeInSeconds < b && (d = h, c = f);
              else if (h.startTimeInSeconds < b && h.startTimeInSeconds > d.startTimeInSeconds + d.durationInSeconds) {
                d = h;
                c = f;
                break;
              }
            }
            c && d && !a.M.includes(d.adId) && (a.A = b, a.h.currentTime = c.startTimeInSeconds);
          }
        }
        function Yr(a) {
          if (a.h.duration && (a.g || a.j.length)) {
            var b = a.h.currentTime, c = false;
            if (a.g) {
              c = true;
              var d = a.C, e = d.startTimeInSeconds + 0.5 * d.durationInSeconds, f = d.startTimeInSeconds + 0.75 * d.durationInSeconds;
              b >= d.startTimeInSeconds + 0.25 * d.durationInSeconds && !a.s.includes("firstQuartile") ? (a.s.push("firstQuartile"), $r(a, "firstQuartile")) : b >= e && !a.s.includes("midpoint") ? (a.s.push("midpoint"), $r(a, "midpoint")) : b >= f && !a.s.includes("thirdQuartile") && (a.s.push("thirdQuartile"), $r(a, "thirdQuartile"));
              d = a.g.getRemainingTime();
              e = a.g.getDuration();
              a.g.canSkipNow() && 0 < d && 0 < e && $r(a, "skipStateChanged");
              0 < e && (0 >= d || d > e) && Sr(a);
            }
            if (!a.g || !a.g.isLinear()) {
              a: for (d = t(a.j), e = d.next(); !e.done; e = d.next()) {
                e = e.value;
                if (a.g && a.g.isLinear()) break;
                for (f = 0; f < e.ads.length; f++) {
                  var g = e.ads[f], h = g.startTimeInSeconds + g.durationInSeconds;
                  if (g.startTimeInSeconds <= b && h > b) {
                    if (a.M.includes(g.adId)) {
                      if (a.h.ended) continue;
                      a.h.currentTime = h;
                      break a;
                    }
                    Sr(a);
                    a.L = e;
                    a.g = new Qr(g, f + 1, e.ads.length, true, a.h);
                    a.C = g;
                    0 === f && $r(a, "breakStart");
                    as(a);
                    break;
                  }
                }
              }
              if (!a.g) for (d = t(a.j), e = d.next(); !e.done; e = d.next()) {
                e = e.value;
                if (a.g) break;
                for (f = 0; f < e.nonLinearAdsList.length; f++) if (g = e.nonLinearAdsList[f], g.nonLinearAdList.length) {
                  h = e.startTimeInSeconds;
                  var k2 = a.F.get(Xr(g.nonLinearAdList[0]));
                  if (h <= b && k2 && k2.length) {
                    Sr(a);
                    h = a;
                    k2 = t(k2);
                    for (var l = k2.next(); !l.done; l = k2.next()) if (l = l.value, l.data.source.length) {
                      var m = document.createElement("img");
                      m.src = l.data.source[0].url;
                      m.style.top = (l.placeholder.top || 0) + "%";
                      m.style.height = 100 - (l.placeholder.top || 0) + "%";
                      m.style.left = (l.placeholder.left || 0) + "%";
                      m.style.maxWidth = 100 - (l.placeholder.left || 0) + "%";
                      m.style.objectFit = "contain";
                      m.style.position = "absolute";
                      h.B.appendChild(m);
                    }
                    a.L = e;
                    a.g = new Qr(g, f + 1, e.ads.length, false, a.h);
                    a.C = g;
                    0 === f && $r(a, "breakStart");
                    as(a);
                    break;
                  }
                }
              }
              c && !a.g && (b = a.h.currentTime, a.A && a.A > b && (a.h.currentTime = a.A), a.A = null);
            }
          }
        }
        function Sr(a) {
          if (a.g) {
            for (; a.B.lastChild; ) a.B.removeChild(a.B.firstChild);
            a.I || a.M.push(a.C.adId);
            var b = a.g.m;
            (void 0 === b ? 0 : b) ? $r(a, "skip") : $r(a, "complete");
            b = t(a.m);
            for (var c = b.next(); !c.done; c = b.next()) c = c.value, a.o.Ja(c.target, c.type, c.listener);
            a.m = [];
            a.s = [];
            b = a.g.getPositionInSequence();
            c = a.g.getSequenceLength();
            b === c && $r(a, "breakEnd");
            a.g = null;
            a.C = null;
            a.L = null;
          }
        }
        function as(a) {
          var b = false;
          a.h.paused ? b = true : ($r(a, "impression"), $r(a, "start"));
          a.m.push({ target: a.h, type: "volumechange", listener: function() {
            a.h.muted && $r(a, "mute");
          } });
          a.m.push({ target: a.h, type: "volumechange", listener: function() {
            a.h.muted || $r(a, "unmute");
          } });
          a.m.push({ target: a.h, type: "play", listener: function() {
            b ? ($r(a, "impression"), $r(a, "start"), b = false) : $r(a, "resume");
          } });
          a.m.push({ target: a.h, type: "pause", listener: function() {
            $r(a, "pause");
          } });
          for (var c = t(a.m), d = c.next(); !d.done; d = c.next()) d = d.value, a.o.D(
            d.target,
            d.type,
            d.listener
          );
        }
        function $r(a, b) {
          var c = a.C.trackingEvents.find(function(f) {
            return f.eventType == b;
          });
          c || (c = a.L.adBreakTrackingEvents.find(function(f) {
            return f.eventType == b;
          }));
          if (c) {
            var d = { type: 10 };
            c = t(c.beaconUrls);
            for (var e = c.next(); !e.done; e = c.next()) (e = e.value) && "" != e && (e = kh([e], Rg()), e.method = "POST", a.K.request(7, e, d));
          }
          switch (b) {
            case "impression":
              a.i(new V("ad-impression"));
              break;
            case "start":
              a.i(new V("ad-started", (/* @__PURE__ */ new Map()).set("ad", a.g)));
              break;
            case "mute":
              a.i(new V("ad-muted"));
              break;
            case "unmute":
              a.i(new V("ad-volume-changed"));
              break;
            case "resume":
              a.i(new V("ad-resumed"));
              break;
            case "pause":
              a.i(new V("ad-paused"));
              break;
            case "firstQuartile":
              a.i(new V("ad-first-quartile"));
              break;
            case "midpoint":
              a.i(new V("ad-midpoint"));
              break;
            case "thirdQuartile":
              a.i(new V("ad-third-quartile"));
              break;
            case "complete":
              a.i(new V("ad-complete"));
              a.i(new V("ad-stopped"));
              break;
            case "skip":
              a.i(new V("ad-skipped"));
              a.i(new V("ad-stopped"));
              break;
            case "breakStart":
              a.B.setAttribute("ad-active", "true");
              break;
            case "breakEnd":
              a.B.removeAttribute("ad-active");
              break;
            case "skipStateChanged":
              a.i(new V("ad-skip-state-changed"));
          }
        }
        ;
        function bs(a, b) {
          this.g = a;
          this.i = null;
          this.h = b;
        }
        r = bs.prototype;
        r.needsSkipUI = function() {
          return true;
        };
        r.isClientRendering = function() {
          return false;
        };
        r.hasCustomClick = function() {
          return true;
        };
        r.isUsingAnotherMediaElement = function() {
          return false;
        };
        r.getDuration = function() {
          return this.i ? this.i.duration : -1;
        };
        r.getMinSuggestedDuration = function() {
          return this.getDuration();
        };
        r.getRemainingTime = function() {
          return this.i ? this.i.duration - this.i.currentTime : -1;
        };
        r.isPaused = function() {
          return this.h.paused;
        };
        r.isSkippable = function() {
          return this.g.isSkippable();
        };
        r.getTimeUntilSkippable = function() {
          var a = this.g.getSkipTimeOffset();
          a = this.getRemainingTime() - a;
          return Math.max(a, 0);
        };
        r.canSkipNow = function() {
          return 0 == this.getTimeUntilSkippable();
        };
        r.skip = function() {
          this.h.currentTime += this.getRemainingTime();
        };
        r.pause = function() {
          return this.h.pause();
        };
        r.play = function() {
          return this.h.play();
        };
        r.getVolume = function() {
          return this.h.volume;
        };
        r.setVolume = function(a) {
          this.h.volume = a;
        };
        r.isMuted = function() {
          return this.h.muted;
        };
        r.isLinear = function() {
          return true;
        };
        r.resize = function() {
        };
        r.setMuted = function(a) {
          this.h.muted = a;
        };
        r.getSequenceLength = function() {
          var a = this.g.getAdPodInfo();
          return null == a ? 1 : a.getTotalAds();
        };
        r.getPositionInSequence = function() {
          var a = this.g.getAdPodInfo();
          return null == a ? 1 : a.getAdPosition();
        };
        r.getTitle = function() {
          return this.g.getTitle();
        };
        r.getDescription = function() {
          return this.g.getDescription();
        };
        r.getVastMediaBitrate = function() {
          return 0;
        };
        r.getVastMediaHeight = function() {
          return this.g.getVastMediaHeight();
        };
        r.getVastMediaWidth = function() {
          return this.g.getVastMediaWidth();
        };
        r.getAdId = function() {
          return this.g.getAdId();
        };
        r.getCreativeAdId = function() {
          return this.g.getCreativeAdId();
        };
        r.getAdvertiserName = function() {
          return this.g.getAdvertiserName();
        };
        r.getMediaUrl = function() {
          return null;
        };
        r.getTimeOffset = function() {
          var a = this.g.getAdPodInfo();
          return null == a ? 0 : a.getTimeOffset();
        };
        r.getPodIndex = function() {
          var a = this.g.getAdPodInfo();
          return null == a ? 0 : a.getPodIndex();
        };
        r.release = function() {
          this.h = this.i = this.g = null;
        };
        T("shaka.ads.ServerSideAd", bs);
        bs.prototype.release = bs.prototype.release;
        bs.prototype.getPodIndex = bs.prototype.getPodIndex;
        bs.prototype.getTimeOffset = bs.prototype.getTimeOffset;
        bs.prototype.getMediaUrl = bs.prototype.getMediaUrl;
        bs.prototype.getAdvertiserName = bs.prototype.getAdvertiserName;
        bs.prototype.getCreativeAdId = bs.prototype.getCreativeAdId;
        bs.prototype.getAdId = bs.prototype.getAdId;
        bs.prototype.getVastMediaWidth = bs.prototype.getVastMediaWidth;
        bs.prototype.getVastMediaHeight = bs.prototype.getVastMediaHeight;
        bs.prototype.getVastMediaBitrate = bs.prototype.getVastMediaBitrate;
        bs.prototype.getDescription = bs.prototype.getDescription;
        bs.prototype.getTitle = bs.prototype.getTitle;
        bs.prototype.getPositionInSequence = bs.prototype.getPositionInSequence;
        bs.prototype.getSequenceLength = bs.prototype.getSequenceLength;
        bs.prototype.setMuted = bs.prototype.setMuted;
        bs.prototype.resize = bs.prototype.resize;
        bs.prototype.isLinear = bs.prototype.isLinear;
        bs.prototype.isMuted = bs.prototype.isMuted;
        bs.prototype.setVolume = bs.prototype.setVolume;
        bs.prototype.getVolume = bs.prototype.getVolume;
        bs.prototype.play = bs.prototype.play;
        bs.prototype.pause = bs.prototype.pause;
        bs.prototype.skip = bs.prototype.skip;
        bs.prototype.canSkipNow = bs.prototype.canSkipNow;
        bs.prototype.getTimeUntilSkippable = bs.prototype.getTimeUntilSkippable;
        bs.prototype.isSkippable = bs.prototype.isSkippable;
        bs.prototype.isPaused = bs.prototype.isPaused;
        bs.prototype.getRemainingTime = bs.prototype.getRemainingTime;
        bs.prototype.getMinSuggestedDuration = bs.prototype.getMinSuggestedDuration;
        bs.prototype.getDuration = bs.prototype.getDuration;
        bs.prototype.isUsingAnotherMediaElement = bs.prototype.isUsingAnotherMediaElement;
        bs.prototype.hasCustomClick = bs.prototype.hasCustomClick;
        bs.prototype.isClientRendering = bs.prototype.isClientRendering;
        bs.prototype.needsSkipUI = bs.prototype.needsSkipUI;
        function cs(a, b, c, d) {
          var e = this;
          this.s = a;
          this.l = b;
          this.j = null;
          this.F = NaN;
          this.i = d;
          this.G = false;
          this.A = this.m = this.o = null;
          this.B = "";
          this.C = [];
          this.h = new lb();
          a = new google.ima.dai.api.UiSettings();
          a.setLocale(c);
          this.g = new google.ima.dai.api.StreamManager(this.l, this.s, a);
          this.i(new V("ima-stream-manager-loaded", (/* @__PURE__ */ new Map()).set("imaStreamManager", this.g)));
          this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.LOADED, function(f) {
            ds(e, f);
          });
          this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.ERROR, function() {
            e.B.length ? e.j.resolve(e.B) : e.j.reject("IMA Stream request returned an error and there was no backup asset uri provided.");
            e.j = null;
          });
          this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED, function() {
          });
          this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.STARTED, function(f) {
            f = f.getAd();
            e.m = new bs(f, e.l);
            e.A && (e.m.i = e.A);
            e.i(new V("ad-started", (/* @__PURE__ */ new Map()).set("ad", e.m)));
            e.s.setAttribute("ad-active", "true");
          });
          this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED, function() {
            e.s.removeAttribute("ad-active");
            var f = e.l.currentTime;
            e.o && e.o > f && (e.l.currentTime = e.o, e.o = null);
          });
          this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.AD_PROGRESS, function(f) {
            e.A = f.getStreamData().adProgressData;
            e.m && (e.m.i = e.A);
          });
          this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE, function() {
            e.i(new V("ad-first-quartile"));
          });
          this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.MIDPOINT, function() {
            e.i(new V("ad-midpoint"));
          });
          this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE, function() {
            e.i(new V("ad-third-quartile"));
          });
          this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.COMPLETE, function() {
            e.i(new V("ad-complete"));
            e.i(new V("ad-stopped"));
            e.s.removeAttribute("ad-active");
            e.m = null;
          });
          this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.SKIPPED, function() {
            e.i(new V("ad-skipped"));
            e.i(new V("ad-stopped"));
          });
          this.h.D(this.g, google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED, function(f) {
            var g = f.getStreamData();
            f = [];
            g = t(g.cuepoints);
            for (var h = g.next(); !h.done; h = g.next()) h = h.value, f.push({ start: h.start, end: h.end });
            e.C = f;
            e.i(new V("ad-cue-points-changed", (/* @__PURE__ */ new Map()).set("cuepoints", f)));
          });
        }
        r = cs.prototype;
        r.configure = function() {
        };
        r.stop = function() {
          this.B = "";
          this.o = null;
          this.C = [];
        };
        r.release = function() {
          this.stop();
          this.h && this.h.release();
        };
        r.onCueMetadataChange = function(a) {
          if (a.key && a.data) {
            var b = {};
            b[a.key] = a.data;
            this.g.onTimedMetadata(b);
          }
        };
        r.getCuePoints = function() {
          return this.C;
        };
        function ds(a, b) {
          a.i(new V("ads-loaded", (/* @__PURE__ */ new Map()).set("loadTime", Date.now() / 1e3 - a.F)));
          b = b.getStreamData().url;
          a.j.resolve(b);
          a.j = null;
          a.G || a.h.D(a.l, "seeked", function() {
            var c = a.l.currentTime;
            if (0 != c) {
              a.g.streamTimeForContentTime(c);
              var d = a.g.previousCuePointForStreamTime(c);
              d && !d.played && (a.o = c, a.l.currentTime = d.start);
            }
          });
        }
        ;
        function Y() {
          ch.call(this);
          this.h = this.i = this.j = this.g = null;
          this.m = new hr();
          this.o = navigator.language;
          this.l = null;
        }
        qa(Y, ch);
        r = Y.prototype;
        r.setLocale = function(a) {
          this.o = a;
        };
        r.configure = function(a) {
          this.l = a;
          this.g && this.g.configure(this.l);
          this.j && this.j.configure(this.l);
          this.h && this.h.configure(this.l);
        };
        r.initInterstitial = function(a, b, c) {
          var d = this;
          this.g && this.g.release();
          this.g = new wr(a, b, c, function(e) {
            return es(d, e);
          });
          this.g.configure(this.l);
        };
        r.initClientSide = function(a, b, c) {
          var d = this;
          if (!window2.google || !google.ima || !google.ima.AdsLoader) throw new U(2, 10, 1e4);
          this.j && this.j.release();
          this.j = new nr(a, b, this.o, c, function(e) {
            return es(d, e);
          });
          this.j.configure(this.l);
        };
        r.release = function() {
          this.g && (this.g.release(), this.g = null);
          this.j && (this.j.release(), this.j = null);
          this.i && (this.i.release(), this.i = null);
          this.h && (this.h.release(), this.h = null);
          ch.prototype.release.call(this);
        };
        r.onAssetUnload = function() {
          this.g && this.g.stop();
          this.j && this.j.stop();
          this.i && this.i.stop();
          this.h && this.h.stop();
          this.dispatchEvent(new V("ad-stopped"));
          this.dispatchEvent(new V("ad-content-attach-requested"));
          this.m = new hr();
        };
        r.requestClientSideAds = function(a) {
          if (!this.j) throw new U(1, 10, 10001);
          var b = this.j;
          b.g && b.g.destroy();
          b.m && b.m.contentComplete();
          b.G = Date.now() / 1e3;
          b.m.requestAds(a);
        };
        r.updateClientSideAdsRenderingSettings = function(a) {
          if (!this.j) throw new U(1, 10, 10001);
          var b = this.j;
          b.B = a;
          b.g && b.g.updateAdsRenderingSettings(b.B);
        };
        r.initMediaTailor = function(a, b, c) {
          var d = this;
          this.i && this.i.release();
          this.i = new Rr(a, b, c, function(e) {
            return es(d, e);
          });
        };
        r.requestMediaTailorStream = function(a, b, c) {
          if (!this.i) throw new U(1, 10, 10005);
          var d = this.i;
          c = void 0 === c ? "" : c;
          d.l ? a = Promise.reject(new U(1, 10, 10004)) : (d.l = new Tg(), Ur(d, a, b), d.H = c || "", d.P = Date.now() / 1e3, a = d.l);
          return a;
        };
        r.addMediaTailorTrackingUrl = function(a) {
          if (!this.i) throw new U(1, 10, 10005);
          var b = this.i;
          b.G = a;
          b.i(new V("ads-loaded", (/* @__PURE__ */ new Map()).set("loadTime", 0)));
        };
        r.initServerSide = function(a, b) {
          var c = this;
          if (!window2.google || !google.ima || !google.ima.dai) throw new U(2, 10, 10002);
          this.h && this.h.release();
          this.h = new cs(a, b, this.o, function(d) {
            return es(c, d);
          });
          this.h.configure(this.l);
        };
        r.requestServerSideStream = function(a, b) {
          b = void 0 === b ? "" : b;
          if (!this.h) throw new U(1, 10, 10003);
          a.adTagParameters || (a.adTagParameters = {});
          var c = a.adTagParameters;
          (c.mpt || c.mpv) && db('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.');
          a.adTagParameters.mpt = "shaka-player";
          a.adTagParameters.mpv = "v4.14.5";
          c = this.h;
          c.j ? a = Promise.reject(new U(1, 10, 10004)) : (a instanceof google.ima.dai.api.LiveStreamRequest && (c.G = true), c.j = new Tg(), c.g.requestStream(a), c.B = b || "", c.F = Date.now() / 1e3, a = c.j);
          return a;
        };
        r.replaceServerSideAdTagParameters = function(a) {
          if (!this.h) throw new U(1, 10, 10003);
          (a.mpt || a.mpv) && db('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.');
          a.mpt = "Shaka Player";
          a.mpv = "v4.14.5";
          this.h.g.replaceAdTagParameters(a);
        };
        r.getServerSideCuePoints = function() {
          sb("AdManager.getServerSideCuePoints", "Please use getCuePoints function.");
          return this.getCuePoints();
        };
        r.getCuePoints = function() {
          var a = [];
          this.h && (a = a.concat(this.h.getCuePoints()));
          this.i && (a = a.concat(this.i.getCuePoints()));
          return a;
        };
        r.getStats = function() {
          var a = this.m;
          return { loadTimes: a.g, averageLoadTime: ir(a), started: a.h, overlayAds: a.j, playedCompletely: a.l, skipped: a.m, errors: a.i };
        };
        r.onManifestUpdated = function(a) {
          if (this.i) this.i.onManifestUpdated(a);
        };
        r.onDashTimedMetadata = function(a) {
          this.h && "urn:google:dai:2018" == a.schemeIdUri && this.h.g.processMetadata(a.schemeIdUri, a.eventNode ? a.eventNode.attributes.messageData : null, a.startTime);
        };
        r.onHlsTimedMetadata = function(a, b) {
          this.h && this.h.g.processMetadata("ID3", a.data, b);
        };
        r.onCueMetadataChange = function(a) {
          if (this.h) this.h.onCueMetadataChange(a);
        };
        r.onHLSInterstitialMetadata = function(a, b, c) {
          this.l && this.l.disableHLSInterstitial || (this.g || this.initInterstitial(null, a, b), this.g && Ir(this.g, c));
        };
        r.onDASHInterstitialMetadata = function(a, b, c) {
          if (!this.l || !this.l.disableDASHInterstitial) {
            var d = c.schemeIdUri;
            if ("urn:mpeg:dash:event:alternativeMPD:insert:2025" == d || "urn:mpeg:dash:event:alternativeMPD:replace:2025" == d) {
              if (this.g || this.initInterstitial(null, a, b), this.g && (a = this.g, b = "urn:mpeg:dash:event:alternativeMPD:replace:2025" == c.schemeIdUri, d = "urn:mpeg:dash:event:alternativeMPD:insert:2025" == c.schemeIdUri, b || d)) {
                for (var e = c.startTime, f = c.endTime, g = null, h = 0, k2, l = t(c.eventNode.children), m = l.next(); !m.done; m = l.next()) if (m = m.value, "AlternativeMPD" == m.tagName) {
                  if (m = m.attributes.uri) {
                    k2 = m;
                    break;
                  }
                } else if ("InsertPresentation" == m.tagName || "ReplacePresentation" == m.tagName) {
                  var n = m.attributes.url;
                  if (n) {
                    k2 = n;
                    (l = ge(m, "maxDuration", me)) && (g = l / c.timescale);
                    (l = ge(m, "returnOffset", me)) && (h = l / c.timescale);
                    b && h && (f = e + h);
                    break;
                  }
                }
                k2 && Kr(a, [{ id: c.id, groupId: null, startTime: e, endTime: f, uri: k2, mimeType: null, isSkippable: false, skipOffset: null, skipFor: null, canJump: true, resumeOffset: d ? h : null, playoutLimit: g, once: false, pre: false, post: false, timelineRange: b && !d, loop: false, overlay: null, displayOnBackground: false, currentVideo: null, background: null }]);
              }
            } else ("urn:mpeg:dash:event:2012" == d || "urn:scte:dash:scte214-events" == d) && c.eventNode && ae(c.eventNode, "OverlayEvent") && (this.g || this.initInterstitial(null, a, b), this.g && Lr(this.g, c));
          }
        };
        r.addCustomInterstitial = function(a) {
          if (!this.g) throw new U(1, 10, 10006);
          Kr(this.g, [a]);
        };
        r.addAdUrlInterstitial = function(a) {
          if (!this.g) throw new U(1, 10, 10006);
          return this.g.addAdUrlInterstitial(a);
        };
        r.getInterstitialPlayer = function() {
          if (!this.g) throw new U(1, 10, 10006);
          return this.g.Hf();
        };
        function es(a, b) {
          if (b && b.type) switch (b.type) {
            case "ads-loaded":
              a.m.g.push(b.loadTime);
              break;
            case "ad-started":
              a.m.h++;
              var c = b.ad;
              c && !c.isLinear() && a.m.j++;
              break;
            case "ad-complete":
              a.m.l++;
              break;
            case "ad-skipped":
              a.m.m++;
              break;
            case "ad-error":
              a.m.i++;
          }
          a.dispatchEvent(b);
        }
        T("shaka.ads.AdManager", Y);
        Y.prototype.getInterstitialPlayer = Y.prototype.getInterstitialPlayer;
        Y.prototype.addAdUrlInterstitial = Y.prototype.addAdUrlInterstitial;
        Y.prototype.addCustomInterstitial = Y.prototype.addCustomInterstitial;
        Y.prototype.onDASHInterstitialMetadata = Y.prototype.onDASHInterstitialMetadata;
        Y.prototype.onHLSInterstitialMetadata = Y.prototype.onHLSInterstitialMetadata;
        Y.prototype.onCueMetadataChange = Y.prototype.onCueMetadataChange;
        Y.prototype.onHlsTimedMetadata = Y.prototype.onHlsTimedMetadata;
        Y.prototype.onDashTimedMetadata = Y.prototype.onDashTimedMetadata;
        Y.prototype.onManifestUpdated = Y.prototype.onManifestUpdated;
        Y.prototype.getStats = Y.prototype.getStats;
        Y.prototype.getCuePoints = Y.prototype.getCuePoints;
        Y.prototype.getServerSideCuePoints = Y.prototype.getServerSideCuePoints;
        Y.prototype.replaceServerSideAdTagParameters = Y.prototype.replaceServerSideAdTagParameters;
        Y.prototype.requestServerSideStream = Y.prototype.requestServerSideStream;
        Y.prototype.initServerSide = Y.prototype.initServerSide;
        Y.prototype.addMediaTailorTrackingUrl = Y.prototype.addMediaTailorTrackingUrl;
        Y.prototype.requestMediaTailorStream = Y.prototype.requestMediaTailorStream;
        Y.prototype.initMediaTailor = Y.prototype.initMediaTailor;
        Y.prototype.updateClientSideAdsRenderingSettings = Y.prototype.updateClientSideAdsRenderingSettings;
        Y.prototype.requestClientSideAds = Y.prototype.requestClientSideAds;
        Y.prototype.onAssetUnload = Y.prototype.onAssetUnload;
        Y.prototype.release = Y.prototype.release;
        Y.prototype.initClientSide = Y.prototype.initClientSide;
        Y.prototype.initInterstitial = Y.prototype.initInterstitial;
        Y.prototype.configure = Y.prototype.configure;
        Y.prototype.setLocale = Y.prototype.setLocale;
        Y.ADS_LOADED = "ads-loaded";
        Y.AD_STARTED = "ad-started";
        Y.AD_FIRST_QUARTILE = "ad-first-quartile";
        Y.AD_MIDPOINT = "ad-midpoint";
        Y.AD_THIRD_QUARTILE = "ad-third-quartile";
        Y.AD_COMPLETE = "ad-complete";
        Y.AD_STOPPED = "ad-stopped";
        Y.AD_SKIPPED = "ad-skipped";
        Y.AD_VOLUME_CHANGED = "ad-volume-changed";
        Y.AD_MUTED = "ad-muted";
        Y.AD_PAUSED = "ad-paused";
        Y.AD_RESUMED = "ad-resumed";
        Y.AD_SKIP_STATE_CHANGED = "ad-skip-state-changed";
        Y.CUEPOINTS_CHANGED = "ad-cue-points-changed";
        Y.IMA_AD_MANAGER_LOADED = "ima-ad-manager-loaded";
        Y.IMA_STREAM_MANAGER_LOADED = "ima-stream-manager-loaded";
        Y.AD_CLICKED = "ad-clicked";
        Y.AD_PROGRESS = "ad-progress";
        Y.AD_BUFFERING = "ad-buffering";
        Y.AD_IMPRESSION = "ad-impression";
        Y.AD_DURATION_CHANGED = "ad-duration-changed";
        Y.AD_CLOSED = "ad-closed";
        Y.AD_LOADED = "ad-loaded";
        Y.ALL_ADS_COMPLETED = "all-ads-completed";
        Y.AD_LINEAR_CHANGED = "ad-linear-changed";
        Y.AD_METADATA = "ad-metadata";
        Y.AD_RECOVERABLE_ERROR = "ad-recoverable-error";
        Y.AD_ERROR = "ad-error";
        Y.AD_BREAK_READY = "ad-break-ready";
        Y.AD_INTERACTION = "ad-interaction";
        Y.AD_CONTENT_PAUSE_REQUESTED = "ad-content-pause-requested";
        Y.AD_CONTENT_RESUME_REQUESTED = "ad-content-resume-requested";
        Y.AD_CONTENT_ATTACH_REQUESTED = "ad-content-attach-requested";
        Jp = function() {
          return new Y();
        };
        function fs(a) {
          return JSON.stringify(a, function(b, c) {
            if ("function" != typeof c) {
              if (c instanceof Event || c instanceof V) {
                var d = {};
                for (e in c) (b = c[e]) && "object" == typeof b ? "detail" == e && (d[e] = b) : e in Event || (d[e] = b);
                return d;
              }
              if (c instanceof Error) {
                var e = /* @__PURE__ */ new Set(["name", "message", "stack"]);
                for (d in c) e.add(d);
                d = t(Object.getOwnPropertyNames(c));
                for (b = d.next(); !b.done; b = d.next()) e.add(b.value);
                d = {};
                e = t(e);
                for (b = e.next(); !b.done; b = e.next()) b = b.value, d[b] = c[b];
                c = { __type__: "Error", contents: d };
              } else if (c instanceof TimeRanges) {
                e = { __type__: "TimeRanges", length: c.length, start: [], end: [] };
                c = t(Jj(c));
                for (d = c.next(); !d.done; d = c.next()) d = d.value, b = d.end, e.start.push(d.start), e.end.push(b);
                c = e;
              } else c = ArrayBuffer.isView(c) && 1 === c.BYTES_PER_ELEMENT ? { __type__: "Uint8Array", entries: Array.from(c) } : "number" == typeof c ? isNaN(c) ? "NaN" : isFinite(c) ? c : 0 > c ? "-Infinity" : "Infinity" : c;
              return c;
            }
          });
        }
        function gs(a) {
          return JSON.parse(a, function(b, c) {
            if ("NaN" == c) var d = NaN;
            else if ("-Infinity" == c) d = -Infinity;
            else if ("Infinity" == c) d = Infinity;
            else if (c && "object" == typeof c && "TimeRanges" == c.__type__) d = hs(c);
            else if (c && "object" == typeof c && "Uint8Array" == c.__type__) d = new Uint8Array(c.entries);
            else if (c && "object" == typeof c && "Error" == c.__type__) {
              b = c.contents;
              c = Error(b.message);
              for (d in b) c[d] = b[d];
              d = c;
            } else d = c;
            return d;
          });
        }
        function hs(a) {
          return { length: a.length, start: function(b) {
            return a.start[b];
          }, end: function(b) {
            return a.end[b];
          } };
        }
        var is = "ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "), js = "buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "), ks = ["loop", "playbackRate"], ls = ["pause", "play"], ms = (/* @__PURE__ */ new Map()).set("getAssetUri", 2).set("getAudioLanguages", 4).set("getAudioLanguagesAndRoles", 4).set("getBufferFullness", 1).set("getBufferedInfo", 2).set("getExpiration", 2).set("getKeyStatuses", 2).set("getPlaybackRate", 2).set(
          "getTextLanguages",
          4
        ).set("getTextLanguagesAndRoles", 4).set("getImageTracks", 2).set("getThumbnails", 2).set("isAudioOnly", 10).set("isBuffering", 1).set("isInProgress", 1).set("isLive", 10).set("isTextTrackVisible", 1).set("keySystem", 10).set("seekRange", 1).set("getLoadMode", 10).set("getManifestType", 10).set("isFullyLoaded", 1).set("isEnded", 1), ns = (/* @__PURE__ */ new Map()).set("getConfiguration", 4).set("getConfigurationForLowLatency", 4).set("getStats", 5).set("getAudioTracks", 2).set("getTextTracks", 2).set("getVariantTracks", 2), os = (/* @__PURE__ */ new Map()).set(
          "getPlayheadTimeAsDate",
          1
        ).set("getPresentationStartTimeAsDate", 20).set("getSegmentAvailabilityDuration", 20), ps = [["getConfiguration", "configure", "getConfigurationForLowLatency", "configurationForLowLatency"]], qs = [["isTextTrackVisible", "setTextTrackVisibility"]], rs = "addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure configurationForLowLatency getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectAudioTrack selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "), ss = ["attach", "attachCanvas", "detach", "load", "unload"];
        function ts(a, b, c, d, e, f, g) {
          var h = this;
          this.G = a;
          this.K = g;
          this.l = new ec(b);
          this.L = c;
          this.s = false;
          this.A = d;
          this.F = e;
          this.M = f;
          this.i = this.m = false;
          this.I = "";
          this.o = null;
          this.B = function() {
            return us(h);
          };
          this.C = function(k2, l) {
            k2 = gs(l);
            switch (k2.type) {
              case "event":
                var m = k2.targetName, n = ah(k2.event);
                h.A(m, n);
                break;
              case "update":
                m = k2.update;
                for (n in m) {
                  k2 = h.g[n] || {};
                  for (var p in m[n]) k2[p] = m[n][p];
                }
                h.s && (h.L(), h.s = false);
                break;
              case "asyncComplete":
                if (n = k2.id, p = k2.error, k2 = h.h.get(n), h.h.delete(n), k2) if (p) {
                  n = new U(
                    p.severity,
                    p.category,
                    p.code
                  );
                  for (m in p) n[m] = p[m];
                  k2.reject(n);
                } else k2.resolve();
            }
          };
          this.g = { video: {}, player: {} };
          this.H = 0;
          this.h = /* @__PURE__ */ new Map();
          this.j = null;
          vs.add(this);
        }
        r = ts.prototype;
        r.destroy = function() {
          vs.delete(this);
          ws(this);
          xs && ys(this);
          this.l && (this.l.stop(), this.l = null);
          this.F = this.A = null;
          this.i = this.m = false;
          this.C = this.B = this.j = this.h = this.g = this.o = null;
          return Promise.resolve();
        };
        r.qb = function() {
          return this.i;
        };
        r.Zf = function() {
          return this.I;
        };
        r.init = function() {
          if (this.G.length) if (window2.chrome && chrome.cast && chrome.cast.isAvailable) {
            this.m = true;
            this.l.kb();
            var a = new chrome.cast.SessionRequest(this.G, [], null, this.K, null);
            a = new chrome.cast.ApiConfig(a, function(b) {
              for (var c = t(vs), d = c.next(); !d.done; d = c.next()) {
                d = d.value;
                var e = b;
                d.j = new Tg();
                d.s = true;
                zs(d, e);
              }
            }, function(b) {
              for (var c = t(vs), d = c.next(); !d.done; d = c.next()) d = d.value, As = "available" == b, d.l.kb();
            }, "origin_scoped");
            chrome.cast.initialize(a, function() {
            }, function() {
            });
            As && this.l.da(Bs);
            (a = xs) && a.status != chrome.cast.SessionStatus.STOPPED ? (this.j = new Tg(), this.s = true, zs(this, a)) : xs = null;
          } else window2.__onGCastApiAvailable !== Cs && (Ds = window2.__onGCastApiAvailable || null, window2.__onGCastApiAvailable = Cs);
        };
        r.gg = function(a) {
          this.o = a;
          this.i && Es(this, { type: "appData", appData: this.o });
        };
        r.cast = function() {
          var a = this;
          return Q(function(b) {
            if (!a.m) throw new U(1, 8, 8e3);
            if (!As) throw new U(1, 8, 8001);
            if (a.i) throw new U(1, 8, 8002);
            a.j = new Tg();
            chrome.cast.requestSession(function(c) {
              return zs(a, c);
            }, function(c) {
              return Fs(a, c);
            });
            return G(b, a.j, 0);
          });
        };
        function Gs(a) {
          a.i && chrome.cast.requestSession(function(b) {
            return zs(a, b);
          }, function(b) {
            return Fs(a, b);
          });
        }
        r.Oc = function() {
          if (this.i) {
            ws(this);
            if (xs) {
              ys(this);
              try {
                xs.stop(function() {
                }, function() {
                });
              } catch (a) {
              }
              xs = null;
            }
            us(this);
          }
        };
        r.get = function(a, b) {
          var c = this;
          if ("video" == a) {
            if (ls.includes(b)) return function() {
              return c.nh.apply(c, [a, b].concat(y(Na.apply(0, arguments))));
            };
          } else if ("player" == a) {
            if (os.has(b) && !this.get("player", "isLive")()) return function() {
            };
            if (rs.includes(b)) return function() {
              return c.nh.apply(c, [a, b].concat(y(Na.apply(0, arguments))));
            };
            if (ss.includes(b)) return function() {
              return c.nj.apply(c, [a, b].concat(y(Na.apply(0, arguments))));
            };
            if (ms.has(b) || ns.has(b)) return function() {
              return c.g[a][b];
            };
          }
          return this.g[a][b];
        };
        r.set = function(a, b, c) {
          this.g[a][b] = c;
          Es(this, { type: "set", targetName: a, property: b, value: c });
        };
        function zs(a, b) {
          var c = a.M();
          xs = b;
          b.addUpdateListener(a.B);
          b.addMessageListener("urn:x-cast:com.google.shaka.v2", a.C);
          us(a);
          Es(a, { type: "init", initState: c, appData: a.o });
          a.j.resolve();
        }
        function Fs(a, b) {
          var c = 8003;
          switch (b.code) {
            case "cancel":
              c = 8004;
              break;
            case "timeout":
              c = 8005;
              break;
            case "receiver_unavailable":
              c = 8006;
          }
          a.j.reject(new U(2, 8, c, b));
        }
        r.nh = function(a, b) {
          Es(this, { type: "call", targetName: a, methodName: b, args: Na.apply(2, arguments) });
        };
        r.nj = function(a, b) {
          var c = Na.apply(2, arguments), d = new Tg(), e = this.H.toString();
          this.H++;
          this.h.set(e, d);
          try {
            Es(this, { type: "asyncCall", targetName: a, methodName: b, args: c, id: e });
          } catch (f) {
            d.reject(f);
          }
          return d;
        };
        function ys(a) {
          var b = xs;
          b.removeUpdateListener(a.B);
          b.removeMessageListener("urn:x-cast:com.google.shaka.v2", a.C);
        }
        function us(a) {
          var b = xs ? "connected" == xs.status : false;
          if (a.i && !b) {
            a.F();
            for (var c in a.g) a.g[c] = {};
            ws(a);
          }
          a.i = b;
          a.I = b ? xs.receiver.friendlyName : "";
          a.l.kb();
        }
        function ws(a) {
          if (a.h) for (var b = t(a.h.keys()), c = b.next(); !c.done; c = b.next()) {
            c = c.value;
            var d = a.h.get(c);
            a.h.delete(c);
            d.reject(new U(1, 7, 7e3));
          }
        }
        function Es(a, b) {
          b = fs(b);
          var c = xs;
          try {
            c.sendMessage("urn:x-cast:com.google.shaka.v2", b, function() {
            }, gb);
          } catch (d) {
            throw b = new U(2, 8, 8005, d), c = new V("error", (/* @__PURE__ */ new Map()).set("detail", b)), a.A("player", c), a.Oc(), b;
          }
        }
        var Bs = 0.02, As = false, xs = null, Ds = null, vs = /* @__PURE__ */ new Set();
        function Cs(a) {
          Ds ? window2.__onGCastApiAvailable = Ds : delete window2.__onGCastApiAvailable;
          Ds = null;
          if (a) for (var b = t(vs), c = b.next(); !c.done; c = b.next()) c.value.init();
          "function" === typeof window2.__onGCastApiAvailable && window2.__onGCastApiAvailable(a);
        }
        ;
        function Hs(a, b, c, d) {
          d = void 0 === d ? false : d;
          ch.call(this);
          var e = this;
          this.i = a;
          this.h = b;
          this.m = this.o = this.l = this.s = this.j = null;
          this.C = c;
          this.B = d;
          this.A = /* @__PURE__ */ new Map();
          this.g = null;
          window2.chrome ? (this.g = new ts(c, function() {
            return Is(e);
          }, function() {
            return Js(e);
          }, function(f, g) {
            return Ks(e, f, g);
          }, function() {
            return Ls(e);
          }, function() {
            return Ms(e);
          }, d), Ns(this)) : (this.j = this.i, this.s = this.h);
        }
        qa(Hs, ch);
        r = Hs.prototype;
        r.destroy = function(a) {
          this.g && a && this.g.Oc();
          this.m && (this.m.release(), this.m = null);
          a = [];
          this.h && (a.push(this.h.destroy()), this.h = null);
          this.g && (a.push(this.g.destroy()), this.g = null);
          this.s = this.j = this.i = null;
          ch.prototype.release.call(this);
          return Promise.all(a);
        };
        r.Ji = function() {
          return this.j;
        };
        r.Hf = function() {
          return this.s;
        };
        r.Uh = function() {
          return this.g ? this.g.m && As : false;
        };
        r.qb = function() {
          return this.g ? this.g.qb() : false;
        };
        r.Zf = function() {
          return this.g ? this.g.Zf() : "";
        };
        r.cast = function() {
          var a = this;
          return Q(function(b) {
            return 1 == b.g ? a.g ? G(b, a.g.cast(), 2) : b.return() : a.h ? G(b, a.h.jc(), 0) : b.return();
          });
        };
        r.gg = function(a) {
          this.g && this.g.gg(a);
        };
        r.Cj = function() {
          this.g && Gs(this.g);
        };
        r.Oc = function() {
          this.g && this.g.Oc();
        };
        r.Vh = function(a, b) {
          b = void 0 === b ? false : b;
          var c = this;
          return Q(function(d) {
            if (1 == d.g) {
              if (a == c.C && b == c.B) return d.return();
              c.C = a;
              c.B = b;
              if (!c.g) return d.return();
              c.g.Oc();
              return G(d, c.g.destroy(), 2);
            }
            c.g = null;
            c.g = new ts(a, function() {
              return Is(c);
            }, function() {
              return Js(c);
            }, function(e, f) {
              return Ks(c, e, f);
            }, function() {
              return Ls(c);
            }, function() {
              return Ms(c);
            }, b);
            c.g.init();
            I(d);
          });
        };
        function Ns(a) {
          a.g.init();
          a.m = new lb();
          for (var b = t(is), c = b.next(); !c.done; c = b.next()) a.m.D(a.i, c.value, function(f) {
            a.g.qb() || (f = ah(f), a.l.dispatchEvent(f));
          });
          for (var d in bh) a.m.D(a.h, bh[d], function(f) {
            a.g.qb() || a.o.dispatchEvent(f);
          });
          a.j = {};
          b = {};
          for (var e in a.i) b = { wd: b.wd }, b.wd = e, Object.defineProperty(a.j, b.wd, { configurable: false, enumerable: true, get: /* @__PURE__ */ function(f) {
            return function() {
              return Os(a, f.wd);
            };
          }(b), set: /* @__PURE__ */ function(f) {
            return function(g) {
              var h = f.wd;
              a.g.qb() ? a.g.set("video", h, g) : a.i[h] = g;
            };
          }(b) });
          a.s = {};
          Ps(
            a,
            function(f) {
              Object.defineProperty(a.s, f, { configurable: false, enumerable: true, get: function() {
                return Qs(a, f);
              } });
            }
          );
          Rs(a);
          a.l = new ch();
          a.l.Ge = a.j;
          a.o = new ch();
          a.o.Ge = a.s;
        }
        function Rs(a) {
          var b = /* @__PURE__ */ new Map();
          Ps(a, function(c, d) {
            b.has(d) ? (d = b.get(d), c.length < d.length ? a.A.set(c, d) : a.A.set(d, c)) : b.set(d, c);
          });
        }
        function Ps(a, b) {
          function c(k2) {
            return "constructor" == k2 || "function" != typeof d[k2] ? false : !e.has(k2);
          }
          var d = a.h, e = /* @__PURE__ */ new Set(), f;
          for (f in d) c(f) && (e.add(f), b(f, d[f]));
          a = Object.getPrototypeOf(d);
          for (f = Object.getPrototypeOf({}); a && a != f; ) {
            for (var g = t(Object.getOwnPropertyNames(a)), h = g.next(); !h.done; h = g.next()) h = h.value, c(h) && (e.add(h), b(h, d[h]));
            a = Object.getPrototypeOf(a);
          }
        }
        function Ms(a) {
          var b = { video: {}, player: {}, playerAfterLoad: {}, manifest: a.h.Pc(), startTime: null };
          a.i.pause();
          for (var c = t(ks), d = c.next(); !d.done; d = c.next()) d = d.value, b.video[d] = a.i[d];
          a.i.ended || (b.startTime = a.i.currentTime);
          c = t(ps);
          for (d = c.next(); !d.done; d = c.next()) {
            var e = d.value;
            d = e[1];
            e = a.h[e[0]]();
            b.player[d] = e;
          }
          c = t(qs);
          for (d = c.next(); !d.done; d = c.next()) e = d.value, d = e[1], e = a.h[e[0]](), b.playerAfterLoad[d] = e;
          return b;
        }
        function Is(a) {
          var b = new V("caststatuschanged");
          a.dispatchEvent(b);
        }
        function Js(a) {
          var b = new V(a.j.paused ? "pause" : "play");
          a.l.dispatchEvent(b);
        }
        function Ls(a) {
          for (var b = t(ps), c = b.next(); !c.done; c = b.next()) {
            var d = c.value;
            c = d[1];
            d = a.g.get("player", d[0])();
            a.h[c](d);
          }
          var e = a.g.get("player", "getAssetUri")();
          d = a.g.get("video", "ended");
          b = Promise.resolve();
          var f = a.i.autoplay;
          c = null;
          d || (c = a.g.get("video", "currentTime"));
          var g;
          (d = a.g.get("player", "getTextTracks")()) && d.length && (g = d.find(function(l) {
            return l.active;
          }));
          var h = a.g.get("player", "isTextTrackVisible")();
          e && (a.i.autoplay = false, b = a.h.load(e, c));
          var k2 = {};
          c = t(ks);
          for (d = c.next(); !d.done; d = c.next()) d = d.value, k2[d] = a.g.get("video", d);
          b.then(function() {
            if (a.i) {
              for (var l = t(ks), m = l.next(); !m.done; m = l.next()) m = m.value, a.i[m] = k2[m];
              l = t(qs);
              for (m = l.next(); !m.done; m = l.next()) {
                var n = m.value;
                m = n[1];
                n = a.g.get("player", n[0])();
                a.h[m](n);
              }
              a.h.xh(h);
              g && a.h.fg(g.language, g.roles, g.forced);
              a.i.autoplay = f;
              e && a.i.play();
            }
          }, function(l) {
            l = (/* @__PURE__ */ new Map()).set("detail", l);
            l = new V("error", l);
            a.h.dispatchEvent(l);
          });
        }
        function Os(a, b) {
          if ("addEventListener" == b) return function(d, e, f) {
            return a.l.addEventListener(d, e, f);
          };
          if ("removeEventListener" == b) return function(d, e, f) {
            return a.l.removeEventListener(d, e, f);
          };
          if (a.g.qb() && 0 == Object.keys(a.g.g.video).length) {
            var c = a.i[b];
            if ("function" != typeof c) return c;
          }
          return a.g.qb() ? a.g.get("video", b) : (b = a.i[b], "function" == typeof b && (b = b.bind(a.i)), b);
        }
        function Qs(a, b) {
          a.A.has(b) && (b = a.A.get(b));
          if ("addEventListener" == b) return function(c, d, e) {
            return a.o.addEventListener(c, d, e);
          };
          if ("removeEventListener" == b) return function(c, d, e) {
            return a.o.removeEventListener(c, d, e);
          };
          if ("getMediaElement" == b) return function() {
            return a.j;
          };
          if ("getSharedConfiguration" == b) return a.g.get("player", "getConfiguration");
          if ("getNetworkingEngine" == b) return function() {
            return a.h.xb();
          };
          if ("getDrmEngine" == b) return function() {
            return a.h.C;
          };
          if ("getAdManager" == b) return function() {
            return a.h.Ng();
          };
          if ("setVideoContainer" == b) return function(c) {
            return a.h.Ah(c);
          };
          if (a.g.qb()) {
            if ("getManifest" == b || "drmInfo" == b) return function() {
              db(b + "() does not work while casting!");
              return null;
            };
            if ("attach" == b || "detach" == b) return function() {
              db(b + "() does not work while casting!");
              return Promise.resolve();
            };
          }
          return a.g.qb() && 0 == Object.keys(a.g.g.video).length && (ms.has(b) || ns.has(b)) || !a.g.qb() ? a.h[b].bind(a.h) : a.g.get("player", b);
        }
        function Ks(a, b, c) {
          a.g.qb() && ("video" == b ? a.l.dispatchEvent(c) : "player" == b && a.o.dispatchEvent(c));
        }
        T("shaka.cast.CastProxy", Hs);
        Hs.prototype.changeReceiverId = Hs.prototype.Vh;
        Hs.prototype.forceDisconnect = Hs.prototype.Oc;
        Hs.prototype.suggestDisconnect = Hs.prototype.Cj;
        Hs.prototype.setAppData = Hs.prototype.gg;
        Hs.prototype.cast = Hs.prototype.cast;
        Hs.prototype.receiverName = Hs.prototype.Zf;
        Hs.prototype.isCasting = Hs.prototype.qb;
        Hs.prototype.canCast = Hs.prototype.Uh;
        Hs.prototype.getPlayer = Hs.prototype.Hf;
        Hs.prototype.getVideo = Hs.prototype.Ji;
        Hs.prototype.destroy = Hs.prototype.destroy;
        function Ss(a, b, c, d) {
          ch.call(this);
          var e = this;
          this.g = a;
          this.h = b;
          this.j = new lb();
          this.H = { video: a, player: b };
          this.F = c || function() {
          };
          this.I = d || function(f) {
            return f;
          };
          this.i = null;
          this.G = false;
          this.o = true;
          this.m = 0;
          this.B = false;
          this.A = true;
          this.s = this.l = null;
          this.C = new ec(function() {
            Ts(e);
          });
          Us(this);
        }
        qa(Ss, ch);
        r = Ss.prototype;
        r.isConnected = function() {
          return this.G;
        };
        r.Qi = function() {
          return this.o;
        };
        r.zj = function(a) {
          this.i = a;
        };
        r.Zh = function() {
          this.i = null;
        };
        r.Aj = function(a) {
          this.i || (this.i = { metadataType: cast.receiver.media.MetadataType.GENERIC });
          this.i.title = a;
        };
        r.yj = function(a) {
          this.i || (this.i = { metadataType: cast.receiver.media.MetadataType.GENERIC });
          this.i.images = [{ url: a }];
        };
        r.xj = function(a) {
          this.i || (this.i = {});
          this.i.artist = a;
          this.i.metadataType = cast.receiver.media.MetadataType.MUSIC_TRACK;
        };
        r.destroy = function() {
          var a = this, b, c;
          return Q(function(d) {
            if (1 == d.g) return a.j && (a.j.release(), a.j = null), b = [], a.h && (b.push(a.h.destroy()), a.h = null), a.C && (a.C.stop(), a.C = null), a.g = null, a.H = null, a.F = null, a.G = false, a.o = true, a.l = null, a.s = null, ch.prototype.release.call(a), G(d, Promise.all(b), 2);
            c = cast.receiver.CastReceiverManager.getInstance();
            c.stop();
            I(d);
          });
        };
        function Us(a) {
          var b = cast.receiver.CastReceiverManager.getInstance();
          b.onSenderConnected = function() {
            return Vs(a);
          };
          b.onSenderDisconnected = function() {
            return Vs(a);
          };
          b.onSystemVolumeChanged = function() {
            var e = cast.receiver.CastReceiverManager.getInstance().getSystemVolume();
            e && Ws(a, { type: "update", update: { video: { volume: e.level, muted: e.muted } } }, a.l);
            Ws(a, { type: "event", targetName: "video", event: { type: "volumechange" } }, a.l);
          };
          a.s = b.getCastMessageBus("urn:x-cast:com.google.cast.media");
          a.s.onMessage = function(e) {
            return Xs(
              a,
              e
            );
          };
          a.l = b.getCastMessageBus("urn:x-cast:com.google.shaka.v2");
          a.l.onMessage = function(e) {
            return Ys(a, e);
          };
          b.start();
          b = t(is);
          for (var c = b.next(); !c.done; c = b.next()) a.j.D(a.g, c.value, function(e) {
            return Zs(a, "video", e);
          });
          for (var d in bh) a.j.D(a.h, bh[d], function(e) {
            return Zs(a, "player", e);
          });
          a.j.D(a.g, "loadeddata", function() {
            a.B = true;
          });
          a.j.D(a.h, "loading", function() {
            a.o = false;
            $s(a);
          });
          a.j.D(a.g, "playing", function() {
            a.o = false;
            $s(a);
          });
          a.j.D(a.g, "pause", function() {
            $s(a);
          });
          a.j.D(a.h, "unloading", function() {
            a.o = true;
            $s(a);
          });
          a.j.D(a.g, "ended", function() {
            new ec(function() {
              a.g && a.g.ended && (a.o = true, $s(a));
            }).da(at);
          });
        }
        function Vs(a) {
          a.m = 0;
          a.A = true;
          a.G = 0 != cast.receiver.CastReceiverManager.getInstance().getSenders().length;
          $s(a);
        }
        function $s(a) {
          var b;
          Q(function(c) {
            if (1 == c.g) return G(c, Promise.resolve(), 2);
            if (!a.h) return c.return();
            b = new V("caststatuschanged");
            a.dispatchEvent(b);
            bt(a) || ct(a);
            I(c);
          });
        }
        function dt(a, b, c) {
          var d, e, f, g, h, k2, l, m, n, p;
          Q(function(q) {
            switch (q.g) {
              case 1:
                for (d in b.player) e = b.player[d], a.h[d](e);
                a.F(c);
                f = a.g.autoplay;
                return b.manifest ? (a.g.autoplay = false, xa(q, 5), G(q, a.h.load(b.manifest, b.startTime), 7)) : G(q, Promise.resolve(), 3);
              case 7:
                za(q, 3);
                break;
              case 5:
                return g = Aa(q), h = (/* @__PURE__ */ new Map()).set("detail", g), k2 = new V("error", h), a.h && a.h.dispatchEvent(k2), q.return();
              case 3:
                if (!a.h) return q.return();
                for (l in b.video) m = b.video[l], a.g[l] = m;
                for (n in b.playerAfterLoad) p = b.playerAfterLoad[n], a.h[n](p);
                a.g.autoplay = f;
                b.manifest && (a.g.play(), ct(a));
                I(q);
            }
          });
        }
        function Zs(a, b, c) {
          a.h && (Ts(a), Ws(a, { type: "event", targetName: b, event: c }, a.l));
        }
        function Ts(a) {
          a.C.da(et);
          for (var b = { video: {}, player: {} }, c = t(js), d = c.next(); !d.done; d = c.next()) d = d.value, b.video[d] = a.g[d];
          a.h.U() && os.forEach(function(e, f) {
            0 == a.m % e && (b.player[f] = a.h[f]());
          });
          ms.forEach(function(e, f) {
            0 == a.m % e && (b.player[f] = a.h[f]());
          });
          if (c = cast.receiver.CastReceiverManager.getInstance().getSystemVolume()) b.video.volume = c.level, b.video.muted = c.muted;
          Ws(a, { type: "update", update: b }, a.l);
          ns.forEach(function(e, f) {
            0 == a.m % e && (e = { player: {} }, e.player[f] = a.h[f](), Ws(
              a,
              { type: "update", update: e },
              a.l
            ));
          });
          a.B && (a.m += 1);
          bt(a);
        }
        function bt(a) {
          return a.A && (a.g.duration || a.h.U()) ? (ft(a), a.A = false, true) : false;
        }
        function ft(a, b) {
          var c = { contentId: a.h.Pc(), streamType: a.h.U() ? "LIVE" : "BUFFERED", contentType: "" };
          a.h.U() || (c.duration = a.g.duration);
          a.i && (c.metadata = a.i);
          ct(a, void 0 === b ? 0 : b, c);
        }
        function Ys(a, b) {
          var c = gs(b.data);
          switch (c.type) {
            case "init":
              a.m = 0;
              a.B = false;
              a.A = true;
              dt(a, c.initState, c.appData);
              Ts(a);
              break;
            case "appData":
              a.F(c.appData);
              break;
            case "set":
              var d = c.targetName, e = c.property;
              c = c.value;
              if ("video" == d) {
                if (b = cast.receiver.CastReceiverManager.getInstance(), "volume" == e) {
                  b.setSystemVolumeLevel(c);
                  break;
                } else if ("muted" == e) {
                  b.setSystemVolumeMuted(c);
                  break;
                }
              }
              a.H[d][e] = c;
              break;
            case "call":
              d = a.H[c.targetName];
              d[c.methodName].apply(d, c.args);
              break;
            case "asyncCall":
              d = c.targetName;
              e = c.methodName;
              "player" == d && "load" == e && (a.m = 0, a.B = false);
              var f = c.id, g = b.senderId;
              b = a.H[d];
              c = b[e].apply(b, c.args);
              "player" == d && "load" == e && (c = c.then(function() {
                a.A = true;
              }));
              c.then(function() {
                return gt(a, g, f, null);
              }, function(h) {
                return gt(a, g, f, h);
              });
          }
        }
        function Xs(a, b) {
          var c = gs(b.data);
          switch (c.type) {
            case "PLAY":
              a.g.play();
              ct(a);
              break;
            case "PAUSE":
              a.g.pause();
              ct(a);
              break;
            case "SEEK":
              b = c.currentTime;
              var d = c.resumeState;
              null != b && (a.g.currentTime = Number(b));
              d && "PLAYBACK_START" == d ? (a.g.play(), ct(a)) : d && "PLAYBACK_PAUSE" == d && (a.g.pause(), ct(a));
              break;
            case "STOP":
              a.h.jc().then(function() {
                a.h && ct(a);
              });
              break;
            case "GET_STATUS":
              ft(a, Number(c.requestId));
              break;
            case "VOLUME":
              d = c.volume;
              b = d.level;
              d = d.muted;
              var e = a.g.volume, f = a.g.muted;
              null != b && (a.g.volume = Number(b));
              null != d && (a.g.muted = d);
              e == a.g.volume && f == a.g.muted || ct(a);
              break;
            case "LOAD":
              a.m = 0;
              a.B = false;
              a.A = false;
              b = c.media;
              d = c.currentTime;
              e = a.I(b.contentId);
              f = c.autoplay || true;
              a.F(b.customData);
              f && (a.g.autoplay = true);
              a.h.load(e, d).then(function() {
                a.h && ft(a);
              }).catch(function(g) {
                var h = "LOAD_FAILED";
                7 == g.category && 7e3 == g.code && (h = "LOAD_CANCELLED");
                Ws(a, { requestId: Number(c.requestId), type: h }, a.s);
              });
              break;
            default:
              Ws(a, { requestId: Number(c.requestId), type: "INVALID_REQUEST", reason: "INVALID_COMMAND" }, a.s);
          }
        }
        function gt(a, b, c, d) {
          a.h && Ws(a, { type: "asyncComplete", id: c, error: d }, a.l, b);
        }
        function Ws(a, b, c, d) {
          a.G && (a = fs(b), d ? c.getCastChannel(d).send(a) : c.broadcast(a));
        }
        function ct(a, b, c) {
          c = void 0 === c ? null : c;
          var d = { mediaSessionId: 0, playbackRate: a.g.playbackRate, playerState: a.o ? ht : a.h.Nf() ? it : a.g.paused ? jt : kt, currentTime: a.g.currentTime, supportedMediaCommands: 63, volume: { level: a.g.volume, muted: a.g.muted } };
          c && (d.media = c);
          Ws(a, { requestId: void 0 === b ? 0 : b, type: "MEDIA_STATUS", status: [d] }, a.s);
        }
        T("shaka.cast.CastReceiver", Ss);
        Ss.prototype.destroy = Ss.prototype.destroy;
        Ss.prototype.setContentArtist = Ss.prototype.xj;
        Ss.prototype.setContentImage = Ss.prototype.yj;
        Ss.prototype.setContentTitle = Ss.prototype.Aj;
        Ss.prototype.clearContentMetadata = Ss.prototype.Zh;
        Ss.prototype.setContentMetadata = Ss.prototype.zj;
        Ss.prototype.isIdle = Ss.prototype.Qi;
        Ss.prototype.isConnected = Ss.prototype.isConnected;
        var et = 0.5, at = 5, ht = "IDLE", kt = "PLAYING", it = "BUFFERING", jt = "PAUSED";
        function lt(a, b, c, d, e) {
          if (d >= e) return null;
          for (var f = -1, g = -1, h = 0; h < c.length; h++) if (c[h].some(function(D) {
            return null != D && "" != D.g.trim();
          })) {
            f = h;
            break;
          }
          for (h = c.length - 1; 0 <= h; h--) if (c[h].some(function(D) {
            return null != D && "" != D.g.trim();
          })) {
            g = h;
            break;
          }
          if (-1 === f || -1 === g) return null;
          for (var k2 = h = false, l = "white", m = "black", n = mt(d, e, h, k2, l, m); f <= g; f++) {
            for (var p = c[f], q = -1, u = -1, w = 0; w < p.length; w++) if (null != p[w] && "" !== p[w].g.trim()) {
              q = w;
              break;
            }
            for (w = p.length - 1; 0 <= w; w--) if (null != p[w] && "" !== p[w].g.trim()) {
              u = w;
              break;
            }
            if (-1 === q || -1 === u) p = nt(d, e), a.nestedCues.push(p);
            else {
              for (; q <= u; q++) if (w = p[q]) {
                var v = w.l, x = w.i, z = w.j, C = w.h;
                if (v != h || x != k2 || z != l || C != m) n.payload && a.nestedCues.push(n), n = mt(d, e, v, x, z, C), h = v, k2 = x, l = z, m = C;
                n.payload += w.g;
              } else n.payload += " ";
              n.payload && a.nestedCues.push(n);
              f !== g && (n = nt(d, e), a.nestedCues.push(n));
              n = mt(d, e, h, k2, l, m);
            }
          }
          return a.nestedCues.length ? { cue: a, stream: b } : null;
        }
        function mt(a, b, c, d, e, f) {
          a = new ze(a, b, "");
          c && a.textDecoration.push(We);
          d && (a.fontStyle = Ve);
          a.color = e;
          a.backgroundColor = f;
          return a;
        }
        function nt(a, b) {
          a = new ze(a, b, "");
          a.lineBreak = true;
          return a;
        }
        function ot(a, b, c, d, e) {
          this.g = a;
          this.l = b;
          this.i = c;
          this.h = d;
          this.j = e;
        }
        ;
        function pt(a, b) {
          this.i = [];
          this.g = 1;
          this.h = 0;
          this.C = a;
          this.B = b;
          this.j = this.m = false;
          this.l = "white";
          this.o = "black";
          this.s = this.A = null;
          qt(this);
        }
        function rt(a, b, c) {
          var d = "CC" + ((a.C << 1 | a.B) + 1), e = new ze(b, c, "");
          e.lineInterpretation = 1;
          var f = st.get(a.g);
          f && (e.line = f);
          null != a.s && null != a.A && (e.position = 10 + Math.min(70, 10 * a.s) + 2.5 * a.A);
          (b = lt(e, d, a.i, b, c)) && 15 < a.g + b.cue.nestedCues.length - 3 && (f = st.get(a.g + 3 - b.cue.nestedCues.length)) && (e.line = f);
          return b;
        }
        function qt(a) {
          tt(a, 0, 15);
          a.g = 1;
        }
        function ut(a, b, c) {
          if (!(32 > c || 127 < c)) {
            var d = "";
            switch (b) {
              case 0:
                d = vt.has(c) ? vt.get(c) : String.fromCharCode(c);
                break;
              case 1:
                d = wt.get(c);
                break;
              case 2:
                a.i[a.g].pop();
                d = xt.get(c);
                break;
              case 3:
                a.i[a.g].pop(), d = yt.get(c);
            }
            d && a.i[a.g].push(new ot(d, a.m, a.j, a.o, a.l));
          }
        }
        function zt(a, b, c, d) {
          if (!(0 > c || 0 > b)) if (b >= c) for (--d; 0 <= d; d--) a.i[b + d] = a.i[c + d].map(function(f) {
            return f;
          });
          else for (var e = 0; e < d; e++) a.i[b + e] = a.i[c + e].map(function(f) {
            return f;
          });
        }
        function tt(a, b, c) {
          for (var d = 0; d <= c; d++) a.i[b + d] = [];
        }
        var vt = /* @__PURE__ */ new Map([[39, "\u2019"], [42, "\xE1"], [92, "\xE9"], [92, "\xE9"], [94, "\xED"], [95, "\xF3"], [96, "\xFA"], [123, "\xE7"], [124, "\xF7"], [125, "\xD1"], [126, "\xF1"], [127, "\u2588"]]), wt = /* @__PURE__ */ new Map([[48, "\xAE"], [49, "\xB0"], [50, "\xBD"], [51, "\xBF"], [52, "\u2122"], [53, "\xA2"], [54, "\xA3"], [55, "\u266A"], [56, "\xE0"], [57, " "], [58, "\xE8"], [59, "\xE2"], [60, "\xEA"], [61, "\xEE"], [62, "\xF4"], [63, "\xFB"]]), xt = /* @__PURE__ */ new Map([
          [32, "\xC1"],
          [33, "\xC9"],
          [34, "\xD3"],
          [35, "\xDA"],
          [36, "\xDC"],
          [37, "\xFC"],
          [38, "\u2018"],
          [39, "\xA1"],
          [40, "*"],
          [41, "'"],
          [42, "\u2500"],
          [43, "\xA9"],
          [44, "\u2120"],
          [45, "\xB7"],
          [46, "\u201C"],
          [47, "\u201D"],
          [48, "\xC0"],
          [49, "\xC2"],
          [50, "\xC7"],
          [51, "\xC8"],
          [52, "\xCA"],
          [53, "\xCB"],
          [54, "\xEB"],
          [55, "\xCE"],
          [56, "\xCF"],
          [57, "\xEF"],
          [58, "\xD4"],
          [59, "\xD9"],
          [60, "\xF9"],
          [61, "\xDB"],
          [62, "\xAB"],
          [63, "\xBB"]
        ]), yt = /* @__PURE__ */ new Map([
          [32, "\xC3"],
          [33, "\xE3"],
          [34, "\xCD"],
          [35, "\xCC"],
          [36, "\xEC"],
          [37, "\xD2"],
          [38, "\xF2"],
          [39, "\xD5"],
          [40, "\xF5"],
          [41, "{"],
          [42, "}"],
          [43, "\\"],
          [44, "^"],
          [45, "_"],
          [46, "|"],
          [47, "~"],
          [48, "\xC4"],
          [49, "\xE4"],
          [50, "\xD6"],
          [51, "\xF6"],
          [52, "\xDF"],
          [53, "\xA5"],
          [54, "\xA4"],
          [55, "\u2502"],
          [56, "\xC5"],
          [57, "\xE5"],
          [58, "\xD8"],
          [59, "\xF8"],
          [60, "\u250C"],
          [61, "\u2510"],
          [62, "\u2514"],
          [63, "\u2518"]
        ]), st = /* @__PURE__ */ new Map([[1, 10], [2, 15.33], [3, 20.66], [4, 26], [5, 31.33], [6, 36.66], [7, 42], [8, 47.33], [9, 52.66], [10, 58], [11, 63.33], [12, 68.66], [13, 74], [14, 79.33], [15, 84.66]]);
        function At(a, b) {
          this.h = 0;
          this.o = new pt(a, b);
          this.i = new pt(a, b);
          this.g = this.j = new pt(a, b);
          this.l = 0;
          this.m = null;
        }
        function Bt(a, b, c) {
          a.g = a.i;
          var d = a.g, e = null;
          3 !== a.h && 4 !== a.h && (e = rt(d, a.l, c), c = a.i, c.g = 0 < c.h ? c.h : 0, tt(c, 0, 15), c = a.j, c.g = 0 < c.h ? c.h : 0, tt(c, 0, 15), d.g = 15);
          a.h = 3;
          d.h = b;
          return e;
        }
        function Ct(a) {
          a.h = 1;
          a.g = a.j;
          a.g.h = 0;
        }
        function Dt(a) {
          eb("Cea608DataChannel", "CEA-608 text mode entered, but is unsupported");
          a.g = a.o;
          a.h = 4;
        }
        var Et = "black green blue cyan red yellow magenta black".split(" "), Ft = "white green blue cyan red yellow magenta white_italics".split(" ");
        function Gt(a, b) {
          this.I = b;
          this.M = a;
          this.K = this.l = false;
          this.m = this.o = this.G = this.L = this.H = 0;
          this.F = 2;
          this.i = [];
          this.g = this.h = this.j = 0;
          this.C = this.A = false;
          this.B = "white";
          this.s = "black";
          Ht(this);
        }
        function Ht(a) {
          a.i = [];
          for (var b = 0; 16 > b; b++) a.i.push(It());
        }
        function It() {
          for (var a = [], b = 0; 42 > b; b++) a.push(null);
          return a;
        }
        function Jt(a, b) {
          Kt(a) && (a.i[a.h][a.g] = new ot(b, a.C, a.A, a.s, a.B), a.g++);
        }
        function Kt(a) {
          var b = a.g < a.m && 0 <= a.g;
          return a.h < a.o && 0 <= a.h && b;
        }
        Gt.prototype.isVisible = function() {
          return this.l;
        };
        function Lt(a) {
          for (var b = 0, c = 1; 16 > c; c++, b++) a.i[b] = a.i[c];
          for (c = 0; 1 > c; c++, b++) a.i[b] = It();
        }
        function Mt(a, b, c) {
          var d = new ze(a.j, b, "");
          d.textAlign = 0 === a.F ? "left" : 1 === a.F ? "right" : Be;
          var e = d.region;
          a.I && (e.id += "svc" + a.I);
          e.id += "win" + a.M;
          e.height = a.o;
          e.width = a.m;
          e.heightUnits = 2;
          e.widthUnits = 2;
          e.viewportAnchorX = a.H;
          e.viewportAnchorY = a.L;
          e.viewportAnchorUnits = a.K ? yd : 2;
          switch (a.G) {
            case 0:
              e.regionAnchorX = 0;
              e.regionAnchorY = 0;
              break;
            case 1:
              e.regionAnchorX = 50;
              e.regionAnchorY = 0;
              break;
            case 2:
              e.regionAnchorX = 100;
              e.regionAnchorY = 0;
              break;
            case 3:
              e.regionAnchorX = 0;
              e.regionAnchorY = 50;
              break;
            case 4:
              e.regionAnchorX = 50;
              e.regionAnchorY = 50;
              break;
            case 5:
              e.regionAnchorX = 100;
              e.regionAnchorY = 50;
              break;
            case 6:
              e.regionAnchorX = 0;
              e.regionAnchorY = 100;
              break;
            case 7:
              e.regionAnchorX = 50;
              e.regionAnchorY = 100;
              break;
            case 8:
              e.regionAnchorX = 100, e.regionAnchorY = 100;
          }
          if (c = lt(d, "svc" + c, a.i, a.j, b)) a.j = b;
          return c;
        }
        Gt.prototype.display = function() {
          this.l = true;
        };
        function Nt() {
          this.i = [];
          this.h = null;
          this.g = 0;
        }
        function Ot(a, b) {
          3 === b.type ? (a.g = 2 * (b.value & 63) - 1, a.h = []) : a.h && (0 < a.g && (a.h.push(b), a.g--), 0 === a.g && (a.i.push(new Pt(a.h)), a.h = null, a.g = 0));
        }
        function Pt(a) {
          this.g = 0;
          this.h = a;
        }
        Pt.prototype.ta = function() {
          return this.g < this.h.length;
        };
        Pt.prototype.Ba = function() {
          return this.g;
        };
        function Qt(a) {
          if (!a.ta()) throw new U(2, 2, 3e3);
          return a.h[a.g++];
        }
        Pt.prototype.skip = function(a) {
          if (this.g + a > this.h.length) throw new U(2, 2, 3e3);
          this.g += a;
        };
        Pt.prototype.ph = function(a) {
          if (0 > this.g - a) throw new U(2, 2, 3e3);
          this.g -= a;
        };
        function Rt(a) {
          this.i = a;
          this.h = [null, null, null, null, null, null, null, null];
          this.g = null;
        }
        function St(a, b, c, d) {
          if (!a.g) return [];
          if (24 == c) return c = Qt(b).value, d = Qt(b).value, c = function(f) {
            return f.map(function(g) {
              return ("0" + (g & 255).toString(16)).slice(-2);
            }).join("");
          }([c, d]), Jt(a.g, String.fromCharCode(parseInt(c, 16))), [];
          b = a.g;
          var e = null;
          switch (c) {
            case 8:
              !Kt(b) || 0 >= b.g && 0 >= b.h || (0 >= b.g ? (b.g = b.m - 1, b.h--) : b.g--, b.i[b.h][b.g] = null);
              break;
            case 13:
              b.isVisible() && (e = Mt(b, d, a.i));
              b.h + 1 >= b.o ? Lt(b) : b.h++;
              b.g = 0;
              break;
            case 14:
              b.isVisible() && (e = Mt(b, d, a.i));
              b.i[b.h] = It();
              b.g = 0;
              break;
            case 12:
              b.isVisible() && (e = Mt(b, d, a.i)), Ht(b), b.h = 0, b.g = 0;
          }
          return e ? [e] : [];
        }
        function Tt(a, b, c, d) {
          if (128 <= c && 135 >= c) d = c & 7, a.h[d] && (a.g = a.h[d]);
          else {
            if (136 === c) {
              c = Qt(b).value;
              b = [];
              c = t(Ut(a, c));
              for (var e = c.next(); !e.done; e = c.next()) {
                e = a.h[e.value];
                if (e.isVisible()) {
                  var f = Mt(e, d, a.i);
                  f && b.push(f);
                }
                Ht(e);
              }
              return b;
            }
            if (137 === c) for (b = Qt(b).value, b = t(Ut(a, b)), c = b.next(); !c.done; c = b.next()) c = a.h[c.value], c.isVisible() || (c.j = d), c.display();
            else {
              if (138 === c) {
                c = Qt(b).value;
                b = null;
                c = t(Ut(a, c));
                for (e = c.next(); !e.done; e = c.next()) e = a.h[e.value], e.isVisible() && (b = Mt(e, d, a.i)), e.l = false;
                return b ? [b] : [];
              }
              if (139 === c) {
                c = Qt(b).value;
                b = null;
                c = t(Ut(a, c));
                for (e = c.next(); !e.done; e = c.next()) e = a.h[e.value], e.isVisible() ? b = Mt(e, d, a.i) : e.j = d, e.l = !e.l;
                return b ? [b] : [];
              }
              if (140 === c) return b = Qt(b).value, Vt(a, b, d);
              if (143 === c) return d = Vt(a, 255, d), Wt(a), d;
              if (144 === c) b.skip(1), d = Qt(b).value, a.g && (a.g.A = 0 < (d & 128), a.g.C = 0 < (d & 64));
              else if (145 === c) d = Qt(b).value, c = Qt(b).value, b.skip(1), a.g && (b = Xt((c & 48) >> 4, (c & 12) >> 2, c & 3), a.g.B = Xt((d & 48) >> 4, (d & 12) >> 2, d & 3), a.g.s = b);
              else if (146 === c) d = Qt(b).value, b = Qt(b).value, a.g && (a = a.g, a.h = d & 15, a.g = b & 63);
              else if (151 === c) b.skip(1), b.skip(1), d = Qt(b).value, b.skip(1), a.g && (a.g.F = d & 3);
              else if (152 <= c && 159 >= c) {
                c = (c & 15) - 8;
                e = null !== a.h[c];
                e || (f = new Gt(c, a.i), f.j = d, a.h[c] = f);
                d = Qt(b).value;
                f = Qt(b).value;
                var g = Qt(b).value, h = Qt(b).value, k2 = Qt(b).value;
                b = Qt(b).value;
                e && 0 === (b & 7) || (b = a.h[c], b.h = 0, b.g = 0, b.C = false, b.A = false, b.B = "white", b.s = "black");
                b = a.h[c];
                b.l = 0 < (d & 32);
                b.L = f & 127;
                b.H = g;
                b.G = (h & 240) >> 4;
                b.K = 0 < (f & 128);
                b.o = (h & 15) + 1;
                b.m = (k2 & 63) + 1;
                a.g = a.h[c];
              }
            }
          }
          return [];
        }
        function Ut(a, b) {
          for (var c = [], d = 0; 8 > d; d++) 1 === (b & 1) && a.h[d] && c.push(d), b >>= 1;
          return c;
        }
        function Vt(a, b, c) {
          var d = [];
          b = t(Ut(a, b));
          for (var e = b.next(); !e.done; e = b.next()) {
            e = e.value;
            var f = a.h[e];
            f.isVisible() && (f = Mt(f, c, a.i)) && d.push(f);
            a.h[e] = null;
          }
          return d;
        }
        function Wt(a) {
          a.g = null;
          a.h = [null, null, null, null, null, null, null, null];
        }
        function Xt(a, b, c) {
          var d = { 0: 0, 1: 0, 2: 1, 3: 1 };
          a = d[a];
          b = d[b];
          c = d[c];
          return Yt[a << 2 | b << 1 | c];
        }
        var Zt = /* @__PURE__ */ new Map([[32, " "], [33, "\xA0"], [37, "\u2026"], [42, "\u0160"], [44, "\u0152"], [48, "\u2588"], [49, "\u2018"], [50, "\u2019"], [51, "\u201C"], [52, "\u201D"], [53, "\u2022"], [57, "\u2122"], [58, "\u0161"], [60, "\u0153"], [61, "\u2120"], [63, "\u0178"], [118, "\u215B"], [119, "\u215C"], [120, "\u215D"], [121, "\u215E"], [122, "\u2502"], [123, "\u2510"], [124, "\u2514"], [125, "\u2500"], [126, "\u2518"], [127, "\u250C"]]), Yt = "black blue green cyan red magenta yellow white".split(" ");
        function $t() {
          this.h = [];
          this.g = [];
          this.i = new Nt();
          this.l = 0;
          this.m = /* @__PURE__ */ new Map([["CC1", new At(0, 0)], ["CC2", new At(0, 1)], ["CC3", new At(1, 0)], ["CC4", new At(1, 1)]]);
          this.s = this.o = 0;
          this.j = /* @__PURE__ */ new Map();
          this.B = true;
          this.A = /* @__PURE__ */ new Set();
          au(this);
        }
        $t.prototype.clear = function() {
          this.l = 0;
          this.h = [];
          this.g = [];
          var a = this.i;
          a.i = [];
          a.h = [];
          a.g = 0;
          au(this);
          a = t(this.j.values());
          for (var b = a.next(); !b.done; b = a.next()) Wt(b.value);
        };
        function au(a) {
          a.o = 0;
          a.s = 0;
          for (var b = t(a.m.values()), c = b.next(); !c.done; c = b.next()) c = c.value, c.h = 0, c.g = c.j, c.m = null, qt(c.i), qt(c.j), qt(c.o);
          a.B = true;
        }
        $t.prototype.extract = function(a, b) {
          if (this.B) {
            for (var c = t(this.m.values()), d = c.next(); !d.done; d = c.next()) d.value.l = b;
            this.B = false;
          }
          a = new Bh(a, 0);
          if (!(8 > a.getLength()) && 181 === a.X() && 49 === a.na() && 1195456820 === a.R() && 3 === a.X() && (c = a.X(), 0 !== (c & 64))) for (c &= 31, a.skip(1), d = 0; d < c; d++) {
            var e = a.X(), f = (e & 4) >> 2, g = a.X(), h = a.X();
            f && (e &= 3, 0 === e || 1 === e ? this.h.push({ pts: b, type: e, nb: g, Lb: h, order: this.h.length }) : (this.g.push({ pts: b, type: e, value: g, order: this.g.length }), this.g.push({ pts: b, type: 2, value: h, order: this.g.length })));
          }
        };
        $t.prototype.decode = function() {
          function a(e, f) {
            return e.pts - f.pts || e.order - f.order;
          }
          var b = [];
          this.h.sort(a);
          this.g.sort(a);
          for (var c = t(this.h), d = c.next(); !d.done; d = c.next()) (d = bu(this, d.value)) && b.push(d);
          c = t(this.g);
          for (d = c.next(); !d.done; d = c.next()) Ot(this.i, d.value);
          c = t(this.i.i);
          for (d = c.next(); !d.done; d = c.next()) d = cu(this, d.value), b.push.apply(b, y(d));
          this.i.i = [];
          this.h = [];
          this.g = [];
          return b;
        };
        function bu(a, b) {
          var c = b.type;
          if (16 === (b.nb & 112)) {
            var d = b.nb >> 3 & 1;
            0 === c ? a.o = d : a.s = d;
          }
          d = "CC" + ((c << 1 | (c ? a.s : a.o)) + 1);
          c = a.m.get(d);
          if (255 === b.nb && 255 === b.Lb || !b.nb && !b.Lb || !du(b.nb) || !du(b.Lb)) return 45 <= ++a.l && au(a), null;
          a.l = 0;
          b.nb &= 127;
          b.Lb &= 127;
          var e = b.nb;
          if (1 <= e && 15 >= e || !b.nb && !b.Lb) return null;
          e = null;
          if (16 === (b.nb & 112)) a: {
            a.A.add(d), d = b.nb;
            a = b.Lb;
            if (c.m === (d << 8 | a)) c.m = null;
            else if (c.m = d << 8 | a, 16 === (d & 240) && 64 === (a & 192)) {
              b = [11, 11, 1, 2, 3, 4, 12, 13, 14, 15, 5, 6, 7, 8, 9, 10][(d & 7) << 1 | a >> 5 & 1];
              d = "white";
              e = false;
              var f = null;
              var g = 95 < a ? a - 96 : a - 64;
              13 >= g ? d = Ft[Math.floor(g / 2)] : 15 >= g ? e = true : f = Math.floor((g - 16) / 2);
              a = 1 === (a & 1);
              4 !== c.h && (g = c.g, 3 === c.h && b !== g.g && (c = 1 + b - g.h, zt(g, c, 1 + g.g - g.h, g.h), tt(g, 0, c - 1), tt(g, b + 1, 15 - b)), g.g = b, g.m = a, g.j = e, g.l = d, g.s = f, g.o = "black");
            } else if (17 === (d & 247) && 32 === (a & 240)) c.g.m = false, c.g.j = false, c.g.l = "white", ut(c.g, 0, 32), d = false, b = Ft[(a & 14) >> 1], "white_italics" === b && (b = "white", d = true), c.g.m = 1 === (a & 1), c.g.j = d, c.g.l = b;
            else if (16 === (d & 247) && 32 === (a & 240) || 23 === (d & 247) && 45 === (a & 255)) b = "black", 0 === (d & 7) && (b = Et[(a & 14) >> 1]), c.g.o = b;
            else if (17 === (d & 247) && 48 === (a & 240)) ut(c.g, 1, a);
            else if (18 === (d & 246) && 32 === (a & 224)) ut(c.g, d & 1 ? 3 : 2, a);
            else {
              if (20 === (d & 246) && 32 === (a & 240)) {
                a = b.pts;
                d = null;
                switch (b.Lb) {
                  case 32:
                    Ct(c);
                    break;
                  case 33:
                    c = c.g;
                    c.i[c.g].pop();
                    break;
                  case 37:
                    d = Bt(c, 2, a);
                    break;
                  case 38:
                    d = Bt(c, 3, a);
                    break;
                  case 39:
                    d = Bt(c, 4, a);
                    break;
                  case 40:
                    ut(c.g, 0, 32);
                    break;
                  case 41:
                    c.h = 2;
                    c.g = c.i;
                    c.g.h = 0;
                    c.l = a;
                    break;
                  case 42:
                    qt(c.o);
                    Dt(c);
                    break;
                  case 43:
                    Dt(c);
                    break;
                  case 44:
                    b = c.i;
                    d = null;
                    4 !== c.h && (d = rt(b, c.l, a));
                    tt(b, 0, 15);
                    break;
                  case 45:
                    b = c.g;
                    3 !== c.h ? d = null : (d = rt(b, c.l, a), e = b.g - b.h + 1, zt(b, e - 1, e, b.h), tt(b, 0, e - 1), tt(b, b.g, 15 - b.g), c.l = a);
                    break;
                  case 46:
                    tt(c.j, 0, 15);
                    break;
                  case 47:
                    b = null, 4 !== c.h && (b = rt(c.i, c.l, a)), d = c.j, c.j = c.i, c.i = d, Ct(c), c.l = a, d = b;
                }
                e = d;
                break a;
              }
              (23 == d || 31 == d) && 33 <= a && 35 >= a && (c.g.A = a - 32);
            }
            e = null;
          }
          else a = b.Lb, ut(c.g, 0, b.nb), ut(c.g, 0, a);
          return e;
        }
        function cu(a, b) {
          var c = [];
          try {
            for (; b.ta(); ) {
              var d = Qt(b).value, e = (d & 224) >> 5, f = d & 31;
              7 === e && 0 != f && (e = Qt(b).value & 63);
              if (0 != e) {
                a.A.add("svc" + e);
                a.j.has(e) || a.j.set(e, new Rt(e));
                for (var g = a.j.get(e), h = b.Ba(); b.Ba() - h < f; ) {
                  e = g;
                  var k2 = b, l = Qt(k2), m = l.value, n = l.pts;
                  if (16 === m) {
                    var p = Qt(k2);
                    m = m << 16 | p.value;
                  }
                  if (0 <= m && 31 >= m) var q = St(e, k2, m, n);
                  else if (128 <= m && 159 >= m) q = Tt(e, k2, m, n);
                  else {
                    if (4096 <= m && 4127 >= m) e = k2, k2 = m & 255, 8 <= k2 && 15 >= k2 ? e.skip(1) : 16 <= k2 && 23 >= k2 ? e.skip(2) : 24 <= k2 && 31 >= k2 && e.skip(3);
                    else if (4224 <= m && 4255 >= m) e = k2, k2 = m & 255, 128 <= k2 && 135 >= k2 ? e.skip(4) : 136 <= k2 && 143 >= k2 && e.skip(5);
                    else if (32 <= m && 127 >= m) k2 = m, e.g && (127 === k2 ? Jt(e.g, "\u266A") : Jt(e.g, String.fromCharCode(k2)));
                    else if (160 <= m && 255 >= m) e.g && Jt(e.g, String.fromCharCode(m));
                    else if (4128 <= m && 4223 >= m) {
                      if (k2 = m & 255, e.g) if (Zt.has(k2)) {
                        var u = Zt.get(k2);
                        Jt(e.g, u);
                      } else Jt(e.g, "_");
                    } else 4256 <= m && 4351 >= m && e.g && (160 != (m & 255) ? Jt(e.g, "_") : Jt(e.g, "[CC]"));
                    q = [];
                  }
                  c.push.apply(c, y(q));
                }
              }
            }
          } catch (w) {
            if (w instanceof U && 3e3 === w.code) eb("CEA708_INVALID_DATA", "Buffer read out of bounds / invalid CEA-708 Data.");
            else throw w;
          }
          return c;
        }
        function du(a) {
          for (var b = 0; a; ) b ^= a & 1, a >>= 1;
          return 1 === b;
        }
        $t.prototype.getStreams = function() {
          return Array.from(this.A);
        };
        T("shaka.cea.CeaDecoder", $t);
        ud = function() {
          return new $t();
        };
        function eu(a) {
          for (var b = [], c = a, d = a = 0; d < c.length; ) 2 == a && 3 == c[d] ? (a = 0, c = [].concat(y(c)), c.splice(d, 1), c = new Uint8Array(c)) : 0 == c[d] ? a++ : a = 0, d++;
          a = c;
          for (d = 0; d < a.length; ) {
            for (c = 0; 255 == a[d]; ) c += 255, d++;
            c += a[d++];
            for (var e = 0; 255 == a[d]; ) e += 255, d++;
            e += a[d++];
            4 == c && b.push(a.subarray(d, d + e));
            d += e;
          }
          return b;
        }
        ;
        function fu() {
          this.j = /* @__PURE__ */ new Map();
          this.i = this.h = 0;
          this.g = gu;
        }
        fu.prototype.init = function(a) {
          function b(f) {
            f = f.name;
            hu.has(f) && (c.g = hu.get(f));
          }
          var c = this, d = [], e = [];
          new Eh().box("moov", Jh).box("mvex", Jh).S("trex", function(f) {
            var g = f.reader;
            g.skip(4);
            g.skip(4);
            f = g.R();
            g = g.R();
            c.h = f;
            c.i = g;
          }).box("trak", Jh).S("tkhd", function(f) {
            var g = f.reader;
            f = f.version;
            1 == f ? (g.skip(8), g.skip(8)) : (g.skip(4), g.skip(4));
            var h = g.R();
            1 == f ? g.skip(8) : g.skip(4);
            g.skip(4);
            g.skip(8);
            g.skip(2);
            g.skip(2);
            g.skip(2);
            g.skip(2);
            g.skip(36);
            g.na();
            g.na();
            g.na();
            g.na();
            d.push(h);
          }).box("mdia", Jh).S(
            "mdhd",
            function(f) {
              f = fk(f.reader, f.version);
              e.push(f.timescale);
            }
          ).box("minf", Jh).box("stbl", Jh).S("stsd", Lh).box("avc1", b).box("avc3", b).box("dvav", b).box("dva1", b).box("hev1", b).box("hvc1", b).box("dvh1", b).box("dvhe", b).box("vvc1", b).box("vvi1", b).box("dvc1", b).box("dvi1", b).box("encv", Mh).box("sinf", Jh).box("frma", function(f) {
            f = ik(f.reader).codec;
            hu.has(f) && (c.g = hu.get(f));
          }).parse(a, true);
          if (!d.length || !e.length || d.length != e.length) throw new U(2, 2, 2010);
          this.g == gu && db("Unable to determine bitstream format for CEA parsing!");
          d.forEach(function(f, g) {
            c.j.set(f, e[g]);
          });
        };
        fu.prototype.parse = function(a) {
          var b = this;
          if (this.g == gu) return [];
          var c = [], d = 0, e = [];
          new Eh().box("moof", function(f) {
            d = f.start;
            e = [];
            Jh(f);
          }).box("traf", function(f) {
            e.push({ baseMediaDecodeTime: null, ld: b.h, md: b.i, jh: [], timescale: 9e4 });
            Jh(f);
          }).S("trun", function(f) {
            var g = e[e.length - 1];
            f = gk(f.reader, f.version, f.flags);
            g.jh.push(f);
          }).S("tfhd", function(f) {
            var g = e[e.length - 1];
            f = Vj(f.reader, f.flags);
            g.ld = f.ld || b.h;
            g.md = f.md || b.i;
            f = f.trackId;
            b.j.has(f) && (g.timescale = b.j.get(f));
          }).S("tfdt", function(f) {
            var g = e[e.length - 1];
            f = Wj(f.reader, f.version);
            g.baseMediaDecodeTime = f.baseMediaDecodeTime;
          }).box("mdat", function(f) {
            for (var g = d - f.start - 8, h = f.reader.Ba(), k2 = t(e), l = k2.next(); !l.done; l = k2.next()) {
              l = l.value;
              if (null === l.baseMediaDecodeTime) throw db("Unable to find base media decode time for CEA captions!"), new U(2, 2, 2010);
              f.reader.seek(h);
              iu(b, f.reader, l.baseMediaDecodeTime, l.timescale, l.ld, l.md, g, l.jh, c);
            }
          }).parse(a, false);
          return c;
        };
        function iu(a, b, c, d, e, f, g, h, k2) {
          var l = 0, m = f, n = h.map(function(u) {
            return u.dg;
          });
          n = [].concat.apply([], y(n));
          n.length && (m = n[0].sampleSize || f);
          for (b.skip(g + h[0].bi); b.ta(); ) {
            g = b.R();
            var p = b.X(), q = null;
            q = false;
            h = 1;
            switch (a.g) {
              case ju:
                q = p & 31;
                q = 6 == q;
                break;
              case ku:
                h = 2;
                b.skip(1);
                q = p >> 1 & 63;
                q = 39 == q || 40 == q;
                break;
              case lu:
                h = 2;
                b.skip(1);
                q = p >> 1 & 63;
                q = 23 == q || 24 == q;
                break;
              default:
                return;
            }
            if (q) for (p = 0, l < n.length && (p = n[l].ye || 0), p = (c + p) / d, h = t(eu(b.Cb(g - h))), q = h.next(); !q.done; q = h.next()) k2.push({ packet: q.value, pts: p });
            else try {
              b.skip(g - h);
            } catch (u) {
              break;
            }
            m -= g + 4;
            0 == m && (c = l < n.length ? c + (n[l].eg || e) : c + e, l++, l < n.length ? m = n[l].sampleSize || f : m = f);
          }
        }
        T("shaka.cea.Mp4CeaParser", fu);
        var gu = 0, ju = 1, ku = 2, lu = 3, hu = (/* @__PURE__ */ new Map()).set("avc1", ju).set("avc3", ju).set("dvav", ju).set("dva1", ju).set("hev1", ku).set("hvc1", ku).set("dvh1", ku).set("dvhe", ku).set("vvc1", lu).set("vvi1", lu).set("dvc1", lu).set("dvi1", lu);
        vd("video/mp4", function() {
          return new fu();
        });
        function mu() {
          this.g = null;
        }
        mu.prototype.init = function() {
        };
        mu.prototype.parse = function(a) {
          this.g ? this.g.clearData() : this.g = new xk();
          var b = [];
          a = Qb(a);
          if (!Fk(a)) return b;
          a = this.g.parse(a);
          var c = a.od(), d = a.be();
          a = [];
          switch (c.video) {
            case "avc":
              a.push(6);
              break;
            case "hvc":
              a.push(39), a.push(40);
          }
          if (!a.length) return b;
          c = t(d);
          for (d = c.next(); !d.done; d = c.next()) if (d = d.value, a.includes(d.type) && null != d.time) for (var e = t(eu(d.data)), f = e.next(); !f.done; f = e.next()) b.push({ packet: f.value, pts: d.time });
          return b;
        };
        T("shaka.cea.TsCeaParser", mu);
        vd("video/mp2t", function() {
          return new mu();
        });
        function nu(a) {
          var b = 0, c = Vb(a), d = c.getUint32(b, true);
          if (d != a.byteLength) return [];
          a: {
            a = b + 6;
            for (b = []; a < c.byteLength - 1; ) {
              d = c.getUint16(a, true);
              a += 2;
              var e = c.getUint16(a, true);
              a += 2;
              if (0 != (e & 1) || e + a > c.byteLength) {
                c = [];
                break a;
              }
              var f = Qb(c, a, e);
              b.push({ type: d, value: f });
              a += e;
            }
            c = b;
          }
          return c;
        }
        function ou(a) {
          a = Sc(Yd(a));
          a = nu(a).filter(function(b) {
            return b.type === pu;
          })[0];
          if (!a) return null;
          a = Hc(a.value, true);
          return (a = Qd(a, "WRMHEADER")) ? a : null;
        }
        function qu(a) {
          try {
            var b = ou(a);
            if (b) a: {
              for (var c = t($d(b, "DATA")), d = c.next(); !d.done; d = c.next()) {
                var e = d.value;
                if (e.children) for (var f = t(e.children), g = f.next(); !g.done; g = f.next()) {
                  var h = g.value;
                  if ("LA_URL" == h.tagName) {
                    var k2 = Yd(h);
                    break a;
                  }
                }
              }
              k2 = "";
            }
            else k2 = "";
            return k2;
          } catch (l) {
            return "";
          }
        }
        var pu = 1;
        function ru(a, b, c) {
          var d = su(a), e = null;
          a = [];
          var f = [], g = null, h = new Set(d.map(function(l) {
            return l.keyId;
          }));
          h.delete(null);
          var k2 = "cenc";
          if (1 < h.size) throw new U(2, 4, 4010);
          if (!b) {
            f = d.filter(function(l) {
              return "urn:mpeg:dash:sea:2012" == l.cd;
            });
            if (1 < f.length) throw new U(2, 4, 4050);
            f.length && (g = tu(f[0]));
            (f = d.find(function(l) {
              return "urn:mpeg:dash:mp4protection:2011" == l.cd;
            })) && f.encryptionScheme && (k2 = f.encryptionScheme);
            f = d.filter(function(l) {
              return "urn:mpeg:dash:mp4protection:2011" == l.cd ? (e = l.init || e, false) : "urn:mpeg:dash:sea:2012" != l.cd;
            });
            f.length && (a = uu(e, k2, f, c, h), 0 == a.length && (a = [Xc("", k2, e)]));
          }
          if (d.length && !g && (b || !f.length)) for (a = [], b = t(Object.values(c)), c = b.next(); !c.done; c = b.next()) c = c.value, "org.w3.clearkey" != c && a.push(Xc(c, k2, e));
          if (h = Array.from(h)[0] || null) for (k2 = t(a), b = k2.next(); !b.done; b = k2.next()) for (b = t(b.value.initData), c = b.next(); !c.done; c = b.next()) c.value.keyId = h;
          return { Hg: h, Ok: e, drmInfos: a, cf: g, Mg: true };
        }
        function vu(a, b, c, d) {
          var e = ru(a, c, d);
          if (b.Mg) {
            a = 1 == b.drmInfos.length && !b.drmInfos[0].keySystem;
            c = 0 == e.drmInfos.length;
            if (0 == b.drmInfos.length || a && !c) b.drmInfos = e.drmInfos;
            b.Mg = false;
          } else if (0 < e.drmInfos.length && (b.drmInfos = b.drmInfos.filter(function(f) {
            return e.drmInfos.some(function(g) {
              return g.keySystem == f.keySystem;
            });
          }), 0 == b.drmInfos.length)) throw new U(2, 4, 4008);
          return e.Hg || b.Hg;
        }
        function wu(a) {
          var b = be(a.node, "https://dashif.org/CPS", "Laurl");
          if (b && (b = Yd(b))) return b;
          if ((b = be(a.node, "urn:microsoft:playready", "pro")) && Yd(b)) return qu(b);
          if (a = be(a.node, "urn:mpeg:cenc:2013", "pssh")) {
            if (a = Yd(a)) {
              b = Sc(a);
              a = 8;
              b = Vb(b);
              var c = b.getUint8(a);
              a += 20;
              0 < c && (a += 4 + 16 * b.getUint32(a));
              a = Qb(b, a + 4);
              a = Qc(a);
              a = Qd("<pro>" + a + "</pro>");
              return qu(a);
            }
          }
          return "";
        }
        function uu(a, b, c, d, e) {
          var f = [];
          c = t(c);
          for (var g = c.next(); !g.done; g = c.next()) {
            g = g.value;
            var h = d[g.cd];
            if (h) {
              var k2;
              if ((k2 = be(g.node, "urn:microsoft:playready", "pro")) && Yd(k2)) {
                k2 = Yd(k2);
                k2 = Sc(k2);
                var l = new Uint8Array([154, 4, 240, 121, 152, 64, 66, 134, 171, 146, 230, 91, 224, 136, 95, 149]);
                k2 = [{ initData: Qh(k2, l, /* @__PURE__ */ new Set(), 0), initDataType: "cenc", keyId: g.keyId }];
              } else k2 = null;
              l = null;
              if ("urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e" === g.cd) {
                l = g;
                var m = e;
                if (0 == m.size) l = null;
                else {
                  var n = new Uint8Array([
                    16,
                    119,
                    239,
                    236,
                    192,
                    178,
                    77,
                    2,
                    172,
                    227,
                    60,
                    30,
                    82,
                    226,
                    251,
                    75
                  ]), p = new Uint8Array([]);
                  l = [{ initData: Qh(p, n, m, 1), initDataType: "cenc", keyId: l.keyId }];
                }
              }
              k2 = Xc(h, b, g.init || a || k2 || l);
              if (h = xu.get(h)) k2.licenseServerUri = h(g);
              f.push(k2);
            }
          }
          return f;
        }
        function su(a) {
          var b = [];
          a = t(a);
          for (var c = a.next(); !c.done; c = a.next()) (c = yu(c.value)) && b.push(c);
          return b;
        }
        function yu(a) {
          var b = a.attributes.schemeIdUri, c = he(a, "urn:mpeg:cenc:2013", "default_KID"), d = de(a, "urn:mpeg:cenc:2013", "pssh").map(Zd), e = a.attributes.value;
          if (!b) return null;
          b = b.toLowerCase();
          if (c && (c = c.replace(/-/g, "").toLowerCase(), c.includes(" "))) throw new U(2, 4, 4009);
          var f = [];
          try {
            f = d.map(function(g) {
              return { initDataType: "cenc", initData: Sc(g), keyId: null };
            });
          } catch (g) {
            throw new U(2, 4, 4007);
          }
          return { node: a, cd: b, keyId: c, init: 0 < f.length ? f : null, encryptionScheme: e };
        }
        function tu(a) {
          if (!window2.crypto || !window2.crypto.subtle) throw db("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"), new U(2, 4, 4042);
          var b = be(a.node, "urn:mpeg:dash:schema:sea:2012", "SegmentEncryption");
          if (!b) throw new U(2, 4, 4051);
          if ("urn:mpeg:dash:sea:aes128-cbc:2013" != b.attributes.schemeIdUri) throw new U(2, 4, 4051);
          b = be(a.node, "urn:mpeg:dash:schema:sea:2012", "CryptoPeriod");
          if (!b) throw new U(2, 4, 4051);
          a = b.attributes.IV;
          b = Nc(b.attributes.keyUriTemplate);
          if (!a || !b) throw new U(2, 4, 4051);
          a = Tc(a.substr(2));
          if (16 != a.byteLength) throw new U(2, 4, 4048);
          return { Vi: b, iv: a };
        }
        var xu = (/* @__PURE__ */ new Map()).set("com.apple.fps", function(a) {
          if ("apple" === window2.shakaMediaKeysPolyfill) throw new U(2, 4, 4054);
          if (a = be(a.node, "https://dashif.org/CPS", "Laurl")) {
            if (a = Yd(a)) return a;
          }
          return "";
        }).set("com.widevine.alpha", function(a) {
          var b = be(a.node, "https://dashif.org/CPS", "Laurl");
          return b && (b = Yd(b)) ? b : (a = be(a.node, "urn:microsoft", "laurl")) ? Nc(a.attributes.licenseUrl) || "" : "";
        }).set("com.microsoft.playready", wu).set("com.microsoft.playready.recommendation", wu).set(
          "com.microsoft.playready.software",
          wu
        ).set("com.microsoft.playready.hardware", wu).set("org.w3.clearkey", function(a) {
          var b = be(a.node, "https://dashif.org/CPS", "Laurl");
          return b && (b = Yd(b)) ? b : (a = be(a.node, "http://dashif.org/guidelines/clearKey", "Laurl")) && "EME-1.0" === a.attributes.Lic_type && a && (a = Yd(a)) ? a : "";
        });
        function zu(a, b, c, d, e, f) {
          var g = (/* @__PURE__ */ new Map()).set("RepresentationID", b).set("Number", c).set("SubNumber", d).set("Bandwidth", e).set("Time", f);
          return a.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g, function(h, k2, l, m) {
            if ("$$" == h) return "$";
            var n = g.get(k2);
            if (null == n) return h;
            "RepresentationID" == k2 && l && (l = void 0);
            "Time" == k2 && "bigint" != typeof n && (0.2 <= Math.abs(n - Math.round(n)) && db("Calculated $Time$ values must be close to integers"), n = Math.round(n));
            switch (m) {
              case void 0:
              case "d":
              case "i":
              case "u":
                h = n.toString();
                break;
              case "o":
                h = n.toString(8);
                break;
              case "x":
                h = n.toString(16);
                break;
              case "X":
                h = n.toString(16).toUpperCase();
                break;
              default:
                h = n.toString();
            }
            l = window2.parseInt(l, 10) || 1;
            return Array(Math.max(0, l - h.length) + 1).join("0") + h;
          });
        }
        function Au(a, b) {
          var c = Bu(a, b, "timescale"), d = 1;
          c && (d = ne(c) || 1);
          c = Bu(a, b, "duration");
          var e = (c = ne(c || "")) ? c / d : null, f = Bu(a, b, "startNumber"), g = Number(Bu(a, b, "presentationTimeOffset")) || 0, h = oe(f || "");
          if (null == f || null == h) h = 1;
          f = null;
          if (b = Cu(a, b, "SegmentTimeline")) {
            b = Xd(b, "S");
            f = d;
            a = a.ha.duration || Infinity;
            for (var k2 = h, l = [], m = -g, n = 0; n < b.length; ++n) {
              var p = b[n], q = b[n + 1], u = ge(p, "t", oe), w = ge(p, "d", oe), v = ge(p, "r", me);
              p = ge(p, "k", me) || 0;
              null != u && (u -= g);
              if (w) {
                u = null != u ? u : m;
                v = v || 0;
                if (0 > v) if (q) {
                  q = ge(q, "t", oe);
                  if (null == q) break;
                  else if (u >= q) break;
                  v = Math.ceil((q - u) / w) - 1;
                } else {
                  if (Infinity == a) break;
                  else if (u / f >= a) break;
                  v = Math.ceil((a * f - u) / w) - 1;
                }
                0 < l.length && u != m && (l[l.length - 1].end = u / f);
                for (q = 0; q <= v; ++q) m = u + w, l.push({ start: u / f, end: m / f, vg: u, Ib: p, uj: l.length + k2 }), u = m;
              }
            }
            f = l;
          }
          return { timescale: d, He: c, Wa: e, Ld: h, fc: g / d || 0, ug: g, timeline: f };
        }
        function Du(a, b) {
          return [b(a.J), b(a.ga), b(a.qa)].filter(Jf);
        }
        function Bu(a, b, c) {
          b = Du(a, b);
          a = null;
          b = t(b);
          for (var d = b.next(); !d.done && !(a = d.value.attributes[c]); d = b.next()) ;
          return a;
        }
        function Cu(a, b, c) {
          b = Du(a, b);
          a = null;
          b = t(b);
          for (var d = b.next(); !d.done && !(a = ae(d.value, c)); d = b.next()) ;
          return a;
        }
        function Eu(a, b, c, d, e, f) {
          for (var g = he(a, "http://www.w3.org/1999/xlink", "href"), h = he(a, "http://www.w3.org/1999/xlink", "actuate") || "onRequest", k2 = t(Object.keys(a.attributes)), l = k2.next(); !l.done; l = k2.next()) {
            l = l.value;
            var m = l.split(":"), n = Sd("http://www.w3.org/1999/xlink");
            m[0] == n && delete a.attributes[l];
          }
          if (5 <= f) return Vg(new U(2, 4, 4028));
          if ("onLoad" != h) return Vg(new U(2, 4, 4027));
          var p = Wc([d], [g]);
          return e.request(0, kh(p, b)).Ha(function(q) {
            q = Pd(q.data, a.tagName);
            if (!q) return Vg(new U(2, 4, 4001, g));
            for (a.children = []; q.children.length; ) {
              var u = q.children.shift();
              a.children.push(u);
            }
            u = t(Object.keys(q.attributes));
            for (var w = u.next(); !w.done; w = u.next()) w = w.value, a.attributes[w] = q.attributes[w];
            return Fu(a, b, c, p[0], e, f + 1);
          });
        }
        function Fu(a, b, c, d, e, f) {
          f = void 0 === f ? 0 : f;
          if (he(a, "http://www.w3.org/1999/xlink", "href")) {
            var g = Eu(a, b, c, d, e, f);
            c && (g = g.Ha(void 0, function() {
              return Fu(a, b, c, d, e, f);
            }));
            return g;
          }
          g = [];
          for (var h = t(Wd(a)), k2 = h.next(), l = {}; !k2.done; l = { hd: void 0 }, k2 = h.next()) l.hd = k2.value, "urn:mpeg:dash:resolve-to-zero:2013" == he(l.hd, "http://www.w3.org/1999/xlink", "href") ? a.children = a.children.filter(/* @__PURE__ */ function(m) {
            return function(n) {
              return n !== m.hd;
            };
          }(l)) : "SegmentTimeline" != l.hd.tagName && g.push(Fu(l.hd, b, c, d, e, f));
          return Zg(g).Ha(function() {
            return a;
          });
        }
        ;
        function Gu(a, b, c, d, e, f, g) {
          var h, k2 = new Eh().S("sidx", function(l) {
            h = Hu(b, d, e, f, g, c, l);
          });
          a && k2.parse(a);
          if (h) return h;
          throw new U(2, 3, 3004);
        }
        function Hu(a, b, c, d, e, f, g) {
          var h = [];
          g.reader.skip(4);
          var k2 = g.reader.R();
          if (0 == k2) throw new U(2, 3, 3005);
          if (0 == g.version) {
            var l = g.reader.R();
            var m = g.reader.R();
          } else l = g.reader.bd(), m = g.reader.bd();
          g.reader.skip(2);
          var n = g.reader.na();
          a = a + g.size + m;
          for (m = 0; m < n; m++) {
            var p = g.reader.R(), q = (p & 2147483648) >>> 31;
            p &= 2147483647;
            var u = g.reader.R();
            g.reader.skip(4);
            if (1 == q) throw new U(2, 3, 3006);
            h.push(new Bj(l / k2 + c, (l + u) / k2 + c, function() {
              return f;
            }, a, a + p - 1, b, c, d, e));
            l += u;
            a += p;
          }
          g.parser.stop();
          return h;
        }
        ;
        function Iu(a) {
          this.h = Vb(a);
          this.g = new Bh(this.h, 0);
        }
        Iu.prototype.ta = function() {
          return this.g.ta();
        };
        function Ju(a) {
          var b = Ku(a);
          if (7 < b.length) throw new U(2, 3, 3002);
          var c = 0;
          b = t(b);
          for (var d = b.next(); !d.done; d = b.next()) c = 256 * c + d.value;
          b = Ku(a);
          a: {
            d = t(Lu);
            for (var e = d.next(); !e.done; e = d.next()) if (Pb(b, new Uint8Array(e.value))) {
              d = true;
              break a;
            }
            d = false;
          }
          if (d) b = a.h.byteLength - a.g.Ba();
          else {
            if (8 == b.length && b[1] & 224) throw new U(2, 3, 3001);
            for (e = d = 0; e < b.length; e++) {
              var f = b[e];
              d = 0 == e ? f & (1 << 8 - b.length) - 1 : 256 * d + f;
            }
            b = d;
          }
          b = a.g.Ba() + b <= a.h.byteLength ? b : a.h.byteLength - a.g.Ba();
          d = Vb(a.h, a.g.Ba(), b);
          a.g.skip(b);
          return new Mu(
            c,
            d
          );
        }
        function Ku(a) {
          var b = a.g.Ba(), c = a.g.X();
          if (0 == c) throw new U(2, 3, 3002);
          c = 8 - Math.floor(Math.log2(c));
          a.g.skip(c - 1);
          return Qb(a.h, b, c);
        }
        var Lu = [[255], [127, 255], [63, 255, 255], [31, 255, 255, 255], [15, 255, 255, 255, 255], [7, 255, 255, 255, 255, 255], [3, 255, 255, 255, 255, 255, 255], [1, 255, 255, 255, 255, 255, 255, 255]];
        function Mu(a, b) {
          this.id = a;
          this.g = b;
        }
        function Nu(a) {
          if (8 < a.g.byteLength) throw new U(2, 3, 3002);
          if (8 == a.g.byteLength && a.g.getUint8(0) & 224) throw new U(2, 3, 3001);
          for (var b = 0, c = 0; c < a.g.byteLength; c++) {
            var d = a.g.getUint8(c);
            b = 256 * b + d;
          }
          return b;
        }
        ;
        function Ou(a, b, c, d, e, f, g, h, k2) {
          function l() {
            return e;
          }
          var m = [];
          a = new Iu(a.g);
          for (var n = null, p = null; a.ta(); ) {
            var q = Ju(a);
            if (187 == q.id) {
              var u = Pu(q);
              u && (q = c * u.Hj, u = b + u.lj, null != n && m.push(new Bj(n + g, q + g, l, p, u - 1, f, g, h, k2)), n = q, p = u);
            }
          }
          null != n && m.push(new Bj(n + g, d + g, l, p, null, f, g, h, k2));
          return m;
        }
        function Pu(a) {
          var b = new Iu(a.g);
          a = Ju(b);
          if (179 != a.id) throw new U(2, 3, 3013);
          a = Nu(a);
          b = Ju(b);
          if (183 != b.id) throw new U(2, 3, 3012);
          b = new Iu(b.g);
          for (var c = 0; b.ta(); ) {
            var d = Ju(b);
            if (241 == d.id) {
              c = Nu(d);
              break;
            }
          }
          return { Hj: a, lj: c };
        }
        ;
        function Qu(a, b, c) {
          b = Cu(a, b, "Initialization");
          if (!b) return null;
          var d = a.J.Ua(), e = b.attributes.sourceURL;
          e && (d = Wc(d, [Nc(e)], a.ub()));
          e = 0;
          var f = null;
          if (b = ge(b, "range", le)) e = b.start, f = b.end;
          c = new zj(function() {
            return d;
          }, e, f, Ru(a), null, null, c, a.ga.encrypted);
          c.codecs = a.J.codecs;
          c.mimeType = a.J.mimeType;
          a.ha && (c.g = a.ha.start + a.ha.duration);
          return c;
        }
        function Su(a, b, c) {
          var d = Number(Bu(a, Tu, "presentationTimeOffset")) || 0, e = Bu(a, Tu, "timescale"), f = 1;
          e && (f = ne(e) || 1);
          var g = d / f || 0, h = Qu(a, Tu, c);
          Uu(a, h);
          var k2 = Nd(a);
          return { qc: function() {
            var l = Cu(k2, Tu, "RepresentationIndex");
            var m = k2.J.Ua();
            l && (l = Nc(l.attributes.sourceURL)) && (m = Wc(m, [l], k2.ub()));
            l = Vu(k2);
            return Wu(k2, b, h, m, l.start, l.end, g);
          } };
        }
        function Wu(a, b, c, d, e, f, g) {
          var h, k2, l, m, n, p, q, u, w, v, x, z, C, D, F, B, A, H;
          return Q(function(E) {
            if (1 == E.g) return h = a.presentationTimeline, k2 = !a.Nb || !a.ha.Yg, l = a.ha.start, m = a.ha.duration, n = a.J.mimeType.split("/")[1], p = b, q = null, u = [p(d, e, f, false), "webm" == n ? p(c.N(), c.Sa, c.wa, true) : null], p = null, G(E, Promise.all(u), 2);
            w = E.h;
            v = w[0];
            x = w[1] || null;
            z = null;
            C = l - g;
            D = l;
            F = m ? l + m : Infinity;
            if ("mp4" == n) var L = Gu(v, e, d, c, C, D, F);
            else {
              L = v;
              var M = new Iu(x);
              if (440786851 != Ju(M).id) throw new U(2, 3, 3008);
              var J = Ju(M);
              if (408125543 != J.id) throw new U(
                2,
                3,
                3009
              );
              M = J.g.byteOffset;
              J = new Iu(J.g);
              for (var K = null; J.ta(); ) {
                var N = Ju(J);
                if (357149030 == N.id) {
                  K = N;
                  break;
                }
              }
              if (!K) throw new U(2, 3, 3010);
              K = new Iu(K.g);
              N = 1e6;
              for (J = null; K.ta(); ) {
                var O = Ju(K);
                if (2807729 == O.id) N = Nu(O);
                else if (17545 == O.id) if (4 == O.g.byteLength) J = O.g.getFloat32(0);
                else if (8 == O.g.byteLength) J = O.g.getFloat64(0);
                else throw new U(2, 3, 3003);
              }
              if (null == J) throw new U(2, 3, 3011);
              K = N / 1e9;
              J *= K;
              L = Ju(new Iu(L));
              if (475249515 != L.id) throw new U(2, 3, 3007);
              L = Ou(L, M, K, J, d, c, C, D, F);
            }
            z = L;
            B = t(z);
            for (A = B.next(); !A.done; A = B.next()) H = A.value, H.codecs = a.J.codecs, H.mimeType = a.J.mimeType, H.bandwidth = a.bandwidth;
            h.Ed(z);
            q = new Pl(z);
            k2 && q.Nc(D, F, true);
            return E.return(q);
          });
        }
        function Tu(a) {
          return a.dd;
        }
        function Vu(a) {
          var b = Cu(a, Tu, "RepresentationIndex");
          a = Bu(a, Tu, "indexRange");
          a = le(a || "");
          b && (a = ge(b, "range", le, a));
          return a;
        }
        function Uu(a, b) {
          Xu(a, b);
          if (!Vu(a)) throw new U(2, 4, 4002);
        }
        function Xu(a, b) {
          var c = a.J.mimeType.split("/")[1];
          if (a.J.contentType != cd && "mp4" != c && "webm" != c) throw new U(2, 4, 4006);
          if ("webm" == c && !b) throw new U(2, 4, 4005);
        }
        function Ru(a) {
          var b = a.J;
          return { bandwidth: a.bandwidth, audioSamplingRate: b.audioSamplingRate, codecs: b.codecs, contentType: b.contentType, frameRate: b.frameRate || null, height: b.height || null, mimeType: b.mimeType, channelsCount: b.oe, pixelAspectRatio: b.pixelAspectRatio || null, width: b.width || null, label: a.ga.label || null, roles: a.roles || null, language: a.ga.language || null };
        }
        ;
        function Yu(a, b, c) {
          var d = Qu(a, Zu, c), e = $u(a);
          if (!e.Wa && !e.timeline && 1 < e.Xc.length) throw new U(2, 4, 4002);
          if (!e.Wa && !a.ha.duration && !e.timeline && 1 == e.Xc.length) throw new U(2, 4, 4002);
          if (e.timeline && 0 == e.timeline.length) throw new U(2, 4, 4002);
          var f = null, g = null;
          a.qa.id && a.J.id && (g = b.get(a.qa.id + "," + a.J.id)) && (f = g.segmentIndex);
          var h = av(a.ha.start, a.ha.duration, a.J.Ua, e, d, c, a.J.mimeType, a.J.codecs, a.bandwidth, a.ub);
          b = !f;
          f ? f.Bd(h, a.presentationTimeline.pb()) : f = new Pl(h);
          a.presentationTimeline.Ed(h);
          a.Nb && a.ha.Yg || f.Nc(a.ha.start, a.ha.duration ? a.ha.start + a.ha.duration : Infinity, b);
          g && (g.segmentIndex = f);
          return { qc: function() {
            f && 0 != f.getNumReferences() || f.ke(h);
            return Promise.resolve(f);
          } };
        }
        function Zu(a) {
          return a.Yb;
        }
        function $u(a) {
          var b = bv(a);
          a = Au(a, Zu);
          var c = a.Ld;
          0 == c && (c = 1);
          var d = 0;
          a.Wa ? d = a.Wa * (c - 1) : a.timeline && 0 < a.timeline.length && (d = a.timeline[0].start);
          return { Wa: a.Wa, startTime: d, Ld: c, fc: a.fc, timeline: a.timeline, Xc: b };
        }
        function av(a, b, c, d, e, f, g, h, k2, l) {
          var m = d.Xc.length;
          d.timeline && d.timeline.length != d.Xc.length && (m = Math.min(d.timeline.length, d.Xc.length));
          for (var n = a - d.fc, p = b ? a + b : Infinity, q = [], u = d.startTime, w = {}, v = 0; v < m; w = { Je: void 0, ze: void 0 }, v++) {
            w.ze = d.Xc[v];
            var x = u;
            u = void 0;
            u = null != d.Wa ? x + d.Wa : d.timeline ? d.timeline[v].end : x + b;
            w.Je = null;
            w = new Bj(a + x, a + u, /* @__PURE__ */ function(z) {
              return function() {
                null == z.Je && (z.Je = Wc(c(), [z.ze.aj], l()));
                return z.Je;
              };
            }(w), w.ze.start, w.ze.end, e, n, a, p, [], "", null, null, Cj, f);
            w.codecs = h;
            w.mimeType = g;
            w.bandwidth = k2;
            q.push(w);
          }
          return q;
        }
        function bv(a) {
          return [a.J.Yb, a.ga.Yb, a.qa.Yb].filter(Jf).map(function(b) {
            return Xd(b, "SegmentURL");
          }).reduce(function(b, c) {
            return 0 < b.length ? b : c;
          }).map(function(b) {
            b.attributes.indexRange && !a.Kf && (a.Kf = true);
            var c = Nc(b.attributes.media);
            b = ge(b, "mediaRange", le, { start: 0, end: null });
            return { aj: c, start: b.start, end: b.end };
          });
        }
        ;
        function cv(a, b, c, d, e, f, g, h, k2) {
          k2 || a.J.de || (a.J.de = Bu(a, dv, "initialization"));
          var l = a.J.de ? ev(a, g) : null, m = fv(a);
          gv(m);
          var n = Nd(a);
          if (m.vd) return Xu(a, l), { qc: function() {
            var w = zu(m.vd, n.J.originalId, null, null, n.bandwidth || null, null);
            w = Wc(n.J.Ua(), [w]);
            return Wu(n, b, l, w, 0, null, m.fc);
          } };
          if (m.Wa) return d || "image" === a.ga.contentType || "text" === a.ga.contentType || (c = a.ha.start, d = a.qa.id, k2 = a.ha.duration, d = (d = null != d && f.get(d) || k2) ? c + d : Infinity, a.presentationTimeline.Sf(m.Wa), a.presentationTimeline.hh(c, d)), { qc: function() {
            return hv(
              n,
              m,
              e,
              l,
              f,
              g,
              h,
              a.J.Ae
            );
          } };
          var p = null;
          d = d = null;
          a.qa.id && a.J.id && (d = a.qa.id + "," + a.J.id, d = c.get(d)) && (p = d.segmentIndex);
          var q = a.ha.start, u = a.ha.duration ? q + a.ha.duration : Infinity;
          p ? (c = p, iv(c, m, q, u, l), c.Oa(a.presentationTimeline.pb())) : p = new jv(m, a.J.originalId, a.bandwidth, a.J.Ua, a.ub, q, u, l, g, a.J.Ae);
          m.timeline && "image" !== a.ga.contentType && "text" !== a.ga.contentType && a.presentationTimeline.ih(p.h ? p.h.timeline : [], q);
          d && a.Nb && (d.segmentIndex = p);
          return { qc: function() {
            p instanceof jv && 0 == p.getNumReferences() && iv(
              p,
              m,
              q,
              u,
              l
            );
            return Promise.resolve(p);
          } };
        }
        function dv(a) {
          return a.hc;
        }
        function fv(a) {
          var b = Au(a, dv), c = Bu(a, dv, "media"), d = Bu(a, dv, "index"), e = Bu(a, dv, "k"), f = 0;
          e && (f = parseInt(e, 10));
          return { He: b.He, Wa: b.Wa, timescale: b.timescale, Ld: b.Ld, fc: b.fc, ug: b.ug, timeline: b.timeline, dc: c && Nc(c), vd: d, mimeType: a.J.mimeType, codecs: a.J.codecs, bandwidth: a.bandwidth, bj: f };
        }
        function gv(a) {
          var b = a.vd ? 1 : 0;
          b += a.timeline ? 1 : 0;
          b += a.Wa ? 1 : 0;
          if (0 == b) throw new U(2, 4, 4002);
          1 != b && (a.vd && (a.timeline = null), a.He = null, a.Wa = null);
          if (!a.vd && !a.dc) throw new U(2, 4, 4002);
        }
        function hv(a, b, c, d, e, f, g, h) {
          function k2(J) {
            var K = J - v, N = K * w, O = b.He, P = K * O;
            "BigInt" in window2 && P > Number.MAX_SAFE_INTEGER && (P = BigInt(K) * BigInt(O));
            N += p;
            K = N + w;
            O = Math.min(K, m());
            var R = [], S = b.bj;
            if (S) for (var oa = (O - N) / S, Z = {}, Fa = 0; Fa < S; Z = { Ch: void 0 }, Fa++) {
              var Ia = N + oa * Fa, ka = Ia + oa;
              Z.Ch = Fa + 1;
              Z = new Bj(Ia, ka, /* @__PURE__ */ function(ua) {
                return function() {
                  var Ba = zu(x, C, J, ua.Ch, z, P);
                  return Wc(D(), [Ba], F());
                };
              }(Z), 0, null, d, B, p, m(), [], "", null, null, Cj, f);
              Z.codecs = a.J.codecs;
              Z.mimeType = a.J.mimeType;
              0 == h ? 0 < Fa && Z.Vc() : 0 != Fa % h && Z.Vc();
              R.push(Z);
            }
            N = new Bj(N, O, function() {
              if (S) return [];
              var ua = zu(x, C, J, null, z, P);
              return Wc(D(), [ua], F());
            }, 0, null, d, B, p, m(), R, "", null, null, Cj, f, 0 < R.length);
            N.codecs = a.J.codecs;
            N.mimeType = a.J.mimeType;
            N.bandwidth = a.bandwidth;
            N.j = K;
            return N;
          }
          function l() {
            var J = [Math.max(n.pb(), p), Math.min(n.bc(), m())].map(function(K) {
              return K - p;
            });
            J = [Math.ceil(J[0] / w), Math.ceil(J[1] / w) - 1];
            a.J.cb && J[1]++;
            return J.map(function(K) {
              return K + v;
            });
          }
          function m() {
            var J = null != q && e.get(q) || u;
            return J ? p + J : Infinity;
          }
          var n = a.presentationTimeline, p = a.ha.start, q = a.qa.id, u = a.ha.duration, w = b.Wa, v = b.Ld, x = b.dc, z = a.bandwidth || null, C = a.J.id, D = a.J.Ua, F = a.ub, B = p - b.fc, A = l();
          c = a.Nb ? Math.max(A[0], A[1] - c + 1) : A[0];
          g = g || A[1];
          A = [];
          for (var H = c; H <= g; ++H) {
            var E = k2(H);
            A.push(E);
          }
          var L = new Pl(A);
          A = n.bc() < m();
          H = n.U();
          if (A || H) {
            var M = Math.max(c, g + 1);
            c = w;
            a.J.cb && (c = 0.1);
            L.Ie(c, function() {
              var J = n.pb();
              L.Oa(J);
              var K = t(l());
              K.next();
              K = K.next().value;
              for (var N = []; M <= K; ) {
                var O = k2(M);
                N.push(O);
                M++;
              }
              return J > m() && !N.length ? null : N;
            });
          }
          return Promise.resolve(L);
        }
        function ev(a, b) {
          var c = a.J.de;
          c || (c = Bu(a, dv, "initialization"));
          if (!c) return null;
          c = Nc(c);
          var d = a.J.originalId, e = a.bandwidth || null, f = a.J.Ua, g = a.ub;
          b = new zj(function() {
            var h = zu(c, d, null, null, e, null);
            return Wc(f(), [h], g());
          }, 0, null, Ru(a), null, null, b, a.ga.encrypted);
          b.codecs = a.J.codecs;
          b.mimeType = a.J.mimeType;
          a.ha && (b.g = a.ha.start + a.ha.duration);
          return b;
        }
        function jv(a, b, c, d, e, f, g, h, k2, l) {
          Pl.call(this, []);
          this.h = a;
          this.F = b;
          this.B = c;
          this.C = d;
          this.H = e;
          this.j = f;
          this.l = g;
          this.s = h;
          this.A = k2;
          this.G = l;
          kv(this);
        }
        qa(jv, Pl);
        r = jv.prototype;
        r.getNumReferences = function() {
          return this.h ? this.h.timeline.length : 0;
        };
        r.release = function() {
          Pl.prototype.release.call(this);
          this.h = null;
        };
        r.Oa = function(a) {
          if (this.h) {
            for (var b = 0, c = this.h.timeline, d = 0; d < c.length; d += 1) if (c[d].end + this.j <= a) b += 1;
            else break;
            0 < b && (this.h.timeline = c.slice(b), this.g.length >= b && (this.g = this.g.slice(b)), this.i += b, 0 === this.getNumReferences() && this.release());
          }
        };
        function iv(a, b, c, d, e) {
          lv(a, e);
          if (a.h) {
            c = a.h.timeline;
            a.h.dc !== b.dc && (a.h.dc = b.dc);
            if (c.length) {
              var f = c[c.length - 1];
              b = b.timeline.filter(function(g) {
                return g.end > f.end;
              });
            } else b = b.timeline.slice();
            0 < b.length && a.h.timeline.push.apply(a.h.timeline, y(b));
            a.l !== d && (a.l = d);
          } else a.h = b, a.j = c, a.l = d;
          kv(a);
        }
        function lv(a, b) {
          if (a.s !== b) {
            a.s = b;
            a = t(a.g);
            for (var c = a.next(); !c.done; c = a.next()) (c = c.value) && Ej(c, b);
          }
        }
        function kv(a) {
          if (a.h && !a.o) {
            for (var b = [], c = t(a.h.timeline), d = c.next(); !d.done; d = c.next()) d = d.value, d.start >= a.l || 0 >= d.end || b.push(d);
            a.h.timeline = b;
            a.Oa(a.j);
          }
        }
        r.find = function(a) {
          if (this.h && this.h.timeline && this.h.timeline.length && a < this.h.timeline[0].start + this.j) return this.i;
          if (!this.h) return null;
          var b = this.h.timeline;
          if (a < this.j || a >= this.l) return null;
          for (var c = b.length - 1, d = 0; d < b.length; d++) {
            var e = b[d], f = e.start + this.j;
            e = d < c ? b[d + 1].start + this.j : Infinity === this.l ? e.end + this.j : this.l;
            if (a >= f && a < e) return d + this.i;
          }
          return null;
        };
        r.get = function(a) {
          var b = this;
          a -= this.i;
          if (0 > a || a >= this.getNumReferences() || !this.h) return null;
          var c = this.g[a];
          if (!c) {
            var d = this.h.timeline[a], e = d.uj, f = d.vg + this.h.ug;
            c = this.j - this.h.fc;
            var g = this.j + d.end, h = g;
            a === this.getNumReferences() - 1 && Infinity !== this.l && (h = this.l);
            for (var k2 = this.h.codecs, l = this.h.mimeType, m = this.h.bandwidth, n = [], p = (d.end - d.start) / d.Ib, q = {}, u = 0; u < d.Ib; q = { Ke: void 0, Dh: void 0 }, u++) {
              var w = d.start + p * u, v = w + p;
              q.Dh = u + 1;
              q.Ke = null;
              q = new Bj(this.j + w, this.j + v, /* @__PURE__ */ function(x) {
                return function() {
                  if (!b.h) return [];
                  null == x.Ke && (x.Ke = mv(b.h.dc, b.F, e, b.B, f, x.Dh, b.C, b.H));
                  return x.Ke;
                };
              }(q), 0, null, this.s, c, this.j, this.l, [], "", null, null, Cj, this.A);
              q.codecs = k2;
              q.mimeType = l;
              q.bandwidth = m;
              0 == this.G ? 0 < u && q.Vc() : 0 != u % this.G && q.Vc();
              n.push(q);
            }
            c = new Bj(this.j + d.start, h, function() {
              return 0 < d.Ib || !b.h ? [] : mv(b.h.dc, b.F, e, b.B, f, null, b.C, b.H);
            }, 0, null, this.s, c, this.j, this.l, n, "", null, null, Cj, this.A, 0 < d.Ib);
            c.codecs = k2;
            c.mimeType = l;
            c.j = g;
            c.bandwidth = m;
            this.g[a] = c;
          }
          return c;
        };
        r.Eb = function(a) {
          kv(this);
          for (var b = 0; b < this.getNumReferences(); b++) {
            var c = this.get(b + this.i);
            c && a(c);
          }
        };
        function mv(a, b, c, d, e, f, g, h) {
          a = zu(a, b, c, f, d || null, e);
          return Wc(g(), [a], h()).map(function(k2) {
            return k2.toString();
          });
        }
        ;
        function nv(a) {
          this.o = null;
          this.A = a;
          this.G = new dh();
          this.i = [];
          this.h = null;
          this.m = [];
          this.B = null;
          this.F = [];
          this.C = 300;
          this.l = /* @__PURE__ */ new Map();
          this.j = /* @__PURE__ */ new Map();
          this.g = null;
          this.s = "UNKNOWN";
        }
        nv.prototype.configure = function(a) {
          this.o = a;
        };
        nv.prototype.destroy = function() {
          this.A = this.o = null;
          this.i = [];
          this.h = null;
          this.m = [];
          this.F = [];
          this.l.clear();
          null != this.g && (this.g.stop(), this.g = null);
          return this.G.destroy();
        };
        nv.prototype.setManifestType = function(a) {
          this.s = a;
        };
        function ov(a, b) {
          var c, d, e, f, g, h, k2;
          return Q(function(l) {
            if (1 == l.g) return c = Wc(a.i, [pv(a, b)]), d = kh(c, a.o.retryParameters), e = a.A.networkingEngine.request(8, d), eh(a.G, e), xa(l, 2), G(l, e.promise, 4);
            if (2 != l.g) return f = l.h, g = Gc(f.data), h = JSON.parse(g), 1 == h.VERSION && qv(a, h, f.uri), za(l, 0);
            if ((k2 = Aa(l)) && 7001 == k2.code) return l.return();
            null != a.g && (a.g.stop(), a.g = null);
            a.g = new ec(function() {
              ov(a, b);
            });
            a.g.da(a.C);
            I(l);
          });
        }
        function pv(a, b) {
          if (!a.m.length) return b;
          b = new yb(b);
          var c = a.B || a.m[0], d = Math.round(a.A.getBandwidthEstimate()), e = b.g;
          "DASH" == a.s ? (e.add("_DASH_pathway", c), e.add("_DASH_throughput", String(d))) : "HLS" == a.s && (e.add("_HLS_pathway", c), e.add("_HLS_throughput", String(d)));
          Nb(e) && Cb(b, e);
          return b.toString();
        }
        function qv(a, b, c) {
          null != a.g && (a.g.stop(), a.g = null);
          var d = b["RELOAD-URI"] || c;
          a.g = new ec(function() {
            ov(a, d);
          });
          if (c = b.TTL) a.C = c;
          a.g.da(a.C);
          a.m = b["PATHWAY-PRIORITY"] || [];
          a.F = b["PATHWAY-CLONES"] || [];
        }
        function rv(a, b, c, d) {
          var e = a.l.get(b);
          e || (e = /* @__PURE__ */ new Map());
          e.set(c, d);
          a.l.set(b, e);
        }
        nv.prototype.banLocation = function(a) {
          this.j.set(a, Date.now() + 6e4);
        };
        function sv(a, b, c) {
          c = void 0 === c ? false : c;
          b = a.l.get(b) || /* @__PURE__ */ new Map();
          for (var d = [], e = t(a.m), f = e.next(), g = {}; !f.done; g = { Zc: void 0 }, f = e.next()) if (g.Zc = f.value, f = b.get(g.Zc)) d.push({ Xf: g.Zc, location: f });
          else if (f = a.F.find(/* @__PURE__ */ function(k2) {
            return function(l) {
              return l.ck == k2.Zc;
            };
          }(g))) {
            var h = b.get(f["BASE-ID"]);
            h && (f["URI-REPLACEMENT"].Mh ? (h = new yb(h), Ab(h, f["URI-REPLACEMENT"].Mh), d.push({ Xf: g.Zc, location: h.toString() })) : d.push({ Xf: g.Zc, location: h }));
          }
          e = Date.now();
          g = t(a.j.keys());
          for (f = g.next(); !f.done; f = g.next()) f = f.value, h = a.j.get(f), e > h && a.j.delete(f);
          d = d.filter(function(k2) {
            for (var l = t(a.j.keys()), m = l.next(); !m.done; m = l.next()) if (m.value.includes(new yb(k2.location).wb)) return false;
            return true;
          });
          d.length && (a.B = d[0].Xf);
          d = d.map(function(k2) {
            return k2.location;
          });
          if (!d.length && a.h) {
            for (e = t(a.h.split(",")), g = e.next(); !g.done; g = e.next()) if (g = b.get(g.value)) a.B = a.h, d.push(g);
          }
          if (!d.length) for (b = t(b.values()), e = b.next(); !e.done; e = b.next()) d.push(e.value);
          return c ? d : Wc(a.i, d);
        }
        ;
        function tv() {
          this.l = [];
          this.h = [];
          this.g = [];
          this.j = [];
          this.i = [];
          this.s = this.o = false;
          this.m = /* @__PURE__ */ new Set();
        }
        r = tv.prototype;
        r.release = function() {
          for (var a = t(this.h.concat(this.g, this.j, this.i)), b = a.next(); !b.done; b = a.next()) b = b.value, b.segmentIndex && b.segmentIndex.release();
          this.h = [];
          this.g = [];
          this.j = [];
          this.i = [];
          this.l = [];
          this.s = this.o = false;
          this.m.clear();
        };
        r.Ii = function() {
          return this.l;
        };
        r.If = function() {
          return this.j.slice();
        };
        r.mi = function() {
          return this.i;
        };
        r.Ig = function(a, b) {
          if (a) {
            if ("audio" == a.type) for (var c = t(this.h), d = c.next(); !d.done; d = c.next()) d = d.value, d.matchedStreams = d.matchedStreams.filter(function(e) {
              return e !== a;
            });
            else if ("video" == a.type) for (c = t(this.g), d = c.next(); !d.done; d = c.next()) d = d.value, d.matchedStreams = d.matchedStreams.filter(function(e) {
              return e !== a;
            }), d.trickModeVideo && (d.trickModeVideo.matchedStreams = d.trickModeVideo.matchedStreams.filter(function(e) {
              return e !== a;
            })), d.dependencyStream && (d.dependencyStream.matchedStreams = d.dependencyStream.matchedStreams.filter(function(e) {
              return e !== a;
            }));
            else if (a.type == cd) for (c = t(this.j), d = c.next(); !d.done; d = c.next()) d = d.value, d.matchedStreams = d.matchedStreams.filter(function(e) {
              return e !== a;
            });
            else if ("image" == a.type) for (c = t(this.i), d = c.next(); !d.done; d = c.next()) d = d.value, d.matchedStreams = d.matchedStreams.filter(function(e) {
              return e !== a;
            });
            a.segmentIndex && a.closeSegmentIndex();
            this.m.delete(b);
          }
        };
        function uv(a, b) {
          var c = [], d = [], e = [], f = [];
          a = t(a);
          for (var g = a.next(); !g.done; g = a.next()) {
            var h = g.value;
            g = new Map(h.audioStreams.map(function(n) {
              return [vv(n), n];
            }));
            var k2 = new Map(h.videoStreams.map(function(n) {
              return [wv(n), n];
            })), l = new Map(h.textStreams.map(function(n) {
              return [xv(n), n];
            }));
            h = new Map(h.imageStreams.map(function(n) {
              return [yv(n), n];
            }));
            if (b) {
              var m = zv(cd);
              l.set(xv(m), m);
              m = zv("image");
              h.set(yv(m), m);
            }
            c.push(g);
            d.push(k2);
            e.push(l);
            f.push(h);
          }
          return { Bg: c, Kh: d, Gh: e, Wg: f };
        }
        r.gf = function(a, b, c) {
          c = void 0 === c ? false : c;
          var d = this, e, f, g, h, k2, l, m, n, p, q, u, w, v, x, z, C, D, F, B, A, H, E, L, M, J, K, N, O, P, R, S, oa;
          return Q(function(Z) {
            if (1 == Z.g) {
              e = ed;
              if (!b && 1 == a.length) return f = uv(a, false), g = f.Bg, h = f.Kh, k2 = f.Gh, l = f.Wg, d.h = Array.from(g[0].values()), d.g = Array.from(h[0].values()), d.j = Array.from(k2[0].values()), d.i = Array.from(l[0].values()), Z.u(2);
              m = c ? d.m.size : 0;
              n = -1;
              for (p = 0; p < a.length; p++) q = a[p], d.m.has(q.id) || (d.m.add(q.id), -1 == n && (n = p));
              if (-1 == n) return Z.return();
              u = uv(a, true);
              w = u.Bg;
              v = u.Kh;
              x = u.Gh;
              z = u.Wg;
              return G(Z, Promise.all([Av(d, d.h, w, n, Bv, Cv, m), Av(d, d.g, v, n, Bv, Cv, m), Av(d, d.j, x, n, Bv, Cv, m), Av(d, d.i, z, n, Bv, Cv, m)]), 2);
            }
            C = 0;
            D = [];
            if (d.g.length && d.h.length) for (M = t(d.h), J = M.next(); !J.done; J = M.next()) for (K = J.value, N = t(d.g), O = N.next(); !O.done; O = N.next()) P = O.value, R = Zb(K.drmInfos, P.drmInfos), K.drmInfos.length && P.drmInfos.length && !R.length || (S = (K.bandwidth || 0) + (P.bandwidth || 0), K.dependencyStream && (S += K.dependencyStream.bandwidth || 0), P.dependencyStream && (S += P.dependencyStream.bandwidth || 0), oa = C++, D.push({
              id: oa,
              language: K.language,
              disabledUntilTime: 0,
              primary: K.primary,
              audio: K,
              video: P,
              bandwidth: S,
              drmInfos: R,
              allowedByApplication: true,
              allowedByKeySystem: true,
              decodingInfos: []
            }));
            else for (F = d.g.length ? d.g : d.h, B = t(F), A = B.next(); !A.done; A = B.next()) H = A.value, E = C++, L = H.bandwidth || 0, H.dependencyStream && (L += H.dependencyStream.bandwidth || 0), D.push({
              id: E,
              language: H.language,
              disabledUntilTime: 0,
              primary: H.primary,
              audio: H.type == e.V ? H : null,
              video: H.type == e.la ? H : null,
              bandwidth: L,
              drmInfos: H.drmInfos,
              allowedByApplication: true,
              allowedByKeySystem: true,
              decodingInfos: []
            });
            d.l = D;
            I(Z);
          });
        };
        function Dv(a) {
          var b, c, d, e, f, g, h, k2, l, m, n, p, q, u, w, v, x, z, C, D, F, B, A, H, E, L, M, J, K, N;
          return Q(function(O) {
            switch (O.g) {
              case 1:
                b = ed;
                if (1 == a.length) return O.return(a[0]);
                c = a.map(function(P) {
                  return new Map(P.filter(function(R) {
                    return R.type === b.V;
                  }).map(function(R) {
                    return [vv(R), R];
                  }));
                });
                d = a.map(function(P) {
                  return new Map(P.filter(function(R) {
                    return R.type === b.la;
                  }).map(function(R) {
                    return [wv(R), R];
                  }));
                });
                e = a.map(function(P) {
                  return new Map(P.filter(function(R) {
                    return R.type === b.za;
                  }).map(function(R) {
                    return [xv(R), R];
                  }));
                });
                f = a.map(function(P) {
                  return new Map(P.filter(function(R) {
                    return R.type === b.$e;
                  }).map(function(R) {
                    return [yv(R), R];
                  }));
                });
                g = t(e);
                for (h = g.next(); !h.done; h = g.next()) k2 = h.value, l = Ev(b.za), k2.set(xv(l), l);
                m = t(f);
                for (n = m.next(); !n.done; n = m.next()) p = n.value, q = Ev(b.$e), p.set(yv(q), q);
                u = new tv();
                return G(O, Av(u, [], c, 0, Fv, Gv, 0), 2);
              case 2:
                return w = O.h, G(O, Av(u, [], d, 0, Fv, Gv, 0), 3);
              case 3:
                return v = O.h, G(O, Av(u, [], e, 0, Fv, Gv, 0), 4);
              case 4:
                return x = O.h, G(O, Av(u, [], f, 0, Fv, Gv, 0), 5);
              case 5:
                z = O.h;
                C = 0;
                if (v.length && w.length) for (H = t(w), E = H.next(); !E.done; E = H.next()) for (L = E.value, M = t(v), J = M.next(); !J.done; J = M.next()) K = J.value, N = C++, K.variantIds.push(N), L.variantIds.push(N);
                else for (D = v.concat(w), F = t(D), B = F.next(); !B.done; B = F.next()) A = B.value, A.variantIds = [C++];
                return O.return(v.concat(w).concat(x).concat(z));
            }
          });
        }
        function Av(a, b, c, d, e, f, g) {
          var h, k2, l, m, n, p, q, u, w, v, x, z, C, D, F, B, A, H, E, L;
          return Q(function(M) {
            switch (M.g) {
              case 1:
                h = [];
                for (k2 = 0; k2 < c.length; k2++) k2 >= d ? h.push(new Set(c[k2].values())) : h.push(/* @__PURE__ */ new Set());
                l = t(b);
                m = l.next();
              case 2:
                if (m.done) {
                  M.u(4);
                  break;
                }
                n = m.value;
                return G(M, Hv(a, n, c, d, f, h, g), 5);
              case 5:
                p = M.h;
                if (!p) throw new U(2, 4, 4037);
                m = l.next();
                M.u(2);
                break;
              case 4:
                q = t(h);
                for (u = q.next(); !u.done; u = q.next()) for (w = u.value, v = t(w), x = v.next(); !x.done; x = v.next()) z = x.value, (C = Iv(a, z, c, e, f, h)) && b.push(C);
                D = t(h);
                for (F = D.next(); !F.done; F = D.next()) for (B = F.value, A = t(B), H = A.next(), E = {}; !H.done; E = { lg: void 0 }, H = A.next()) if (E.lg = H.value, !Jv(E.lg) && (L = b.some(/* @__PURE__ */ function(J) {
                  return function(K) {
                    return $v(a, J.lg, K);
                  };
                }(E)))) throw new U(2, 4, 4037);
                return M.return(b);
            }
          });
        }
        function Hv(a, b, c, d, e, f, g) {
          return Q(function(h) {
            if (1 == h.g) return aw(a, c, b, 0 < g), b.matchedStreams ? b.segmentIndex ? G(h, bw(b, d + g), 2) : h.u(2) : h.return(false);
            cw(b, d, e, f, g);
            return h.return(true);
          });
        }
        function bw(a, b) {
          var c, d, e, f, g, h;
          return Q(function(k2) {
            if (1 == k2.g) {
              c = [];
              d = a.matchedStreams;
              for (e = b; e < d.length; e++) f = d[e], c.push(f.createSegmentIndex()), f.trickModeVideo && !f.trickModeVideo.segmentIndex && c.push(f.trickModeVideo.createSegmentIndex()), f.dependencyStream && !f.dependencyStream.segmentIndex && c.push(f.dependencyStream.createSegmentIndex());
              return G(k2, Promise.all(c), 2);
            }
            if (a.segmentIndex instanceof Sl) for (g = b; g < d.length; g++) h = d[g], h.segmentIndex && a.segmentIndex.h.push(h.segmentIndex);
            I(k2);
          });
        }
        function Iv(a, b, c, d, e, f) {
          if (Jv(b)) return null;
          var g = d(b);
          aw(a, c, g);
          g.createSegmentIndex && (g.createSegmentIndex = function() {
            return Q(function(h) {
              if (g.segmentIndex) return h.u(0);
              g.segmentIndex = new Sl();
              return G(h, bw(g, 0), 0);
            });
          });
          if (!g.matchedStreams || !g.matchedStreams.length) return null;
          cw(g, 0, e, f, 0);
          return g;
        }
        function cw(a, b, c, d, e) {
          var f = a.matchedStreams;
          for (b += e; b < f.length; b++) {
            var g = f[b];
            c(a, g);
            var h = true;
            "audio" == a.type && 0 == Tf(a.language, g.language) && (h = false);
            if (h && (d[b - e].delete(g), g.fullMimeTypes)) for (g = t(g.fullMimeTypes.values()), h = g.next(); !h.done; h = g.next()) a.fullMimeTypes.add(h.value);
          }
        }
        function Bv(a) {
          var b = Object.assign({}, a);
          b.originalId = null;
          b.createSegmentIndex = function() {
            return Promise.resolve();
          };
          b.closeSegmentIndex = function() {
            b.segmentIndex && (b.segmentIndex.release(), b.segmentIndex = null);
            if (b.matchedStreams) for (var c = t(b.matchedStreams), d = c.next(); !d.done; d = c.next()) d = d.value, d.segmentIndex && (d.segmentIndex.release(), d.segmentIndex = null);
          };
          b.roles = b.roles.slice();
          b.segmentIndex = null;
          b.emsgSchemeIdUris = [];
          b.keyIds = new Set(a.keyIds);
          b.closedCaptions = a.closedCaptions ? new Map(a.closedCaptions) : null;
          b.trickModeVideo = null;
          b.dependencyStream = null;
          return b;
        }
        function Fv(a) {
          var b = Object.assign({}, a);
          b.roles = b.roles.slice();
          b.keyIds = new Set(a.keyIds);
          b.segments = [];
          b.variantIds = [];
          b.closedCaptions = a.closedCaptions ? new Map(a.closedCaptions) : null;
          return b;
        }
        function Cv(a, b) {
          function c(g, h) {
            g || (g = []);
            h = t(h);
            for (var k2 = h.next(); !k2.done; k2 = h.next()) k2 = k2.value, g.includes(k2) || g.push(k2);
            return g;
          }
          a.roles = c(a.roles, b.roles);
          b.emsgSchemeIdUris && (a.emsgSchemeIdUris = c(a.emsgSchemeIdUris, b.emsgSchemeIdUris));
          for (var d = t(b.keyIds), e = d.next(); !e.done; e = d.next()) a.keyIds.add(e.value);
          null == a.originalId ? a.originalId = b.originalId : (d = b.originalId || "") && !a.originalId.endsWith(d) && (a.originalId += "," + d);
          d = Zb(a.drmInfos, b.drmInfos);
          if (b.drmInfos.length && a.drmInfos.length && !d.length) throw new U(
            2,
            4,
            4038
          );
          a.drmInfos = d;
          a.encrypted = a.encrypted || b.encrypted;
          if (b.closedCaptions) for (a.closedCaptions || (a.closedCaptions = /* @__PURE__ */ new Map()), d = t(b.closedCaptions), e = d.next(); !e.done; e = d.next()) {
            var f = t(e.value);
            e = f.next().value;
            f = f.next().value;
            a.closedCaptions.set(e, f);
          }
          a.bandwidth && b.bandwidth && (a.bandwidth = Math.max(a.bandwidth, b.bandwidth));
          b.trickModeVideo ? (a.trickModeVideo || (a.trickModeVideo = Bv(b.trickModeVideo), a.trickModeVideo.matchedStreams = [], a.trickModeVideo.createSegmentIndex = function() {
            if (a.trickModeVideo.segmentIndex) return Promise.resolve();
            for (var g = new Sl(), h = t(a.trickModeVideo.matchedStreams), k2 = h.next(); !k2.done; k2 = h.next()) g.h.push(k2.value.segmentIndex);
            a.trickModeVideo.segmentIndex = g;
            return Promise.resolve();
          }), a.trickModeVideo.matchedStreams.push(b.trickModeVideo), Cv(a.trickModeVideo, b.trickModeVideo)) : a.trickModeVideo && (a.trickModeVideo.matchedStreams.push(b), Cv(a.trickModeVideo, b));
          b.dependencyStream ? (a.dependencyStream || (a.dependencyStream = Bv(b.dependencyStream), a.dependencyStream.matchedStreams = [], a.dependencyStream.createSegmentIndex = function() {
            if (a.dependencyStream.segmentIndex) return Promise.resolve();
            for (var g = new Sl(), h = t(a.dependencyStream.matchedStreams), k2 = h.next(); !k2.done; k2 = h.next()) g.h.push(k2.value.segmentIndex);
            a.dependencyStream.segmentIndex = g;
            return Promise.resolve();
          }), a.dependencyStream.matchedStreams.push(b.dependencyStream), Cv(a.dependencyStream, b.dependencyStream)) : a.dependencyStream && (a.dependencyStream.matchedStreams.push(b), Cv(a.dependencyStream, b));
        }
        function Gv(a, b) {
          var c = a.roles;
          c || (c = []);
          for (var d = t(b.roles), e = d.next(); !e.done; e = d.next()) e = e.value, c.includes(e) || c.push(e);
          a.roles = c;
          c = t(b.keyIds);
          for (d = c.next(); !d.done; d = c.next()) a.keyIds.add(d.value);
          a.encrypted = a.encrypted && b.encrypted;
          a.segments.push.apply(a.segments, y(b.segments));
          if (b.closedCaptions) for (a.closedCaptions || (a.closedCaptions = /* @__PURE__ */ new Map()), b = t(b.closedCaptions), c = b.next(); !c.done; c = b.next()) d = t(c.value), c = d.next().value, d = d.next().value, a.closedCaptions.set(c, d);
        }
        function aw(a, b, c, d) {
          d = (void 0 === d ? 0 : d) ? c.matchedStreams : [];
          b = t(b);
          for (var e = b.next(); !e.done; e = b.next()) {
            e = dw(a, e.value, c);
            if (!e) return;
            d.push(e);
          }
          c.matchedStreams = d;
        }
        function dw(a, b, c) {
          var d = { audio: vv, video: wv, text: xv, image: yv }[c.type], e = null, f = d(c);
          if (b.has(f)) e = b.get(f);
          else {
            f = { audio: function(l, m) {
              return $v(a, l, m);
            }, video: function(l, m) {
              return $v(a, l, m);
            }, text: ew, image: fw }[c.type];
            for (var g = { audio: gw, video: hw, text: iw, image: jw }[c.type], h = t(b.values()), k2 = h.next(); !k2.done; k2 = h.next()) k2 = k2.value, !f(c, k2) || c.fastSwitching != k2.fastSwitching || e && !g(c, e, k2) || (e = k2);
          }
          a.s && !Jv(e) && b.delete(d(e));
          return e;
        }
        function kw(a, b) {
          return a.mimeType != b.mimeType ? false : lw(a.codecs) === lw(b.codecs);
        }
        r.sh = function(a) {
          this.o = a;
        };
        r.yh = function(a) {
          this.s = a;
        };
        function $v(a, b, c) {
          return !kw(b, c) && !a.o || b.drmInfos && !Yb(b.drmInfos, c.drmInfos) ? false : true;
        }
        function ew(a, b) {
          return b.language ? a.forced !== b.forced || 0 == Tf(a.language, b.language) || b.kind != a.kind ? false : true : true;
        }
        function fw() {
          return true;
        }
        function gw(a, b, c) {
          var d = kw(a, b), e = kw(a, c);
          if (d && !e) return false;
          if (!d && e) return true;
          d = Tf(a.language, b.language);
          e = Tf(a.language, c.language);
          if (e > d) return true;
          if (e < d) return false;
          if (b.label !== c.label) {
            if (a.label === b.label) return false;
            if (a.label === c.label) return true;
          }
          if (a.roles.length) {
            d = b.roles.filter(function(f) {
              return a.roles.includes(f);
            });
            e = c.roles.filter(function(f) {
              return a.roles.includes(f);
            });
            if (e.length > d.length) return true;
            if (e.length < d.length) return false;
            if (c.roles.length !== b.roles.length) return c.roles.length < b.roles.length;
          } else {
            if (!c.roles.length && b.roles.length) return true;
            if (c.roles.length && !b.roles.length) return false;
          }
          if (!b.primary && c.primary) return true;
          if (b.primary && !c.primary) return false;
          d = mw(a.channelsCount, b.channelsCount, c.channelsCount);
          if (d == nw) return true;
          if (d == ow) return false;
          d = mw(a.audioSamplingRate, b.audioSamplingRate, c.audioSamplingRate);
          return d == nw ? true : d == ow ? false : a.bandwidth && pw(a.bandwidth, b.bandwidth, c.bandwidth) == nw ? true : false;
        }
        function hw(a, b, c) {
          var d = kw(a, b), e = kw(a, c);
          if (d && !e) return false;
          if (!d && e) return true;
          d = mw(a.width * a.height, b.width * b.height, c.width * c.height);
          if (d == nw) return true;
          if (d == ow) return false;
          if (a.frameRate) {
            d = mw(a.frameRate, b.frameRate, c.frameRate);
            if (d == nw) return true;
            if (d == ow) return false;
          }
          return a.bandwidth && pw(a.bandwidth, b.bandwidth, c.bandwidth) == nw ? true : false;
        }
        function iw(a, b, c) {
          var d = Tf(a.language, b.language), e = Tf(a.language, c.language);
          if (e > d) return true;
          if (e < d) return false;
          if (!b.primary && c.primary) return true;
          if (b.primary && !c.primary) return false;
          if (b.label !== c.label) {
            if (a.label === b.label) return false;
            if (a.label === c.label) return true;
          }
          if (a.roles.length) {
            d = b.roles.filter(function(f) {
              return a.roles.includes(f);
            });
            e = c.roles.filter(function(f) {
              return a.roles.includes(f);
            });
            if (e.length > d.length) return true;
            if (e.length < d.length) return false;
          } else {
            if (!c.roles.length && b.roles.length) return true;
            if (c.roles.length && !b.roles.length) return false;
          }
          return c.mimeType != a.mimeType || c.codecs != a.codecs || b.mimeType == a.mimeType && b.codecs == a.codecs ? false : true;
        }
        function jw(a, b, c) {
          return mw(a.width * a.height, b.width * b.height, c.width * c.height) == nw ? true : false;
        }
        function Ev(a) {
          return { id: 0, originalId: "", groupId: null, primary: false, type: a, mimeType: "", codecs: "", language: "", originalLanguage: null, label: null, width: null, height: null, encrypted: false, keyIds: /* @__PURE__ */ new Set(), segments: [], variantIds: [], roles: [], forced: false, channelsCount: null, audioSamplingRate: null, spatialAudio: false, closedCaptions: null, external: false, fastSwitching: false, isAudioMuxedInVideo: false, baseOriginalId: null };
        }
        function zv(a) {
          return {
            id: 0,
            originalId: "",
            groupId: null,
            createSegmentIndex: function() {
              return Promise.resolve();
            },
            segmentIndex: new Pl([]),
            mimeType: "",
            codecs: "",
            encrypted: false,
            drmInfos: [],
            keyIds: /* @__PURE__ */ new Set(),
            language: "",
            originalLanguage: null,
            label: null,
            type: a,
            primary: false,
            trickModeVideo: null,
            dependencyStream: null,
            emsgSchemeIdUris: null,
            roles: [],
            forced: false,
            channelsCount: null,
            audioSamplingRate: null,
            spatialAudio: false,
            closedCaptions: null,
            accessibilityPurpose: null,
            external: false,
            fastSwitching: false,
            fullMimeTypes: /* @__PURE__ */ new Set(),
            isAudioMuxedInVideo: false,
            baseOriginalId: null
          };
        }
        function mw(a, b, c) {
          if (b == a && a != c) return ow;
          if (c == a && a != b) return nw;
          if (b > a) {
            if (c <= a || c - a < b - a) return nw;
            if (c - a > b - a) return ow;
          } else {
            if (c > a) return ow;
            if (a - c < a - b) return nw;
            if (a - c > a - b) return ow;
          }
          return qw;
        }
        function pw(a, b, c) {
          b = Math.abs(a - b);
          a = Math.abs(a - c);
          return a < b ? nw : b < a ? ow : qw;
        }
        function Jv(a) {
          switch (a.type) {
            case cd:
              return !a.language;
            case "image":
              return !a.tilesLayout;
            default:
              return false;
          }
        }
        function wv(a) {
          return JSON.stringify([a.fastSwitching, a.width, a.frameRate, lw(a.codecs), a.mimeType, a.label, a.roles, a.closedCaptions ? Array.from(a.closedCaptions.entries()) : null, a.bandwidth, a.dependencyStream ? a.dependencyStream.baseOriginalId : null, Array.from(a.keyIds)]);
        }
        function vv(a) {
          return JSON.stringify([a.fastSwitching, a.channelsCount, a.language, a.bandwidth, a.label, lw(a.codecs), a.mimeType, a.roles, a.audioSamplingRate, a.primary, a.dependencyStream ? a.dependencyStream.baseOriginalId : null, Array.from(a.keyIds)]);
        }
        function xv(a) {
          return JSON.stringify([a.language, a.label, a.codecs, a.mimeType, a.bandwidth, a.roles]);
        }
        function yv(a) {
          return JSON.stringify([a.width, a.codecs, a.mimeType]);
        }
        function lw(a) {
          if (!rw.has(a)) {
            var b = rf(a);
            rw.set(a, b);
          }
          return rw.get(a);
        }
        T("shaka.util.PeriodCombiner", tv);
        tv.prototype.setUseStreamOnce = tv.prototype.yh;
        tv.prototype.setAllowMultiTypeVariants = tv.prototype.sh;
        tv.prototype.combinePeriods = tv.prototype.gf;
        tv.prototype.deleteStream = tv.prototype.Ig;
        tv.prototype.getImageStreams = tv.prototype.mi;
        tv.prototype.getTextStreams = tv.prototype.If;
        tv.prototype.getVariants = tv.prototype.Ii;
        var nw = 1, qw = 0, ow = -1, rw = /* @__PURE__ */ new Map();
        function sw(a, b) {
          var c = new DOMParser(), d = tw.value()(a);
          a = null;
          try {
            a = c.parseFromString(d, "text/xml");
          } catch (e) {
            return null;
          }
          c = a.documentElement;
          if (!c || c.getElementsByTagName("parsererror").length || c.tagName != b) return null;
          if (!("createNodeIterator" in document)) return c;
          for (b = document.createNodeIterator(a, NodeFilter.SHOW_ALL); a = b.nextNode(); ) if (a instanceof HTMLElement || a instanceof SVGElement) return null;
          return c;
        }
        function uw(a, b) {
          try {
            var c = Jc(a);
            return sw(c, b);
          } catch (d) {
            return null;
          }
        }
        var tw = new Xb(function() {
          if ("undefined" !== typeof trustedTypes) {
            var a = trustedTypes.createPolicy("shaka-player#xml", { createHTML: function(b) {
              return b;
            } });
            return function(b) {
              return a.createHTML(b);
            };
          }
          return function(b) {
            return b;
          };
        });
        function vw() {
          var a = this;
          this.j = this.g = null;
          this.A = [];
          this.i = null;
          this.pa = 1;
          this.F = [];
          this.l = { me: "", type: "", profiles: [], Vb: null, cb: 0, Ua: null, Id: 0 };
          this.s = /* @__PURE__ */ new Map();
          this.o = /* @__PURE__ */ new Map();
          this.B = /* @__PURE__ */ new Map();
          this.ka = /* @__PURE__ */ new Map();
          this.m = new tv();
          this.I = 0;
          this.oa = new Xa(5);
          this.K = new ec(function() {
            if (a.H && !a.g.continueLoadingWhenPaused && (a.G.Ja(a.H, "timeupdate"), a.H.paused)) {
              a.G.ma(a.H, "timeupdate", function() {
                return ww(a);
              });
              return;
            }
            ww(a);
          });
          this.O = new dh();
          this.M = null;
          this.C = [];
          this.Z = Infinity;
          this.fa = false;
          this.h = null;
          this.L = 0;
          this.P = false;
          this.G = new lb();
          this.H = null;
          this.T = false;
          this.Y = "";
          this.ea = function() {
            return false;
          };
          this.W = [];
        }
        r = vw.prototype;
        r.configure = function(a, b) {
          var c = this.j && a.updatePeriod != this.g.updatePeriod && 0 <= a.updatePeriod;
          this.g = a;
          b && (this.ea = b);
          c && this.i && this.i.presentationTimeline.U() && this.K.kb();
          this.h && this.h.configure(this.g);
          this.m && (this.m.sh(this.g.dash.multiTypeVariantsAllowed && nd()), this.m.yh(this.g.dash.useStreamOnceInPeriodFlattening));
        };
        r.start = function(a, b) {
          var c = this, d;
          return Q(function(e) {
            if (1 == e.g) return c.fa = b.isLowLatencyMode(), c.A = [a], c.j = b, G(e, xw(c), 2);
            d = e.h;
            c.j && yw(c, d);
            if (!c.j) throw new U(2, 7, 7001);
            return e.return(c.i);
          });
        };
        r.stop = function() {
          for (var a = t(this.o.values()), b = a.next(); !b.done; b = a.next()) b = b.value, b.segmentIndex && b.segmentIndex.release();
          this.m && this.m.release();
          this.g = this.j = null;
          this.A = [];
          this.i = null;
          this.o.clear();
          this.B.clear();
          this.s.clear();
          this.l = { me: "", type: "", profiles: [], Vb: null, cb: 0, Ua: null, Id: 0 };
          this.m = null;
          null != this.K && (this.K.stop(), this.K = null);
          this.h && this.h.destroy();
          this.G && (this.G.release(), this.G = null);
          return this.O.destroy();
        };
        r.update = function() {
          var a = this, b;
          return Q(function(c) {
            if (1 == c.g) return xa(c, 2), G(c, xw(a), 4);
            if (2 != c.g) return za(c, 0);
            b = Aa(c);
            if (!a.j || !b) return c.return();
            a.j.onError(b);
            I(c);
          });
        };
        r.onExpirationUpdated = function() {
        };
        r.onInitialVariantChosen = function(a) {
          if (this.i && this.i.presentationTimeline.U()) {
            var b = a.video || a.audio;
            if (b && b.segmentIndex) {
              a = this.i.presentationTimeline.bc();
              var c = b.segmentIndex.find(a);
              null != c && (b = b.segmentIndex.get(c)) && (this.I = b.endTime - a, yw(this, 0));
            }
          }
        };
        r.banLocation = function(a) {
          this.h && this.h.banLocation(a);
        };
        r.setMediaElement = function(a) {
          this.H = a;
        };
        function xw(a) {
          var b, c, d, e, f, g, h, k2, l, m, n;
          return Q(function(p) {
            if (1 == p.g) return b = 4, c = "MPD", d = zw(a), e = a.A, d.length ? (e = d, c = "Patch", b = 6) : 1 < a.A.length && a.h && (f = sv(a.h, "Location", true), f.length && (e = f)), g = kh(e, a.g.retryParameters), h = Date.now(), G(p, Aw(a, g, 0, { type: b }), 2);
            if (3 != p.g) {
              k2 = p.h;
              if (!a.j) return p.return(0);
              k2.uri && k2.uri != k2.originalUri && !a.A.includes(k2.uri) && a.A.unshift(k2.uri);
              l = new yb(k2.uri);
              a.Y = l.g.toString();
              return G(p, Bw(a, k2.data, k2.uri, c), 3);
            }
            m = Date.now();
            n = (m - h) / 1e3;
            a.oa.sample(1, n);
            return p.return(n);
          });
        }
        function Bw(a, b, c, d) {
          var e, f, g, h, k2, l, m, n, p, q, u;
          return Q(function(w) {
            if (1 == w.g) {
              e = b;
              f = a.g.dash.manifestPreprocessor;
              g = Hn;
              if (f != g) {
                sb("manifest.dash.manifestPreprocessor configuration", "Please Use manifest.dash.manifestPreprocessorTXml instead.");
                h = uw(e, d);
                if (!h) throw new U(2, 4, 4001, c);
                f(h);
                e = Kc(h.outerHTML);
              }
              k2 = Pd(e, d);
              if (!k2) throw new U(2, 4, 4001, c);
              l = a.g.dash.manifestPreprocessorTXml;
              m = In;
              l != m && l(k2);
              if ("Patch" === d) return w.return(Cw(a, k2));
              if (n = a.g.dash.disableXlinkProcessing) return w.return(Dw(a, k2, c));
              p = a.g.dash.xlinkFailGracefully;
              q = Fu(k2, a.g.retryParameters, p, c, a.j.networkingEngine);
              eh(a.O, q);
              return G(w, q.promise, 2);
            }
            u = w.h;
            return w.return(Dw(a, u, c));
          });
        }
        function Dw(a, b, c) {
          var d, e, f, g, h, k2, l, m, n, p, q, u, w, v, x, z, C, D, F, B, A, H, E, L, M, J, K, N, O, P, R, S, oa, Z, Fa, Ia, ka, ua, Ba, na, Ca, ra, sa, Oa, ob, bb, cb, jb, ub, xe, Oc, ce, Qf, Rf;
          return Q(function(Zc) {
            switch (Zc.g) {
              case 1:
                a.h && a.h.l.clear();
                d = [c];
                e = [];
                f = /* @__PURE__ */ new Map();
                g = Xd(b, "Location");
                h = t(g);
                for (k2 = h.next(); !k2.done; k2 = h.next()) if (l = k2.value, m = l.attributes.serviceLocation, n = Zd(l)) p = Wc(d, [n])[0], m && (a.h ? rv(a.h, "Location", m, p) : f.set(m, p)), e.push(p);
                a.h ? (q = sv(a.h, "Location", true), 0 < q.length && (d = a.A = q)) : e.length && (d = a.A = e);
                a.l.me = b.attributes.id || "";
                a.l.Id = ge(b, "publishTime", je) || 0;
                a.F = Xd(b, "PatchLocation");
                u = Promise.resolve();
                if ((w = ae(b, "ContentSteering")) && a.j) {
                  v = w.attributes.defaultServiceLocation;
                  if (a.h) a.h.i = d, a.h.h = v;
                  else if (a.h = new nv(a.j), a.h.configure(a.g), a.h.setManifestType("DASH"), a.h.i = d, a.h.h = v, x = Zd(w)) (z = ge(w, "queryBeforeStart", qe, false)) ? u = ov(a.h, x) : ov(a.h, x);
                  C = t(f.keys());
                  for (D = C.next(); !D.done; D = C.next()) F = D.value, B = f.get(F), rv(a.h, "Location", F, B);
                }
                A = Xd(b, "BaseURL");
                H = false;
                if (a.h) for (E = t(A), L = E.next(); !L.done; L = E.next()) M = L.value, J = M.attributes.serviceLocation, K = Zd(M), J && K && (rv(a.h, "BaseURL", J, K), H = true);
                a.W = null;
                H && a.h || (N = A.map(Zd), a.W = Wc(d, N));
                O = function() {
                  return a.h && H ? sv(a.h, "BaseURL") : a.W ? a.W : [];
                };
                a.l.Ua = O;
                P = 0;
                A && A.length && (P = ge(A[0], "availabilityTimeOffset", pe) || 0);
                a.l.cb = P;
                a.I = ge(b, "minimumUpdatePeriod", ke, -1);
                R = ge(b, "availabilityStartTime", je);
                S = ge(b, "timeShiftBufferDepth", ke);
                oa = a.g.dash.ignoreSuggestedPresentationDelay;
                Z = null;
                oa || (Z = ge(b, "suggestedPresentationDelay", ke));
                Fa = a.g.dash.ignoreMaxSegmentDuration;
                Ia = null;
                Fa || (Ia = ge(b, "maxSegmentDuration", ke));
                ka = b.attributes.type || "static";
                a.i && a.i.presentationTimeline && (a.T = a.i.presentationTimeline.U() && "static" == ka);
                a.l.type = ka;
                if (a.i) for (ua = a.i.presentationTimeline, Ba = ua.pb(), na = t(a.o.values()), Ca = na.next(); !Ca.done; Ca = na.next()) ra = Ca.value, ra.segmentIndex && ra.segmentIndex.Oa(Ba);
                else sa = a.g.dash.ignoreMinBufferTime, Oa = 0, sa || (Oa = ge(b, "minBufferTime", ke) || 0), ob = 0, ob = null != Z ? Math.min(Z, S || Infinity) : 0 < a.g.defaultPresentationDelay ? a.g.defaultPresentationDelay : Math.min(1.5 * Oa, S || Infinity), ua = new ul(R, ob, a.g.dash.autoCorrectDrift);
                ua.Fc("static" == ka);
                (bb = ua.U()) && !isNaN(a.g.availabilityWindowOverride) && (S = a.g.availabilityWindowOverride);
                null == S && (S = Infinity);
                ua.Ce(S);
                cb = b.attributes.profiles || "";
                a.l.profiles = cb.split(",");
                jb = { Nb: "static" != ka, presentationTimeline: ua, qa: null, ha: null, ga: null, J: null, bandwidth: 0, Kf: false, cb: P, Vb: null, profiles: cb.split(","), roles: null, ub: function() {
                  return "";
                } };
                return G(Zc, u, 2);
              case 2:
                a.L = 0;
                ub = Ew(a, jb, O, b, false);
                xe = ub.duration;
                Oc = ub.periods;
                ("static" != ka || a.T) && ub.Kg || ua.bb(xe || Infinity);
                a.P && a.fa && ua.th(a.Z);
                ua.Sf(Ia || 1);
                a.P && a.fa && (ce = null != Z ? Z : a.g.defaultPresentationDelay, ua.hg(ce));
                if (!a.i) return G(Zc, a.m.gf(Oc, jb.Nb), 6);
                a.i.periodCount = Oc.length;
                a.i.gapCount = a.L;
                return G(Zc, Fw(a, Oc, false), 4);
              case 6:
                a.i = {
                  presentationTimeline: ua,
                  variants: a.m.l,
                  textStreams: a.m.If(),
                  imageStreams: a.m.i,
                  offlineSessionIds: [],
                  sequenceMode: a.g.dash.sequenceMode,
                  ignoreManifestTimestampsInSegmentsMode: false,
                  type: "DASH",
                  serviceDescription: Gw(b),
                  nextUrl: Hw(b),
                  periodCount: Oc.length,
                  gapCount: a.L,
                  isLowLatency: a.P,
                  startTime: null
                };
                if (!ua.Ih()) {
                  Zc.u(7);
                  break;
                }
                Qf = Xd(b, "UTCTiming");
                return G(Zc, Iw(a, O, Qf), 8);
              case 8:
                Rf = Zc.h;
                if (!a.j) return Zc.return();
                ua.uh(Rf);
              case 7:
                ua.ie();
              case 4:
                a.j.makeTextStreamsForClosedCaptions(a.i), Jw(a), I(Zc);
            }
          });
        }
        function Fw(a, b, c) {
          var d;
          return Q(function(e) {
            if (1 == e.g) return G(e, a.m.gf(b, true, c), 2);
            a.i.variants = a.m.l;
            d = a.m.If();
            0 < d.length && (a.i.textStreams = d);
            a.i.imageStreams = a.m.i;
            a.j.filter(a.i);
            I(e);
          });
        }
        function Cw(a, b) {
          var c, d, e, f, g, h, k2, l, m, n, p, q, u, w, v, x, z, C, D, F, B, A, H, E, L, M, J;
          return Q(function(K) {
            if (1 == K.g) {
              c = b.attributes.mpdId;
              d = ge(b, "originalPublishTime", je);
              if (!c || c !== a.l.me || d !== a.l.Id) throw a.F = [], new U(1, 4, 4052);
              e = [];
              f = [];
              g = /* @__PURE__ */ new Set();
              h = t(Wd(b));
              for (k2 = h.next(); !k2.done; k2 = h.next()) if (l = k2.value, m = se(l.attributes.sel || ""), n = m[m.length - 1], p = Zd(l) || "", "MPD" === n.name) if ("mediaPresentationDuration" === n.$b) {
                q = Zd(l) || "";
                var N = ke(q);
                if (null != N) {
                  a.l.Vb = N;
                  for (var O = t(a.s.values()), P = O.next(); !P.done; P = O.next()) P.value.Vb = N;
                }
              } else if ("type" === n.$b) {
                a.i.presentationTimeline.Fc("static" == p);
                a.l.type = p;
                N = t(a.s.values());
                for (O = N.next(); !O.done; O = N.next()) O.value.Nb = "dynamic" == p;
                "static" == p && (a.I = -1);
              } else "publishTime" === n.$b ? a.l.Id = je(p) || 0 : null === n.$b && "add" === l.tagName && f.push(l);
              else if ("PatchLocation" === n.name) te(a.F, l);
              else if ("Period" === n.name) "add" === l.tagName ? f.push(l) : "remove" === l.tagName && n.id && Kw(a, n.id);
              else if ("SegmentTemplate" === n.name) {
                O = se(l.attributes.sel || "");
                N = O[O.length - 1];
                if (N.$b) {
                  O = Lw(a, O);
                  P = Zd(l) || "";
                  for (var R = t(O), S = R.next(); !S.done; S = R.next()) S = a.s.get(S.value), ve(S.J.hc, l.tagName, N.$b, P);
                  N = O;
                } else N = [];
                u = N;
                w = t(u);
                for (v = w.next(); !v.done; v = w.next()) x = v.value, g.add(x);
              } else if ("SegmentTimeline" === n.name || "S" === n.name) {
                N = se(l.attributes.sel || "");
                N = Lw(a, N);
                O = t(N);
                for (P = O.next(); !P.done; P = O.next()) P = a.s.get(P.value), P = Cu(P, dv, "SegmentTimeline"), R = Xd(P, "S"), te(R, l), P.children = R;
                z = N;
                C = t(z);
                for (D = C.next(); !D.done; D = C.next()) F = D.value, g.add(F);
              }
              B = t(g);
              for (A = B.next(); !A.done; A = B.next()) H = A.value, Mw(
                a,
                H
              );
              E = t(f);
              for (L = E.next(); !L.done; L = E.next()) M = L.value, e.push.apply(e, y(Nw(a, M)));
              if (!e.length) return K.u(2);
              a.i.periodCount += e.length;
              a.i.gapCount = a.L;
              return G(K, Fw(a, e, true), 2);
            }
            "static" == a.l.type && (J = a.l.Vb, a.i.presentationTimeline.bb(J || Infinity));
            I(K);
          });
        }
        function Nw(a, b) {
          return Ew(a, { Nb: "dynamic" == a.l.type, presentationTimeline: a.i.presentationTimeline, qa: null, ha: null, ga: null, J: null, bandwidth: 0, Kf: false, cb: a.l.cb, profiles: a.l.profiles, Vb: a.l.Vb, roles: null, ub: function() {
            return "";
          } }, a.l.Ua, b, true).periods;
        }
        function Kw(a, b) {
          a.i.periodCount--;
          for (var c = t(a.s.keys()), d = c.next(); !d.done; d = c.next()) if (d = d.value, d.startsWith(b)) {
            var e = a.s.get(d);
            Cu(e, dv, "SegmentTimeline").children = [];
            Mw(a, d);
            a.s.delete(d);
          }
          a.C = a.C.filter(function(f) {
            return f !== b;
          });
        }
        function Lw(a, b) {
          var c = "", d = "", e = -1, f = "";
          b = t(b);
          for (var g = b.next(); !g.done; g = b.next()) g = g.value, "Period" === g.name ? c = g.id : "AdaptationSet" === g.name ? (d = g.id, null !== g.position && (e = g.position)) : "Representation" === g.name && (f = g.id);
          b = [];
          if (f) b.push(c + "," + f);
          else if (d) for (e = t(a.s.values()), a = e.next(); !a.done; a = e.next()) a = a.value, a.qa.id === c && a.ga.id === d && a.J.id && b.push(c + "," + a.J.id);
          else if (-1 < e) for (d = t(a.s.values()), a = d.next(); !a.done; a = d.next()) a = a.value, a.qa.id === c && a.ga.position === e && a.J.id && b.push(c + "," + a.J.id);
          return b;
        }
        function Mw(a, b) {
          var c = a.s.get(b), d = a.o.get(b);
          d.segmentIndex && d.segmentIndex.Oa(a.i.presentationTimeline.pb());
          try {
            var e = cv(c, function(f, g, h, k2) {
              return Ow(a, f, g, h, k2);
            }, a.o, true, a.g.dash.initialSegmentLimit, a.ka, c.J.aesKey, null, true);
            d.createSegmentIndex = function() {
              return Q(function(f) {
                if (1 == f.g) return d.segmentIndex ? f.u(0) : G(f, e.qc(), 3);
                d.segmentIndex = f.h;
                I(f);
              });
            };
          } catch (f) {
            if (b = c.J.contentType, b != cd && "application" != b && "image" != b || 4002 != f.code) throw f;
          }
        }
        function Gw(a) {
          var b = ae(a, "ServiceDescription");
          if (!b) return null;
          a = ae(b, "Latency");
          b = ae(b, "PlaybackRate");
          if (!a && !b) return null;
          var c = {};
          a && ("target" in a.attributes && (c.targetLatency = parseInt(a.attributes.target, 10) / 1e3), "max" in a.attributes && (c.maxLatency = parseInt(a.attributes.max, 10) / 1e3), "min" in a.attributes && (c.minLatency = parseInt(a.attributes.min, 10) / 1e3));
          b && ("max" in b.attributes && (c.maxPlaybackRate = parseFloat(b.attributes.max)), "min" in b.attributes && (c.minPlaybackRate = parseFloat(b.attributes.min)));
          return c;
        }
        function Hw(a) {
          a = Xd(a, "SupplementalProperty");
          if (!a.length) return null;
          a = t(a);
          for (var b = a.next(); !b.done; b = a.next()) if (b = b.value, "urn:mpeg:dash:chaining:2016" == b.attributes.schemeIdUri) return b.attributes.value;
          return null;
        }
        function Ew(a, b, c, d, e) {
          var f = b.Vb;
          f || (f = ge(d, "mediaPresentationDuration", ke), a.l.Vb = f);
          var g = 0;
          a.i && a.i.presentationTimeline && a.T && (g = a.i.presentationTimeline.Hb());
          var h = [], k2 = g;
          d = Xd(d, "Period");
          for (var l = 0; l < d.length; l++) {
            var m = d[l], n = d[l + 1], p = ge(m, "start", ke, k2), q = m.attributes.id, u = ge(m, "duration", ke);
            p = 0 == l && 0 == p && a.T ? g : p;
            var w = null;
            if (n) {
              var v = ge(n, "start", ke);
              null != v && (w = v - p + g);
            } else null != f && (w = f - p + g);
            v = fd;
            w && u && Math.abs(w - u) > v && w > u && a.L++;
            null == w && (w = u);
            if (!(null !== a.M && null !== q && null !== p && p < a.M) || a.C.includes(q) || l + 1 == d.length) {
              null !== p && (null === a.M || p > a.M) && (a.M = p);
              k2 = Pw(a, b, c, { start: p, duration: w, node: m, Yg: null == w || !n });
              h.push(k2);
              b.qa.id && w && a.ka.set(b.qa.id, w);
              if (null == w) {
                k2 = null;
                break;
              }
              k2 = p + w;
            }
          }
          if (e) for (b = t(h), c = b.next(); !c.done; c = b.next()) c = c.value.id, a.C.includes(c) || a.C.push(c);
          else a.C = h.map(function(x) {
            return x.id;
          });
          return null != f ? { periods: h, duration: f + g, Kg: false } : { periods: h, duration: k2, Kg: true };
        }
        function Jw(a) {
          var b = Array.from(a.B.keys()).filter(function(h) {
            return !a.C.includes(h);
          });
          b = t(b);
          for (var c = b.next(); !c.done; c = b.next()) {
            c = c.value;
            for (var d = true, e = t(a.B.get(c)), f = e.next(); !f.done; f = e.next()) {
              f = f.value;
              var g = a.o.get(f);
              g && (g.segmentIndex && 0 != g.segmentIndex.getNumReferences() ? d = false : (a.m && a.m.Ig(g, c), a.o.delete(f)));
            }
            d && a.B.delete(c);
          }
        }
        function Pw(a, b, c, d) {
          b.qa = Qw(a, d.node, null, c);
          b.ha = d;
          b.qa.cb = b.cb;
          b.qa.id || (b.qa.id = "__shaka_period_" + d.start);
          var e = Xd(d.node, "EventStream");
          c = b.presentationTimeline.pb();
          e = t(e);
          for (var f = e.next(); !f.done; f = e.next()) Rw(a, d.start, d.duration, f.value, c);
          c = Xd(d.node, "SupplementalProperty");
          c = t(c);
          for (e = c.next(); !e.done; e = c.next()) if (e = e.value, "urn:mpeg:dash:urlparam:2014" == e.attributes.schemeIdUri && (e = Sw(a, e))) b.ub = e;
          c = Xd(d.node, "AdaptationSet").map(function(q, u) {
            return Tw(a, b, u, q);
          }).filter(Jf);
          if (b.Nb) {
            e = [];
            f = t(c);
            for (var g = f.next(); !g.done; g = f.next()) {
              g = t(g.value.pj);
              for (var h = g.next(); !h.done; h = g.next()) e.push(h.value);
            }
            if (e.length != new Set(e).size) throw new U(2, 4, 4018);
          }
          e = /* @__PURE__ */ new Map();
          f = t(c);
          for (g = f.next(); !g.done; g = f.next()) for (g = t(g.value.ci), h = g.next(); !h.done; h = g.next()) {
            var k2 = t(h.value);
            h = k2.next().value;
            k2 = k2.next().value;
            e.set(h, k2);
          }
          if (e.size) for (f = null, g = t(c), h = g.next(); !h.done; h = g.next()) {
            h = h.value;
            k2 = [];
            for (var l = t(h.streams), m = l.next(), n = {}; !m.done; n = { mg: void 0 }, m = l.next()) if (n.mg = m.value, e.has(n.mg.originalId)) {
              f || (f = Xd(d.node, "AdaptationSet").map(function(q, u) {
                return Tw(a, b, u, q);
              }).filter(Jf));
              m = t(f);
              for (var p = m.next(); !p.done; p = m.next()) if (p = p.value.streams.find(/* @__PURE__ */ function(q) {
                return function(u) {
                  return u.originalId == q.mg.originalId;
                };
              }(n))) p.dependencyStream = e.get(p.originalId), k2.push(p);
            }
            k2.length && h.streams.push.apply(h.streams, y(k2));
          }
          d = c.filter(function(q) {
            return !q.tg;
          });
          c = c.filter(function(q) {
            return q.tg;
          });
          if (!a.g.disableIFrames) {
            for (c = t(c), e = c.next(); !e.done; e = c.next()) for (e = e.value, f = e.tg.split(" "), g = t(d), h = g.next(); !h.done; h = g.next()) if (h = h.value, f.includes(h.id)) for (h = t(h.streams), k2 = h.next(); !k2.done; k2 = h.next()) Jg(k2.value, e.streams);
          }
          c = Uw(a.g.disableAudio, d, "audio");
          e = Uw(a.g.disableVideo, d, "video");
          f = Uw(a.g.disableText, d, cd);
          d = Uw(a.g.disableThumbnails, d, "image");
          if (0 === e.length && 0 === c.length) throw new U(2, 4, 4004);
          return { id: b.qa.id, audioStreams: c, videoStreams: e, textStreams: f, imageStreams: d };
        }
        function Uw(a, b, c) {
          return a || !b.length ? [] : b.reduce(function(d, e) {
            if (e.contentType != c) return d;
            d.push.apply(d, y(e.streams));
            return d;
          }, []);
        }
        function Tw(a, b, c, d) {
          function e(J) {
            var K = J.attributes["dvb:fontFamily"];
            J = J.attributes["dvb:url"];
            K && J && (J = Wc(b.ga.Ua(), [J], b.ub()), a.j.addFont(K, J[0]));
          }
          function f(J) {
            switch (J) {
              case 1:
              case 5:
              case 6:
              case 7:
                return "srgb";
              case 9:
                return "rec2020";
              case 11:
              case 12:
                return "p3";
            }
          }
          function g(J) {
            switch (J) {
              case 1:
              case 6:
              case 13:
              case 14:
              case 15:
                return "SDR";
              case 16:
                return "PQ";
              case 18:
                return "HLG";
            }
          }
          b.ga = Qw(a, d, b.qa, null);
          b.ga.position = c;
          var h = false;
          c = Xd(d, "Role");
          var k2 = c.map(function(J) {
            return J.attributes.value;
          }).filter(Jf), l = void 0, m = b.ga.contentType == cd;
          m && (l = "subtitle");
          c = t(c);
          for (var n = c.next(); !n.done; n = c.next()) {
            n = n.value;
            var p = n.attributes.schemeIdUri;
            if (null == p || "urn:mpeg:dash:role:2011" == p) switch (n = n.attributes.value, n) {
              case "main":
                h = true;
                break;
              case "caption":
              case "subtitle":
                l = n;
            }
          }
          var q = Xd(d, "EssentialProperty");
          c = null;
          var u = false;
          n = null;
          p = false;
          q = t(q);
          for (var w = q.next(); !w.done; w = q.next()) {
            w = w.value;
            var v = w.attributes.schemeIdUri;
            if ("http://dashif.org/guidelines/trickmode" == v) c = w.attributes.value;
            else if ("urn:mpeg:mpegB:cicp:TransferCharacteristics" == v) var x = g(parseInt(w.attributes.value, 10));
            else if ("urn:mpeg:mpegB:cicp:ColourPrimaries" == v) var z = f(parseInt(w.attributes.value, 10));
            else "urn:mpeg:mpegB:cicp:MatrixCoefficients" != v && ("urn:mpeg:dash:ssr:2023" == v && a.g.dash.enableFastSwitching ? u = true : "urn:dvb:dash:fontdownload:2014" == v ? e(w) : "urn:mpeg:dash:urlparam:2014" == v ? (n = Sw(a, w)) || (p = true) : p = true);
          }
          if (p) return null;
          var C = null;
          p = Xd(d, "SupplementalProperty");
          p = t(p);
          for (q = p.next(); !q.done; q = p.next()) q = q.value, w = q.attributes.schemeIdUri, "http://dashif.org/guidelines/last-segment-number" == w ? C = parseInt(q.attributes.value, 10) - 1 : "urn:mpeg:mpegB:cicp:TransferCharacteristics" == w ? x = g(parseInt(q.attributes.value, 10)) : "urn:mpeg:mpegB:cicp:ColourPrimaries" == w ? z = f(parseInt(q.attributes.value, 10)) : "urn:dvb:dash:fontdownload:2014" == w ? e(q) : "urn:mpeg:dash:urlparam:2014" == w && (n = Sw(a, q));
          n && (b.ub = n);
          n = Xd(d, "Accessibility");
          var D = /* @__PURE__ */ new Map(), F;
          n = t(n);
          for (p = n.next(); !p.done; p = n.next()) if (q = p.value, p = q.attributes.schemeIdUri, q = q.attributes.value, "urn:scte:dash:cc:cea-608:2015" != p || a.g.disableText) if ("urn:scte:dash:cc:cea-708:2015" != p || a.g.disableText) "urn:mpeg:dash:role:2011" == p ? null != q && (k2.push(q), "captions" == q && (l = "caption")) : "urn:tva:metadata:cs:AudioPurposeCS:2007" == p && ("1" == q ? F = "visually impaired" : "2" == q && (F = "hard of hearing"));
          else if (p = 1, null != q) for (q = t(q.split(";")), w = q.next(); !w.done; w = q.next()) {
            v = w.value;
            var B = w = void 0;
            v.includes("=") ? (v = v.split("="), w = "svc" + v[0], B = v[1].split(",")[0].split(":").pop()) : (w = "svc" + p, p++, B = v);
            D.set(w, Nf(B));
          }
          else D.set("svc1", "und");
          else if (p = 1, null != q) for (q = q.split(";"), w = t(q), v = w.next(); !v.done; v = w.next()) {
            B = v.value;
            var A = v = void 0;
            B.includes("=") ? (B = B.split("="), v = B[0].startsWith("CC") ? B[0] : "CC" + B[0], A = B[1] || "und") : (v = "CC" + p, 2 == q.length ? p += 2 : p++, A = B);
            D.set(v, Nf(A));
          }
          else D.set("CC1", "und");
          n = Xd(d, "ContentProtection");
          var H = ru(n, a.g.ignoreDrmInfo, a.g.dash.keySystemsByURI);
          b.ga.encrypted = 0 < n.length;
          var E = Nf(b.ga.language || "und"), L = b.ga.label, M = /* @__PURE__ */ new Map();
          d = Xd(d, "Representation");
          if (!a.g.ignoreSupplementalCodecs) {
            n = [];
            p = t(d);
            for (q = p.next(); !q.done; q = p.next()) if (w = q.value, q = he(
              w,
              "urn:scte:dash:scte214-extensions",
              "supplementalCodecs"
            )) w = Md(w), w.attributes.codecs = q.split(" ").join(","), w.attributes.id && (w.attributes.supplementalId = w.attributes.id + "_supplementalCodecs"), n.push(w);
            d.push.apply(d, y(n));
          }
          n = d.map(function(J) {
            var K = Vw(a, b, H, l, E, L, h, k2, D, J, F, C);
            return K && (K.hdr = K.hdr || x, K.colorGamut = K.colorGamut || z, K.fastSwitching = u, J = J.attributes.dependencyId) ? (K.baseOriginalId = J, M.set(J, K), null) : K;
          }).filter(function(J) {
            return !!J;
          });
          if (0 == n.length && 0 == M.size) {
            c = "image" == b.ga.contentType;
            if (a.g.dash.ignoreEmptyAdaptationSet || m || c) return null;
            throw new U(2, 4, 4003);
          }
          if (!b.ga.contentType || "application" == b.ga.contentType) for (b.ga.contentType = Ww(n[0].mimeType, n[0].codecs), m = t(n), p = m.next(); !p.done; p = m.next()) p.value.type = b.ga.contentType;
          m = b.ga.id || "__fake__" + a.pa++;
          p = t(n);
          for (q = p.next(); !q.done; q = p.next()) {
            q = q.value;
            w = t(H.drmInfos);
            for (v = w.next(); !v.done; v = w.next()) v = v.value, v.keyIds = v.keyIds && q.keyIds ? new Set([].concat(y(v.keyIds), y(q.keyIds))) : v.keyIds || q.keyIds;
            q.groupId = m;
          }
          d = d.map(function(J) {
            return J.attributes.supplementalId || J.attributes.id;
          }).filter(Jf);
          return { id: m, contentType: b.ga.contentType, language: E, Pk: h, streams: n, drmInfos: H.drmInfos, tg: c, pj: d, ci: M };
        }
        function Sw(a, b) {
          if ((b = be(b, "urn:mpeg:dash:schema:urlparam:2014", "UrlQueryInfo")) && ge(b, "useMPDUrlQuery", qe, false)) {
            var c = b.attributes.queryTemplate;
            if (c) return function() {
              return "$querypart$" == c ? a.Y : c.split("&").map(function(d) {
                if ("$querypart$" == d) return a.Y;
                var e = /\$query:(.*?)\$/g.exec(d);
                if (e && 2 == e.length) {
                  e = e[1];
                  var f = new Eb(a.Y).get(e);
                  if (f.length) return e + "=" + f[0];
                }
                return d;
              }).join("&");
            };
          }
          return null;
        }
        function Vw(a, b, c, d, e, f, g, h, k2, l, m, n) {
          b.J = Qw(a, l, b.ga, null);
          var p = b.J.id;
          a.Z = Math.min(a.Z, b.J.cb);
          a.P = 0 < a.Z;
          if (!Xw(b.J)) return null;
          var q = b.ha.start;
          b.bandwidth = ge(l, "bandwidth", ne) || 0;
          b.roles = h;
          var u = Xd(l, "SupplementalProperty"), w = Xd(l, "EssentialProperty"), v = Xd(l, "ContentProtection");
          l = null;
          var x = w.find(function(O) {
            return "urn:mpeg:dash:urlparam:2014" == O.attributes.schemeIdUri;
          });
          x ? l = Sw(a, x) : (x = u.find(function(O) {
            return "urn:mpeg:dash:urlparam:2014" == O.attributes.schemeIdUri;
          })) && (l = Sw(a, x));
          l && (b.ub = l);
          x = b.J.contentType;
          l = x == cd || "application" == x;
          x = "image" == x;
          v.length && (b.ga.encrypted = true);
          try {
            var z = void 0;
            if (c.cf) {
              var C = b.J.Ua, D = b.ub, F = Wc(C(), [c.cf.Vi], D()), B = kh(F, a.g.retryParameters);
              z = { bitsKey: 128, blockCipherMode: "CBC", iv: c.cf.iv, firstMediaSequenceNumber: 0, fetchKey: function() {
                var O, P, R;
                return Q(function(S) {
                  if (1 == S.g) return G(S, Aw(a, B, 6), 2);
                  if (3 != S.g) {
                    O = S.h;
                    if (!O.data || 16 != O.data.byteLength) throw new U(2, 4, 4049);
                    P = { name: "AES-CBC" };
                    R = z;
                    return G(S, window2.crypto.subtle.importKey(
                      "raw",
                      O.data,
                      P,
                      true,
                      ["decrypt"]
                    ), 3);
                  }
                  R.cryptoKey = S.h;
                  z.fetchKey = void 0;
                  I(S);
                });
              } };
            }
            b.J.aesKey = z;
            C = function(O, P, R, S) {
              return Ow(a, O, P, R, S);
            };
            if (b.J.dd) var A = Su(b, C, z);
            else if (b.J.Yb) A = Yu(b, a.o, z);
            else if (b.J.hc) A = cv(b, C, a.o, !!a.i, a.g.dash.initialSegmentLimit, a.ka, z, n, false);
            else {
              var H = b.ha.duration || 0, E = b.J.Ua, L = b.J.mimeType, M = b.J.codecs;
              A = { qc: function() {
                var O = Rl(q, H, E());
                O.Eb(function(P) {
                  P.mimeType = L;
                  P.codecs = M;
                });
                return Promise.resolve(O);
              } };
            }
          } catch (O) {
            if ((l || x) && 4002 == O.code) return null;
            throw O;
          }
          n = vu(
            v,
            c,
            a.g.ignoreDrmInfo,
            a.g.dash.keySystemsByURI
          );
          n = new Set(n ? [n] : []);
          v = false;
          u.some(function(O) {
            return "tag:dolby.com,2018:dash:EC3_ExtensionType:2018" == O.attributes.schemeIdUri && "JOC" == O.attributes.value;
          }) && (v = true);
          u = false;
          l && (u = h.includes("forced_subtitle") || h.includes("forced-subtitle"));
          var J;
          if (x && ((w = w.find(function(O) {
            return ["http://dashif.org/thumbnail_tile", "http://dashif.org/guidelines/thumbnail_tile"].includes(O.attributes.schemeIdUri);
          })) && (J = w.attributes.value), !J)) return null;
          var K;
          l = b.J.codecs;
          b.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10") && (l.includes("hvc1.2.4.L153.B0") || l.includes("hev1.2.4.L153.B0")) && (K = "PQ");
          w = b.J.id ? b.qa.id + "," + b.J.id : "";
          a.F.length && p && a.s.set(b.qa.id + "," + p, Yw(b));
          var N = w && a.o.has(w) ? a.o.get(w) : {
            id: a.pa++,
            originalId: b.J.id,
            groupId: null,
            createSegmentIndex: function() {
              return Promise.resolve();
            },
            closeSegmentIndex: function() {
              N.segmentIndex && (N.segmentIndex.release(), N.segmentIndex = null);
            },
            segmentIndex: null,
            mimeType: b.J.mimeType,
            codecs: l,
            frameRate: b.J.frameRate,
            pixelAspectRatio: b.J.pixelAspectRatio,
            bandwidth: b.bandwidth,
            width: b.J.width,
            height: b.J.height,
            kind: d,
            encrypted: 0 < c.drmInfos.length,
            drmInfos: c.drmInfos,
            keyIds: n,
            language: e,
            originalLanguage: b.ga.language,
            label: f,
            type: b.ga.contentType,
            primary: g,
            trickModeVideo: null,
            dependencyStream: null,
            emsgSchemeIdUris: b.J.emsgSchemeIdUris,
            roles: h,
            forced: u,
            channelsCount: b.J.oe,
            audioSamplingRate: b.J.audioSamplingRate,
            spatialAudio: v,
            closedCaptions: k2,
            hdr: K,
            colorGamut: void 0,
            videoLayout: void 0,
            tilesLayout: J,
            accessibilityPurpose: m,
            external: false,
            fastSwitching: false,
            fullMimeTypes: /* @__PURE__ */ new Set([kf(
              b.J.mimeType,
              b.J.codecs
            )]),
            isAudioMuxedInVideo: false,
            baseOriginalId: null
          };
          N.createSegmentIndex = function() {
            var O;
            return Q(function(P) {
              if (1 == P.g) {
                if (N.segmentIndex) return P.u(0);
                O = N;
                return G(P, A.qc(), 3);
              }
              O.segmentIndex = P.h;
              I(P);
            });
          };
          w && b.Nb && !a.o.has(w) && (b = b.qa.id || "", a.B.has(b) || a.B.set(b, []), a.o.set(w, N), a.B.get(b).push(w));
          return N;
        }
        function Yw(a) {
          function b(c) {
            if (!c) return null;
            c = Nd(c);
            c.dd = null;
            c.Yb = null;
            c.hc = ye(c.hc);
            return c;
          }
          a = Nd(a);
          a.qa = b(a.qa);
          a.ga = b(a.ga);
          a.J = b(a.J);
          a.ha && (a.ha = Nd(a.ha), a.ha.node = null);
          return a;
        }
        function ww(a) {
          var b, c;
          return Q(function(d) {
            switch (d.g) {
              case 1:
                return b = 0, xa(d, 2), G(d, xw(a), 4);
              case 4:
                b = d.h;
                za(d, 3);
                break;
              case 2:
                if (c = Aa(d), a.j) {
                  if (a.g.raiseFatalErrorOnManifestUpdateRequestFailure) return a.j.onError(c), d.return();
                  c.severity = 1;
                  a.j.onError(c);
                }
              case 3:
                if (!a.j) return d.return();
                a.j.onManifestUpdated();
                yw(a, b);
                I(d);
            }
          });
        }
        function yw(a, b) {
          if (!(0 > a.I)) {
            var c = a.I;
            0 <= a.g.updatePeriod && (c = a.g.updatePeriod);
            a.K.da(Math.max(c - b, Ya(a.oa)));
          }
        }
        function Qw(a, b, c, d) {
          c = c || { contentType: "", mimeType: "", codecs: "", emsgSchemeIdUris: [], frameRate: void 0, pixelAspectRatio: void 0, oe: null, audioSamplingRate: null, cb: 0, Ae: 0, encrypted: false };
          d = d || c.Ua;
          var e = b.attributes.id, f = b.attributes.supplementalId, g = Xd(b, "BaseURL"), h, k2 = false;
          if (a.h) for (var l = t(g), m = l.next(); !m.done; m = l.next()) {
            var n = m.value;
            m = n.attributes.serviceLocation;
            n = Zd(n);
            m && n && (rv(a.h, e, m, n), k2 = true);
          }
          k2 && a.h || (h = g.map(Zd));
          l = b.attributes.contentType || c.contentType;
          m = b.attributes.mimeType || c.mimeType;
          n = tm([b.attributes.codecs || c.codecs]).join(",");
          var p = ge(b, "frameRate", re) || c.frameRate, q = b.attributes.sar || c.pixelAspectRatio, u = Zw(Xd(b, "InbandEventStream"), c.emsgSchemeIdUris), w = Xd(b, "AudioChannelConfiguration");
          w = $w(w) || c.oe;
          var v = ge(b, "audioSamplingRate", oe) || c.audioSamplingRate;
          l || (l = Ww(m, n));
          var x = ae(b, "SegmentBase"), z = ae(b, "SegmentTemplate"), C = x ? ge(x, "availabilityTimeOffset", pe) || 0 : 0, D = z ? ge(z, "availabilityTimeOffset", pe) || 0 : 0, F = g && g.length ? ge(g[0], "availabilityTimeOffset", pe) || 0 : 0;
          C = c.cb + F + C + D;
          D = null;
          (F = ae(b, "SegmentSequenceProperties")) && (F = ae(F, "SAP")) && (D = ge(F, "cadence", me));
          F = b.attributes.label;
          var B = Xd(b, "Label");
          B && B.length && (B = B[0], Yd(B) && (F = Yd(B)));
          return {
            Ua: function() {
              return Wc(d(), g.length ? a.h && k2 ? sv(a.h, e) : h ? h : [] : []);
            },
            dd: x || c.dd,
            Yb: ae(b, "SegmentList") || c.Yb,
            hc: z || c.hc,
            width: ge(b, "width", oe) || c.width,
            height: ge(b, "height", oe) || c.height,
            contentType: l,
            mimeType: m,
            codecs: n,
            frameRate: p,
            pixelAspectRatio: q,
            emsgSchemeIdUris: u,
            id: f || e,
            originalId: e,
            language: b.attributes.lang,
            oe: w,
            audioSamplingRate: v,
            cb: C,
            de: null,
            Ae: D || c.Ae,
            label: F || null,
            encrypted: false
          };
        }
        function Zw(a, b) {
          b = b.slice();
          a = t(a);
          for (var c = a.next(); !c.done; c = a.next()) c = c.value.attributes.schemeIdUri, b.includes(c) || b.push(c);
          return b;
        }
        function $w(a) {
          a = t(a);
          for (var b = a.next(); !b.done; b = a.next()) {
            b = b.value;
            var c = b.attributes.schemeIdUri;
            if (c && (b = b.attributes.value)) switch (c) {
              case "urn:mpeg:dash:outputChannelPositionList:2012":
                return b.trim().split(/ +/).length;
              case "urn:mpeg:dash:23003:3:audio_channel_configuration:2011":
              case "urn:dts:dash:audio_channel_configuration:2012":
                b = parseInt(b, 10);
                if (!b) continue;
                return b;
              case "tag:dolby.com,2015:dash:audio_channel_configuration:2015":
                c = [2, 1, 2, 2, 2, 2, 1, 2, 2, 1, 1, 1, 1, 2, 1, 1, 2, 2];
                b = parseInt(
                  b,
                  16
                );
                if (!b) continue;
                for (var d = 0, e = 0; e < c.length; e++) b & 1 << e && (d += c[e]);
                if (d) return d;
                continue;
              case "tag:dolby.com,2014:dash:audio_channel_configuration:2011":
              case "urn:dolby:dash:audio_channel_configuration:2011":
                c = [1, 1, 1, 1, 1, 2, 2, 1, 1, 2, 2, 2, 1, 2, 1, 1].reverse();
                b = parseInt(b, 16);
                if (!b) continue;
                for (e = d = 0; e < c.length; e++) b & 1 << e && (d += c[e]);
                if (d) return d;
                continue;
              case "urn:mpeg:mpegB:cicp:ChannelConfiguration":
                if (c = [0, 1, 2, 3, 4, 5, 6, 8, 2, 3, 4, 7, 8, 24, 8, 12, 10, 12, 14, 12, 14], (b = parseInt(b, 10)) && 0 < b && b < c.length) return c[b];
            }
          }
          return null;
        }
        function Xw(a) {
          var b = a.dd ? 1 : 0;
          b += a.Yb ? 1 : 0;
          b += a.hc ? 1 : 0;
          if (0 == b) return a.contentType == cd || "application" == a.contentType ? true : false;
          1 != b && (a.dd && (a.Yb = null), a.hc = null);
          return true;
        }
        function ax(a, b, c, d) {
          var e, f, g, h, k2, l, m;
          return Q(function(n) {
            if (1 == n.g) return e = [Nc(c)], f = Wc(b(), e), g = kh(f, a.g.retryParameters), g.method = d, h = a.j.networkingEngine.request(4, g, { isPreload: a.ea() }), eh(a.O, h), G(n, h.promise, 2);
            k2 = n.h;
            if ("HEAD" == d) {
              if (!k2.headers || !k2.headers.date) return n.return(0);
              l = k2.headers.date;
            } else l = Gc(k2.data);
            m = Date.parse(l);
            return isNaN(m) ? n.return(0) : n.return(m - Date.now());
          });
        }
        function Iw(a, b, c) {
          var d, e, f, g, h, k2, l, m;
          return Q(function(n) {
            switch (n.g) {
              case 1:
                d = c.map(function(p) {
                  return { scheme: p.attributes.schemeIdUri, value: p.attributes.value };
                }), e = a.g.dash.clockSyncUri, !d.length && e && d.push({ scheme: "urn:mpeg:dash:utc:http-head:2014", value: e }), f = t(d), g = f.next();
              case 2:
                if (g.done) {
                  n.u(4);
                  break;
                }
                h = g.value;
                xa(n, 5);
                k2 = h.scheme;
                l = h.value;
                switch (k2) {
                  case "urn:mpeg:dash:utc:http-head:2014":
                  case "urn:mpeg:dash:utc:http-head:2012":
                    return n.u(7);
                  case "urn:mpeg:dash:utc:http-xsdate:2014":
                  case "urn:mpeg:dash:utc:http-iso:2014":
                  case "urn:mpeg:dash:utc:http-xsdate:2012":
                  case "urn:mpeg:dash:utc:http-iso:2012":
                    return n.u(8);
                  case "urn:mpeg:dash:utc:direct:2014":
                  case "urn:mpeg:dash:utc:direct:2012":
                    return m = Date.parse(l), n.return(isNaN(m) ? 0 : m - Date.now());
                  case "urn:mpeg:dash:utc:http-ntp:2014":
                  case "urn:mpeg:dash:utc:ntp:2014":
                  case "urn:mpeg:dash:utc:sntp:2014":
                    db("NTP UTCTiming scheme is not supported");
                    break;
                  default:
                    db("Unrecognized scheme in UTCTiming element", k2);
                }
                n.u(9);
                break;
              case 7:
                return G(n, ax(a, b, l, "HEAD"), 10);
              case 10:
                return n.return(n.h);
              case 8:
                return G(n, ax(a, b, l, "GET"), 11);
              case 11:
                return n.return(n.h);
              case 9:
                za(
                  n,
                  3
                );
                break;
              case 5:
                Aa(n);
              case 3:
                g = f.next();
                n.u(2);
                break;
              case 4:
                return db("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"), n.return(0);
            }
          });
        }
        function Rw(a, b, c, d, e) {
          var f = d.attributes.schemeIdUri || "", g = d.attributes.value || "", h = ge(d, "timescale", oe) || 1, k2 = ge(d, "presentationTimeOffset", oe) || 0;
          d = t(Xd(d, "Event"));
          for (var l = d.next(); !l.done; l = d.next()) {
            l = l.value;
            var m = ge(l, "presentationTime", oe) || 0, n = ge(l, "duration", oe) || 0;
            m = Math.max((m - k2) / h + b, b);
            n = m + n / h;
            null != c && (m = Math.min(m, b + c), n = Math.min(n, b + c));
            n < e || (l = { schemeIdUri: f, value: g, startTime: m, endTime: n, id: l.attributes.id || "", timescale: h, eventElement: we(l), eventNode: ye(l) }, a.j.onTimelineRegionAdded(l));
          }
        }
        function Ow(a, b, c, d, e) {
          var f, g, h, k2;
          return Q(function(l) {
            if (1 == l.g) return f = qh, g = e ? 0 : 1, h = xm(b, c, d, a.g.retryParameters), G(l, Aw(a, h, f, { type: g }), 2);
            k2 = l.h;
            return l.return(k2.data);
          });
        }
        function Ww(a, b) {
          b = kf(a, b);
          return Bf(b) ? cd : a.split("/")[0];
        }
        function Aw(a, b, c, d) {
          d || (d = {});
          d.isPreload = a.ea();
          b = a.j.networkingEngine.request(c, b, d);
          eh(a.O, b);
          return b.promise;
        }
        function zw(a) {
          var b = a.l.Id;
          if (!a.l.me || !b || !a.F.length) return [];
          var c = Date.now() / 1e3, d = a.F.filter(function(e) {
            e = oe(e.attributes.ttl);
            return !e || b + e > c;
          }).map(Zd).filter(Jf);
          return d.length ? Wc(a.A, d) : [];
        }
        T("shaka.dash.DashParser", vw);
        Ri("application/dash+xml", function() {
          return new vw();
        });
        Ri("video/vnd.mpeg.dash.mpd", function() {
          return new vw();
        });
        function bx() {
        }
        T("shaka.dependencies", bx);
        bx.has = function(a) {
          return cx.has(a);
        };
        bx.add = function(a, b) {
          if (!dx[a]) throw Error(a + " is not supported");
          a == ex ? sb("mux.js", "mux.js is no longer used in Shaka Player.") : cx.set(a, function() {
            return b;
          });
        };
        var ex = "muxjs", dx = { Qk: ex, ISOBoxer: "ISOBoxer" };
        bx.Allowed = dx;
        var cx = /* @__PURE__ */ new Map([["ISOBoxer", function() {
          return window2.ISOBoxer;
        }]]);
        function fx(a, b, c) {
          this.type = a;
          this.ba = b;
          this.segments = c || null;
        }
        function gx(a, b, c, d) {
          this.id = a;
          this.name = b;
          this.attributes = c;
          this.value = void 0 === d ? null : d;
        }
        gx.prototype.toString = function(a) {
          function b(e) {
            return e.name + "=" + (isNaN(Number(e.value)) ? '"' + e.value + '"' : e.value);
          }
          var c = "#" + this.name, d = this.attributes ? this.attributes.filter(function(e) {
            return a ? !a.has(e.name) : true;
          }).map(b) : [];
          this.value && d.unshift(this.value);
          0 < d.length && (c += ":" + d.join(","));
          return c;
        };
        function hx(a, b) {
          if (b) return a.toString();
          b = (/* @__PURE__ */ new Set()).add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI");
          return a.toString(b);
        }
        function ix(a, b) {
          a = a.attributes.filter(function(c) {
            return c.name == b;
          });
          return a.length ? a[0] : null;
        }
        function jx(a, b, c) {
          return (a = ix(a, b)) ? a.value : c || null;
        }
        function kx(a, b) {
          a = ix(a, b);
          if (!a) throw new U(2, 4, 4023, b);
          return a.value;
        }
        function lx(a, b, c) {
          c = void 0 === c ? [] : c;
          this.ba = b;
          this.g = a;
          this.Ib = c;
        }
        function mx(a, b) {
          this.name = a;
          this.value = b;
        }
        ;
        function nx(a, b) {
          return a.filter(function(c) {
            return c.name == b;
          });
        }
        function ox(a, b) {
          return a.filter(function(c) {
            return kx(c, "TYPE") == b;
          });
        }
        function px(a, b) {
          a = t(a);
          for (var c = a.next(); !c.done; c = a.next()) if (c = c.value, c.name === b) return c;
          return null;
        }
        function qx(a, b, c) {
          c = void 0 === c ? 0 : c;
          return (a = px(a, b)) ? Number(a.value) : c;
        }
        function rx(a, b, c) {
          return b ? sx(a, [b], c) : [];
        }
        function sx(a, b, c) {
          if (!b.length) return [];
          var d = b;
          c && c.size && (d = b.map(function(e) {
            return tx(e, c);
          }));
          return Wc(a, d);
        }
        function tx(a, b) {
          if (!b || !b.size) return a;
          a = String(a).replace(/%7B/g, "{").replace(/%7D/g, "}");
          var c = a.match(/{\$\w*}/g);
          if (c) {
            c = t(c);
            for (var d = c.next(); !d.done; d = c.next()) {
              d = d.value;
              var e = d.slice(2, d.length - 1), f = b.get(e);
              if (f) a = a.replace(d, f);
              else throw new U(2, 4, 4039, e);
            }
          }
          return a;
        }
        ;
        function ux() {
          this.g = 0;
        }
        function vx(a, b) {
          b = Gc(b);
          b = b.replace(/\r\n|\r(?=[^\n]|$)/gm, "\n").trim();
          var c = b.split(/\n+/m);
          if (!/^#EXTM3U($|[ \t\n])/m.test(c[0])) throw new U(2, 4, 4015);
          b = 0;
          for (var d = true, e = t(c), f = e.next(); !f.done; f = e.next()) if (f = f.value, /^#(?!EXT)/m.test(f) || d) d = false;
          else if (f = wx(a, f), --a.g, xx.includes(f.name)) {
            b = 1;
            break;
          } else "EXT-X-STREAM-INF" == f.name && (d = true);
          e = [];
          d = true;
          for (f = 0; f < c.length; f++) {
            var g = c[f], h = c[f + 1];
            if (/^#(?!EXT)/m.test(g) || d) d = false;
            else {
              g = wx(a, g);
              if (yx.includes(g.name)) {
                if (1 != b) throw new U(2, 4, 4017);
                g = c.splice(f, c.length - f);
                c = [];
                d = [];
                f = [];
                h = null;
                g = t(g);
                for (var k2 = g.next(); !k2.done; k2 = g.next()) k2 = k2.value, /^(#EXT)/.test(k2) ? (k2 = wx(a, k2), xx.includes(k2.name) ? e.push(k2) : "EXT-X-MAP" == k2.name ? h = k2 : "EXT-X-PART" == k2.name ? f.push(k2) : "EXT-X-PRELOAD-HINT" == k2.name ? "PART" == jx(k2, "TYPE") ? f.push(k2) : "MAP" == jx(k2, "TYPE") && (k2.name = "EXT-X-MAP", h = k2) : d.push(k2)) : /^#(?!EXT)/m.test(k2) || (k2 = k2.trim(), h && d.push(h), c.push(new lx(k2, d, f)), d = [], f = []);
                f.length && (h && d.push(h), c.push(new lx("", d, f)));
                return new fx(b, e, c);
              }
              e.push(g);
              "EXT-X-STREAM-INF" == g.name && (g.attributes.push(new mx("URI", h)), d = true);
            }
          }
          return new fx(b, e);
        }
        function wx(a, b) {
          a = a.g++;
          var c = b.match(/^#(EXT[^:]*)(?::(.*))?$/);
          if (!c) throw new U(2, 4, 4016, b);
          b = c[1];
          var d = c[2];
          c = [];
          var e;
          if (d) {
            d = new Ed(d);
            var f;
            (f = Gd(d, /^([^,=]+)(?:,|$)/g)) && (e = f[1]);
            for (var g = /([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g; f = Gd(d, g); ) c.push(new mx(f[1], f[2] || f[3])), Fd(d);
          }
          return new gx(a, b, c, e);
        }
        var xx = "EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" "), yx = "EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP EXT-X-TILES".split(" ");
        function zx() {
        }
        function Ax(a, b) {
          try {
            var c = Bx(a);
            return Xg({ uri: a, originalUri: a, data: c.data, headers: { "content-type": c.contentType }, originalRequest: b });
          } catch (d) {
            return Vg(d);
          }
        }
        function Bx(a) {
          var b = a.split(":");
          if (2 > b.length || "data" != b[0]) throw new U(2, 1, 1004, a);
          b = b.slice(1).join(":").split(",");
          if (2 > b.length) throw new U(2, 1, 1004, a);
          var c = b[0];
          a = window2.decodeURIComponent(b.slice(1).join(","));
          b = c.split(";");
          c = b[0];
          var d = false;
          1 < b.length && "base64" == b[b.length - 1] && (d = true, b.pop());
          var e;
          d ? e = Sc(a) : e = Kc(a);
          return { data: e, contentType: c };
        }
        T("shaka.net.DataUriPlugin", zx);
        zx.parse = Ax;
        gh("data", Ax);
        function Cx() {
          var a = this;
          this.g = this.h = null;
          this.F = 1;
          this.A = /* @__PURE__ */ new Map();
          this.I = /* @__PURE__ */ new Map();
          this.M = /* @__PURE__ */ new Map();
          this.M.set("video", /* @__PURE__ */ new Map());
          this.M.set("audio", /* @__PURE__ */ new Map());
          this.M.set(cd, /* @__PURE__ */ new Map());
          this.M.set("image", /* @__PURE__ */ new Map());
          this.Na = /* @__PURE__ */ new Set();
          this.i = /* @__PURE__ */ new Map();
          this.l = null;
          this.C = "";
          this.Ga = new ux();
          this.K = -1;
          this.ea = Infinity;
          this.Z = this.Tb = this.Ma = false;
          this.B = new ec(function() {
            if (a.W && !a.g.continueLoadingWhenPaused && (a.T.Ja(a.W, "timeupdate"), a.W.paused)) {
              a.T.ma(a.W, "timeupdate", function() {
                return Dx(a);
              });
              return;
            }
            Dx(a);
          });
          this.Ea = Ex;
          this.m = null;
          this.La = 0;
          this.o = Infinity;
          this.Fa = this.Aa = this.P = 0;
          this.Y = new dh();
          this.G = /* @__PURE__ */ new Map();
          this.H = /* @__PURE__ */ new Map();
          this.sa = /* @__PURE__ */ new Map();
          this.ka = /* @__PURE__ */ new Map();
          this.L = /* @__PURE__ */ new Map();
          this.oa = /* @__PURE__ */ new Map();
          this.pa = /* @__PURE__ */ new Map();
          this.Sb = this.fa = false;
          this.Ob = new Xa(5);
          this.j = null;
          this.O = true;
          this.ya = /* @__PURE__ */ new Set();
          this.T = new lb();
          this.s = this.W = null;
          this.Pb = function() {
            return false;
          };
        }
        r = Cx.prototype;
        r.configure = function(a, b) {
          var c = this.h && a.updatePeriod != this.g.updatePeriod && 0 <= a.updatePeriod;
          this.g = a;
          b && (this.Pb = b);
          this.j && this.j.configure(this.g);
          c && this.m && this.m.presentationTimeline.U() && this.B.kb();
        };
        r.start = function(a, b) {
          var c = this, d;
          return Q(function(e) {
            return 1 == e.g ? (c.h = b, c.fa = b.isLowLatencyMode(), G(e, Fx(c, [a]).promise, 2)) : 3 != e.g ? (d = e.h, c.C = d.uri, G(e, Gx(c, d.data), 3)) : e.return(c.m);
          });
        };
        r.stop = function() {
          this.B && (this.B.stop(), this.B = null);
          var a = [];
          this.Y && (a.push(this.Y.destroy()), this.Y = null);
          this.g = this.h = null;
          this.Na.clear();
          this.m = null;
          this.i.clear();
          this.I.clear();
          this.H.clear();
          this.A.clear();
          this.sa.clear();
          this.ka.clear();
          this.L.clear();
          this.oa.clear();
          this.pa.clear();
          this.ya.clear();
          this.j && this.j.destroy();
          this.T && (this.T.release(), this.T = null);
          return Promise.all(a);
        };
        r.update = function() {
          var a = this, b, c, d, e, f, g, h, k2, l, m, n, p;
          return Q(function(q) {
            if (1 == q.g) {
              if (!Hx(a)) return q.return();
              b = [];
              c = Array.from(a.i.values());
              a.o = Infinity;
              a.m.gapCount = 0;
              d = c.filter(function(u) {
                return u.stream.segmentIndex;
              });
              e = t(d);
              for (f = e.next(); !f.done; f = e.next()) g = f.value, b.push(Ix(a, g));
              return G(q, Promise.all(b), 2);
            }
            Jx(a, d.map(function(u) {
              return u.stream;
            }));
            h = d.some(function(u) {
              return 0 == u.rd;
            });
            d.length && !h && (k2 = Kx, Lx(a, k2.Nh), l = d.map(function(u) {
              return u.Ub;
            }), a.l.bb(Math.min.apply(Math, y(l))), a.h.updateDuration());
            h && Mx(a);
            m = t(d);
            for (n = m.next(); !n.done; n = m.next()) p = n.value, p.stream.isAudioMuxedInVideo || !p.stream.segmentIndex || zg(p.stream.segmentIndex) || a.h.disableStream(p.stream);
            I(q);
          });
        };
        function Nx(a, b) {
          return Hx(a) ? a.M.get(b.type) : b.je;
        }
        function Ix(a, b) {
          var c, d, e, f, g, h, k2, l, m, n, p, q, u, w, v, x, z, C, D, F, B, A, H, E, L, M, J, K, N, O, P, R, S, oa, Z, Fa, Ia;
          return Q(function(ka) {
            switch (ka.g) {
              case 1:
                if (b.stream.isAudioMuxedInVideo) return ka.return();
                c = [];
                d = t(b.N());
                for (e = d.next(); !e.done; e = d.next()) f = e.value, g = new yb(f), h = g.g, b.Td && (0 <= b.Ab && h.add("_HLS_msn", String(b.Ab)), 0 <= b.Bb && h.add("_HLS_part", String(b.Bb))), b.Ud && h.add("_HLS_skip", "YES"), Nb(h) && Cb(g, Db(h.toString())), c.push(g.toString());
                xa(ka, 2);
                return G(ka, Fx(a, c, true).promise, 4);
              case 4:
                k2 = ka.h;
                za(
                  ka,
                  3
                );
                break;
              case 2:
                throw l = Aa(ka), a.h && a.h.disableStream(b.stream), l;
              case 3:
                if (!b.stream.segmentIndex) return ka.return();
                m = vx(a.Ga, k2.data);
                if (1 != m.type) throw new U(2, 4, 4017);
                n = k2.uri;
                n == k2.originalUri || b.N().includes(n) || b.ve.push(n);
                p = nx(m.ba, "EXT-X-DEFINE");
                q = Ox(a, p, n);
                u = b.stream;
                w = Nx(a, b);
                return G(ka, Px(a, m, u.mimeType, b.N, q), 5);
              case 5:
                v = ka.h;
                x = v.keyIds;
                z = v.drmInfos;
                C = v.encrypted;
                D = v.zg;
                u.encrypted || !C || D || (u.encrypted = true);
                F = function(ua, Ba) {
                  return ua.size === Ba.size && [].concat(y(ua)).every(function(na) {
                    return Ba.has(na);
                  });
                };
                F(u.keyIds, x) || (u.keyIds = x, u.drmInfos = z, a.h.newDrmInfo(u));
                B = Qx(a, m, w, q, b.N, b.type);
                A = B.segments;
                if (H = B.bandwidth) u.bandwidth = H;
                E = bm(u);
                L = t(A);
                for (M = L.next(); !M.done; M = L.next()) J = M.value, J.ca && (J.ca.Wc = E);
                u.segmentIndex.Bd(A, a.l.pb());
                A.length && (K = qx(m.ba, "EXT-X-MEDIA-SEQUENCE", 0), O = (N = px(m.ba, "EXT-X-SKIP")) ? Number(jx(N, "SKIPPED-SEGMENTS")) : 0, P = Rx(K, A), R = P.Ab, S = P.Bb, b.Ab = R + O, b.Bb = S, oa = w.get(K), u.segmentIndex.Oa(oa));
                if (Z = zg(u.segmentIndex)) b.Ac = Z.startTime, Fa = A[A.length - 1], b.Ub = Fa.endTime;
                if (Ia = px(
                  m.ba,
                  "EXT-X-ENDLIST"
                )) b.rd = true;
                Sx(a, m);
                Tx(a, m.ba, u.type, q, b.N);
                I(ka);
            }
          });
        }
        r.onExpirationUpdated = function() {
        };
        r.onInitialVariantChosen = function() {
        };
        r.banLocation = function(a) {
          this.j && this.j.banLocation(a);
        };
        r.setMediaElement = function(a) {
          this.W = a;
        };
        function Ux(a, b, c) {
          c = void 0 === c ? false : c;
          for (var d = -1 == a.K, e = t(b), f = e.next(); !f.done; f = e.next()) {
            f = f.value;
            var g = f.stream.segmentIndex, h = Nx(a, f);
            if (g = zg(g)) {
              h = t(h);
              for (var k2 = h.next(); !k2.done; k2 = h.next()) {
                k2 = t(k2.value);
                var l = k2.next().value;
                if (k2.next().value == g.startTime) {
                  d && (a.K = Math.max(a.K, l));
                  f.pf = l;
                  break;
                }
              }
            }
          }
          if (!(0 > a.K)) {
            for (b = t(b), d = b.next(); !d.done; d = b.next()) if (d = d.value, Vx(a, d.type) || c) {
              if (e = d.stream.segmentIndex) {
                if (f = a.K - d.pf, 0 < f && (e.g.splice(0, f), e = zg(e))) e = -e.startTime, d.stream.segmentIndex.offset(e), Wx(a, d, e);
              }
            }
          }
        }
        function Xx(a, b) {
          if (Infinity == a.ea) {
            b = t(b);
            for (var c = b.next(); !c.done; c = b.next()) c = zg(c.value.stream.segmentIndex), null != c && null != c.h && (a.ea = Math.min(a.ea, c.h));
          }
          b = a.ea;
          if (Infinity != b) {
            c = t(a.i.values());
            for (var d = c.next(); !d.done; d = c.next()) if (d = d.value, !Vx(a, d.type)) {
              var e = d.stream.segmentIndex;
              if (null != e) {
                var f = zg(e);
                if (f) if (null == f.h) ab("Missing EXT-X-PROGRAM-DATE-TIME for stream", d.N(), "Expect AV sync issues!");
                else for (Wx(a, d, f.h - b - f.startTime), d = t(e), e = d.next(); !e.done; e = d.next()) e.value.og(b);
              }
            }
          }
        }
        function Wx(a, b, c) {
          if (!(1e-3 > Math.abs(c))) {
            b.Ac += c;
            b.Ub += c;
            a = Nx(a, b);
            for (var d = t(a), e = d.next(); !e.done; e = d.next()) {
              var f = t(e.value);
              e = f.next().value;
              f = f.next().value;
              a.set(e, f + c);
            }
            b.N();
          }
        }
        function Gx(a, b) {
          var c, d, e, f, g, h, k2, l, m, n, p, q, u, w, v, x, z, C, D, F, B, A, H, E, L, M, J, K, N, O, P, R, S, oa, Z, Fa, Ia, ka, ua, Ba, na, Ca;
          return Q(function(ra) {
            switch (ra.g) {
              case 1:
                c = ed;
                d = vx(a.Ga, b);
                e = nx(d.ba, "EXT-X-DEFINE");
                f = [];
                g = [];
                h = [];
                a.l = new ul(null, 0);
                a.l.Fc(true);
                k2 = function() {
                  return [a.C];
                };
                l = null;
                m = /* @__PURE__ */ new Map();
                if (1 == d.type) return a.O = false, R = nx(d.ba, "EXT-X-DEFINE"), m = Ox(a, R, a.C), l = c.la, S = "", oa = /* @__PURE__ */ new Map(), G(ra, Yx(a, a.F++, m, d, k2, "", l, S, true, "Media Playlist", null, oa, null, false, null, false), 7);
                Zx(a, e);
                n = nx(d.ba, "EXT-X-MEDIA");
                p = nx(d.ba, "EXT-X-STREAM-INF");
                q = nx(d.ba, "EXT-X-IMAGE-STREAM-INF");
                u = nx(d.ba, "EXT-X-I-FRAME-STREAM-INF");
                w = nx(d.ba, "EXT-X-SESSION-KEY");
                v = nx(d.ba, "EXT-X-SESSION-DATA");
                x = nx(d.ba, "EXT-X-CONTENT-STEERING");
                $x(a, v);
                return G(ra, ay(a, x), 4);
              case 4:
                if (!a.g.ignoreSupplementalCodecs) {
                  z = [];
                  C = t(p);
                  D = C.next();
                  for (F = {}; !D.done; F = { Eh: void 0 }, D = C.next()) if (B = D.value, A = jx(B, "SUPPLEMENTAL-CODECS")) F.Eh = A.split(/\s*,\s*/).map(function(sa) {
                    return sa.split("/")[0];
                  }), H = B.attributes.map(/* @__PURE__ */ function(sa) {
                    return function(Oa) {
                      var ob = Oa.name, bb = Oa.value;
                      "CODECS" == ob && (bb = sa.Eh.join(","), Oa = Oa.value.split(","), 1 < Oa.length && (Oa = ad("audio", Oa)) && (bb += "," + Oa));
                      return new mx(ob, bb);
                    };
                  }(F)), z.push(new gx(B.id, B.name, H, null));
                  p.push.apply(p, y(z));
                  E = [];
                  L = t(u);
                  M = L.next();
                  for (J = {}; !M.done; J = { Fh: void 0 }, M = L.next()) if (K = M.value, N = jx(K, "SUPPLEMENTAL-CODECS")) J.Fh = N.split(/\s*,\s*/).map(function(sa) {
                    return sa.split("/")[0];
                  }), O = K.attributes.map(/* @__PURE__ */ function(sa) {
                    return function(Oa) {
                      var ob = Oa.name;
                      Oa = Oa.value;
                      "CODECS" == ob && (Oa = sa.Fh.join(","));
                      return new mx(ob, Oa);
                    };
                  }(J)), E.push(new gx(
                    K.id,
                    K.name,
                    O,
                    null
                  ));
                  u.push.apply(u, y(E));
                }
                by(a, p);
                cy(a, n);
                P = dy(a, u);
                return G(ra, ey(a, p, w, n, k2, a.A, P), 5);
              case 5:
                return f = ra.h, g = fy(a, n), G(ra, gy(a, q, u), 6);
              case 6:
                h = ra.h;
                ra.u(3);
                break;
              case 7:
                Z = ra.h, a.i.set(a.C, Z), Z.stream && (Fa = bm(Z.stream), Z.stream.segmentIndex.Eb(function(sa) {
                  sa.ca && (sa.ca.Wc = Fa);
                })), l = Z.stream.type, f.push({
                  id: 0,
                  language: Nf(S || "und"),
                  disabledUntilTime: 0,
                  primary: true,
                  audio: "audio" == l ? Z.stream : null,
                  video: "video" == l ? Z.stream : null,
                  bandwidth: Z.stream.bandwidth || 0,
                  allowedByApplication: true,
                  allowedByKeySystem: true,
                  decodingInfos: []
                });
              case 3:
                if (!a.h) throw new U(2, 7, 7001);
                hy(a, d);
                1 == d.type && (Hx(a) && (iy(a, d), Ia = a.o, a.B.da(Ia)), ka = Array.from(a.i.values()), jy(a, ka), Mx(a), Tx(a, d.ba, l, m, k2));
                a.m = { presentationTimeline: a.l, variants: f, textStreams: g, imageStreams: h, offlineSessionIds: [], sequenceMode: a.g.hls.sequenceMode, ignoreManifestTimestampsInSegmentsMode: a.g.hls.ignoreManifestTimestampsInSegmentsMode, type: "HLS", serviceDescription: null, nextUrl: null, periodCount: 1, gapCount: 0, isLowLatency: false, startTime: a.s };
                if (a.Z || !a.g.hls.disableCodecGuessing) {
                  ra.u(8);
                  break;
                }
                ua = [];
                Ba = t(a.m.variants);
                for (na = Ba.next(); !na.done; na = Ba.next()) Ca = na.value, Ca.audio && "" === Ca.audio.codecs && ua.push(Ca.audio.createSegmentIndex()), Ca.video && "" === Ca.video.codecs && ua.push(Ca.video.createSegmentIndex());
                return G(ra, Promise.all(ua), 8);
              case 8:
                a.h.makeTextStreamsForClosedCaptions(a.m), I(ra);
            }
          });
        }
        function ky(a, b) {
          var c, d, e, f, g, h, k2, l, m, n, p, q, u, w, v, x, z, C;
          return Q(function(D) {
            if (1 == D.g) {
              c = rm(a.g.hls.mediaPlaylistFullMimeType);
              if (!b.length) return D.return(c);
              d = ly(a, b);
              e = d.segment;
              f = d.segmentIndex;
              g = e.N();
              h = g[0];
              k2 = new yb(h);
              l = k2.ab.split(".").pop();
              return (m = my.get(l)) ? D.return(rm(m)) : G(D, Promise.all([ny(a, e.ca, 0), ny(a, e, f)]), 2);
            }
            n = D.h;
            p = n[0].mimeType;
            q = n[1].mimeType;
            u = n[0].data;
            w = n[1].data;
            v = "mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" ");
            x = ["audio/mp4", "video/mp4", "video/iso.segment"];
            if (Fk(Qb(w))) {
              var F = w, B = a.g.disableAudio, A = a.g.disableVideo, H = a.g.disableText;
              var E = Qb(F);
              var L = new xk().parse(E), M = L.od();
              E = L.Jf();
              var J = [], K = false, N = false;
              if (!B) switch (M.audio) {
                case "aac":
                case "aac-loas":
                  L.fb().length && (J.push("mp4a.40.2"), K = true);
                  break;
                case "mp3":
                  L.fb().length && (J.push("mp4a.40.34"), K = true);
                  break;
                case "ac3":
                  L.fb().length && (J.push("ac-3"), K = true);
                  break;
                case "ec3":
                  L.fb().length && (J.push("ec-3"), K = true);
                  break;
                case "opus":
                  L.fb().length && (J.push("opus"), K = true);
              }
              if (!A) switch (M.video) {
                case "avc":
                  E.codec ? J.push(E.codec) : J.push("avc1.42E01E");
                  N = true;
                  break;
                case "hvc":
                  E.codec ? J.push(E.codec) : J.push("hvc1.1.6.L93.90");
                  N = true;
                  break;
                case "av1":
                  J.push("av01.0.01M.08"), N = true;
              }
              if (J.length) {
                B = K && !N;
                A = /* @__PURE__ */ new Map();
                if (N && !H) {
                  H = new sd("video/mp2t");
                  H.i(F);
                  F = t(H.j());
                  for (N = F.next(); !N.done; N = F.next()) N = N.value, A.set(N, N);
                  H.g();
                }
                E = { type: B ? "audio" : "video", mimeType: "video/mp2t", codecs: J.join(", "), language: null, height: E.height, width: E.width, channelCount: null, sampleRate: null, closedCaptions: A, Nd: null, colorGamut: null, frameRate: E.frameRate };
              } else E = null;
              if (z = E) return D.return(z);
            } else if (v.includes(l) || x.includes(q) || p && x.includes(p)) {
              if (C = sm(u, w, a.g.disableText)) return D.return(C);
            }
            return q ? D.return(rm(q)) : p ? D.return(rm(p)) : D.return(c);
          });
        }
        function ny(a, b, c) {
          var d, e, f, g, h, k2;
          return Q(function(l) {
            switch (l.g) {
              case 1:
                if (!b) return l.return({ mimeType: null, data: null });
                d = qh;
                e = xm(b.N(), b.tc(), b.sc(), a.g.retryParameters);
                f = b instanceof Bj ? 1 : 0;
                return G(l, oy(a, e, d, { type: f }).promise, 2);
              case 2:
                g = l.h;
                h = g.data;
                if (!b.aesKey) {
                  l.u(3);
                  break;
                }
                return G(l, wm(h, b.aesKey, c), 4);
              case 4:
                h = l.h;
              case 3:
                return b instanceof Bj ? b.Kd(h, true) : b.Kd(h), (k2 = g.headers["content-type"]) && (k2 = k2.split(";")[0].toLowerCase()), l.return({ mimeType: k2, data: h });
            }
          });
        }
        function Mx(a) {
          if (Hx(a)) {
            if (a.Ea == py) {
              for (var b = Infinity, c = Infinity, d = t(a.i.values()), e = d.next(); !e.done; e = d.next()) e = e.value, e.stream.segmentIndex && "text" != e.stream.type && !e.stream.isAudioMuxedInVideo && (b = Math.min(b, e.Ub), c = Math.min(c, e.Ac));
              b = b - c || 0;
              isNaN(a.g.availabilityWindowOverride) || (b = a.g.availabilityWindowOverride);
              a.l.Ce(b);
            }
          } else a.l.bb(qy(a));
          if (!a.l.s) for (b = t(a.i.values()), c = b.next(); !c.done; c = b.next()) c = c.value, !c.stream.segmentIndex || "audio" != c.type && "video" != c.type || (c = zg(c.stream.segmentIndex)) && c.h && a.l.vh(c.h);
          a.l.ie();
        }
        function Zx(a, b) {
          var c = new yb(a.C).g;
          b = t(b);
          for (var d = b.next(); !d.done; d = b.next()) {
            var e = d.value;
            d = jx(e, "NAME");
            var f = jx(e, "VALUE");
            e = jx(e, "QUERYPARAM");
            d && f && (a.A.has(d) || a.A.set(d, f));
            e && (d = c.get(e)[0]) && !a.A.has(d) && a.A.set(e, d);
          }
        }
        function Ox(a, b, c) {
          c = new yb(c).g;
          var d = /* @__PURE__ */ new Map();
          b = t(b);
          for (var e = b.next(); !e.done; e = b.next()) {
            var f = e.value, g = jx(f, "NAME"), h = jx(f, "VALUE");
            e = jx(f, "QUERYPARAM");
            f = jx(f, "IMPORT");
            g && h && (d.has(g) || d.set(g, h));
            e && (g = c.get(e)[0]) && !d.has(g) && d.set(e, g);
            f && (e = a.A.get(f)) && d.set(f, e);
          }
          return d;
        }
        function by(a, b) {
          b = t(b);
          for (var c = b.next(); !c.done; c = b.next()) {
            var d = c.value, e = jx(d, "AUDIO");
            c = jx(d, "VIDEO");
            var f = jx(d, "SUBTITLES");
            d = ry(a, d);
            if (f) {
              var g = ad(cd, d);
              a.H.set(f, g);
              Bd(d, g);
            }
            e && (f = ad("audio", d), f || (f = a.g.hls.defaultAudioCodec), a.H.set(e, f));
            c && (e = ad("video", d), e || (e = a.g.hls.defaultVideoCodec), a.H.set(c, e));
          }
        }
        function $x(a, b) {
          b = t(b);
          for (var c = b.next(); !c.done; c = b.next()) {
            var d = c.value, e = jx(d, "DATA-ID");
            c = jx(d, "URI");
            var f = jx(d, "LANGUAGE");
            d = jx(d, "VALUE");
            e = (/* @__PURE__ */ new Map()).set("id", e);
            c && e.set("uri", rx([a.C], c, a.A)[0]);
            f && e.set("language", f);
            d && e.set("value", d);
            c = new V("sessiondata", e);
            if (a.h) a.h.onEvent(c);
          }
        }
        function ay(a, b) {
          var c, d, e, f, g, h;
          return Q(function(k2) {
            if (!a.h || !a.g) return k2.return();
            d = t(b);
            for (e = d.next(); !e.done; e = d.next()) if (f = e.value, g = jx(f, "PATHWAY-ID"), h = jx(f, "SERVER-URI"), g && h) {
              a.j = new nv(a.h);
              a.j.configure(a.g);
              a.j.i = [a.C];
              a.j.setManifestType("HLS");
              a.j.h = g;
              c = ov(a.j, h);
              break;
            }
            return G(k2, c, 0);
          });
        }
        function fy(a, b) {
          var c = ox(b, "SUBTITLES");
          b = c.map(function(g) {
            if (a.g.disableText) return null;
            try {
              return sy(a, [g], /* @__PURE__ */ new Map()).stream;
            } catch (h) {
              if (a.g.hls.ignoreTextStreamFailures) return null;
              throw h;
            }
          });
          c = t(c);
          for (var d = c.next(); !d.done; d = c.next()) {
            var e = kx(d.value, "GROUP-ID");
            if (d = a.H.get(e)) {
              if (e = a.I.get(e)) {
                e = t(e);
                for (var f = e.next(); !f.done; f = e.next()) f = f.value, f.stream.codecs = d, f.stream.mimeType = ty(cd, d) || uy(cd), vy(f.stream);
              }
            }
          }
          return b.filter(function(g) {
            return g;
          });
        }
        function vy(a) {
          var b = /* @__PURE__ */ new Set([kf(a.mimeType, a.codecs)]);
          a.segmentIndex && a.segmentIndex.Eb(function(c) {
            c.mimeType && b.add(kf(c.mimeType, a.codecs));
          });
          a.fullMimeTypes = b;
        }
        function gy(a, b, c) {
          var d, e;
          return Q(function(f) {
            if (1 == f.g) return d = b.map(function(g) {
              var h, k2, l;
              return Q(function(m) {
                if (1 == m.g) {
                  if (h = a.g.disableThumbnails) return m.return(null);
                  xa(m, 2);
                  return G(m, wy(a, g), 4);
                }
                if (2 != m.g) return k2 = m.h, m.return(k2.stream);
                l = Aa(m);
                if (a.g.hls.ignoreImageStreamFailures) return m.return(null);
                throw l;
              });
            }).concat(c.map(function(g) {
              if (a.g.disableThumbnails) return null;
              try {
                var h = xy(a, g);
                return "image" !== h.stream.type ? null : h.stream;
              } catch (k2) {
                if (a.g.hls.ignoreImageStreamFailures) return null;
                throw k2;
              }
            })), G(f, Promise.all(d), 2);
            e = f.h;
            return f.return(e.filter(function(g) {
              return g;
            }));
          });
        }
        function yy(a, b, c) {
          b = b.filter(function(h) {
            var k2 = jx(h, "URI") || "";
            h = jx(h, "TYPE");
            return "SUBTITLES" != h && ("" != k2 || "AUDIO" == h);
          });
          var d = {};
          b = t(b);
          for (var e = b.next(); !e.done; e = b.next()) {
            e = e.value;
            var f = hx(e, !a.j);
            d[f] ? d[f].push(e) : d[f] = [e];
          }
          for (var g in d) sy(a, d[g], c, false);
        }
        function dy(a, b) {
          return b.map(function(c) {
            c = xy(a, c);
            return "video" !== c.stream.type ? null : c.stream;
          }).filter(function(c) {
            return c;
          });
        }
        function ey(a, b, c, d, e, f, g) {
          var h, k2, l, m, n, p, q, u, w, v, x, z, C, D, F, B, A, H, E, L, M, J, K, N, O, P, R, S, oa, Z, Fa, Ia, ka, ua, Ba;
          return Q(function(na) {
            switch (na.g) {
              case 1:
                h = [];
                k2 = /* @__PURE__ */ new Set();
                if (a.g.ignoreDrmInfo || !(0 < c.length)) {
                  na.u(2);
                  break;
                }
                l = t(c);
                m = l.next();
              case 3:
                if (m.done) {
                  na.u(2);
                  break;
                }
                n = m.value;
                p = kx(n, "METHOD");
                q = jx(n, "KEYFORMAT") || "identity";
                u = null;
                if ("NONE" == p) {
                  na.u(4);
                  break;
                }
                if (zy(p)) {
                  w = rx(e(), kx(n, "URI"), f);
                  v = w.sort().join("");
                  a.L.has(v) || (x = kh(w, a.g.retryParameters), z = oy(a, x, 6).promise, a.L.set(v, z));
                  na.u(4);
                  break;
                }
                if ("identity" != q) {
                  u = (C = Ay.get(q)) ? C(n, "") : null;
                  na.u(6);
                  break;
                }
                return G(na, By(a, n, "", e, null, f), 9);
              case 9:
                u = na.h;
              case 6:
                if (u) {
                  if (u.keyIds) for (D = t(u.keyIds), F = D.next(); !F.done; F = D.next()) B = F.value, k2.add(B);
                  h.push(u);
                }
              case 4:
                m = l.next();
                na.u(3);
                break;
              case 2:
                A = {};
                H = t(b);
                for (E = H.next(); !E.done; E = H.next()) L = E.value, M = hx(L, !a.j), A[M] ? A[M].push(L) : A[M] = [L];
                J = [];
                for (K in A) N = A[K], O = N[0], P = jx(O, "FRAME-RATE"), R = Number(jx(O, "AVERAGE-BANDWIDTH")) || Number(kx(O, "BANDWIDTH")), S = jx(O, "RESOLUTION"), oa = t(S ? S.split("x") : [null, null]), Z = oa.next().value, Fa = oa.next().value, Ia = jx(O, "VIDEO-RANGE"), (ka = jx(O, "REQ-VIDEO-LAYOUT")) && ka.includes(",") && (ua = ka.split(",").filter(function(Ca) {
                  return "CH-STEREO" == Ca || "CH-MONO" == Ca;
                }), ka = ua[0]), ka = ka || "CH-MONO", Ba = Cy(a, N, d), J.push.apply(J, y(Dy(a, Ba.audio, Ba.video, R, Z, Fa, P, Ia, ka, h, k2, g)));
                return na.return(J.filter(function(Ca) {
                  return null != Ca;
                }));
            }
          });
        }
        function Cy(a, b, c) {
          for (var d = { audio: [], video: [] }, e = /* @__PURE__ */ new Map(), f = [], g = false, h = false, k2 = t(b), l = k2.next(); !l.done; l = k2.next()) {
            var m = l.value;
            l = jx(m, "AUDIO");
            var n = jx(m, "VIDEO"), p = l || n;
            p && (f.includes(p) || f.push(p), (m = jx(m, "PATHWAY-ID")) && e.set(p, m), l ? g = true : n && (h = true));
          }
          f.length && c.length && (c = c.filter(function(u) {
            return f.includes(kx(u, "GROUP-ID"));
          }), yy(a, c, e));
          c = (e = f.sort().join(",")) && a.I.has(e) ? a.I.get(e) : [];
          g ? d.audio.push.apply(d.audio, y(c)) : h && d.video.push.apply(d.video, y(c));
          g = false;
          var q = b.map(function(u) {
            return kx(
              u,
              "URI"
            );
          });
          l = d.audio.find(function(u) {
            return u && u.N().find(function(w) {
              return q.includes(w);
            });
          });
          h = ry(a, b[0]);
          c = ad("video", h);
          (k2 = ad("audio", h)) && !c ? (l = "audio", g = 0 < d.audio.length) : !d.audio.length && !d.video.length && k2 && c ? (l = "video", h = [[c, k2].join()]) : d.audio.length && l ? (l = "audio", g = true) : l = d.video.length && !d.audio.length ? "audio" : "video";
          g || (a = Ey(a, b, h, l), e && (a.stream.groupId = e), d[a.stream.type] = [a]);
          return d;
        }
        function ry(a, b) {
          b = jx(b, "CODECS") || "";
          a.Z = 0 < b.length;
          a.Z || a.g.hls.disableCodecGuessing || (b = [], a.g.disableVideo || b.push(a.g.hls.defaultVideoCodec), a.g.disableAudio || b.push(a.g.hls.defaultAudioCodec), b = b.join(","));
          return tm(b.split(/\s*,\s*/));
        }
        function Dy(a, b, c, d, e, f, g, h, k2, l, m, n) {
          for (var p = t(c), q = p.next(); !q.done; q = p.next()) Fy(q.value.stream, e, f, g, h, k2, null);
          e = a.g.disableAudio;
          if (!b.length || e) b = [null];
          e = a.g.disableVideo;
          if (!c.length || e) c = [null];
          e = [];
          b = t(b);
          for (f = b.next(); !f.done; f = b.next()) for (f = f.value, g = t(c), h = g.next(); !h.done; h = g.next()) {
            var u = h.value;
            if (h = f ? f.stream : null) h.drmInfos = l, h.keyIds = m;
            if (k2 = u ? u.stream : null) k2.drmInfos = l, k2.keyIds = m, a.g.disableIFrames || Jg(k2, n);
            k2 && !h && (k2.bandwidth = d);
            !k2 && h && (h.bandwidth = d);
            p = f ? f.stream.drmInfos : null;
            q = u ? u.stream.drmInfos : null;
            u = u ? u.N().sort().join(",") : "";
            var w = f ? f.N().sort().join(",") : "", v = [];
            h && h.codecs && v.push(h.codecs);
            k2 && k2.codecs && v.push(k2.codecs);
            u = [u, w, v.sort()].join("-");
            h && k2 && !Yb(p, q) || a.Na.has(u) || (h = { id: a.F++, language: h ? h.language : "und", disabledUntilTime: 0, primary: !!h && h.primary || !!k2 && k2.primary, audio: h, video: k2, bandwidth: d, allowedByApplication: true, allowedByKeySystem: true, decodingInfos: [] }, e.push(h), a.Na.add(u));
          }
          return e;
        }
        function cy(a, b) {
          b = ox(b, "CLOSED-CAPTIONS");
          a.O = 0 == b.length;
          b = t(b);
          for (var c = b.next(); !c.done; c = b.next()) {
            var d = c.value, e = jx(d, "LANGUAGE");
            c = Nf(e || "und");
            e || (e = jx(d, "NAME")) && (c = e);
            e = kx(d, "GROUP-ID");
            d = kx(d, "INSTREAM-ID").replace("SERVICE", "svc");
            a.G.get(e) || a.G.set(e, /* @__PURE__ */ new Map());
            a.G.get(e).set(d, c);
          }
        }
        function sy(a, b, c, d) {
          d = void 0 === d ? true : d;
          for (var e = [], f = [], g = /* @__PURE__ */ new Map(), h = t(b), k2 = h.next(); !k2.done; k2 = h.next()) {
            var l = k2.value;
            k2 = d ? kx(l, "URI") : jx(l, "URI") || "shaka://hls-muxed";
            l = kx(l, "GROUP-ID");
            e.push(k2);
            f.push(l);
            g.set(l, k2);
          }
          d = f.sort().join(",");
          k2 = b[0];
          b = "";
          h = kx(k2, "TYPE").toLowerCase();
          "subtitles" == h && (h = cd);
          if (h == cd) b = jx(k2, "CODECS") || "";
          else for (f = t(f), l = f.next(); !l.done; l = f.next()) if (l = l.value, a.H.has(l)) {
            b = a.H.get(l);
            break;
          }
          f = e.sort().join(",");
          if (a.i.has(f)) return a.i.get(f);
          l = a.F++;
          if (a.j) {
            g = t(g);
            for (var m = g.next(); !m.done; m = g.next()) {
              var n = t(m.value);
              m = n.next().value;
              n = n.next().value;
              (m = c.get(m)) && rv(a.j, l, m, n);
            }
          }
          c = jx(k2, "LANGUAGE");
          g = jx(k2, "NAME");
          m = "YES" == jx(k2, "DEFAULT");
          "audio" == h ? n = (n = jx(k2, "CHANNELS")) ? parseInt(n.split("/")[0], 10) : null : n = null;
          var p;
          "audio" == h ? (p = jx(k2, "CHANNELS")) ? (p = p.split("/"), p = 2 != p.length ? false : "JOC" === p[1] || p[1].includes("ATMOS")) : p = false : p = false;
          var q = jx(k2, "CHARACTERISTICS"), u = "YES" == jx(k2, "FORCED");
          "audio" == h ? k2 = (k2 = jx(k2, "SAMPLE-RATE")) ? parseInt(k2, 10) : null : k2 = null;
          e = Gy(
            a,
            l,
            e,
            b,
            h,
            c,
            m,
            g,
            n,
            null,
            q,
            u,
            k2,
            p
          );
          e.stream && (e.stream.groupId = d);
          a.I.has(d) ? a.I.get(d).push(e) : a.I.set(d, [e]);
          a.i.set(f, e);
          return e;
        }
        function wy(a, b) {
          var c, d, e, f, g, h, k2, l, m, n;
          return Q(function(p) {
            if (1 == p.g) {
              c = kx(b, "URI");
              d = jx(b, "CODECS", "jpeg") || "";
              if (a.i.has(c)) return p.return(a.i.get(c));
              e = jx(b, "LANGUAGE");
              f = jx(b, "NAME");
              g = jx(b, "CHARACTERISTICS");
              h = Gy(a, a.F++, [c], d, "image", e, false, f, null, null, g, false, null, false);
              return (k2 = jx(b, "RESOLUTION")) ? G(p, h.stream.createSegmentIndex(), 3) : p.u(2);
            }
            2 != p.g && (l = zg(h.stream.segmentIndex), m = l.tilesLayout) && (h.stream.width = Number(k2.split("x")[0]) * Number(m.split("x")[0]), h.stream.height = Number(k2.split("x")[1]) * Number(m.split("x")[1]));
            if (n = jx(b, "BANDWIDTH")) h.stream.bandwidth = Number(n);
            a.i.set(c, h);
            return p.return(h);
          });
        }
        function xy(a, b) {
          var c = "video", d = kx(b, "URI"), e = jx(b, "CODECS") || "";
          "mjpg" == e && (c = "image");
          if (a.i.has(d)) return a.i.get(d);
          var f = jx(b, "LANGUAGE"), g = jx(b, "NAME"), h = jx(b, "CHARACTERISTICS");
          c = Gy(a, a.F++, [d], e, c, f, false, g, null, null, h, false, null, false);
          e = jx(b, "RESOLUTION");
          f = t(e ? e.split("x") : [null, null]);
          e = f.next().value;
          f = f.next().value;
          c.stream.width = Number(e) || void 0;
          c.stream.height = Number(f) || void 0;
          if (b = jx(b, "BANDWIDTH")) c.stream.bandwidth = Number(b);
          a.i.set(d, c);
          return c;
        }
        function Ey(a, b, c, d) {
          for (var e = a.F++, f = [], g = t(b), h = g.next(); !h.done; h = g.next()) {
            var k2 = h.value;
            h = kx(k2, "URI");
            k2 = jx(k2, "PATHWAY-ID");
            a.j && k2 && rv(a.j, e, k2, h);
            f.push(h);
          }
          g = f.sort().join(",") + c.sort().join(",");
          if (a.i.has(g)) return a.i.get(g);
          h = f.join(",");
          a: {
            b = jx(b[0], "CLOSED-CAPTIONS");
            if ("video" == d) {
              if (a.g.disableText) {
                a.O = false;
                b = null;
                break a;
              }
              if (b) {
                if ("NONE" != b) {
                  b = a.G.get(b);
                  break a;
                }
                a.O = false;
              } else if (!b && a.G.size) for (b = t(a.G.keys()).next(); !b.done; ) {
                b = a.G.get(b.value);
                break a;
              }
            }
            b = null;
          }
          c = $c(d, c);
          d = Gy(
            a,
            e,
            f,
            c,
            d,
            null,
            false,
            h,
            null,
            b,
            null,
            false,
            null,
            false
          );
          a.i.set(g, d);
          return d;
        }
        function Gy(a, b, c, d, e, f, g, h, k2, l, m, n, p, q) {
          function u(D) {
            var F, B, A, H, E, L, M, J, K, N, O, P, R, S, oa, Z, Fa, Ia, ka, ua, Ba, na, Ca;
            return Q(function(ra) {
              switch (ra.g) {
                case 1:
                  return F = ed, xa(ra, 2), G(ra, D.promise, 4);
                case 4:
                  B = ra.h;
                  if (D.aborted) return ra.return();
                  A = B.uri;
                  A != B.originalUri && (H = x.N(), H.includes(A) || x.ve.push(A));
                  E = vx(a.Ga, B.data);
                  if (1 != E.type) throw new U(2, 4, 4017);
                  L = nx(E.ba, "EXT-X-DEFINE");
                  M = Ox(a, L, A);
                  J = false;
                  (!a.Z && a.g.hls.disableCodecGuessing || a.O && e == F.la && !a.g.hls.disableClosedCaptionsDetection) && 0 < E.segments.length && (a.O = false, J = true);
                  K = !a.Z && a.g.hls.disableCodecGuessing;
                  N = Hx(a);
                  return G(ra, Yx(a, 0, M, E, w, d, e, f, g, h, k2, l, m, n, p, q, void 0, J, K), 5);
                case 5:
                  O = ra.h;
                  if (D.aborted) return ra.return();
                  P = O.stream;
                  hy(a, E);
                  Hx(a) && !N && iy(a, E);
                  x.Ac = O.Ac;
                  x.Ub = O.Ub;
                  x.Ud = O.Ud;
                  x.Td = O.Td;
                  x.rd = O.rd;
                  x.je = O.je;
                  x.Ab = O.Ab;
                  x.Bb = O.Bb;
                  x.Qf = true;
                  v.segmentIndex = P.segmentIndex;
                  v.encrypted = P.encrypted;
                  v.drmInfos = P.drmInfos;
                  v.keyIds = P.keyIds;
                  v.mimeType = P.mimeType;
                  v.bandwidth = v.bandwidth || P.bandwidth;
                  v.codecs = v.codecs || P.codecs;
                  v.closedCaptions = v.closedCaptions || P.closedCaptions;
                  v.width = v.width || P.width;
                  v.height = v.height || P.height;
                  v.hdr = v.hdr || P.hdr;
                  v.colorGamut = v.colorGamut || P.colorGamut;
                  v.frameRate = v.frameRate || P.frameRate;
                  "und" == v.language && "und" != P.language && (v.language = P.language);
                  v.language = v.language || P.language;
                  v.channelsCount = v.channelsCount || P.channelsCount;
                  v.audioSamplingRate = v.audioSamplingRate || P.audioSamplingRate;
                  vy(v);
                  v.drmInfos.length && a.h.newDrmInfo(v);
                  R = false;
                  if (!l && v.closedCaptions || l && v.closedCaptions && l.size != v.closedCaptions.size) R = true;
                  a.m && R && a.h.makeTextStreamsForClosedCaptions(a.m);
                  if (e == F.la || e == F.V) for (S = t(a.i.values()), oa = S.next(); !oa.done; oa = S.next()) Z = oa.value, Z.Qf || Z.type != e || (Z.stream.mimeType = P.mimeType, vy(Z.stream));
                  e == F.za && (Fa = zg(P.segmentIndex)) && Fa.ca && (v.mimeType = "application/mp4", vy(v));
                  Ia = bm(v);
                  v.segmentIndex.Eb(function(sa) {
                    sa.ca && (sa.ca.Wc = Ia);
                  });
                  Hy(a) && (a.Tb ? jy(a, [x]) : (a.Tb = true, ka = Array.from(a.i.values()), ua = ka.filter(function(sa) {
                    return sa.stream.segmentIndex;
                  }), jy(a, ua), Mx(a), Ba = a.o, 0 < Ba && a.B.da(Ba)));
                  Tx(
                    a,
                    E.ba,
                    v.type,
                    M,
                    w
                  );
                  a.m && (a.m.startTime = a.s);
                  za(ra, 0);
                  break;
                case 2:
                  na = Aa(ra);
                  v.closeSegmentIndex();
                  if (7001 === na.code) return ra.return();
                  Ca = a.h.disableStream(v);
                  if (!Ca) throw na;
                  I(ra);
              }
            });
          }
          function w() {
            return a.j && 1 < c.length ? sv(a.j, b) : x.ve.concat(sx([a.C], c, a.A));
          }
          var v = Iy(a, d, e, f, g, h, k2, l, m, n, p, q);
          c.includes("shaka://hls-muxed") && (v.isAudioMuxedInVideo = true, v.mimeType = "video/mp2t", vy(v));
          var x = { stream: v, type: e, ve: [], Ac: 0, Ub: 0, je: /* @__PURE__ */ new Map(), Ud: false, Td: false, rd: false, pf: -1, Ab: -1, Bb: -1, Qf: false, N: w }, z = null, C;
          v.createSegmentIndex = function() {
            if (z) return z;
            if (v.isAudioMuxedInVideo) return v.segmentIndex = new Pl([]), Promise.resolve();
            C = Fx(a, x.N(), true);
            return z = new Promise(function(D) {
              D(u(C));
            });
          };
          v.closeSegmentIndex = function() {
            z && !v.segmentIndex && C.abort();
            v.segmentIndex && (v.segmentIndex.release(), v.segmentIndex = null);
            z = null;
          };
          return x;
        }
        function qy(a) {
          var b = Infinity;
          a = t(a.i.values());
          for (var c = a.next(); !c.done; c = a.next()) c = c.value, c.stream.segmentIndex && "text" != c.stream.type && !c.stream.isAudioMuxedInVideo && (b = Math.min(b, c.Ub));
          return b;
        }
        function Jx(a, b) {
          var c = [];
          b = t(b);
          for (var d = b.next(); !d.done; d = b.next()) d = d.value, d.segmentIndex && d.segmentIndex.Eb(function(e) {
            c.push(e);
          });
          a.l.Ed(c);
        }
        function jy(a, b) {
          if (!Hx(a)) for (var c = qy(a), d = t(b), e = d.next(); !e.done; e = d.next()) e.value.stream.segmentIndex.Nc(0, c);
          Jx(a, b.map(function(f) {
            return f.stream;
          }));
          d = Array.from(a.i.values()).filter(function(f) {
            return f.stream.segmentIndex;
          });
          c = d.some(function(f) {
            return "audio" == f.stream.type;
          });
          e = d.some(function(f) {
            return "video" == f.stream.type;
          });
          d = Hx(a) && !a.Ma;
          c = !Hx(a) && a.Ma && !(c && e);
          a.g.hls.ignoreManifestProgramDateTime || d || c ? Ux(a, b, d) : (Xx(a, b), 0 < a.g.hls.ignoreManifestProgramDateTimeForTypes.length && Ux(
            a,
            b
          ));
        }
        function Vx(a, b) {
          return a.g.hls.ignoreManifestProgramDateTime ? true : a.g.hls.ignoreManifestProgramDateTimeForTypes.includes(b);
        }
        function Hy(a) {
          if (!a.m) return false;
          var b = [], c = [];
          a = t(a.m.variants);
          for (var d = a.next(); !d.done; d = a.next()) d = d.value, d.video && b.push(d.video), d.audio && c.push(d.audio);
          return 0 < b.length && !b.some(function(e) {
            return e.segmentIndex;
          }) || 0 < c.length && !c.some(function(e) {
            return e.segmentIndex;
          }) ? false : true;
        }
        function Yx(a, b, c, d, e, f, g, h, k2, l, m, n, p, q, u, w, v, x, z) {
          x = void 0 === x ? true : x;
          z = void 0 === z ? true : z;
          var C, D, F, B, A, H, E, L, M, J, K, N, O, P, R, S, oa, Z, Fa, Ia, ka, ua, Ba, na, Ca, ra, sa, Oa, ob;
          return Q(function(bb) {
            switch (bb.g) {
              case 1:
                C = d.segments || [];
                D = C.every(function(cb) {
                  return px(cb.ba, "EXT-X-GAP") ? true : false;
                });
                if (!C.length || D) throw new U(2, 4, 4053);
                Jy(a, d);
                Hx(a) && Sx(a, d);
                F = Hx(a) ? a.M.get(g) : /* @__PURE__ */ new Map();
                B = Qx(a, d, F, c, e, g);
                A = B.segments;
                H = B.bandwidth;
                K = J = M = L = E = null;
                if (!(0 < A.length && x)) {
                  bb.u(2);
                  break;
                }
                return G(bb, ky(a, A), 3);
              case 3:
                N = bb.h, g = N.type, h = N.language, m = N.channelCount, u = N.sampleRate, a.g.disableText || (n = N.closedCaptions), L = N.height, E = N.width, M = N.Nd, J = N.colorGamut, K = N.frameRate, z && (v = N.mimeType, f = N.codecs);
              case 2:
                if (v) {
                  bb.u(4);
                  break;
                }
                return G(bb, Ky(a, g, f, A), 5);
              case 5:
                v = bb.h, g != cd || f || "application/mp4" != v || !A[0] || A[0].ca || (v = "text/vtt");
              case 4:
                return G(bb, Px(a, d, v, e, c), 6);
              case 6:
                O = bb.h;
                P = O.drmInfos;
                R = O.keyIds;
                S = O.encrypted;
                oa = O.zg;
                if (S && !P.length && !oa) throw new U(2, 4, 4026);
                Z = Iy(a, f, g, h, k2, l, m, n, p, q, u, w);
                Z.encrypted = S && !oa;
                Z.drmInfos = P;
                Z.keyIds = R;
                Z.mimeType = v;
                H && (Z.bandwidth = H);
                vy(Z);
                "video" == g && (E || L || M || J) && Fy(Z, E, L, K, M, null, J);
                Hx(a) && Sx(a, d);
                Fa = A[0].startTime;
                Ia = A[A.length - 1];
                ka = Ia.endTime;
                ua = new Pl(A);
                Z.segmentIndex = ua;
                na = (Ba = px(d.ba, "EXT-X-SERVER-CONTROL")) ? null != ix(Ba, "CAN-SKIP-UNTIL") : false;
                Ca = Ba ? null != ix(Ba, "CAN-BLOCK-RELOAD") : false;
                ra = qx(d.ba, "EXT-X-MEDIA-SEQUENCE", 0);
                sa = Rx(ra, A);
                Oa = sa.Ab;
                ob = sa.Bb;
                return bb.return({ stream: Z, type: g, ve: [], N: e, Ac: Fa, Ub: ka, Ud: na, Td: Ca, rd: false, pf: -1, Ab: Oa, Bb: ob, je: F, Qf: false });
            }
          });
        }
        function Rx(a, b) {
          a = a + b.length - 1;
          var c = -1;
          if (!b.length) return a++, { Ab: a, Bb: c };
          b = b[b.length - 1];
          var d = b.g;
          if (!b.g.length) return a++, b.m && (c = 0), { Ab: a, Bb: c };
          c = d.length - 1;
          d[d.length - 1].isPreload() || (a++, c = 0);
          return { Ab: a, Bb: c };
        }
        function Iy(a, b, c, d, e, f, g, h, k2, l, m, n) {
          var p = ty(c, b) || uy(c), q = [];
          if (k2) {
            k2 = t(k2.split(","));
            for (var u = k2.next(); !u.done; u = k2.next()) q.push(u.value);
          }
          k2 = void 0;
          u = null;
          c == cd ? k2 = q.includes("public.accessibility.transcribes-spoken-dialog") && q.includes("public.accessibility.describes-music-and-sound") ? "caption" : "subtitle" : q.includes("public.accessibility.describes-video") && (u = "visually impaired");
          q.length || "subtitle" !== k2 || q.push("subtitle");
          a = {
            id: a.F++,
            originalId: f,
            groupId: null,
            createSegmentIndex: function() {
              return Promise.resolve();
            },
            segmentIndex: null,
            mimeType: p,
            codecs: b,
            kind: c == cd ? "subtitle" : void 0,
            encrypted: false,
            drmInfos: [],
            keyIds: /* @__PURE__ */ new Set(),
            language: Nf(d || "und"),
            originalLanguage: d,
            label: f,
            type: c,
            primary: e,
            trickModeVideo: null,
            dependencyStream: null,
            emsgSchemeIdUris: null,
            frameRate: void 0,
            pixelAspectRatio: void 0,
            width: void 0,
            height: void 0,
            bandwidth: void 0,
            roles: q,
            forced: l,
            channelsCount: g,
            audioSamplingRate: m,
            spatialAudio: n,
            closedCaptions: h,
            hdr: void 0,
            colorGamut: void 0,
            videoLayout: void 0,
            tilesLayout: void 0,
            accessibilityPurpose: u,
            external: false,
            fastSwitching: false,
            fullMimeTypes: /* @__PURE__ */ new Set(),
            isAudioMuxedInVideo: false,
            baseOriginalId: null
          };
          vy(a);
          return a;
        }
        function Px(a, b, c, d, e) {
          var f, g, h, k2, l, m, n, p, q, u, w, v, x, z, C, D, F, B, A, H, E, L, M, J, K, N, O, P;
          return Q(function(R) {
            switch (R.g) {
              case 1:
                f = /* @__PURE__ */ new Map();
                if (!a.g.ignoreDrmInfo && b.segments) {
                  for (g = t(b.segments), h = g.next(); !h.done; h = g.next()) if (k2 = h.value, l = nx(k2.ba, "EXT-X-KEY"), m = null, l.length) for (m = Ly(a, b, k2.ba, d, e), n = t(l), p = n.next(); !p.done; p = n.next()) q = p.value, f.set(q, m);
                }
                w = u = false;
                v = [];
                x = /* @__PURE__ */ new Set();
                z = t(f);
                C = z.next();
              case 2:
                if (C.done) {
                  R.u(4);
                  break;
                }
                D = C.value;
                F = t(D);
                B = F.next().value;
                A = F.next().value;
                H = B;
                E = A;
                L = kx(H, "METHOD");
                if ("NONE" == L) {
                  R.u(3);
                  break;
                }
                u = true;
                M = jx(H, "KEYFORMAT") || "identity";
                J = null;
                if (zy(L)) {
                  w = true;
                  R.u(3);
                  break;
                }
                if ("identity" != M) {
                  J = (K = Ay.get(M)) ? K(H, c) : null;
                  R.u(6);
                  break;
                }
                return G(R, By(a, H, c, d, E, e), 8);
              case 8:
                J = R.h;
              case 6:
                if (J) {
                  if (J.keyIds) for (N = t(J.keyIds), O = N.next(); !O.done; O = N.next()) P = O.value, x.add(P);
                  v.push(J);
                }
              case 3:
                C = z.next();
                R.u(2);
                break;
              case 4:
                return R.return({ drmInfos: v, keyIds: x, encrypted: u, zg: w });
            }
          });
        }
        function My(a, b, c, d, e) {
          if (!window2.crypto || !window2.crypto.subtle) throw db("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"), new U(2, 4, 4042);
          var f = 0, g = jx(b, "IV", "");
          if (g) {
            var h = Tc(g.substr(2));
            if (16 != h.byteLength) throw new U(2, 4, 4048);
          } else f = qx(c.ba, "EXT-X-MEDIA-SEQUENCE", 0);
          var k2 = rx(d(), kx(b, "URI"), e), l = k2.sort().join("");
          c = b.toString() + "-" + f + "-" + l;
          if (!a.ka.has(c)) {
            var m = { bitsKey: 128, blockCipherMode: "CBC", iv: h, firstMediaSequenceNumber: f };
            switch (kx(
              b,
              "METHOD"
            )) {
              case "AES-256":
                m.bitsKey = 256;
                break;
              case "AES-256-CTR":
                m.bitsKey = 256, m.blockCipherMode = "CTR";
            }
            m.fetchKey = function() {
              var n, p, q, u;
              return Q(function(w) {
                if (1 == w.g) return a.L.has(l) || (n = kh(k2, a.g.retryParameters), p = oy(a, n, 6).promise, a.L.set(l, p)), G(w, a.L.get(l), 2);
                if (3 != w.g) {
                  q = w.h;
                  if (!q.data || q.data.byteLength != m.bitsKey / 8) throw new U(2, 4, 4049);
                  u = { name: "CTR" == m.blockCipherMode ? "AES-CTR" : "AES-CBC", length: m.bitsKey };
                  return G(w, window2.crypto.subtle.importKey("raw", q.data, u, true, ["decrypt"]), 3);
                }
                m.cryptoKey = w.h;
                m.fetchKey = void 0;
                I(w);
              });
            };
            a.ka.set(c, m);
          }
          return a.ka.get(c);
        }
        function hy(a, b) {
          null == a.s && (b = px(b.ba, "EXT-X-START")) && (a.s = Number(kx(b, "TIME-OFFSET")));
        }
        function Jy(a, b) {
          var c = px(b.ba, "EXT-X-PLAYLIST-TYPE");
          b = px(b.ba, "EXT-X-ENDLIST");
          b = c && "VOD" == c.value || b;
          c = c && "EVENT" == c.value && !b;
          c = !b && !c;
          b ? Lx(a, Ex) : c ? Lx(a, py) : Lx(a, Ny);
        }
        function Sx(a, b) {
          var c = Infinity, d = b.segments;
          if (d.length) for (var e = d.length - 1; 0 <= e; ) {
            var f = px(d[e].ba, "EXTINF");
            if (f) {
              c = Number(f.value.split(",")[0]);
              break;
            }
            e--;
          }
          d = px(b.ba, "EXT-X-TARGETDURATION");
          if (!d) throw new U(2, 4, 4024, "EXT-X-TARGETDURATION");
          d = Number(d.value);
          if (e = px(b.ba, "EXT-X-PART-INF")) a.P = Number(kx(e, "PART-TARGET"));
          b = px(b.ba, "EXT-X-SERVER-CONTROL");
          a.fa && a.P ? (a.o = a.Sb ? 5 * a.P <= c ? Math.min(a.P, a.o) : Math.min(c, a.o) : Math.min(a.P, a.o), a.Fa = b ? Number(kx(b, "PART-HOLD-BACK")) : 0) : (a.o = Math.min(c, a.o), c = b ? ix(b, "HOLD-BACK") : null, a.Aa = c ? Number(c.value) : 0);
          a.La = Math.max(d, a.La);
        }
        function iy(a, b) {
          var c = 0;
          if (a.g.defaultPresentationDelay) c = a.g.defaultPresentationDelay;
          else if (a.Fa) c = a.Fa;
          else if (a.Aa) c = a.Aa;
          else {
            var d = b.segments.length, e = a.g.hls.liveSegmentsDelay;
            e > d - 2 && (e = Math.max(1, d - 2));
            for (e = d - e; e < d; e++) {
              var f = px(b.segments[e].ba, "EXTINF");
              c = f ? c + Math.ceil(Number(f.value.split(",")[0])) : c + a.La;
            }
          }
          a.s && 0 > a.s && (c = Math.min(-a.s, c), a.s += c);
          a.l.wh(0);
          a.l.hg(c);
          a.l.Fc(false);
        }
        function Ly(a, b, c, d, e) {
          var f = px(c, "EXT-X-MAP");
          if (!f) return null;
          var g = kx(f, "URI"), h = rx(d(), g, e);
          g = [h.toString(), jx(f, "BYTERANGE", "")].join("-");
          if (!a.sa.has(g)) {
            var k2 = void 0, l = null, m = false;
            c = t(c);
            for (var n = c.next(); !n.done; n = c.next()) n = n.value, "EXT-X-KEY" == n.name ? (m = kx(n, "METHOD"), zy(m) && n.id < f.id ? (m = false, k2 = My(a, n, b, d, e)) : m = "NONE" != m) : "EXT-X-BYTERANGE" == n.name && n.id < f.id && (l = n);
            b = Oy(h, f, l, k2, m);
            a.sa.set(g, b);
          }
          return a.sa.get(g);
        }
        function Oy(a, b, c, d, e) {
          var f = 0, g = null;
          b = jx(b, "BYTERANGE");
          !b && c && (b = c.value);
          b && (f = b.split("@"), g = Number(f[0]), f = Number(f[1]), g = f + g - 1, d && (c = g + 1 - f, c % 16 && (g += 16 - c % 16)));
          return new zj(function() {
            return a;
          }, f, g, null, null, null, d, e);
        }
        function Py(a, b, c, d, e, f, g, h, k2) {
          function l(S) {
            S = new yb(S).ab.split(".").pop();
            var oa = Qy.get(g).get(S);
            oa || (oa = my.get(S));
            return oa;
          }
          var m = d.ba, n = px(m, "EXTINF"), p = 0, q = 0, u = null;
          d.Ib.length && (a.m.isLowLatency = true);
          var w = null;
          if (!a.g.hls.ignoreManifestProgramDateTime) {
            var v = px(m, "EXT-X-PROGRAM-DATE-TIME");
            v && v.value && (w = je(v.value), a.Ma = true);
          }
          var x = Cj;
          px(m, "EXT-X-GAP") && (a.m.gapCount++, x = 2);
          if (!n) {
            if (0 == d.Ib.length) throw new U(2, 4, 4024, "EXTINF");
            if (!a.fa) return null;
          }
          var z = [];
          v = false;
          var C = null, D = false, F = false;
          if (a.fa && d.Ib.length) {
            p = b && window2.ReadableStream && a.g.hls.allowLowLatencyByteRangeOptimization;
            for (var B = w, A = {}, H = 0; H < d.Ib.length; A = { Le: void 0, re: void 0 }, H++) {
              var E = d.Ib[H], L = 0 == H ? c : z[z.length - 1], M = 0 == H ? e : L.endTime, J = Number(jx(E, "DURATION")) || a.P;
              if (J) {
                var K = M + J, N = 0, O = null;
                "EXT-X-PRELOAD-HINT" == E.name ? (N = (N = jx(E, "BYTERANGE-START")) ? Number(N) : 0, (L = jx(E, "BYTERANGE-LENGTH")) ? O = N + Number(L) - 1 : N && (O = Number.MAX_SAFE_INTEGER)) : (N = jx(E, "BYTERANGE"), O = t(Ry(L, N)), N = O.next().value, O = O.next().value);
                A.re = jx(E, "URI");
                if (A.re) {
                  L = Cj;
                  "YES" == jx(E, "GAP") && (a.m.gapCount++, L = 2, D = true);
                  A.Le = null;
                  var P = /* @__PURE__ */ function(S) {
                    return function() {
                      null == S.Le && (S.Le = rx(h(), S.re, f));
                      return S.Le;
                    };
                  }(A);
                  p && 0 <= N && null != O && (C = P, v = true);
                  M = new Bj(M, K, P, N, O, b, 0, 0, Infinity, [], "", null, B, L, k2);
                  "EXT-X-PRELOAD-HINT" == E.name && (M.Rf(), F = true);
                  "YES" != jx(E, "INDEPENDENT") && 0 < H && M.Vc();
                  if (A = l(A.re)) M.mimeType = A, Sy.has(A) && (M.ca = null);
                  z.push(M);
                  B && (B += J);
                }
              }
            }
          }
          if (n) {
            n = Number(n.value.split(",")[0]);
            if (0 == n) return null;
            p = e + n;
          } else if (z.length) p = z[z.length - 1].endTime;
          else return null;
          v && (D || 0 != z[0].Sa ? (v = false, C = null) : z = []);
          (n = px(m, "EXT-X-BYTERANGE")) ? (u = t(Ry(c, n.value)), q = u.next().value, u = u.next().value) : z.length && (q = z[0].Sa, u = z[z.length - 1].wa);
          c = "";
          n = null;
          "image" == g && (c = "1x1", m = px(m, "EXT-X-TILES")) && (c = kx(m, "LAYOUT"), (m = jx(m, "DURATION")) && (n = Number(m)));
          var R = null;
          b = new Bj(e, p, function() {
            if (C) return C();
            null == R && (R = rx(h(), d.g, f));
            return R || [];
          }, q, u, b, 0, 0, Infinity, z, c, n, w, x, k2, 0 < z.length && !!d.g);
          if (e = l(d.g)) b.mimeType = e, Sy.has(e) && (b.ca = null);
          v && (a.Sb = true, b.ah(), F && b.Rf());
          return b;
        }
        function Ry(a, b) {
          var c = 0, d = null;
          b && (c = b.split("@"), b = Number(c[0]), c = c[1] ? Number(c[1]) : a.wa + 1, d = c + b - 1);
          return [c, d];
        }
        function Tx(a, b, c, d, e) {
          if ("video" == c || "audio" == c) {
            var f = a.l.m;
            if (f && !Vx(a, c)) for (b = nx(b, "EXT-X-DATERANGE"), b = b.filter(function(M) {
              return null != ix(M, "START-DATE");
            }).sort(function(M, J) {
              M = kx(M, "START-DATE");
              J = kx(J, "START-DATE");
              return M < J ? -1 : M > J ? 1 : 0;
            }), c = 0; c < b.length; c++) {
              var g = b[c];
              try {
                var h = kx(g, "ID");
                if (!a.ya.has(h)) {
                  var k2 = kx(g, "START-DATE"), l = je(k2);
                  if (!isNaN(l)) {
                    var m = Math.max(0, l - f), n = null, p = jx(g, "END-DATE");
                    if (p) {
                      var q = je(p);
                      if (!isNaN(q) && (n = q - f, 0 > n)) continue;
                    }
                    if (null == n) {
                      var u = jx(g, "DURATION") || jx(g, "PLANNED-DURATION");
                      if (u) {
                        var w = parseFloat(u);
                        isNaN(w) || (n = m + w);
                        if (0 > l - f + w) continue;
                      }
                    }
                    var v = jx(g, "CLASS") || "com.apple.quicktime.HLS", x = "YES" == jx(g, "END-ON-NEXT");
                    if (null == n && x) {
                      for (var z = c + 1; z < b.length; z++) {
                        var C = jx(b[z], "CLASS") || "com.apple.quicktime.HLS";
                        if (v == C) {
                          var D = kx(b[z], "START-DATE"), F = je(D);
                          if (!isNaN(F) && F && F > l) {
                            n = Math.max(0, F - f);
                            break;
                          }
                        }
                      }
                      if (null == n) continue;
                    }
                    z = ["CLASS", "START-DATE", "END-DATE", "DURATION", "END-ON-NEXT"];
                    for (var B = [], A = t(g.attributes), H = A.next(); !H.done; H = A.next()) {
                      var E = H.value;
                      if (!z.includes(E.name)) {
                        var L = tx(E.value, d);
                        if ("X-ASSET-URI" == E.name || "X-ASSET-LIST" == E.name) L = rx(e(), E.value, d)[0];
                        B.push({ key: E.name, description: "", data: L, mimeType: null, pictureType: null });
                      }
                    }
                    if (1 < B.length) a.h.onMetadata(v, m, n, B);
                    a.ya.add(h);
                  }
                }
              } catch (M) {
              }
            }
          }
        }
        function Qx(a, b, c, d, e, f) {
          var g = b.segments, h = void 0, k2 = qx(b.ba, "EXT-X-DISCONTINUITY-SEQUENCE", -1), l = qx(b.ba, "EXT-X-MEDIA-SEQUENCE", 0), m = px(b.ba, "EXT-X-SKIP"), n = m ? Number(jx(m, "SKIPPED-SEGMENTS")) : 0, p = l + n, q = 0;
          Hx(a) && c.has(p) && (q = c.get(p));
          0 === q && a.Ea == py && 0 < c.size && !c.has(p) && null != a.l.i && (q = a.l.pb());
          var u = [], w = null;
          m = [];
          for (var v = 0; v < g.length; v++) {
            var x = g[v], z = 0 == v ? q : w.endTime;
            p = l + n + v;
            px(x.ba, "EXT-X-DISCONTINUITY") && (k2++, w && w.ca && (w.ca.g = z));
            var C = t(x.ba);
            for (var D = C.next(); !D.done; D = C.next()) D = D.value, "EXT-X-KEY" == D.name && (zy(kx(D, "METHOD")) ? h = My(a, D, b, e, d) : h = void 0);
            c.set(p, z);
            C = Ly(a, b, x.ba, e, d);
            if (z = Py(a, C, w, x, z, d, f, e, h)) (w = qx(x.ba, "EXT-X-BITRATE")) ? m.push({ bitrate: w, duration: z.endTime - z.startTime }) : m.length && (w = m.pop(), w.duration += z.endTime - z.startTime, m.push(w)), w = z, z.i = k2, Vx(a, f) && null != a.K && p < a.K || u.push(z);
          }
          b = void 0;
          m.length && (b = m.reduce(function(F, B) {
            return F + B.duration;
          }, 0), b = Math.round(m.reduce(function(F, B) {
            return F + B.bitrate * B.duration;
          }, 0) / b * 1e3));
          if (m = u.some(function(F) {
            return null != F.h;
          })) {
            for (c = {}, d = 0; d < u.length; c = { Xd: void 0, Wd: void 0, Qd: void 0, Cc: void 0, Pd: void 0 }, d++) if (c.Cc = u[d], null == c.Cc.h) for (c.Wd = 0, c.Xd = d, e = /* @__PURE__ */ function(F) {
              return function() {
                var B = u[F.Xd];
                if (B) {
                  if (null != B.h) return B.h + F.Wd;
                  F.Wd -= B.endTime - B.startTime;
                  F.Xd += 1;
                }
                return null;
              };
            }(c), c.Pd = 0, c.Qd = d, g = /* @__PURE__ */ function(F) {
              return function() {
                var B = u[F.Qd];
                if (B) {
                  B != F.Cc && (F.Pd += B.endTime - B.startTime);
                  if (null != B.h) return B.h + F.Pd;
                  --F.Qd;
                }
                return null;
              };
            }(c); null == c.Cc.h; ) c.Cc.h = g(), null == c.Cc.h && (c.Cc.h = e());
          }
          if (m) for (c = t(u), d = c.next(); !d.done; d = c.next()) for (e = d.value, d = e.h, e = t(e.g), g = e.next(); !g.done; g = e.next()) g = g.value, g.h = d, d += g.endTime - g.startTime;
          c = a.ea;
          if (m && Infinity != c && !Vx(a, f)) for (a = t(u), f = a.next(); !f.done; f = a.next()) f.value.og(c);
          return { segments: u, bandwidth: b };
        }
        function ty(a, b) {
          if (a == cd) {
            if ("vtt" == b || "wvtt" == b) return "text/vtt";
            if (b && "" !== b) return "application/mp4";
          }
          return "image" != a || b && "jpeg" != b ? "audio" == a && "mp4a.40.34" == b ? "audio/mpeg" : "mjpg" == b ? "application/mp4" : null : "image/jpeg";
        }
        function uy(a) {
          return a == cd ? "text/vtt" : Qy.get(a).get("mp4");
        }
        function ly(a, b) {
          a = Hx(a) ? Math.trunc((b.length - 1) / 2) : 0;
          for (var c = b[a]; 2 == c.cc() && a + 1 < b.length; ) a++, c = b[a];
          return { segment: c, segmentIndex: a };
        }
        function Ky(a, b, c, d) {
          var e, f, g, h, k2, l, m, n, p, q, u, w, v;
          return Q(function(x) {
            switch (x.g) {
              case 1:
                e = qh;
                f = ly(a, d);
                g = f.segment;
                if (2 == g.status) return x.return(uy(b));
                h = g.N();
                k2 = new yb(h[0]);
                l = k2.ab.split(".").pop();
                m = Qy.get(b);
                if ((n = m.get(l)) || (n = my.get(l)) || (n = ty(b, c))) return x.return(n);
                q = 1;
                u = kh(h, a.g.retryParameters);
                xa(x, 2);
                u.method = "HEAD";
                return G(x, oy(a, u, e, { type: q }).promise, 4);
              case 4:
                w = x.h;
                p = w.headers["content-type"];
                za(x, 3);
                break;
              case 2:
                v = Aa(x);
                if (!v || 1002 != v.code && 1001 != v.code) {
                  x.u(3);
                  break;
                }
                u.method = "GET";
                a.g.hls.allowRangeRequestsToGuessMimeType && (u.headers.Range = "bytes=0-0");
                return G(x, oy(a, u, e, { type: q }).promise, 6);
              case 6:
                w = x.h, p = w.headers["content-type"];
              case 3:
                if (!p) {
                  x.u(7);
                  break;
                }
                n = p.toLowerCase().split(";")[0];
                if ("application/octet-stream" != n) {
                  x.u(8);
                  break;
                }
                if (w.data.byteLength) {
                  x.u(9);
                  break;
                }
                u.method = "GET";
                return G(x, oy(a, u, e, { type: q }).promise, 10);
              case 10:
                w = x.h;
              case 9:
                Fk(Qb(w.data)) && (n = "video/mp2t");
              case 8:
                if ("application/octet-stream" != n) return x.return(n);
              case 7:
                return x.return(uy(b));
            }
          });
        }
        function Fy(a, b, c, d, e, f, g) {
          a && (a.width = Number(b) || void 0, a.height = Number(c) || void 0, a.frameRate = Number(d) || void 0, a.hdr = e || void 0, a.videoLayout = f || void 0, a.colorGamut = g || void 0);
        }
        function Fx(a, b, c) {
          return oy(a, kh(b, a.g.retryParameters), 0, { type: c ? 2 : 3 });
        }
        function Dx(a) {
          var b, c, d, e, f, g;
          return Q(function(h) {
            switch (h.g) {
              case 1:
                if (!a.h) return h.return();
                xa(h, 2);
                b = Date.now();
                return G(h, a.update(), 4);
              case 4:
                c = Date.now();
                Hx(a) && (d = (c - b) / 1e3, a.Ob.sample(1, d), e = 0 < a.g.updatePeriod ? a.g.updatePeriod : a.o, f = Math.max(0, e - Ya(a.Ob)), a.B.da(f));
                za(h, 3);
                break;
              case 2:
                g = Aa(h);
                if (!a.h) return h.return();
                if (a.g.raiseFatalErrorOnManifestUpdateRequestFailure) return a.h.onError(g), h.return();
                g.severity = 1;
                a.h.onError(g);
                a.B.da(0.1);
              case 3:
                if (!a.h) return h.return();
                a.h.onManifestUpdated();
                I(h);
            }
          });
        }
        function Hx(a) {
          return a.Ea != Ex;
        }
        function Lx(a, b) {
          a.Ea = b;
          a.l && a.l.Fc(!Hx(a));
          Hx(a) || a.B.stop();
        }
        function oy(a, b, c, d) {
          if (!a.Y) throw new U(2, 7, 7001);
          d || (d = {});
          d.isPreload = a.Pb();
          b = a.h.networkingEngine.request(c, b, d);
          eh(a.Y, b);
          return b;
        }
        function zy(a) {
          return "AES-128" == a || "AES-256" == a || "AES-256-CTR" == a;
        }
        function By(a, b, c, d, e, f) {
          var g, h, k2, l, m, n, p, q, u, w, v, x, z, C, D;
          return Q(function(F) {
            switch (F.g) {
              case 1:
                if ("video/mp2t" == c) throw new U(2, 4, 4040);
                if ("apple" === window2.shakaMediaKeysPolyfill) throw new U(2, 4, 4041);
                g = kx(b, "METHOD");
                h = ["SAMPLE-AES", "SAMPLE-AES-CTR"];
                if (!h.includes(g)) return F.return(null);
                k2 = rx(d(), kx(b, "URI"), f);
                if (k2[0].startsWith("data:text/plain;base64,")) {
                  l = Uc(Sc(k2[0].split("data:text/plain;base64,").pop()));
                  F.u(2);
                  break;
                }
                m = k2.sort().join("");
                a.oa.has(m) || (n = kh(k2, a.g.retryParameters), p = oy(
                  a,
                  n,
                  6
                ).promise, a.oa.set(m, p));
                return G(F, a.oa.get(m), 3);
              case 3:
                q = F.h, l = Uc(q.data);
              case 2:
                u = "00000000000000000000000000000000";
                if (!e) {
                  F.u(4);
                  break;
                }
                if (a.pa.has(e)) {
                  w = a.pa.get(e);
                  F.u(5);
                  break;
                }
                v = xm(e.N(), e.tc(), e.sc(), a.g.retryParameters);
                x = qh;
                return G(F, oy(a, v, x, { type: 0 }).promise, 6);
              case 6:
                z = F.h, e.Kd(z.data), w = vm(z.data), a.pa.set(e, w);
              case 5:
                w && (u = w);
              case 4:
                return C = /* @__PURE__ */ new Map(), C.set(u, l), D = "cenc", "SAMPLE-AES" == g && (D = "cbcs"), F.return(Yc(C, D));
            }
          });
        }
        T("shaka.hls.HlsParser", Cx);
        var my = (/* @__PURE__ */ new Map()).set("aac", "audio/aac").set("ac3", "audio/ac3").set("ec3", "audio/ec3").set("mp3", "audio/mpeg"), Ty = (/* @__PURE__ */ new Map()).set("mp4", "audio/mp4").set("mp4a", "audio/mp4").set("m4s", "audio/mp4").set("m4i", "audio/mp4").set("m4a", "audio/mp4").set("m4f", "audio/mp4").set("cmfa", "audio/mp4").set("ts", "video/mp2t").set("tsa", "video/mp2t"), Uy = (/* @__PURE__ */ new Map()).set("mp4", "video/mp4").set("mp4v", "video/mp4").set("m4s", "video/mp4").set("m4i", "video/mp4").set("m4v", "video/mp4").set("m4f", "video/mp4").set("cmfv", "video/mp4").set(
          "ts",
          "video/mp2t"
        ).set("tsv", "video/mp2t"), Vy = (/* @__PURE__ */ new Map()).set("mp4", "application/mp4").set("m4s", "application/mp4").set("m4i", "application/mp4").set("m4f", "application/mp4").set("cmft", "application/mp4").set("vtt", "text/vtt").set("webvtt", "text/vtt").set("ttml", "application/ttml+xml"), Wy = (/* @__PURE__ */ new Map()).set("jpg", "image/jpeg").set("png", "image/png").set("svg", "image/svg+xml").set("webp", "image/webp").set("avif", "image/avif"), Qy = (/* @__PURE__ */ new Map()).set("audio", Ty).set("video", Uy).set("text", Vy).set("image", Wy), Sy = new Set(["video/mp2t"].concat(y(lf))), Ay = (/* @__PURE__ */ new Map()).set("com.apple.streamingkeydelivery", function(a, b) {
          if ("video/mp2t" == b) throw new U(2, 4, 4040);
          if ("apple" === window2.shakaMediaKeysPolyfill) throw new U(2, 4, 4041);
          b = kx(a, "METHOD");
          if (!["SAMPLE-AES", "SAMPLE-AES-CTR"].includes(b)) return null;
          var c = "cenc";
          "SAMPLE-AES" == b && (c = "cbcs");
          return Xc("com.apple.fps", c, [{ initDataType: "sinf", initData: new Uint8Array(0), keyId: null }], kx(a, "URI"));
        }).set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed", function(a) {
          var b = kx(a, "METHOD");
          if (!["SAMPLE-AES", "SAMPLE-AES-CTR"].includes(b)) return null;
          var c = "cenc";
          "SAMPLE-AES" == b && (c = "cbcs");
          b = kx(a, "URI");
          b = Bx(b.split("?")[0]);
          b = Qb(b.data);
          c = Xc("com.widevine.alpha", c, [{ initDataType: "cenc", initData: b }]);
          if (a = jx(a, "KEYID")) c.keyIds = /* @__PURE__ */ new Set([a.toLowerCase().substr(2)]);
          return c;
        }).set("com.microsoft.playready", function(a) {
          var b = kx(a, "METHOD");
          if (!["SAMPLE-AES", "SAMPLE-AES-CTR"].includes(b)) return null;
          var c = "cenc";
          "SAMPLE-AES" == b && (c = "cbcs");
          a = kx(a, "URI");
          a = Bx(a.split("?")[0]);
          a = Qb(a.data);
          b = new Uint8Array([
            154,
            4,
            240,
            121,
            152,
            64,
            66,
            134,
            171,
            146,
            230,
            91,
            224,
            136,
            95,
            149
          ]);
          b = Qh(a, b, /* @__PURE__ */ new Set(), 0);
          c = Xc("com.microsoft.playready", c, [{ initDataType: "cenc", initData: b }]);
          if (a = Qd(["<PLAYREADY>", Rc(a), "</PLAYREADY>"].join("\n"))) c.licenseServerUri = qu(a);
          return c;
        }).set("urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c", function(a) {
          var b = kx(a, "METHOD");
          if (!["SAMPLE-AES", "SAMPLE-AES-CTR"].includes(b)) return null;
          var c = "cenc";
          "SAMPLE-AES" == b && (c = "cbcs");
          b = kx(a, "URI");
          b = Bx(b.split("?")[0]);
          b = Qb(b.data);
          c = Xc("com.huawei.wiseplay", c, [{ initDataType: "cenc", initData: b }]);
          if (a = jx(a, "KEYID")) c.keyIds = /* @__PURE__ */ new Set([a.toLowerCase().substr(2)]);
          return c;
        }), Ex = "VOD", Ny = "EVENT", py = "LIVE", Kx = { Nh: Ex, Xj: Ny, ek: py };
        Ri("application/x-mpegurl", function() {
          return new Cx();
        });
        Ri("application/vnd.apple.mpegurl", function() {
          return new Cx();
        });
        function Xy(a) {
          return qu(a);
        }
        var Yy = (/* @__PURE__ */ new Map()).set("com.microsoft.playready", Xy).set("com.microsoft.playready.recommendation", Xy).set("com.microsoft.playready.software", Xy).set("com.microsoft.playready.hardware", Xy);
        function Zy() {
          var a = this;
          this.h = this.g = null;
          this.l = [];
          this.j = null;
          this.s = 1;
          this.i = null;
          this.C = new Xa(5);
          this.o = new ec(function() {
            $y(a);
          });
          this.B = new dh();
          this.m = /* @__PURE__ */ new Map();
          this.A = function() {
            return false;
          };
        }
        r = Zy.prototype;
        r.configure = function(a, b) {
          this.g = a;
          b && (this.A = b);
        };
        r.start = function(a, b) {
          var c = this;
          return Q(function(d) {
            if (1 == d.g) return c.l = [a], c.h = b, G(d, az(c), 2);
            if (!c.h) throw new U(2, 7, 7001);
            return d.return(c.j);
          });
        };
        function $y(a) {
          var b;
          Q(function(c) {
            switch (c.g) {
              case 1:
                return xa(c, 2), G(c, az(a), 4);
              case 4:
                za(c, 3);
                break;
              case 2:
                b = Aa(c), a.h && (b.severity = 1, a.h.onError(b));
              case 3:
                if (!a.h) return c.return();
                I(c);
            }
          });
        }
        r.stop = function() {
          this.g = this.h = null;
          this.l = [];
          this.j = null;
          null != this.o && (this.o.stop(), this.o = null);
          this.m.clear();
          return this.B.destroy();
        };
        r.update = function() {
          var a = this, b;
          return Q(function(c) {
            if (1 == c.g) return xa(c, 2), G(c, az(a), 4);
            if (2 != c.g) return za(c, 0);
            b = Aa(c);
            if (!a.h || !b) return c.return();
            a.h.onError(b);
            I(c);
          });
        };
        r.onExpirationUpdated = function() {
        };
        r.onInitialVariantChosen = function() {
        };
        r.banLocation = function() {
        };
        r.setMediaElement = function() {
        };
        function az(a) {
          var b, c, d, e, f, g, h;
          return Q(function(k2) {
            if (1 == k2.g) return b = kh(a.l, a.g.retryParameters), c = a.h.networkingEngine, d = Date.now(), e = c.request(0, b, { type: 5, isPreload: a.A() }), eh(a.B, e), G(k2, e.promise, 2);
            f = k2.h;
            if (!a.h) return k2.return();
            f.uri && !a.l.includes(f.uri) && a.l.unshift(f.uri);
            var l = f.uri, m = f.data, n = a.g.mss.manifestPreprocessor;
            if (n != Hn) {
              sb("manifest.mss.manifestPreprocessor configuration", "Please Use manifest.mss.manifestPreprocessorTXml instead.");
              m = uw(m, "SmoothStreamingMedia");
              if (!m) throw new U(
                2,
                4,
                4046,
                l
              );
              n(m);
              m = Kc(m.outerHTML);
            }
            var p = Pd(m, "SmoothStreamingMedia");
            if (!p) throw new U(2, 4, 4046, l);
            l = a.g.mss.manifestPreprocessorTXml;
            l != In && l(p);
            a.i || (a.i = new ul(null, 0));
            if (l = ge(p, "IsLive", qe, false)) throw new U(2, 4, 4047);
            a.i.Fc(!l);
            n = ge(p, "TimeScale", oe, 1e7);
            m = ge(p, "DVRWindowLength", oe);
            l && (0 === m || isNaN(m)) && (m = Infinity);
            var q = ge(p, "CanSeek", qe, false);
            0 === m && q && (m = Infinity);
            q = null;
            m && 0 < m && (q = m / n);
            l && !isNaN(a.g.availabilityWindowOverride) && (q = a.g.availabilityWindowOverride);
            null == q && (q = Infinity);
            a.i.Ce(q);
            m = ge(p, "Duration", oe, Infinity);
            l || a.i.bb(m / n);
            l = { variants: [], textStreams: [], timescale: n, duration: m / n };
            var u;
            q = Xd(p, "Protection");
            n = a.g.mss.keySystemsBySystemId;
            m = [];
            q = t(q);
            for (u = q.next(); !u.done; u = q.next()) m = m.concat(Xd(u.value, "ProtectionHeader"));
            if (m.length) {
              q = [];
              for (u = 0; u < m.length; u++) {
                var w = m[u], v = w.attributes.SystemID.toLowerCase(), x = n[v];
                if (x) {
                  var z;
                  a: {
                    if (z = ou(w)) {
                      z = t($d(z, "DATA"));
                      for (var C = z.next(); !C.done; C = z.next()) if (C = ae(C.value, "KID")) {
                        z = Sc(Yd(C));
                        z = new Uint8Array([
                          z[3],
                          z[2],
                          z[1],
                          z[0],
                          z[5],
                          z[4],
                          z[7],
                          z[6]
                        ].concat(y(z.slice(8))));
                        z = Uc(z);
                        break a;
                      }
                    }
                    z = null;
                  }
                  C = Sc(Yd(w));
                  v = Tc(v.replace(/-/g, ""));
                  v = [{ initData: Qh(C, v, /* @__PURE__ */ new Set(), 0), initDataType: "cenc", keyId: z }];
                  v = Xc(x, "cenc", v);
                  z && v.keyIds.add(z);
                  if (x = Yy.get(x)) v.licenseServerUri = x(w);
                  q.push(v);
                }
              }
              n = q;
            } else n = [];
            u = n;
            q = [];
            n = [];
            m = [];
            p = Xd(p, "StreamIndex");
            p = t(p);
            for (w = p.next(); !w.done; w = p.next()) {
              w = w.value;
              x = Xd(w, "QualityLevel");
              v = l.timescale;
              z = l.duration;
              C = Xd(w, "c");
              for (var D = [], F = 0, B = 0; B < C.length; ++B) {
                var A = C[B], H = C[B + 1], E = ge(A, "t", oe), L = ge(
                  A,
                  "d",
                  oe
                );
                A = ge(A, "r", me);
                if (!L) break;
                E = null != E ? E : F;
                (A = A || 0) && A--;
                if (0 > A) if (H) {
                  H = ge(H, "t", oe);
                  if (null == H) break;
                  else if (E >= H) break;
                  A = Math.ceil((H - E) / L) - 1;
                } else {
                  if (Infinity == z) break;
                  else if (E / v >= z) break;
                  A = Math.ceil((z * v - E) / L) - 1;
                }
                for (H = 0; H <= A; ++H) F = E + L, D.push({ start: E / v, end: F / v, vg: E }), E = F;
              }
              v = D;
              x = t(x);
              for (z = x.next(); !z.done; z = x.next()) (z = bz(a, w, z.value, v, u, l)) && ("audio" != z.type || a.g.disableAudio ? "video" != z.type || a.g.disableVideo ? z.type != cd || a.g.disableText || m.push(z) : n.push(z) : q.push(z));
            }
            p = [];
            q = t(0 < q.length ? q : [null]);
            for (u = q.next(); !u.done; u = q.next()) for (u = u.value, w = t(0 < n.length ? n : [null]), D = w.next(); !D.done; D = w.next()) x = p, v = x.push, z = a, C = u, D = D.value, B = 0, C && C.bandwidth && 0 < C.bandwidth && (B += C.bandwidth), D && D.bandwidth && 0 < D.bandwidth && (B += D.bandwidth), z = { id: z.s++, language: C ? C.language : "und", disabledUntilTime: 0, primary: !!C && C.primary || !!D && D.primary, audio: C, video: D, bandwidth: B, allowedByApplication: true, allowedByKeySystem: true, decodingInfos: [] }, v.call(x, z);
            l.variants = p;
            l.textStreams = m;
            a.j ? (a.j.variants = l.variants, a.j.textStreams = l.textStreams, a.h.filter(a.j)) : (a.j = { presentationTimeline: a.i, variants: l.variants, textStreams: l.textStreams, imageStreams: [], offlineSessionIds: [], sequenceMode: a.g.mss.sequenceMode, ignoreManifestTimestampsInSegmentsMode: false, type: "MSS", serviceDescription: null, nextUrl: null, periodCount: 1, gapCount: 0, isLowLatency: false, startTime: null }, a.i.ie());
            Promise.resolve();
            g = Date.now();
            h = (g - d) / 1e3;
            a.C.sample(1, h);
            I(k2);
          });
        }
        function bz(a, b, c, d, e, f) {
          var g = b.attributes.Type;
          if ("audio" !== g && "video" !== g && "text" !== g) return db("Ignoring unrecognized type:", g), null;
          var h = b.attributes.Language, k2 = a.s++, l = ge(c, "Bitrate", ne), m = ge(c, "MaxWidth", ne), n = ge(c, "MaxHeight", ne), p = ge(c, "Channels", ne), q = ge(c, "SamplingRate", ne), u = f.duration;
          d.length && (u = d[d.length - 1].end - d[0].start);
          var w = a.i.getDuration();
          a.i.bb(Math.min(u, w));
          var v = {
            id: k2,
            originalId: b.attributes.Name || String(k2),
            groupId: null,
            createSegmentIndex: function() {
              return Promise.resolve();
            },
            closeSegmentIndex: function() {
              return Promise.resolve();
            },
            segmentIndex: null,
            mimeType: "",
            codecs: "",
            frameRate: void 0,
            pixelAspectRatio: void 0,
            bandwidth: l || 0,
            width: m || void 0,
            height: n || void 0,
            kind: "",
            encrypted: 0 < e.length,
            drmInfos: e,
            keyIds: /* @__PURE__ */ new Set(),
            language: Nf(h || "und"),
            originalLanguage: h,
            label: "",
            type: "",
            primary: false,
            trickModeVideo: null,
            dependencyStream: null,
            emsgSchemeIdUris: [],
            roles: [],
            forced: false,
            channelsCount: p,
            audioSamplingRate: q,
            spatialAudio: false,
            closedCaptions: null,
            hdr: void 0,
            colorGamut: void 0,
            videoLayout: void 0,
            tilesLayout: void 0,
            matchedStreams: [],
            mssPrivateData: { duration: u, timescale: f.timescale, codecPrivateData: null },
            accessibilityPurpose: null,
            external: false,
            fastSwitching: false,
            fullMimeTypes: /* @__PURE__ */ new Set(),
            isAudioMuxedInVideo: false,
            baseOriginalId: null
          };
          if (e = b.attributes.Subtype) (e = cz.get(e)) && v.roles.push(e), "main" === e && (v.primary = true);
          e = c.attributes.FourCC;
          if (null === e || "" === e) e = b.attributes.FourCC;
          if (!e) {
            if ("audio" === g) e = "AAC";
            else if ("video" === g) return db('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'), null;
          }
          if (!dz.includes(e.toUpperCase())) return db("Codec not supported:", e), null;
          c = ez(c, g, e, v);
          v.mssPrivateData.codecPrivateData = c;
          switch (g) {
            case "audio":
              if (!c) return db("Quality unsupported without CodecPrivateData", g), null;
              v.type = "audio";
              v.mimeType = "mss/audio/mp4";
              v.codecs = fz(e, c);
              break;
            case "video":
              if (!c) return db("Quality unsupported without CodecPrivateData", g), null;
              v.type = "video";
              v.mimeType = "mss/video/mp4";
              v.codecs = gz(c);
              break;
            case "text":
              if (v.type = cd, v.mimeType = "application/mp4", "TTML" === e || "DFXP" === e) v.codecs = "stpp";
          }
          v.fullMimeTypes.add(kf(v.mimeType, v.codecs));
          v.createSegmentIndex = function() {
            if (v.segmentIndex) return Promise.resolve();
            if (a.m.has(v.id)) var x = a.m.get(v.id);
            else x = [], "video" == v.type && (x = v.mssPrivateData.codecPrivateData.split("00000001").slice(1)), x = { id: v.id, type: v.type, codecs: v.codecs, encrypted: v.encrypted, timescale: v.mssPrivateData.timescale, duration: v.mssPrivateData.duration, mb: x, ra: new Uint8Array([]), Ca: new Uint8Array([]), Ia: 0, Ka: 0, data: null, stream: v }, x = aj(new Vi([x])), a.m.set(v.id, x);
            x = hz(a, new zj(function() {
              return [];
            }, 0, null, bm(v), v.mssPrivateData.timescale, x, null, v.encrypted), v, b, d);
            v.segmentIndex = new Pl(x);
            return Promise.resolve();
          };
          v.closeSegmentIndex = function() {
            v.segmentIndex && (v.segmentIndex.release(), v.segmentIndex = null);
          };
          return v;
        }
        function ez(a, b, c, d) {
          if (a = a.attributes.CodecPrivateData) return a;
          if ("audio" !== b) return null;
          b = d.channelsCount || 2;
          a = d.audioSamplingRate || 44100;
          var e = { 96e3: 0, 88200: 1, 64e3: 2, 48e3: 3, 44100: 4, 32e3: 5, 24e3: 6, 22050: 7, 16e3: 8, 12e3: 9, 11025: 10, 8e3: 11, 7350: 12 };
          d = e[a];
          if ("AACH" === c) return c = new Uint8Array(4), a = e[2 * a], c[0] = 40 | d >> 1, c[1] = d << 7 | b << 3 | a >> 1, c[2] = a << 7 | 8, c[3] = 0, b = new Uint16Array(2), b[0] = (c[0] << 8) + c[1], b[1] = (c[2] << 8) + c[3], b[0].toString(16) + b[1].toString(16);
          c = new Uint8Array(2);
          c[0] = 16 | d >> 1;
          c[1] = d << 7 | b << 3;
          b = new Uint16Array(1);
          b[0] = (c[0] << 8) + c[1];
          return b[0].toString(16);
        }
        function fz(a, b) {
          var c = 0;
          "AACH" === a && (c = 5);
          b ? 0 === c && (c = (parseInt(b.substr(0, 2), 16) & 248) >> 3) : (c = 2, "AACH" === a && (c = 5));
          return "mp4a.40." + c;
        }
        function gz(a) {
          var b = /00000001[0-9]7/.exec(a);
          return b.length && a ? "avc1." + a.substr(a.indexOf(b[0]) + 10, 6) : "";
        }
        function hz(a, b, c, d, e) {
          var f = d.attributes.Url.replace("{bitrate}", String(c.bandwidth));
          d = [];
          e = t(e);
          for (var g = e.next(), h = {}; !g.done; h = { Fe: void 0 }, g = e.next()) h.Fe = g.value, d.push(new Bj(h.Fe.start, h.Fe.end, /* @__PURE__ */ function(k2) {
            return function() {
              return Wc(a.l, [f.replace("{start time}", String(k2.Fe.vg))]);
            };
          }(h), 0, null, b, 0, 0, c.mssPrivateData.duration));
          return d;
        }
        T("shaka.mss.MssParser", Zy);
        var dz = "AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "), cz = (/* @__PURE__ */ new Map()).set("CAPT", "main").set("SUBT", "alternate").set("DESC", "main");
        Ri("application/vnd.ms-sstr+xml", function() {
          return new Zy();
        });
        function iz(a, b, c, d, e, f, g) {
          if (200 <= c && 299 >= c && 202 != c || 304 == c) return { uri: e || d, originalUri: d, data: b, status: c, headers: a, fromCache: !!a["x-shaka-from-cache"], originalRequest: f };
          f = null;
          try {
            f = Jc(b);
          } catch (h) {
          }
          throw new U(401 == c || 403 == c ? 2 : 1, 1, 1001, d, c, f, a, g, e || d);
        }
        ;
        function jz() {
        }
        function kz(a, b, c, d, e, f) {
          var g = new lz();
          wh(b.headers).forEach(function(m, n) {
            g.append(n, m);
          });
          var h = new mz(), k2 = { Eg: false, Hh: false };
          a = nz(a, b, c, { body: b.body || void 0, headers: g, method: b.method, signal: h.signal, credentials: b.allowCrossSiteCredentials ? "include" : void 0 }, k2, d, e, b.streamDataCallback, f.minBytesForProgressEvents || 0);
          a = new Ug(a, function() {
            k2.Eg = true;
            h.abort();
            return Promise.resolve();
          });
          if (b = b.retryParameters.timeout) {
            var l = new ec(function() {
              k2.Hh = true;
              h.abort();
            });
            l.da(b / 1e3);
            a.finally(function() {
              l.stop();
            });
          }
          return a;
        }
        function nz(a, b, c, d, e, f, g, h, k2) {
          var l, m, n, p, q, u, w, v, x, z, C, D, F;
          return Q(function(B) {
            switch (B.g) {
              case 1:
                return l = oz, m = pz, p = new ArrayBuffer(0), u = q = 0, w = Date.now(), xa(B, 2), G(B, l(a, d), 4);
              case 4:
                n = B.h;
                g(qz(n.headers));
                if ("HEAD" == d.method) {
                  B.u(5);
                  break;
                }
                v = n.clone().body.getReader();
                z = (x = n.headers.get("Content-Length")) ? parseInt(x, 10) : 0;
                C = function(A) {
                  function H() {
                    var E, L, M, J;
                    return Q(function(K) {
                      switch (K.g) {
                        case 1:
                          return xa(K, 2), G(K, v.read(), 4);
                        case 4:
                          E = K.h;
                          za(K, 3);
                          break;
                        case 2:
                          return Aa(K), K.return();
                        case 3:
                          if (E.done) {
                            K.u(5);
                            break;
                          }
                          q += E.value.byteLength;
                          if (!h) {
                            K.u(5);
                            break;
                          }
                          return G(K, h(E.value), 5);
                        case 5:
                          L = Date.now();
                          M = q - u;
                          if (100 < L - w && M >= k2 || E.done) J = E.done ? 0 : z - q, f(L - w, M, J), u = q, w = L;
                          E.done ? A.close() : (A.enqueue(E.value), H());
                          I(K);
                      }
                    });
                  }
                  H();
                };
                new m({ start: C });
                return G(B, n.arrayBuffer(), 6);
              case 6:
                p = B.h;
              case 5:
                za(B, 3);
                break;
              case 2:
                D = Aa(B);
                if (e.Eg) throw new U(1, 1, 7001, a, c);
                if (e.Hh) throw new U(1, 1, 1003, a, c);
                throw new U(1, 1, 1002, a, D, c);
              case 3:
                return F = qz(n.headers), B.return(iz(F, p, n.status, a, n.url, b, c));
            }
          });
        }
        function qz(a) {
          var b = {};
          a.forEach(function(c, d) {
            b[d.trim()] = c;
          });
          return b;
        }
        function rz() {
          if (window2.ReadableStream) try {
            new ReadableStream({});
          } catch (a) {
            return false;
          }
          else return false;
          if (window2.Response) {
            if (!new Response("").body) return false;
          } else return false;
          return !(!window2.fetch || "polyfill" in window2.fetch || !window2.AbortController);
        }
        T("shaka.net.HttpFetchPlugin", jz);
        jz.isSupported = rz;
        jz.parse = kz;
        var oz = window2.fetch, mz = window2.AbortController, pz = window2.ReadableStream, lz = window2.Headers;
        rz() && (gh("http", kz, 2, true), gh("https", kz, 2, true), gh("blob", kz, 2, true));
        function sz() {
        }
        function tz(a, b, c, d, e, f) {
          var g = new uz(), h = Date.now(), k2 = 0, l = new Promise(function(m, n) {
            g.open(b.method, a, true);
            g.responseType = "arraybuffer";
            g.timeout = b.retryParameters.timeout;
            g.withCredentials = b.allowCrossSiteCredentials;
            g.onabort = function() {
              n(new U(1, 1, 7001, a, c));
            };
            var p = false;
            g.onreadystatechange = function() {
              if (2 == g.readyState && !p) {
                var u = vz(g);
                e(u);
                p = true;
              }
            };
            g.onload = function(u) {
              var w = vz(g), v = g.response;
              try {
                d(Date.now() - h, u.loaded - k2, 0);
                var x = iz(w, v, g.status, a, g.responseURL, b, c);
                m(x);
              } catch (z) {
                n(z);
              }
            };
            g.onerror = function(u) {
              n(new U(1, 1, 1002, a, u, c));
            };
            g.ontimeout = function() {
              n(new U(1, 1, 1003, a, c));
            };
            g.onprogress = function(u) {
              var w = Date.now(), v = f.minBytesForProgressEvents || 0, x = u.loaded - k2;
              if (100 < w - h && x >= v || u.lengthComputable && u.loaded == u.total) d(w - h, x, 4 == g.readyState ? 0 : u.total - u.loaded), k2 = u.loaded, h = w;
            };
            for (var q in b.headers) g.setRequestHeader(q.toLowerCase(), b.headers[q]);
            g.send(b.body);
          });
          return new Ug(l, function() {
            g.abort();
            return Promise.resolve();
          });
        }
        function vz(a) {
          var b = a.getAllResponseHeaders().trim().split("\r\n");
          a = {};
          b = t(b);
          for (var c = b.next(); !c.done; c = b.next()) c = c.value.split(": "), a[c[0].toLowerCase()] = c.slice(1).join(": ");
          return a;
        }
        T("shaka.net.HttpXHRPlugin", sz);
        sz.parse = tz;
        var uz = window2.XMLHttpRequest;
        gh("http", tz, 1, true);
        gh("https", tz, 1, true);
        gh("blob", tz, 1, true);
        function wz(a, b, c, d, e) {
          this.g = a;
          this.i = b;
          this.groupId = c;
          this.h = d;
          this.j = e;
        }
        function xz(a) {
          var b = a.Qb(false);
          return b ? Rc(b) : a.N().map(function(c) {
            return "{" + encodeURI(c.split("#xywh=")[0]) + "}";
          }).join("") + ":" + a.Sa + ":" + a.wa;
        }
        function yz(a, b) {
          return xm(a.g.N(), a.g.Sa, a.g.wa, b.streaming.retryParameters);
        }
        ;
        function zz() {
          this.g = this.j = this.i = 0;
          this.h = /* @__PURE__ */ new Map();
          this.l = 0;
        }
        function Az(a, b) {
          a.i += b;
          var c = a.l;
          a.l++;
          a.h.set(c, b);
          return c;
        }
        zz.prototype.close = function(a, b) {
          if (this.h.has(a)) {
            var c = this.h.get(a);
            this.h.delete(a);
            this.j += c;
            this.g += b;
          }
        };
        function Bz(a) {
          return 0 == a.i ? 0 : a.j / a.i;
        }
        ;
        function Cz(a) {
          var b = this;
          this.s = a;
          this.i = /* @__PURE__ */ new Map();
          this.h = new sh(function() {
            return Dz(b).catch(function() {
            });
          });
          this.j = [];
          this.o = function() {
          };
          this.m = function() {
          };
          this.g = new zz();
          this.l = false;
        }
        Cz.prototype.destroy = function() {
          return this.h.destroy();
        };
        function Ez(a, b, c) {
          a.o = b;
          a.m = c;
        }
        function Dz(a) {
          a.l = true;
          var b = a.j.map(function(c) {
            return c();
          });
          a.j = [];
          return Promise.all(b);
        }
        function Fz(a, b, c, d, e, f) {
          th(a.h);
          var g = (a.i.get(b) || Promise.resolve()).then(function() {
            var h, k2, l, m, n, p, q;
            return Q(function(u) {
              if (1 == u.g) return G(u, Gz(a, c), 2);
              h = u.h;
              if (a.h.g) throw new U(2, 9, 7001);
              if (e) for (m in k2 = Qb(h), l = new Ph(k2), l.data) n = Number(m), p = l.data[n], q = l.g[n], a.m(p, q);
              a.g.close(d, h.byteLength);
              a.o(Bz(a.g), a.g.g);
              return u.return(f(h));
            });
          });
          a.i.set(b, g);
        }
        function Hz(a, b, c, d, e, f) {
          th(a.h);
          var g = (a.i.get(b) || Promise.resolve()).then(function() {
            if (a.h.g) throw new U(2, 9, 7001);
            if (e) {
              var h = Qb(c);
              h = new Ph(h);
              for (var k2 in h.data) {
                var l = Number(k2);
                a.m(h.data[l], h.g[l]);
              }
            }
            a.g.close(d, c.byteLength);
            a.o(Bz(a.g), a.g.g);
            return f(c);
          });
          a.i.set(b, g);
        }
        function Iz(a) {
          return Q(function(b) {
            return 1 == b.g ? G(b, Promise.all(a.i.values()), 2) : b.return(a.g.g);
          });
        }
        function Gz(a, b) {
          var c, d, e, f;
          return Q(function(g) {
            if (1 == g.g) return c = qh, d = a.s.request(c, b), e = function() {
              return d.abort();
            }, a.j.push(e), G(g, d.promise, 2);
            f = g.h;
            Bd(a.j, e);
            return g.return(f.data);
          });
        }
        ;
        function Jz(a, b) {
          var c = this;
          this.i = a;
          this.h = a.objectStore(b);
          this.g = new Tg();
          a.onabort = function(d) {
            d.preventDefault();
            c.g.reject();
          };
          a.onerror = function(d) {
            d.preventDefault();
            c.g.reject();
          };
          a.oncomplete = function() {
            c.g.resolve();
          };
        }
        Jz.prototype.abort = function() {
          var a = this;
          return Q(function(b) {
            if (1 == b.g) {
              try {
                a.i.abort();
              } catch (c) {
              }
              xa(b, 2);
              return G(b, a.g, 4);
            }
            if (2 != b.g) return za(b, 0);
            Aa(b);
            I(b);
          });
        };
        function Kz(a, b) {
          return new Promise(function(c, d) {
            var e = a.h.openCursor();
            e.onerror = d;
            e.onsuccess = function() {
              var f;
              return Q(function(g) {
                if (1 == g.g) {
                  if (null == e.result) return c(), g.return();
                  f = e.result;
                  return G(g, b(f.key, f.value, f), 2);
                }
                f.continue();
                I(g);
              });
            };
          });
        }
        Jz.prototype.store = function() {
          return this.h;
        };
        Jz.prototype.promise = function() {
          return this.g;
        };
        function Lz(a) {
          this.h = a;
          this.g = [];
        }
        Lz.prototype.destroy = function() {
          return Promise.all(this.g.map(function(a) {
            return a.abort();
          }));
        };
        function Mz(a, b) {
          return Nz(a, b, "readwrite");
        }
        function Nz(a, b, c) {
          c = a.h.transaction([b], c);
          var d = new Jz(c, b);
          a.g.push(d);
          d.promise().then(function() {
            Bd(a.g, d);
          }, function() {
            Bd(a.g, d);
          });
          return d;
        }
        ;
        function Oz(a, b, c) {
          this.h = new Lz(a);
          this.i = b;
          this.g = c;
        }
        r = Oz.prototype;
        r.destroy = function() {
          return this.h.destroy();
        };
        r.hasFixedKeySpace = function() {
          return true;
        };
        r.addSegments = function() {
          return Pz(this.i);
        };
        r.removeSegments = function(a, b) {
          return Qz(this, this.i, a, b);
        };
        r.getSegments = function(a) {
          var b = this, c;
          return Q(function(d) {
            if (1 == d.g) return G(d, Rz(b, b.i, a), 2);
            c = d.h;
            return d.return(c.map(function(e) {
              return b.Gg(e);
            }));
          });
        };
        r.addManifests = function() {
          return Pz(this.g);
        };
        r.updateManifest = function() {
          return Promise.reject(new U(2, 9, 9016, "Cannot modify values in " + this.g));
        };
        function Sz(a, b, c) {
          a = Mz(a.h, a.g);
          var d = a.store();
          d.get(b).onsuccess = function() {
            d.put(c, b);
          };
          return a.promise();
        }
        r.updateManifestExpiration = function(a, b) {
          var c = Mz(this.h, this.g), d = c.store();
          d.get(a).onsuccess = function(e) {
            if (e = e.target.result) e.expiration = b, d.put(e, a);
          };
          return c.promise();
        };
        r.removeManifests = function(a, b) {
          return Qz(this, this.g, a, b);
        };
        r.getManifests = function(a) {
          var b = this, c;
          return Q(function(d) {
            if (1 == d.g) return G(d, Rz(b, b.g, a), 2);
            c = d.h;
            return d.return(Promise.all(c.map(function(e) {
              return b.jd(e);
            })));
          });
        };
        r.getAllManifests = function() {
          var a = this, b, c;
          return Q(function(d) {
            return 1 == d.g ? (b = Nz(a.h, a.g, "readonly"), c = /* @__PURE__ */ new Map(), G(d, Kz(b, function(e, f) {
              var g;
              return Q(function(h) {
                if (1 == h.g) return G(h, a.jd(f), 2);
                g = h.h;
                c.set(e, g);
                I(h);
              });
            }), 2)) : 3 != d.g ? G(d, b.promise(), 3) : d.return(c);
          });
        };
        r.Gg = function(a) {
          return a;
        };
        r.jd = function(a) {
          return Promise.resolve(a);
        };
        function Pz(a) {
          return Promise.reject(new U(2, 9, 9011, "Cannot add new value to " + a));
        }
        r.add = function(a, b) {
          var c = this, d, e, f, g, h, k2, l;
          return Q(function(m) {
            if (1 == m.g) {
              d = Mz(c.h, a);
              e = d.store();
              f = [];
              g = t(b);
              h = g.next();
              for (k2 = {}; !h.done; k2 = { ag: void 0 }, h = g.next()) l = h.value, k2.ag = e.add(l), k2.ag.onsuccess = /* @__PURE__ */ function(n) {
                return function() {
                  f.push(n.ag.result);
                };
              }(k2);
              return G(m, d.promise(), 2);
            }
            return m.return(f);
          });
        };
        function Qz(a, b, c, d) {
          a = Mz(a.h, b);
          b = a.store();
          c = t(c);
          for (var e = c.next(), f = {}; !e.done; f = { Pf: void 0 }, e = c.next()) f.Pf = e.value, b.delete(f.Pf).onsuccess = /* @__PURE__ */ function(g) {
            return function() {
              return d(g.Pf);
            };
          }(f);
          return a.promise();
        }
        function Rz(a, b, c) {
          var d, e, f, g, h, k2, l;
          return Q(function(m) {
            if (1 == m.g) {
              d = Nz(a.h, b, "readonly");
              e = d.store();
              f = {};
              g = [];
              h = t(c);
              k2 = h.next();
              for (l = {}; !k2.done; l = { we: void 0, ee: void 0 }, k2 = h.next()) l.ee = k2.value, l.we = e.get(l.ee), l.we.onsuccess = /* @__PURE__ */ function(n) {
                return function() {
                  void 0 == n.we.result && g.push(n.ee);
                  f[n.ee] = n.we.result;
                };
              }(l);
              return G(m, d.promise(), 2);
            }
            if (g.length) throw new U(2, 9, 9012, "Could not find values for " + g);
            return m.return(c.map(function(n) {
              return f[n];
            }));
          });
        }
        ;
        function Tz(a) {
          this.g = new Lz(a);
        }
        Tz.prototype.destroy = function() {
          return this.g.destroy();
        };
        Tz.prototype.getAll = function() {
          var a = this, b, c;
          return Q(function(d) {
            return 1 == d.g ? (b = Nz(a.g, "session-ids", "readonly"), c = [], G(d, Kz(b, function(e, f) {
              c.push(f);
            }), 2)) : 3 != d.g ? G(d, b.promise(), 3) : d.return(c);
          });
        };
        Tz.prototype.add = function(a) {
          var b = Mz(this.g, "session-ids"), c = b.store();
          a = t(a);
          for (var d = a.next(); !d.done; d = a.next()) c.add(d.value);
          return b.promise();
        };
        Tz.prototype.remove = function(a) {
          var b = this, c;
          return Q(function(d) {
            return 1 == d.g ? (c = Mz(b.g, "session-ids"), G(d, Kz(c, function(e, f, g) {
              a.includes(f.sessionId) && g.delete();
            }), 2)) : G(d, c.promise(), 0);
          });
        };
        function Uz() {
          this.g = /* @__PURE__ */ new Map();
        }
        Uz.prototype.destroy = function() {
          for (var a = [], b = t(this.g.values()), c = b.next(); !c.done; c = b.next()) a.push(c.value.destroy());
          this.g.clear();
          return Promise.all(a);
        };
        Uz.prototype.init = function() {
          var a = this;
          Vz.forEach(function(e, f) {
            (e = e()) && a.g.set(f, e);
          });
          for (var b = [], c = t(this.g.values()), d = c.next(); !d.done; d = c.next()) b.push(d.value.init());
          return Promise.all(b);
        };
        function Wz(a) {
          var b = null;
          a.g.forEach(function(c, d) {
            c.getCells().forEach(function(e, f) {
              e.hasFixedKeySpace() || b || (b = { path: { zb: d, Ta: f }, Ta: e });
            });
          });
          if (b) return b;
          throw new U(2, 9, 9013, "Could not find a cell that supports add-operations");
        }
        function Xz(a, b) {
          a.g.forEach(function(c, d) {
            c.getCells().forEach(function(e, f) {
              b({ zb: d, Ta: f }, e);
            });
          });
        }
        function Yz(a, b, c) {
          a = a.g.get(b);
          if (!a) throw new U(2, 9, 9013, "Could not find mechanism with name " + b);
          b = a.getCells().get(c);
          if (!b) throw new U(2, 9, 9013, "Could not find cell with name " + c);
          return b;
        }
        function Zz(a, b) {
          a.g.forEach(function(c) {
            b(c.getEmeSessionCell());
          });
        }
        function $z(a) {
          var b = Array.from(a.g.keys());
          if (!b.length) throw new U(2, 9, 9e3, "No supported storage mechanisms found");
          return a.g.get(b[0]).getEmeSessionCell();
        }
        function aA(a) {
          var b, c, d;
          return Q(function(e) {
            return 1 == e.g ? (b = Array.from(a.g.values()), c = 0 < b.length, c || (d = Vz, d.forEach(function(f) {
              (f = f()) && b.push(f);
            })), G(e, Promise.all(b.map(function(f) {
              return f.erase();
            })), 2)) : c ? e.u(0) : G(e, Promise.all(b.map(function(f) {
              return f.destroy();
            })), 0);
          });
        }
        function bA(a, b) {
          Vz.set(a, b);
        }
        T("shaka.offline.StorageMuxer", Uz);
        Uz.unregister = function(a) {
          Vz.delete(a);
        };
        Uz.register = bA;
        Uz.prototype.destroy = Uz.prototype.destroy;
        var Vz = /* @__PURE__ */ new Map();
        function cA() {
          Oz.apply(this, arguments);
        }
        qa(cA, Oz);
        cA.prototype.updateManifestExpiration = function(a, b) {
          var c = this, d, e, f;
          return Q(function(g) {
            d = Mz(c.h, c.g);
            e = d.store();
            f = new Tg();
            e.get(a).onsuccess = function(h) {
              (h = h.target.result) ? (h.expiration = b, e.put(h), f.resolve()) : f.reject(new U(2, 9, 9012, "Could not find values for " + a));
            };
            return G(g, Promise.all([d.promise(), f]), 0);
          });
        };
        cA.prototype.jd = function(a) {
          var b, c, d, e, f, g;
          return Q(function(h) {
            if (1 == h.g) {
              b = [];
              for (c = 0; c < a.periods.length; ++c) d = c == a.periods.length - 1 ? a.duration : a.periods[c + 1].startTime, e = d - a.periods[c].startTime, f = dA(a.periods[c], e), b.push(f);
              return G(h, Dv(b), 2);
            }
            g = h.h;
            return h.return({ creationTime: 0, originalManifestUri: a.originalManifestUri, duration: a.duration, size: a.size, expiration: null == a.expiration ? Infinity : a.expiration, streams: g, sessionIds: a.sessionIds, drmInfo: a.drmInfo, appMetadata: a.appMetadata, sequenceMode: false });
          });
        };
        function dA(a, b) {
          eA(a);
          for (var c = t(a.streams), d = c.next(); !d.done; d = c.next()) ;
          return a.streams.map(function(e) {
            return fA(e, a.startTime, b);
          });
        }
        function fA(a, b, c) {
          var d = a.initSegmentUri ? gA(a.initSegmentUri) : null, e = b + a.presentationTimeOffset, f = b + c;
          return { id: a.id, originalId: null, groupId: null, primary: a.primary, type: a.contentType, mimeType: a.mimeType, codecs: a.codecs, frameRate: a.frameRate, pixelAspectRatio: void 0, hdr: void 0, colorGamut: void 0, videoLayout: void 0, kind: a.kind, language: a.language, originalLanguage: a.language || null, label: a.label, width: a.width, height: a.height, initSegmentKey: d, encrypted: a.encrypted, keyIds: /* @__PURE__ */ new Set([a.keyId]), segments: a.segments.map(function(g) {
            var h = gA(g.uri);
            return { startTime: b + g.startTime, endTime: b + g.endTime, dataKey: h, initSegmentKey: d, appendWindowStart: b, appendWindowEnd: f, timestampOffset: e, tilesLayout: "", mimeType: null, codecs: null, thumbnailSprite: null };
          }), variantIds: a.variantIds, roles: [], forced: false, audioSamplingRate: null, channelsCount: null, spatialAudio: false, closedCaptions: null, tilesLayout: void 0, external: false, fastSwitching: false, isAudioMuxedInVideo: false };
        }
        cA.prototype.Gg = function(a) {
          return { data: a.data };
        };
        function gA(a) {
          var b;
          if ((b = /^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(a)) || (b = /^offline:segment\/([0-9]+)$/.exec(a))) return Number(b[1]);
          throw new U(2, 9, 9004, "Could not parse uri " + a);
        }
        function eA(a) {
          var b = a.streams.filter(function(h) {
            return "audio" == h.contentType;
          });
          a = a.streams.filter(function(h) {
            return "video" == h.contentType;
          });
          if (!b.every(function(h) {
            return h.variantIds;
          }) || !a.every(function(h) {
            return h.variantIds;
          })) {
            for (var c = t(b), d = c.next(); !d.done; d = c.next()) d.value.variantIds = [];
            c = t(a);
            for (d = c.next(); !d.done; d = c.next()) d.value.variantIds = [];
            c = 0;
            if (a.length && !b.length) {
              d = c++;
              for (var e = t(a), f = e.next(); !f.done; f = e.next()) f.value.variantIds.push(d);
            }
            if (!a.length && b.length) for (d = c++, e = t(b), f = e.next(); !f.done; f = e.next()) f.value.variantIds.push(d);
            if (a.length && b.length) for (b = t(b), d = b.next(); !d.done; d = b.next()) for (d = d.value, e = t(a), f = e.next(); !f.done; f = e.next()) {
              f = f.value;
              var g = c++;
              d.variantIds.push(g);
              f.variantIds.push(g);
            }
          }
        }
        ;
        function hA() {
          Oz.apply(this, arguments);
        }
        qa(hA, Oz);
        hA.prototype.jd = function(a) {
          var b, c, d, e, f, g;
          return Q(function(h) {
            if (1 == h.g) {
              b = [];
              for (c = 0; c < a.periods.length; ++c) {
                d = c == a.periods.length - 1 ? a.duration : a.periods[c + 1].startTime;
                e = d - a.periods[c].startTime;
                for (var k2 = a.periods[c], l = [], m = t(k2.streams), n = m.next(); !n.done; n = m.next()) n = n.value, 0 != n.variantIds.length && l.push(iA(n, k2.startTime, k2.startTime + e));
                f = l;
                b.push(f);
              }
              return G(h, Dv(b), 2);
            }
            g = h.h;
            return h.return({ appMetadata: a.appMetadata, creationTime: 0, drmInfo: a.drmInfo, duration: a.duration, expiration: null == a.expiration ? Infinity : a.expiration, originalManifestUri: a.originalManifestUri, sessionIds: a.sessionIds, size: a.size, streams: g, sequenceMode: false });
          });
        };
        function iA(a, b, c) {
          return { id: a.id, originalId: a.originalId, groupId: null, primary: a.primary, type: a.contentType, mimeType: a.mimeType, codecs: a.codecs, frameRate: a.frameRate, pixelAspectRatio: a.pixelAspectRatio, hdr: void 0, colorGamut: void 0, videoLayout: void 0, kind: a.kind, language: a.language, originalLanguage: a.language || null, label: a.label, width: a.width, height: a.height, encrypted: a.encrypted, keyIds: /* @__PURE__ */ new Set([a.keyId]), segments: a.segments.map(function(d) {
            return {
              startTime: b + d.startTime,
              endTime: b + d.endTime,
              initSegmentKey: a.initSegmentKey,
              appendWindowStart: b,
              appendWindowEnd: c,
              timestampOffset: b - a.presentationTimeOffset,
              dataKey: d.dataKey,
              tilesLayout: "",
              mimeType: null,
              codecs: null,
              thumbnailSprite: null
            };
          }), variantIds: a.variantIds, roles: [], forced: false, audioSamplingRate: null, channelsCount: null, spatialAudio: false, closedCaptions: null, tilesLayout: void 0, external: false, fastSwitching: false, isAudioMuxedInVideo: false };
        }
        ;
        function jA() {
          Oz.apply(this, arguments);
        }
        qa(jA, Oz);
        r = jA.prototype;
        r.hasFixedKeySpace = function() {
          return false;
        };
        r.addSegments = function(a) {
          return this.add(this.i, a);
        };
        r.addManifests = function(a) {
          return this.add(this.g, a);
        };
        r.updateManifest = function(a, b) {
          return Sz(this, a, b);
        };
        r.jd = function(a) {
          null == a.expiration && (a.expiration = Infinity);
          return Promise.resolve(a);
        };
        function kA() {
          this.m = this.j = this.i = this.h = this.g = this.l = null;
        }
        r = kA.prototype;
        r.init = function() {
          var a = this, b = new Tg(), c = false, d = new ec(function() {
            c = true;
            b.reject(new U(2, 9, 9017));
          });
          d.da(5);
          var e = window2.indexedDB.open("shaka_offline_db", 5);
          e.onsuccess = function() {
            if (!c) {
              var f = e.result;
              a.l = f;
              var g = f.objectStoreNames;
              g = g.contains("manifest") && g.contains("segment") ? new cA(f, "segment", "manifest") : null;
              a.g = g;
              g = f.objectStoreNames;
              g = g.contains("manifest-v2") && g.contains("segment-v2") ? new hA(f, "segment-v2", "manifest-v2") : null;
              a.h = g;
              g = f.objectStoreNames;
              g = g.contains("manifest-v3") && g.contains("segment-v3") ? new hA(f, "segment-v3", "manifest-v3") : null;
              a.i = g;
              g = f.objectStoreNames;
              g = g.contains("manifest-v5") && g.contains("segment-v5") ? new jA(f, "segment-v5", "manifest-v5") : null;
              a.j = g;
              f = f.objectStoreNames.contains("session-ids") ? new Tz(f) : null;
              a.m = f;
              d.stop();
              b.resolve();
            }
          };
          e.onupgradeneeded = function() {
            for (var f = e.result, g = t(["segment-v5", "manifest-v5", "session-ids"]), h = g.next(); !h.done; h = g.next()) h = h.value, f.objectStoreNames.contains(h) || f.createObjectStore(h, { autoIncrement: true });
          };
          e.onerror = function(f) {
            c || (b.reject(new U(
              2,
              9,
              9001,
              e.error
            )), d.stop(), f.preventDefault());
          };
          return b;
        };
        r.destroy = function() {
          var a = this;
          return Q(function(b) {
            switch (b.g) {
              case 1:
                if (!a.g) {
                  b.u(2);
                  break;
                }
                return G(b, a.g.destroy(), 2);
              case 2:
                if (!a.h) {
                  b.u(4);
                  break;
                }
                return G(b, a.h.destroy(), 4);
              case 4:
                if (!a.i) {
                  b.u(6);
                  break;
                }
                return G(b, a.i.destroy(), 6);
              case 6:
                if (!a.j) {
                  b.u(8);
                  break;
                }
                return G(b, a.j.destroy(), 8);
              case 8:
                if (!a.m) {
                  b.u(10);
                  break;
                }
                return G(b, a.m.destroy(), 10);
              case 10:
                a.l && a.l.close(), I(b);
            }
          });
        };
        r.getCells = function() {
          var a = /* @__PURE__ */ new Map();
          this.g && a.set("v1", this.g);
          this.h && a.set("v2", this.h);
          this.i && a.set("v3", this.i);
          this.j && a.set("v5", this.j);
          return a;
        };
        r.getEmeSessionCell = function() {
          return this.m;
        };
        r.erase = function() {
          var a = this;
          return Q(function(b) {
            switch (b.g) {
              case 1:
                if (!a.g) {
                  b.u(2);
                  break;
                }
                return G(b, a.g.destroy(), 2);
              case 2:
                if (!a.h) {
                  b.u(4);
                  break;
                }
                return G(b, a.h.destroy(), 4);
              case 4:
                if (!a.i) {
                  b.u(6);
                  break;
                }
                return G(b, a.i.destroy(), 6);
              case 6:
                if (!a.j) {
                  b.u(8);
                  break;
                }
                return G(b, a.j.destroy(), 8);
              case 8:
                return a.l && a.l.close(), G(b, lA(), 10);
              case 10:
                return a.l = null, a.g = null, a.h = null, a.i = null, a.j = null, G(b, a.init(), 0);
            }
          });
        };
        function lA() {
          var a = new Tg(), b = window2.indexedDB.deleteDatabase("shaka_offline_db");
          b.onblocked = function() {
          };
          b.onsuccess = function() {
            a.resolve();
          };
          b.onerror = function(c) {
            a.reject(new U(2, 9, 9001, b.error));
            c.preventDefault();
          };
          return a;
        }
        bA("idb", function() {
          return (!qc() || qc() && yc()) && !jc() && window2.indexedDB ? new kA() : null;
        });
        function mA(a, b, c, d) {
          this.g = a;
          this.i = b;
          this.h = c;
          this.l = d;
          this.j = ["offline:", a, "/", b, "/", c, "/", d].join("");
        }
        mA.prototype.zb = function() {
          return this.i;
        };
        mA.prototype.Ta = function() {
          return this.h;
        };
        mA.prototype.key = function() {
          return this.l;
        };
        mA.prototype.toString = function() {
          return this.j;
        };
        function nA(a) {
          a = /^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(a);
          if (null == a) return null;
          var b = a[1];
          if ("manifest" != b && "segment" != b) return null;
          var c = a[2];
          if (!c) return null;
          var d = a[3];
          return d && null != b ? new mA(b, c, d, Number(a[4])) : null;
        }
        ;
        function oA(a, b) {
          this.h = a;
          this.g = b;
        }
        function pA(a, b) {
          var c = new ul(null, 0);
          c.bb(b.duration);
          var d = b.streams.filter(function(l) {
            return "audio" == l.type;
          }), e = b.streams.filter(function(l) {
            return "video" == l.type;
          });
          d = qA(a, d, e, c);
          e = b.streams.filter(function(l) {
            return l.type == cd;
          }).map(function(l) {
            return rA(a, l, c);
          });
          var f = b.streams.filter(function(l) {
            return "image" == l.type;
          }).map(function(l) {
            return rA(a, l, c);
          }), g = b.drmInfo ? [b.drmInfo] : [];
          if (b.drmInfo) for (var h = t(d.values()), k2 = h.next(); !k2.done; k2 = h.next()) k2 = k2.value, k2.audio && k2.audio.encrypted && (k2.audio.drmInfos = g), k2.video && k2.video.encrypted && (k2.video.drmInfos = g);
          return { presentationTimeline: c, offlineSessionIds: b.sessionIds, variants: Array.from(d.values()), textStreams: e, imageStreams: f, sequenceMode: b.sequenceMode || false, ignoreManifestTimestampsInSegmentsMode: false, type: b.type || "UNKNOWN", serviceDescription: null, nextUrl: null, periodCount: 1, gapCount: 0, isLowLatency: false, startTime: null };
        }
        function qA(a, b, c, d) {
          for (var e = /* @__PURE__ */ new Set(), f = t(b), g = f.next(); !g.done; g = f.next()) {
            g = t(g.value.variantIds);
            for (var h = g.next(); !h.done; h = g.next()) e.add(h.value);
          }
          f = t(c);
          for (g = f.next(); !g.done; g = f.next()) for (g = t(g.value.variantIds), h = g.next(); !h.done; h = g.next()) e.add(h.value);
          f = /* @__PURE__ */ new Map();
          e = t(e);
          for (g = e.next(); !g.done; g = e.next()) g = g.value, f.set(g, { id: g, language: "", disabledUntilTime: 0, primary: false, audio: null, video: null, bandwidth: 0, allowedByApplication: true, allowedByKeySystem: true, decodingInfos: [] });
          b = t(b);
          for (e = b.next(); !e.done; e = b.next()) for (g = e.value, e = rA(a, g, d), g = t(g.variantIds), h = g.next(); !h.done; h = g.next()) h = f.get(h.value), h.language = e.language, h.primary = h.primary || e.primary, h.audio = e;
          c = t(c);
          for (b = c.next(); !b.done; b = c.next()) for (e = b.value, b = rA(a, e, d), e = t(e.variantIds), g = e.next(); !g.done; g = e.next()) g = f.get(g.value), g.primary = g.primary || b.primary, g.video = b;
          return f;
        }
        function rA(a, b, c) {
          var d = b.segments.map(function(e) {
            return sA(a, e, b);
          });
          c.Ed(d);
          return { id: b.id, originalId: b.originalId, groupId: b.groupId, createSegmentIndex: function() {
            return Promise.resolve();
          }, segmentIndex: new Pl(d), mimeType: b.mimeType, codecs: b.codecs, width: b.width || void 0, height: b.height || void 0, frameRate: b.frameRate, pixelAspectRatio: b.pixelAspectRatio, hdr: b.hdr, colorGamut: b.colorGamut, videoLayout: b.videoLayout, kind: b.kind, encrypted: b.encrypted, drmInfos: [], keyIds: b.keyIds, language: b.language, originalLanguage: b.originalLanguage || null, label: b.label, type: b.type, primary: b.primary, trickModeVideo: null, dependencyStream: null, emsgSchemeIdUris: null, roles: b.roles, forced: b.forced, channelsCount: b.channelsCount, audioSamplingRate: b.audioSamplingRate, spatialAudio: b.spatialAudio, closedCaptions: b.closedCaptions, tilesLayout: b.tilesLayout, mssPrivateData: b.mssPrivateData, accessibilityPurpose: null, external: b.external, fastSwitching: b.fastSwitching, fullMimeTypes: /* @__PURE__ */ new Set([kf(b.mimeType, b.codecs)]), isAudioMuxedInVideo: false, baseOriginalId: null };
        }
        function sA(a, b, c) {
          var d = new mA("segment", a.h, a.g, b.dataKey);
          a = new Bj(b.startTime, b.endTime, function() {
            return [d.toString()];
          }, 0, null, null != b.initSegmentKey ? tA(a, b.initSegmentKey) : null, b.timestampOffset, b.appendWindowStart, b.appendWindowEnd, [], b.tilesLayout || "");
          a.mimeType = b.mimeType || c.mimeType || "";
          a.codecs = b.codecs || c.codecs || "";
          b.thumbnailSprite && a.De(b.thumbnailSprite);
          return a;
        }
        function tA(a, b) {
          var c = new mA("segment", a.h, a.g, b);
          return new zj(function() {
            return [c.toString()];
          }, 0, null);
        }
        ;
        function uA() {
          this.g = null;
        }
        r = uA.prototype;
        r.configure = function() {
        };
        r.start = function(a, b) {
          var c = this, d, e, f, g, h, k2, l;
          return Q(function(m) {
            switch (m.g) {
              case 1:
                d = nA(a);
                c.g = d;
                if (null == d || "manifest" != d.g) throw new U(2, 1, 9004, a);
                e = new Uz();
                ya(m, 2);
                return G(m, e.init(), 4);
              case 4:
                return G(m, Yz(e, d.zb(), d.Ta()), 5);
              case 5:
                return f = m.h, G(m, f.getManifests([d.key()]), 6);
              case 6:
                return g = m.h, h = g[0], k2 = new oA(d.zb(), d.Ta()), l = pA(k2, h), b.makeTextStreamsForClosedCaptions(l), m.return(l);
              case 2:
                return Da(m), G(m, e.destroy(), 7);
              case 7:
                Ea(m, 0);
            }
          });
        };
        r.stop = function() {
          return Promise.resolve();
        };
        r.update = function() {
        };
        r.onExpirationUpdated = function(a, b) {
          var c = this, d, e, f, g, h, k2, l;
          return Q(function(m) {
            switch (m.g) {
              case 1:
                return d = c.g, e = new Uz(), xa(m, 2, 3), G(m, e.init(), 5);
              case 5:
                return G(m, Yz(e, d.zb(), d.Ta()), 6);
              case 6:
                return f = m.h, G(m, f.getManifests([d.key()]), 7);
              case 7:
                g = m.h;
                h = g[0];
                k2 = h.sessionIds.includes(a);
                l = void 0 == h.expiration || h.expiration > b;
                if (!k2 || !l) {
                  m.u(3);
                  break;
                }
                return G(m, f.updateManifestExpiration(d.key(), b), 3);
              case 3:
                return Da(m), G(m, e.destroy(), 10);
              case 10:
                Ea(m, 0);
                break;
              case 2:
                Aa(m), m.u(3);
            }
          });
        };
        r.onInitialVariantChosen = function() {
        };
        r.banLocation = function() {
        };
        r.setMediaElement = function() {
        };
        Ri("application/x-offline-manifest", function() {
          return new uA();
        });
        function vA() {
        }
        function wA(a, b) {
          var c = nA(a);
          c && "manifest" == c.g ? (a = { uri: a, originalUri: a, data: new ArrayBuffer(0), headers: { "content-type": "application/x-offline-manifest" }, originalRequest: b }, a = Xg(a)) : a = c && "segment" == c.g ? xA(c.key(), c, b) : Vg(new U(2, 1, 9004, a));
          return a;
        }
        function xA(a, b, c) {
          var d = new Uz();
          return Xg(void 0).Ha(function() {
            return d.init();
          }).Ha(function() {
            return Yz(d, b.zb(), b.Ta());
          }).Ha(function(e) {
            return e.getSegments([b.key()]);
          }).Ha(function(e) {
            return { uri: b, data: e[0].data, headers: {}, originalRequest: c };
          }).finally(function() {
            return d.destroy();
          });
        }
        T("shaka.offline.OfflineScheme", vA);
        vA.plugin = wA;
        gh("offline", wA);
        function yA(a, b, c) {
          var d, e, f, g, h, k2;
          return Q(function(l) {
            switch (l.g) {
              case 1:
                d = [];
                for (var m = [], n = t(c), p = n.next(); !p.done; p = n.next()) {
                  p = p.value;
                  for (var q = false, u = t(m), w = u.next(); !w.done; w = u.next()) if (w = w.value, zA(w.info, p)) {
                    w.sessionIds.push(p.sessionId);
                    q = true;
                    break;
                  }
                  q || m.push({ info: p, sessionIds: [p.sessionId] });
                }
                e = t(m);
                f = e.next();
              case 2:
                if (f.done) {
                  l.u(4);
                  break;
                }
                g = f.value;
                h = AA(a, b, g);
                return G(l, h, 5);
              case 5:
                k2 = l.h;
                d = d.concat(k2);
                f = e.next();
                l.u(2);
                break;
              case 4:
                return l.return(d);
            }
          });
        }
        function AA(a, b, c) {
          var d, e;
          return Q(function(f) {
            switch (f.g) {
              case 1:
                return d = new Rh({ Wb: b, onError: function() {
                }, pe: function() {
                }, onExpirationUpdated: function() {
                }, onEvent: function() {
                } }), xa(f, 2), d.configure(a), G(f, Zh(d, c.info.keySystem, c.info.licenseUri, c.info.serverCertificate, c.info.audioCapabilities, c.info.videoCapabilities), 4);
              case 4:
                za(f, 3);
                break;
              case 2:
                return Aa(f), G(f, d.destroy(), 5);
              case 5:
                return f.return([]);
              case 3:
                return e = [], G(f, Promise.all(c.sessionIds.map(function(g) {
                  return Q(function(h) {
                    if (1 == h.g) return xa(h, 2), G(h, ki(d, g), 4);
                    if (2 != h.g) return e.push(g), za(h, 0);
                    Aa(h);
                    I(h);
                  });
                })), 6);
              case 6:
                return G(f, d.destroy(), 7);
              case 7:
                return f.return(e);
            }
          });
        }
        function zA(a, b) {
          function c(d, e) {
            return d.robustness == e.robustness && d.contentType == e.contentType;
          }
          return a.keySystem == b.keySystem && a.licenseUri == b.licenseUri && Cd(a.audioCapabilities, b.audioCapabilities, c) && Cd(a.videoCapabilities, b.videoCapabilities, c);
        }
        ;
        function BA(a, b, c) {
          var d = b.presentationTimeline.getDuration();
          b = CA(b);
          return { offlineUri: null, originalManifestUri: a, duration: d, size: 0, expiration: Infinity, tracks: b, appMetadata: c, isIncomplete: false };
        }
        function DA(a, b) {
          var c = pA(new oA(a.zb(), a.Ta()), b), d = b.appMetadata || {};
          c = CA(c);
          return { offlineUri: a.toString(), originalManifestUri: b.originalManifestUri, duration: b.duration, size: b.size, expiration: b.expiration, tracks: c, appMetadata: d, isIncomplete: b.isIncomplete || false };
        }
        function CA(a) {
          var b = [], c = Gg(a.variants);
          c = t(c);
          for (var d = c.next(); !d.done; d = c.next()) b.push(wg(d.value));
          a = t(a.textStreams);
          for (c = a.next(); !c.done; c = a.next()) b.push(xg(c.value));
          return b;
        }
        ;
        function EA() {
          this.g = /* @__PURE__ */ new Map();
        }
        function FA(a, b) {
          var c = b.audio, d = b.video;
          c && !d && a.g.set(c.id, c.bandwidth || b.bandwidth);
          !c && d && a.g.set(d.id, d.bandwidth || b.bandwidth);
          if (c && d) {
            var e = c.bandwidth || 393216, f = d.bandwidth || b.bandwidth - e;
            0 >= f && (f = b.bandwidth);
            a.g.set(c.id, e);
            a.g.set(d.id, f);
          }
        }
        function GA(a, b) {
          a.g.set(b.id, b.bandwidth || 2048);
        }
        function HA(a, b) {
          a = a.g.get(b);
          null == a && (a = 0);
          return a;
        }
        ;
        function IA(a) {
          var b = this;
          if (a && a.constructor != X) throw new U(2, 9, 9008);
          this.g = this.h = null;
          a ? (this.h = a.g, this.g = a.xb()) : (this.h = Gn(), this.g = new fh());
          this.i = [];
          this.l = [];
          var c = !a;
          this.j = new sh(function() {
            var d, e, f, g, h;
            return Q(function(k2) {
              switch (k2.g) {
                case 1:
                  return G(k2, Promise.all(b.l.map(function(l) {
                    return Dz(l);
                  })), 2);
                case 2:
                  d = function() {
                  };
                  e = [];
                  f = t(b.i);
                  for (g = f.next(); !g.done; g = f.next()) h = g.value, e.push(h.then(d, d));
                  return G(k2, Promise.all(e), 3);
                case 3:
                  if (!c) {
                    k2.u(4);
                    break;
                  }
                  return G(k2, b.g.destroy(), 4);
                case 4:
                  b.h = null, b.g = null, I(k2);
              }
            });
          });
          this.m = 1e9;
        }
        function JA() {
          if (fc()) a: {
            var a = t(Vz.values());
            for (var b = a.next(); !b.done; b = a.next()) if (b = b.value, b = b()) {
              b.destroy();
              a = true;
              break a;
            }
            a = false;
          }
          else a = false;
          return a;
        }
        r = IA.prototype;
        r.destroy = function() {
          return this.j.destroy();
        };
        r.configure = function(a, b) {
          2 == arguments.length && "string" == typeof a && (a = nn(a, b));
          return Ln(this.h, a);
        };
        r.getConfiguration = function() {
          var a = Gn();
          Ln(a, this.h, Gn());
          return a;
        };
        r.xb = function() {
          return this.g;
        };
        r.store = function(a, b, c, d, e) {
          var f = this, g = this.getConfiguration(), h = new Cz(this.g);
          this.l.push(h);
          b = KA(this, a, b || {}, d || [], e || [], function() {
            var k2;
            return Q(function(l) {
              if (1 == l.g) return c ? l.u(2) : G(l, Ao(a, f.g, g.manifest.retryParameters), 3);
              2 != l.g && (c = l.h);
              k2 = Ui(a, c || null);
              return l.return(k2());
            });
          }, g, h);
          b = new Ug(b, function() {
            return Dz(h);
          });
          b.finally(function() {
            Bd(f.l, h);
          });
          return LA(this, b);
        };
        function KA(a, b, c, d, e, f, g, h) {
          var k2, l, m, n, p, q, u, w, v, x, z, C, D, F, B, A, H, E, L, M, J, K, N, O;
          return Q(function(P) {
            switch (P.g) {
              case 1:
                return MA(), l = k2 = null, m = new Uz(), q = p = n = null, xa(P, 2, 3), G(P, f(), 5);
              case 5:
                return k2 = P.h, G(P, NA(a, b, k2, g), 6);
              case 6:
                u = P.h;
                OA(a);
                w = !u.presentationTimeline.U() && !u.presentationTimeline.xc();
                if (!w) throw new U(2, 9, 9005, b);
                v = t(d);
                x = v.next();
              case 7:
                if (x.done) {
                  P.u(9);
                  break;
                }
                z = x.value;
                return G(P, PA(a, z, u), 10);
              case 10:
                C = P.h;
                u.imageStreams.push(C);
                OA(a);
                x = v.next();
                P.u(7);
                break;
              case 9:
                D = t(e), F = D.next();
              case 11:
                if (F.done) return ai(g.drm.clearKeys, u.variants), H = u.variants.some(function(R) {
                  if (R.audio) {
                    for (var S = t(R.audio.drmInfos), oa = S.next(); !oa.done; oa = S.next()) if (oa.value.licenseServerUri.startsWith("data:")) return true;
                  }
                  if (R.video) {
                    for (R = t(R.video.drmInfos), S = R.next(); !S.done; S = R.next()) if (S.value.licenseServerUri.startsWith("data:")) return true;
                  }
                  return false;
                }), E = g.offline.usePersistentLicense, H && (E = false), G(P, a.Kc(u, function(R) {
                  q = q || R;
                }, g, E), 15);
                B = F.value;
                return G(
                  P,
                  QA(a, u, B.uri, B.language, B.kind, B.mime, B.codecs),
                  14
                );
              case 14:
                A = P.h;
                u.textStreams.push(A);
                OA(a);
                F = D.next();
                P.u(11);
                break;
              case 15:
                l = P.h;
                OA(a);
                if (q) throw q;
                return G(P, RA(u, l, g, E), 16);
              case 16:
                return G(P, m.init(), 17);
              case 17:
                return OA(a), G(P, Wz(m), 18);
              case 18:
                return n = P.h, OA(a), L = SA(l, u, b, c, g, h, E), M = L.Wi, J = L.rg, G(P, n.Ta.addManifests([M]), 19);
              case 19:
                K = P.h;
                OA(a);
                p = K[0];
                OA(a);
                if (q) throw q;
                return G(P, TA(a, J, p, M, h, g, n.Ta, u, l, E), 20);
              case 20:
                return OA(a), UA(u, M, l, E), G(P, n.Ta.updateManifest(p, M), 21);
              case 21:
                return OA(a), N = new mA(
                  "manifest",
                  n.path.zb,
                  n.path.Ta,
                  p
                ), P.return(DA(N, M));
              case 3:
                return Da(P), G(P, m.destroy(), 22);
              case 22:
                if (!k2) {
                  P.u(23);
                  break;
                }
                return G(P, k2.stop(), 23);
              case 23:
                if (!l) {
                  P.u(25);
                  break;
                }
                return G(P, l.destroy(), 25);
              case 25:
                Ea(P, 0);
                break;
              case 2:
                O = Aa(P);
                if (null == p) {
                  P.u(27);
                  break;
                }
                return G(P, VA(p), 27);
              case 27:
                throw q || O;
            }
          });
        }
        function TA(a, b, c, d, e, f, g, h, k2, l) {
          var m, n, p, q, u, w, v, x, z, C, D;
          return Q(function(F) {
            switch (F.g) {
              case 1:
                m = {};
                n = 0;
                p = function() {
                  if (a.j.g || e.l) throw new U(2, 9, 7001);
                };
                q = function(B, A) {
                  var H, E, L, M, J, K, N, O, P;
                  return Q(function(R) {
                    if (1 == R.g) {
                      H = t(B);
                      E = H.next();
                      for (L = {}; !E.done; L = { Mb: void 0 }, E = H.next()) L.Mb = E.value, p(), M = yz(L.Mb, f), J = L.Mb.i, K = L.Mb.h, N = /* @__PURE__ */ function(S) {
                        return function(oa) {
                          var Z, Fa, Ia;
                          return Q(function(ka) {
                            switch (ka.g) {
                              case 1:
                                Z = S.Mb.g;
                                Fa = xz(Z);
                                if (!Z.aesKey) {
                                  ka.u(2);
                                  break;
                                }
                                return G(
                                  ka,
                                  wm(oa, Z.aesKey, S.Mb.j),
                                  3
                                );
                              case 3:
                                oa = ka.h;
                              case 2:
                                return G(ka, g.addSegments([{ data: oa }]), 4);
                              case 4:
                                Ia = ka.h, p(), m[Fa] = Ia[0], n += oa.byteLength, I(ka);
                            }
                          });
                        };
                      }(L), O = L.Mb.g, (P = O.Qb(false)) ? Hz(e, L.Mb.groupId, P, J, K, N) : Fz(e, L.Mb.groupId, M, J, K, N);
                      return G(R, Iz(e), 2);
                    }
                    p();
                    if (!A || e.l) return R.u(0);
                    UA(h, d, k2, l);
                    return G(R, g.updateManifest(c, d), 0);
                  });
                };
                u = false;
                xa(F, 2);
                if (!WA(h) || !u || XA(h)) {
                  F.u(4);
                  break;
                }
                return G(F, q(b.filter(function(B) {
                  return B.h;
                }), true), 5);
              case 5:
                return p(), b = b.filter(function(B) {
                  return !B.h;
                }), w = m, v = n, m = {}, n = 0, G(
                  F,
                  YA(g, c, d, w, v, function() {
                    return OA(a);
                  }),
                  6
                );
              case 6:
                p();
              case 4:
                if (u) {
                  F.u(7);
                  break;
                }
                return G(F, q(b, false), 8);
              case 8:
                return p(), x = m, z = n, m = {}, n = 0, G(F, YA(g, c, d, x, z, function() {
                  return p();
                }), 9);
              case 9:
                p();
              case 7:
                za(F, 0);
                break;
              case 2:
                return C = Aa(F), D = Object.values(m), G(F, g.removeSegments(D, function() {
                }), 10);
              case 10:
                throw C;
            }
          });
        }
        function VA(a) {
          var b, c, d, e;
          return Q(function(f) {
            switch (f.g) {
              case 1:
                return b = new Uz(), G(f, b.init(), 2);
              case 2:
                return G(f, Wz(b), 3);
              case 3:
                return c = f.h, d = new mA("manifest", c.path.zb, c.path.Ta, a), G(f, b.destroy(), 4);
              case 4:
                return e = new IA(), G(f, e.remove(d.toString()), 0);
            }
          });
        }
        function YA(a, b, c, d, e, f) {
          var g, h, k2, l, m, n, p, q, u, w, v;
          return Q(function(x) {
            switch (x.g) {
              case 1:
                g = false;
                xa(x, 2);
                h = true;
                k2 = t(c.streams);
                for (l = k2.next(); !l.done; l = k2.next()) for (m = l.value, n = t(m.segments), p = n.next(); !p.done; p = n.next()) q = p.value, u = q.pendingSegmentRefId ? d[q.pendingSegmentRefId] : null, null != u && (q.dataKey = u, q.pendingSegmentRefId = void 0), u = q.pendingInitSegmentRefId ? d[q.pendingInitSegmentRefId] : null, null != u && (q.initSegmentKey = u, q.pendingInitSegmentRefId = void 0), q.pendingSegmentRefId && (h = false), q.pendingInitSegmentRefId && (h = false);
                c.size += e;
                h && (c.isIncomplete = false);
                return G(x, a.updateManifest(b, c), 4);
              case 4:
                g = true;
                f();
                za(x, 0);
                break;
              case 2:
                return w = Aa(x), G(x, VA(b), 5);
              case 5:
                if (g) {
                  x.u(6);
                  break;
                }
                v = Object.values(d);
                return G(x, a.removeSegments(v, function() {
                }), 6);
              case 6:
                throw w;
            }
          });
        }
        function RA(a, b, c, d) {
          var e, f, g, h, k2, l, m, n, p, q, u, w, v, x, z, C, D, F, B, A, H, E, L, M, J, K, N, O, P, R;
          return Q(function(S) {
            switch (S.g) {
              case 1:
                return e = { width: Infinity, height: Infinity }, dg(a, c.restrictions, e), G(S, gg(b, a, d, c.drm.preferredKeySystems, c.drm.keySystemsMapping), 2);
              case 2:
                f = [];
                g = c.preferredDecodingAttributes;
                h = c.preferredVideoCodecs;
                k2 = c.preferredAudioCodecs;
                l = c.preferredTextFormats;
                bg(a, h, k2, g, l);
                m = t(a.variants);
                for (n = m.next(); !n.done; n = m.next()) p = n.value, f.push(wg(p));
                q = t(a.textStreams);
                for (u = q.next(); !u.done; u = q.next()) w = u.value, f.push(xg(w));
                v = t(a.imageStreams);
                for (x = v.next(); !x.done; x = v.next()) z = x.value, f.push(yg(z));
                return G(S, c.offline.trackSelectionCallback(f), 3);
              case 3:
                C = S.h;
                D = a.presentationTimeline.getDuration();
                F = 0;
                B = t(C);
                for (A = B.next(); !A.done; A = B.next()) H = A.value, E = H.bandwidth * D / 8, F += E;
                xa(S, 4);
                return G(S, c.offline.downloadSizeCallback(F), 6);
              case 6:
                L = S.h;
                if (!L) throw new U(2, 9, 9014);
                za(S, 5);
                break;
              case 4:
                M = Aa(S);
                if (M instanceof U) throw M;
                throw new U(2, 9, 9015);
              case 5:
                J = /* @__PURE__ */ new Set();
                K = /* @__PURE__ */ new Set();
                N = /* @__PURE__ */ new Set();
                O = t(C);
                for (P = O.next(); !P.done; P = O.next()) R = P.value, "variant" == R.type && J.add(R.id), "text" == R.type && K.add(R.id), "image" == R.type && N.add(R.id);
                a.variants = a.variants.filter(function(oa) {
                  return J.has(oa.id);
                });
                a.textStreams = a.textStreams.filter(function(oa) {
                  return K.has(oa.id);
                });
                a.imageStreams = a.imageStreams.filter(function(oa) {
                  return N.has(oa.id);
                });
                ZA(a);
                I(S);
            }
          });
        }
        function SA(a, b, c, d, e, f, g) {
          var h = BA(c, b, d), k2 = e.offline.progressCallback;
          Ez(f, function(u, w) {
            h.size = w;
            k2(h, u);
          }, function(u, w) {
            l && g && m == w && gi(a, "cenc", u);
          });
          var l = WA(b) && !XA(b), m = null;
          l && (m = $A.get(a.h.keySystem));
          for (var n = new EA(), p = t(b.textStreams), q = p.next(); !q.done; q = p.next()) n.g.set(q.value.id, 52);
          p = t(b.imageStreams);
          for (q = p.next(); !q.done; q = p.next()) GA(n, q.value);
          p = t(b.variants);
          for (q = p.next(); !q.done; q = p.next()) FA(n, q.value);
          f = aB(f, n, b, e);
          e = f.streams;
          f = f.rg;
          (n = a.h) && g && (n.initData = []);
          return { Wi: {
            creationTime: Date.now(),
            originalManifestUri: c,
            duration: b.presentationTimeline.getDuration(),
            size: 0,
            expiration: a.pd(),
            streams: e,
            sessionIds: g ? pi(a) : [],
            drmInfo: n,
            appMetadata: d,
            isIncomplete: true,
            sequenceMode: b.sequenceMode,
            type: b.type
          }, rg: f };
        }
        function WA(a) {
          return a.variants.some(function(b) {
            var c = b.audio && b.audio.encrypted;
            return b.video && b.video.encrypted || c;
          });
        }
        function XA(a) {
          return a.variants.some(function(b) {
            return (b.video ? b.video.drmInfos : []).concat(b.audio ? b.audio.drmInfos : []).some(function(c) {
              return c.initData && c.initData.length;
            });
          });
        }
        function UA(a, b, c, d) {
          b.expiration = c.pd();
          c = pi(c);
          b.sessionIds = d ? c : [];
          if (WA(a) && d && !c.length) throw new U(2, 9, 9007);
        }
        r.remove = function(a) {
          return bB(this, cB(this, a));
        };
        function cB(a, b) {
          var c, d, e, f, g, h;
          return Q(function(k2) {
            switch (k2.g) {
              case 1:
                MA();
                c = nA(b);
                if (null == c || "manifest" != c.g) throw new U(2, 9, 9004, b);
                d = c;
                e = new Uz();
                ya(k2, 2);
                return G(k2, e.init(), 4);
              case 4:
                return G(k2, Yz(e, d.zb(), d.Ta()), 5);
              case 5:
                return f = k2.h, G(k2, f.getManifests([d.key()]), 6);
              case 6:
                return g = k2.h, h = g[0], G(k2, Promise.all([dB(a, h, e), eB(f, d, h)]), 2);
              case 2:
                return Da(k2), G(k2, e.destroy(), 8);
              case 8:
                Ea(k2, 0);
            }
          });
        }
        function fB(a, b) {
          for (var c = [], d = t(a.streams), e = d.next(); !e.done; e = d.next()) e = e.value, b && "video" == e.type ? c.push({ contentType: kf(e.mimeType, e.codecs), robustness: a.drmInfo.videoRobustness }) : b || "audio" != e.type || c.push({ contentType: kf(e.mimeType, e.codecs), robustness: a.drmInfo.audioRobustness });
          return c;
        }
        function dB(a, b, c) {
          return Q(function(d) {
            return G(d, gB(a.g, a.h.drm, c, b), 0);
          });
        }
        function eB(a, b, c) {
          function d() {
          }
          var e = hB(c);
          DA(b, c);
          return Promise.all([a.removeSegments(e, d), a.removeManifests([b.key()], d)]);
        }
        r.oj = function() {
          return bB(this, iB(this));
        };
        function iB(a) {
          var b, c, d, e, f, g, h, k2, l, m;
          return Q(function(n) {
            switch (n.g) {
              case 1:
                return MA(), b = a.g, c = a.h.drm, d = new Uz(), e = false, ya(n, 2), G(n, d.init(), 4);
              case 4:
                f = [], Zz(d, function(p) {
                  return f.push(p);
                }), g = t(f), h = g.next();
              case 5:
                if (h.done) {
                  n.u(2);
                  break;
                }
                k2 = h.value;
                return G(n, k2.getAll(), 8);
              case 8:
                return l = n.h, G(n, yA(c, b, l), 9);
              case 9:
                return m = n.h, G(n, k2.remove(m), 10);
              case 10:
                m.length != l.length && (e = true);
                h = g.next();
                n.u(5);
                break;
              case 2:
                return Da(n), G(n, d.destroy(), 11);
              case 11:
                Ea(n, 3);
                break;
              case 3:
                return n.return(!e);
            }
          });
        }
        r.list = function() {
          return bB(this, jB());
        };
        function jB() {
          var a, b, c;
          return Q(function(d) {
            switch (d.g) {
              case 1:
                return MA(), a = [], b = new Uz(), ya(d, 2), G(d, b.init(), 4);
              case 4:
                return c = Promise.resolve(), Xz(b, function(e, f) {
                  c = c.then(function() {
                    var g;
                    return Q(function(h) {
                      if (1 == h.g) return G(h, f.getAllManifests(), 2);
                      g = h.h;
                      g.forEach(function(k2, l) {
                        k2 = DA(new mA("manifest", e.zb, e.Ta, l), k2);
                        a.push(k2);
                      });
                      I(h);
                    });
                  });
                }), G(d, c, 2);
              case 2:
                return Da(d), G(d, b.destroy(), 6);
              case 6:
                Ea(d, 3);
                break;
              case 3:
                return d.return(a);
            }
          });
        }
        function NA(a, b, c, d) {
          var e, f, g, h, k2;
          return Q(function(l) {
            if (1 == l.g) return e = null, f = a.g, g = {
              networkingEngine: f,
              filter: function() {
                return Promise.resolve();
              },
              makeTextStreamsForClosedCaptions: function() {
              },
              onTimelineRegionAdded: function() {
              },
              onEvent: function() {
              },
              onError: function(m) {
                e = m;
              },
              isLowLatencyMode: function() {
                return false;
              },
              updateDuration: function() {
              },
              newDrmInfo: function() {
              },
              onManifestUpdated: function() {
              },
              getBandwidthEstimate: function() {
                return d.abr.defaultBandwidthEstimate;
              },
              onMetadata: function() {
              },
              disableStream: function() {
              },
              addFont: function() {
              }
            }, c.configure(d.manifest), OA(a), G(l, c.start(b, g), 2);
            if (3 != l.g) return h = l.h, OA(a), k2 = kB(h), G(l, Promise.all(uh(k2, function(m) {
              return m.createSegmentIndex();
            })), 3);
            OA(a);
            if (e) throw e;
            return l.return(h);
          });
        }
        function PA(a, b, c) {
          var d, e, f, g, h, k2, l, m, n, p, q, u, w, v, x;
          return Q(function(z) {
            switch (z.g) {
              case 1:
                return G(z, lB(a, b), 2);
              case 2:
                d = z.h;
                if ("text/vtt" != d) throw new U(1, 2, 2017, b);
                return G(z, mB(b, a.g, a.h.streaming.retryParameters), 3);
              case 3:
                e = z.h;
                f = Af(d);
                if (!f) throw new U(2, 2, 2014, d);
                g = f();
                h = { periodStart: 0, segmentStart: 0, segmentEnd: c.presentationTimeline.getDuration(), vttOffset: 0 };
                k2 = Qb(e);
                l = g.parseMedia(k2, h, b, []);
                m = [];
                n = t(l);
                p = n.next();
                for (q = {}; !p.done; q = { Me: void 0, Mc: void 0 }, p = n.next()) q.Mc = p.value, q.Me = null, u = /* @__PURE__ */ function(C) {
                  return function() {
                    null == C.Me && (C.Me = Wc([b], [C.Mc.payload]));
                    return C.Me || [];
                  };
                }(q), w = new Bj(q.Mc.startTime, q.Mc.endTime, u, 0, null, null, 0, 0, Infinity), q.Mc.payload.includes("#xywh") && (v = q.Mc.payload.split("#xywh=")[1].split(","), 4 === v.length && w.De({ height: parseInt(v[3], 10), positionX: parseInt(v[0], 10), positionY: parseInt(v[1], 10), width: parseInt(v[2], 10) })), m.push(w);
                x = d;
                if (!m.length) {
                  z.u(4);
                  break;
                }
                return G(z, Ao(m[0].N()[0], a.g, a.h.manifest.retryParameters), 5);
              case 5:
                x = z.h;
              case 4:
                return z.return({
                  id: a.m++,
                  originalId: null,
                  groupId: null,
                  createSegmentIndex: function() {
                    return Promise.resolve();
                  },
                  segmentIndex: new Pl(m),
                  mimeType: x || "",
                  codecs: "",
                  kind: "",
                  encrypted: false,
                  drmInfos: [],
                  keyIds: /* @__PURE__ */ new Set(),
                  language: "und",
                  originalLanguage: null,
                  label: null,
                  type: "image",
                  primary: false,
                  trickModeVideo: null,
                  dependencyStream: null,
                  emsgSchemeIdUris: null,
                  roles: [],
                  forced: false,
                  channelsCount: null,
                  audioSamplingRate: null,
                  spatialAudio: false,
                  closedCaptions: null,
                  tilesLayout: "1x1",
                  accessibilityPurpose: null,
                  external: true,
                  fastSwitching: false,
                  fullMimeTypes: /* @__PURE__ */ new Set([kf(x || "", "")]),
                  isAudioMuxedInVideo: false,
                  baseOriginalId: null
                });
            }
          });
        }
        function QA(a, b, c, d, e, f, g) {
          var h, k2, l;
          return Q(function(m) {
            if (1 == m.g) return f ? m.u(2) : G(m, lB(a, c), 3);
            2 != m.g && (f = m.h);
            h = {
              id: a.m++,
              originalId: null,
              groupId: null,
              createSegmentIndex: function() {
                return Promise.resolve();
              },
              segmentIndex: Rl(0, b.presentationTimeline.getDuration(), [c]),
              mimeType: f || "",
              codecs: g || "",
              kind: e,
              encrypted: false,
              drmInfos: [],
              keyIds: /* @__PURE__ */ new Set(),
              language: d,
              originalLanguage: d,
              label: null,
              type: cd,
              primary: false,
              trickModeVideo: null,
              dependencyStream: null,
              emsgSchemeIdUris: null,
              roles: [],
              forced: false,
              channelsCount: null,
              audioSamplingRate: null,
              spatialAudio: false,
              closedCaptions: null,
              accessibilityPurpose: null,
              external: true,
              fastSwitching: false,
              fullMimeTypes: /* @__PURE__ */ new Set([kf(f || "", g || "")]),
              isAudioMuxedInVideo: false,
              baseOriginalId: null
            };
            k2 = kf(h.mimeType, h.codecs);
            l = Bf(k2);
            if (!l) throw new U(2, 2, 2014, f);
            return m.return(h);
          });
        }
        function lB(a, b) {
          var c;
          return Q(function(d) {
            switch (d.g) {
              case 1:
                return xa(d, 2), G(d, Ao(b, a.g, a.h.streaming.retryParameters), 4);
              case 4:
                c = d.h;
                za(d, 3);
                break;
              case 2:
                Aa(d);
              case 3:
                if (c) return d.return(c);
                throw new U(1, 2, 2011, b);
            }
          });
        }
        function mB(a, b, c) {
          var d, e, f;
          return Q(function(g) {
            if (1 == g.g) return d = qh, e = kh([a], c), e.method = "GET", G(g, b.request(d, e).promise, 2);
            f = g.h;
            return g.return(f.data);
          });
        }
        r.Kc = function(a, b, c, d) {
          var e = this, f;
          return Q(function(g) {
            return 1 == g.g ? (f = new Rh({ Wb: e.g, onError: b, pe: function() {
            }, onExpirationUpdated: function() {
            }, onEvent: function() {
            } }), f.configure(c.drm), G(g, Wh(f, a.variants, d), 2)) : 3 != g.g ? G(g, ii(f), 3) : g.return(f);
          });
        };
        function aB(a, b, c, d) {
          var e = /* @__PURE__ */ new Map(), f = kB(c), g = /* @__PURE__ */ new Map();
          f = t(f);
          for (var h = f.next(); !h.done; h = f.next()) {
            h = h.value;
            var k2 = nB(a, b, c, h, d, e);
            g.set(h.id, k2);
          }
          a = t(c.variants);
          for (b = a.next(); !b.done; b = a.next()) b = b.value, b.audio && g.get(b.audio.id).variantIds.push(b.id), b.video && g.get(b.video.id).variantIds.push(b.id);
          return { streams: Array.from(g.values()), rg: Array.from(e.values()) };
        }
        function nB(a, b, c, d, e, f) {
          var g = {
            id: d.id,
            originalId: d.originalId,
            groupId: d.groupId,
            primary: d.primary,
            type: d.type,
            mimeType: d.mimeType,
            codecs: d.codecs,
            frameRate: d.frameRate,
            pixelAspectRatio: d.pixelAspectRatio,
            hdr: d.hdr,
            colorGamut: d.colorGamut,
            videoLayout: d.videoLayout,
            kind: d.kind,
            language: d.language,
            originalLanguage: d.originalLanguage,
            label: d.label,
            width: d.width || null,
            height: d.height || null,
            encrypted: d.encrypted,
            keyIds: d.keyIds,
            segments: [],
            variantIds: [],
            roles: d.roles,
            forced: d.forced,
            channelsCount: d.channelsCount,
            audioSamplingRate: d.audioSamplingRate,
            spatialAudio: d.spatialAudio,
            closedCaptions: d.closedCaptions,
            tilesLayout: d.tilesLayout,
            mssPrivateData: d.mssPrivateData,
            external: d.external,
            fastSwitching: d.fastSwitching,
            isAudioMuxedInVideo: d.isAudioMuxedInVideo
          }, h = e.offline.numberOfParallelDownloads, k2 = 0 === h ? d.id : 0;
          oB(d, c.presentationTimeline.pb(), function(l, m) {
            var n = xz(l), p = void 0;
            if (!f.has(n)) {
              var q = l.endTime - l.startTime;
              q = HA(b, d.id) * q;
              q = Az(a.g, q);
              f.set(n, new wz(l, q, k2, false, m));
            }
            l.ca && (p = xz(l.ca), f.has(p) || (q = 0.5 * HA(b, d.id), q = Az(a.g, q), f.set(p, new wz(l.ca, q, k2, true, m))));
            g.segments.push({ pendingInitSegmentRefId: p, initSegmentKey: p ? 0 : null, startTime: l.startTime, endTime: l.endTime, appendWindowStart: l.appendWindowStart, appendWindowEnd: l.appendWindowEnd, timestampOffset: l.timestampOffset, tilesLayout: l.tilesLayout, pendingSegmentRefId: n, dataKey: 0, mimeType: l.mimeType, codecs: l.codecs, thumbnailSprite: l.thumbnailSprite });
            0 !== h && (k2 = (k2 + 1) % h);
          });
          return g;
        }
        function oB(a, b, c) {
          b = a.segmentIndex.find(b);
          if (null != b) for (var d = a.segmentIndex.get(b); d; ) c(d, b), d = a.segmentIndex.get(++b);
        }
        function OA(a) {
          if (a.j.g) throw new U(2, 9, 7001);
        }
        function MA() {
          if (!JA()) throw new U(2, 9, 9e3);
        }
        function bB(a, b) {
          return Q(function(c) {
            if (1 == c.g) return a.i.push(b), ya(c, 2), G(c, b, 4);
            if (2 != c.g) return c.return(c.h);
            Da(c);
            Bd(a.i, b);
            return Ea(c, 0);
          });
        }
        function LA(a, b) {
          var c = b.promise;
          a.i.push(c);
          return b.finally(function() {
            Bd(a.i, c);
          });
        }
        function hB(a) {
          var b = /* @__PURE__ */ new Set();
          a = t(a.streams);
          for (var c = a.next(); !c.done; c = a.next()) {
            c = t(c.value.segments);
            for (var d = c.next(); !d.done; d = c.next()) d = d.value, null != d.initSegmentKey && b.add(d.initSegmentKey), b.add(d.dataKey);
          }
          return Array.from(b);
        }
        function gB(a, b, c, d) {
          var e, f, g;
          return Q(function(h) {
            if (1 == h.g) {
              if (!d.drmInfo) return h.return();
              e = $z(c);
              f = d.sessionIds.map(function(k2) {
                return { sessionId: k2, keySystem: d.drmInfo.keySystem, licenseUri: d.drmInfo.licenseServerUri, serverCertificate: d.drmInfo.serverCertificate, audioCapabilities: fB(d, false), videoCapabilities: fB(d, true) };
              });
              return G(h, yA(b, a, f), 2);
            }
            return 3 != h.g ? (g = h.h, G(h, e.remove(g), 3)) : G(h, e.add(f.filter(function(k2) {
              return !g.includes(k2.sessionId);
            })), 0);
          });
        }
        function kB(a) {
          for (var b = /* @__PURE__ */ new Set(), c = t(a.variants), d = c.next(); !d.done; d = c.next()) d = d.value, d.audio && b.add(d.audio), d.video && b.add(d.video);
          c = t(a.textStreams);
          for (d = c.next(); !d.done; d = c.next()) b.add(d.value);
          a = t(a.imageStreams);
          for (c = a.next(); !c.done; c = a.next()) b.add(c.value);
          return b;
        }
        function ZA(a) {
          a.variants.map(function(f) {
            return f.video;
          });
          var b = new Set(a.variants.map(function(f) {
            return f.audio;
          }));
          a = a.textStreams;
          for (var c = t(b), d = c.next(); !d.done; d = c.next()) {
            d = t(b);
            for (var e = d.next(); !e.done; e = d.next()) ;
          }
          b = t(a);
          for (c = b.next(); !c.done; c = b.next()) for (c = t(a), d = c.next(); !d.done; d = c.next()) ;
        }
        T("shaka.offline.Storage", IA);
        IA.deleteAll = function() {
          var a;
          return Q(function(b) {
            return 1 == b.g ? (a = new Uz(), ya(b, 2), G(b, aA(a), 2)) : 5 != b.g ? (Da(b), G(b, a.destroy(), 5)) : Ea(b, 0);
          });
        };
        IA.prototype.list = IA.prototype.list;
        IA.prototype.removeEmeSessions = IA.prototype.oj;
        IA.prototype.remove = IA.prototype.remove;
        IA.prototype.store = IA.prototype.store;
        IA.prototype.getNetworkingEngine = IA.prototype.xb;
        IA.prototype.getConfiguration = IA.prototype.getConfiguration;
        IA.prototype.configure = IA.prototype.configure;
        IA.prototype.destroy = IA.prototype.destroy;
        IA.support = JA;
        var $A = (/* @__PURE__ */ new Map()).set("org.w3.clearkey", "1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha", "edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready", "9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation", "9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software", "9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware", "9a04f07998404286ab92e65be0885f95").set("com.huawei.wiseplay", "3d5e6d359b9a41e8b843dd3c6e72c42c");
        Qp("offline", JA);
        function pB() {
        }
        function qB(a, b) {
          a = { priority: b || 0, callback: a };
          for (b = 0; b < rB.length; b++) if (rB[b].priority < a.priority) {
            rB.splice(b, 0, a);
            return;
          }
          rB.push(a);
        }
        T("shaka.polyfill", pB);
        pB.register = qB;
        pB.installAll = function() {
          for (var a = t(rB), b = a.next(); !b.done; b = a.next()) {
            b = b.value;
            try {
              b.callback();
            } catch (c) {
              db("Error installing polyfill!", c);
            }
          }
        };
        var rB = [];
        function sB() {
        }
        function tB() {
          if (!Object.getOwnPropertyDescriptor(Element.prototype, "ariaHidden")) for (var a = t(["ariaHidden", "ariaLabel", "ariaPressed", "ariaSelected"]), b = a.next(); !b.done; b = a.next()) uB(b.value);
        }
        function uB(a) {
          var b = "aria-" + a.toLowerCase().replace(/^aria/, "");
          Object.defineProperty(Element.prototype, a, { get: function() {
            return this.getAttribute(b);
          }, set: function(c) {
            null == c || void 0 == c ? this.removeAttribute(b) : this.setAttribute(b, c);
          } });
        }
        pB.Aria = sB;
        sB.install = tB;
        qB(tB);
        function vB() {
        }
        function wB() {
          uc() || kc("Sky_STB") || xB();
        }
        pB.EncryptionScheme = vB;
        vB.install = wB;
        qB(wB, -2);
        function yB() {
        }
        function zB() {
          if (window2.Document) {
            var a = Element.prototype;
            a.requestFullscreen = a.requestFullscreen || a.mozRequestFullScreen || a.msRequestFullscreen || a.webkitRequestFullscreen;
            a = Document.prototype;
            a.exitFullscreen = a.exitFullscreen || a.mozCancelFullScreen || a.msExitFullscreen || a.webkitCancelFullScreen;
            "fullscreenElement" in document || (Object.defineProperty(document, "fullscreenElement", { get: function() {
              return document.mozFullScreenElement || document.msFullscreenElement || document.webkitCurrentFullScreenElement || document.webkitFullscreenElement;
            } }), Object.defineProperty(document, "fullscreenEnabled", { get: function() {
              return document.mozFullScreenEnabled || document.msFullscreenEnabled || document.webkitFullscreenEnabled;
            } }));
            document.addEventListener("webkitfullscreenchange", AB);
            document.addEventListener("webkitfullscreenerror", AB);
            document.addEventListener("mozfullscreenchange", AB);
            document.addEventListener("mozfullscreenerror", AB);
            document.addEventListener("MSFullscreenChange", AB);
            document.addEventListener("MSFullscreenError", AB);
          }
        }
        function AB(a) {
          var b = a.type.replace(/^(webkit|moz|MS)/, "").toLowerCase(), c = document.createEvent("Event");
          c.initEvent(b, a.bubbles, a.cancelable);
          a.target.dispatchEvent(c);
        }
        pB.Fullscreen = yB;
        yB.install = zB;
        qB(zB);
        function BB() {
        }
        function CB() {
          var a = true;
          if (qc() && !yc() && !zc() || rc() || tc() || uc() || nc() || lc() || vc() || sc() && !rc()) a = false;
          a && navigator.mediaCapabilities || (navigator.mediaCapabilities || (navigator.mediaCapabilities = {}), DB = navigator.mediaCapabilities, navigator.mediaCapabilities.decodingInfo = EB);
        }
        function EB(a) {
          var b, c, d, e, f, g, h, k2, l, m, n;
          return Q(function(p) {
            switch (p.g) {
              case 1:
                b = { supported: false, powerEfficient: true, smooth: true, keySystemAccess: null, configuration: a };
                c = a.video;
                d = a.audio;
                if ("media-source" != a.type) {
                  if ("file" == a.type) {
                    if (c && (e = c.contentType, f = gc(e), !f) || d && (g = d.contentType, h = gc(g), !h)) return p.return(b);
                  } else return p.return(b);
                  p.u(2);
                  break;
                }
                if (!fc()) return p.return(b);
                if (!c) {
                  p.u(3);
                  break;
                }
                return G(p, FB(c), 4);
              case 4:
                if (k2 = p.h, !k2) return p.return(b);
              case 3:
                if (d) {
                  var q = d.contentType;
                  qc() && d.spatialRendering && (q += "; spatialRendering=true");
                  l = ld(q);
                  if (!l) return p.return(b);
                }
              case 2:
                if (!a.keySystemConfiguration) return b.supported = true, p.return(b);
                m = a.keySystemConfiguration;
                return G(p, GB(c, d, m), 6);
              case 6:
                if (n = p.h) b.supported = true, b.keySystemAccess = n;
              case 5:
                return p.return(b);
            }
          });
        }
        function FB(a) {
          var b, c;
          return Q(function(d) {
            return 1 == d.g ? qc() ? G(d, HB(a), 3) : lc() ? (b = a.contentType, a.width && a.height && (b += "; width=" + a.width, b += "; height=" + a.height), a.framerate && (b += "; framerate=" + a.framerate), a.bitrate && (b += "; bitrate=" + a.bitrate), d.return(ld(b))) : d.u(2) : 2 != d.g ? (c = d.h, d.return(c)) : d.return(ld(a.contentType));
          });
        }
        function GB(a, b, c) {
          var d, e, f, g, h, k2, l, m, n, p, q;
          return Q(function(u) {
            switch (u.g) {
              case 1:
                d = [];
                e = [];
                c.audio && (f = { robustness: c.audio.robustness || "", contentType: b.contentType }, lc() && b.contentType.includes('codecs="ac-3"') && (f.contentType = 'audio/mp4; codecs="ec-3"'), c.audio.encryptionScheme && (f.encryptionScheme = c.audio.encryptionScheme), d.push(f));
                c.video && (g = { robustness: c.video.robustness || "", contentType: a.contentType }, c.video.encryptionScheme && (g.encryptionScheme = c.video.encryptionScheme), e.push(g));
                h = { initDataTypes: [c.initDataType], distinctiveIdentifier: c.distinctiveIdentifier, persistentState: c.persistentState, sessionTypes: c.sessionTypes };
                d.length && (h.audioCapabilities = d);
                e.length && (h.videoCapabilities = e);
                k2 = a ? a.contentType : "";
                l = b ? b.contentType : "";
                m = uf(k2) + ";" + tf(k2);
                n = uf(l) + ";" + tf(l);
                p = c.keySystem;
                q = null;
                xa(u, 2);
                if (cc.has(m + "#" + n + "#" + p)) {
                  q = cc.get(m + "#" + n + "#" + p) || null;
                  u.u(4);
                  break;
                }
                return G(u, navigator.requestMediaKeySystemAccess(c.keySystem, [h]), 5);
              case 5:
                q = u.h, cc.set(m + "#" + n + "#" + p, q);
              case 4:
                za(
                  u,
                  3
                );
                break;
              case 2:
                Aa(u);
              case 3:
                return u.return(q);
            }
          });
        }
        function HB(a) {
          var b, c, d, e, f;
          return Q(function(g) {
            if (1 == g.g) {
              if (!(window2.cast && cast.__platform__ && cast.__platform__.canDisplayType)) return g.return(ld(a.contentType));
              b = a.contentType;
              a.width && a.height && 1280 < a.width && 720 < a.height && (b += "; width=" + a.width + "; height=" + a.height);
              a.framerate && (c = Math.round(a.framerate), 24 > c || 30 < c) && (b += "; framerate=" + a.framerate);
              d = a.transferFunction || "";
              switch (d) {
                case "":
                case "srgb":
                  break;
                case "pq":
                  b += "; eotf=smpte2084";
                  break;
                case "hlg":
                  b += "; eotf=arib-std-b67";
                  break;
                default:
                  return g.return(false);
              }
              e = false;
              f = IB;
              return f.has(b) ? (e = f.get(b), g.u(2)) : G(g, cast.__platform__.canDisplayType(b), 3);
            }
            2 != g.g && (e = g.h, f.set(b, e));
            return g.return(e);
          });
        }
        pB.MediaCapabilities = BB;
        BB.install = CB;
        var DB = null;
        BB.originalMcap = DB;
        var IB = /* @__PURE__ */ new Map();
        qB(CB, -1);
        function JB() {
        }
        function KB() {
          var a = wc();
          if (window2.MediaSource || window2.ManagedMediaSource) a && window2.MediaSource ? 12 >= a ? (LB(), MB()) : 15 >= a && LB() : kc("DT_STB_BCM") ? (LB(), MB()) : (kc("Tizen 2") || mc() || kc("Tizen 4")) && NB();
          (window2.MediaSource || window2.ManagedMediaSource) && OB();
          window2.MediaSource && MediaSource.isTypeSupported('video/webm; codecs="vp9"') && !MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"') && PB();
        }
        function LB() {
          var a = MediaSource.prototype.addSourceBuffer;
          MediaSource.prototype.addSourceBuffer = function() {
            var b = a.apply(this, Na.apply(0, arguments));
            b.abort = function() {
            };
            return b;
          };
        }
        function MB() {
          var a = SourceBuffer.prototype.remove;
          SourceBuffer.prototype.remove = function(b, c) {
            return a.call(this, b, c - 1e-3);
          };
        }
        function OB() {
          if (window2.MediaSource) {
            var a = MediaSource.isTypeSupported.bind(MediaSource);
            MediaSource.isTypeSupported = function(c) {
              return "mp2t" != qf(c) && a(c);
            };
          }
          if (window2.ManagedMediaSource) {
            var b = ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);
            window2.ManagedMediaSource.isTypeSupported = function(c) {
              return "mp2t" != qf(c) && b(c);
            };
          }
        }
        function NB() {
          var a = MediaSource.isTypeSupported.bind(MediaSource);
          MediaSource.isTypeSupported = function(c) {
            return "opus" != tf(c) && a(c);
          };
          if (window2.ManagedMediaSource) {
            var b = ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);
            window2.ManagedMediaSource.isTypeSupported = function(c) {
              return "opus" != tf(c) && b(c);
            };
          }
        }
        function PB() {
          var a = MediaSource.isTypeSupported;
          nc() || (MediaSource.isTypeSupported = function(b) {
            var c = b.split(/ *; */), d = c.findIndex(function(g) {
              return g.startsWith("codecs=");
            });
            if (0 > d) return a(b);
            var e = c[d].replace("codecs=", "").replace(/"/g, "").split(/\s*,\s*/), f = e.findIndex(function(g) {
              return g.startsWith("vp09");
            });
            0 <= f && (e[f] = "vp9", c[d] = 'codecs="' + e.join(",") + '"', b = c.join("; "));
            return a(b);
          });
        }
        pB.MediaSource = JB;
        JB.install = KB;
        qB(KB);
        function QB() {
        }
        function RB() {
          screen.orientation && screen.orientation.unlock || (void 0 != screen.orientation ? SB() : void 0 != window2.orientation && TB());
        }
        function SB() {
          void 0 === screen.orientation.lock && (screen.orientation.lock = function() {
            return Promise.resolve();
          });
          void 0 === screen.orientation.unlock && (screen.orientation.unlock = function() {
          });
        }
        function TB() {
          function a() {
            switch (window2.orientation) {
              case -90:
                b.type = "landscape-secondary";
                b.angle = 270;
                break;
              case 0:
                b.type = "portrait-primary";
                b.angle = 0;
                break;
              case 90:
                b.type = "landscape-primary";
                b.angle = 90;
                break;
              case 180:
                b.type = "portrait-secondary", b.angle = 180;
            }
          }
          var b = new UB();
          screen.orientation = b;
          a();
          window2.addEventListener("orientationchange", function() {
            a();
            var c = new V("change");
            b.dispatchEvent(c);
          });
        }
        pB.Orientation = QB;
        QB.install = RB;
        function UB() {
          ch.call(this);
          this.type = "";
          this.angle = 0;
        }
        qa(UB, ch);
        UB.prototype.lock = function(a) {
          function b(d) {
            return screen.lockOrientation ? screen.lockOrientation(d) : screen.mozLockOrientation ? screen.mozLockOrientation(d) : screen.msLockOrientation ? screen.msLockOrientation(d) : false;
          }
          var c = false;
          switch (a) {
            case "natural":
              c = b("default");
              break;
            case "any":
              c = true;
              this.unlock();
              break;
            default:
              c = b(a);
          }
          if (c) return Promise.resolve();
          a = Error("screen.orientation.lock() is not available on this device");
          a.name = "NotSupportedError";
          a.code = DOMException.NOT_SUPPORTED_ERR;
          return Promise.reject(a);
        };
        UB.prototype.unlock = function() {
          screen.unlockOrientation ? screen.unlockOrientation() : screen.mozUnlockOrientation ? screen.mozUnlockOrientation() : screen.msUnlockOrientation && screen.msUnlockOrientation();
        };
        qB(RB);
        function VB() {
        }
        var WB, XB, YB, ZB, $B, aC;
        function bC(a) {
          if (window2.HTMLVideoElement && window2.WebKitMediaKeys) {
            if (void 0 === a ? 0 : a) WB = true, XB = Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype, "mediaKeys"), YB = HTMLMediaElement.prototype.setMediaKeys, ZB = window2.MediaKeys, $B = window2.MediaKeySystemAccess, aC = navigator.requestMediaKeySystemAccess;
            delete HTMLMediaElement.prototype.mediaKeys;
            HTMLMediaElement.prototype.mediaKeys = null;
            HTMLMediaElement.prototype.setMediaKeys = cC;
            window2.MediaKeys = dC;
            window2.MediaKeySystemAccess = eC;
            navigator.requestMediaKeySystemAccess = fC;
            window2.shakaMediaKeysPolyfill = gC;
            og.clear();
            cc.clear();
          }
        }
        function fC(a, b) {
          try {
            var c = new eC(a, b);
            return Promise.resolve(c);
          } catch (d) {
            return Promise.reject(d);
          }
        }
        function cC(a) {
          var b = this.mediaKeys;
          b && b != a && hC(b, null);
          delete this.mediaKeys;
          return (this.mediaKeys = a) ? hC(a, this) : Promise.resolve();
        }
        function iC(a) {
          a = Qb(a.initData);
          if (Vb(a).getUint32(0, true) + 4 != a.byteLength) throw new RangeError("Malformed FairPlay init data");
          a = Hc(a.subarray(4), true);
          a = Kc(a);
          var b = new Event("encrypted");
          b.initDataType = "skd";
          b.initData = Sb(a);
          this.dispatchEvent(b);
        }
        pB.PatchedMediaKeysApple = VB;
        VB.uninstall = function() {
          WB && (WB = false, Object.defineProperty(HTMLMediaElement.prototype, "mediaKeys", XB), HTMLMediaElement.prototype.setMediaKeys = YB, window2.MediaKeys = ZB, window2.MediaKeySystemAccess = $B, navigator.requestMediaKeySystemAccess = aC, XB = aC = YB = $B = ZB = null, window2.shakaMediaKeysPolyfill = "", og.clear(), cc.clear());
        };
        VB.install = bC;
        function eC(a, b) {
          this.keySystem = a;
          if (a.startsWith("com.apple.fps")) for (a = t(b), b = a.next(); !b.done; b = a.next()) {
            var c = b.value;
            if ("required" == c.persistentState) b = null;
            else {
              b = { audioCapabilities: [], videoCapabilities: [], persistentState: "optional", distinctiveIdentifier: "optional", initDataTypes: c.initDataTypes, sessionTypes: ["temporary"], label: c.label };
              var d = false, e = false;
              if (c.audioCapabilities) for (var f = t(c.audioCapabilities), g = f.next(); !g.done; g = f.next()) g = g.value, g.contentType && (d = true, WebKitMediaKeys.isTypeSupported(
                this.keySystem,
                g.contentType.split(";")[0]
              ) && (b.audioCapabilities.push(g), e = true));
              if (c.videoCapabilities) for (c = t(c.videoCapabilities), f = c.next(); !f.done; f = c.next()) f = f.value, f.contentType && (d = true, WebKitMediaKeys.isTypeSupported(this.keySystem, f.contentType.split(";")[0]) && (b.videoCapabilities.push(f), e = true));
              d || (e = WebKitMediaKeys.isTypeSupported(this.keySystem, "video/mp4"));
              b = e ? b : null;
            }
            if (b) {
              this.g = b;
              return;
            }
          }
          a = Error("Unsupported keySystem");
          a.name = "NotSupportedError";
          a.code = DOMException.NOT_SUPPORTED_ERR;
          throw a;
        }
        eC.prototype.createMediaKeys = function() {
          var a = new dC(this.keySystem);
          return Promise.resolve(a);
        };
        eC.prototype.getConfiguration = function() {
          return this.g;
        };
        function dC(a) {
          this.h = new WebKitMediaKeys(a);
          this.g = new lb();
        }
        dC.prototype.createSession = function(a) {
          a = a || "temporary";
          if ("temporary" != a) throw new TypeError("Session type " + a + " is unsupported on this platform.");
          return new jC(this.h, a);
        };
        dC.prototype.setServerCertificate = function() {
          return Promise.resolve(false);
        };
        function hC(a, b) {
          a.g.Qa();
          if (!b) return Promise.resolve();
          a.g.D(b, "webkitneedkey", iC);
          try {
            return Bl(b, HTMLMediaElement.HAVE_METADATA, a.g, function() {
              b.webkitSetMediaKeys(a.h);
            }), Promise.resolve();
          } catch (c) {
            return Promise.reject(c);
          }
        }
        dC.prototype.getStatusForPolicy = function() {
          return Promise.resolve("usable");
        };
        function jC(a) {
          ch.call(this);
          this.i = null;
          this.l = a;
          this.g = this.h = null;
          this.j = new lb();
          this.sessionId = "";
          this.expiration = NaN;
          this.closed = new Tg();
          this.keyStatuses = new kC();
        }
        qa(jC, ch);
        r = jC.prototype;
        r.generateRequest = function(a, b) {
          var c = this;
          this.h = new Tg();
          try {
            var d = this.l.createSession("video/mp4", Qb(b));
            this.i = d;
            this.sessionId = d.sessionId || "";
            this.j.D(this.i, "webkitkeymessage", function(e) {
              c.h && (c.h.resolve(), c.h = null);
              e = (/* @__PURE__ */ new Map()).set("messageType", void 0 == c.keyStatuses.cc() ? "license-request" : "license-renewal").set("message", Sb(e.message));
              e = new V("message", e);
              c.dispatchEvent(e);
            });
            this.j.D(d, "webkitkeyadded", function() {
              c.g && (lC(c, "usable"), c.g.resolve(), c.g = null);
            });
            this.j.D(
              d,
              "webkitkeyerror",
              function() {
                var e = Error("EME PatchedMediaKeysApple key error");
                e.errorCode = c.i.error;
                if (null != c.h) c.h.reject(e), c.h = null;
                else if (null != c.g) c.g.reject(e), c.g = null;
                else switch (c.i.error.code) {
                  case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:
                  case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:
                    lC(c, "output-not-allowed");
                    break;
                  default:
                    lC(c, "internal-error");
                }
              }
            );
            lC(this, "status-pending");
          } catch (e) {
            this.h.reject(e);
          }
          return this.h;
        };
        r.load = function() {
          return Promise.reject(Error("MediaKeySession.load not yet supported"));
        };
        r.update = function(a) {
          this.g = new Tg();
          try {
            this.i.update(Qb(a));
          } catch (b) {
            this.g.reject(b);
          }
          return this.g;
        };
        r.close = function() {
          try {
            this.i.close(), this.closed.resolve(), this.j.Qa();
          } catch (a) {
            this.closed.reject(a);
          }
          return this.closed;
        };
        r.remove = function() {
          return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"));
        };
        function lC(a, b) {
          var c = a.keyStatuses;
          c.size = void 0 == b ? 0 : 1;
          c.g = b;
          b = new V("keystatuseschange");
          a.dispatchEvent(b);
        }
        function kC() {
          this.size = 0;
          this.g = void 0;
        }
        r = kC.prototype;
        r.cc = function() {
          return this.g;
        };
        r.forEach = function(a) {
          this.g && a(this.g, bc.value());
        };
        r.get = function(a) {
          if (this.has(a)) return this.g;
        };
        r.has = function(a) {
          var b = bc.value();
          return this.g && Pb(a, b) ? true : false;
        };
        r.entries = function() {
        };
        r.keys = function() {
        };
        r.values = function() {
        };
        var gC = "apple";
        qB(function() {
          window2.HTMLVideoElement && window2.WebKitMediaKeys && (navigator.requestMediaKeySystemAccess && MediaKeySystemAccess.prototype.getConfiguration || bC());
        });
        function mC() {
        }
        function nC() {
          window2.MediaKeys && (!MediaKeys.prototype.setServerCertificate || mc() || kc("Tizen 4") || kc("Tizen 5.0") || oc()) && (MediaKeys.prototype.setServerCertificate = oC);
        }
        function oC() {
          return Promise.resolve(false);
        }
        pB.PatchedMediaKeysCert = mC;
        mC.install = nC;
        qB(nC);
        function pC() {
        }
        function qC() {
          if (!(!window2.HTMLVideoElement || navigator.requestMediaKeySystemAccess && MediaKeySystemAccess.prototype.getConfiguration)) {
            if (HTMLMediaElement.prototype.webkitGenerateKeyRequest) rC = "webkit";
            else if (!HTMLMediaElement.prototype.generateKeyRequest) return;
            navigator.requestMediaKeySystemAccess = sC;
            delete HTMLMediaElement.prototype.mediaKeys;
            HTMLMediaElement.prototype.mediaKeys = null;
            HTMLMediaElement.prototype.setMediaKeys = tC;
            window2.MediaKeys = uC;
            window2.MediaKeySystemAccess = vC;
            window2.shakaMediaKeysPolyfill = wC;
          }
        }
        function xC(a) {
          var b = rC;
          return b ? b + a.charAt(0).toUpperCase() + a.slice(1) : a;
        }
        function sC(a, b) {
          try {
            var c = new vC(a, b);
            return Promise.resolve(c);
          } catch (d) {
            return Promise.reject(d);
          }
        }
        function tC(a) {
          var b = this.mediaKeys;
          b && b != a && yC(b, null);
          delete this.mediaKeys;
          (this.mediaKeys = a) && yC(a, this);
          return Promise.resolve();
        }
        pB.PatchedMediaKeysWebkit = pC;
        pC.install = qC;
        function vC(a, b) {
          this.g = this.keySystem = a;
          var c = false;
          "org.w3.clearkey" == a && (this.g = "webkit-org.w3.clearkey", c = false);
          var d = false;
          var e = document.getElementsByTagName("video");
          e = e.length ? e[0] : document.createElement("video");
          b = t(b);
          for (var f = b.next(); !f.done; f = b.next()) {
            f = f.value;
            var g = { audioCapabilities: [], videoCapabilities: [], persistentState: "optional", distinctiveIdentifier: "optional", initDataTypes: f.initDataTypes, sessionTypes: ["temporary"], label: f.label }, h = false;
            if (f.audioCapabilities) for (var k2 = t(f.audioCapabilities), l = k2.next(); !l.done; l = k2.next()) l = l.value, l.contentType && (h = true, e.canPlayType(l.contentType.split(";")[0], this.g) && (g.audioCapabilities.push(l), d = true));
            if (f.videoCapabilities) for (k2 = t(f.videoCapabilities), l = k2.next(); !l.done; l = k2.next()) l = l.value, l.contentType && (h = true, e.canPlayType(l.contentType, this.g) && (g.videoCapabilities.push(l), d = true));
            h || (d = e.canPlayType("video/mp4", this.g) || e.canPlayType("video/webm", this.g));
            "required" == f.persistentState && (c ? (g.persistentState = "required", g.sessionTypes = ["persistent-license"]) : d = false);
            if (d) {
              this.h = g;
              return;
            }
          }
          c = "Unsupported keySystem";
          if ("org.w3.clearkey" == a || "com.widevine.alpha" == a) c = "None of the requested configurations were supported.";
          a = Error(c);
          a.name = "NotSupportedError";
          a.code = DOMException.NOT_SUPPORTED_ERR;
          throw a;
        }
        vC.prototype.createMediaKeys = function() {
          var a = new uC(this.g);
          return Promise.resolve(a);
        };
        vC.prototype.getConfiguration = function() {
          return this.h;
        };
        function uC(a) {
          this.l = a;
          this.h = null;
          this.g = new lb();
          this.i = [];
          this.j = /* @__PURE__ */ new Map();
        }
        function yC(a, b) {
          a.h = b;
          a.g.Qa();
          var c = rC;
          b && (a.g.D(b, c + "needkey", function(d) {
            var e = new CustomEvent("encrypted");
            e.initDataType = "cenc";
            e.initData = Sb(d.initData);
            a.h.dispatchEvent(e);
          }), a.g.D(b, c + "keymessage", function(d) {
            var e = zC(a, d.sessionId);
            e && (d = (/* @__PURE__ */ new Map()).set("messageType", void 0 == e.keyStatuses.cc() ? "licenserequest" : "licenserenewal").set("message", d.message), d = new V("message", d), e.h && (e.h.resolve(), e.h = null), e.dispatchEvent(d));
          }), a.g.D(b, c + "keyadded", function(d) {
            (d = zC(a, d.sessionId)) && d.ready();
          }), a.g.D(b, c + "keyerror", function(d) {
            var e = zC(a, d.sessionId);
            if (e) {
              var f = Error("EME v0.1b key error"), g = d.errorCode;
              g.systemCode = d.systemCode;
              f.errorCode = g;
              !d.sessionId && e.h ? (45 == d.systemCode && (f.message = "Unsupported session type."), e.h.reject(f), e.h = null) : d.sessionId && e.g ? (e.g.reject(f), e.g = null) : (f = d.systemCode, d.errorCode.code == MediaKeyError.MEDIA_KEYERR_OUTPUT ? AC(e, "output-restricted") : 1 == f ? AC(e, "expired") : AC(e, "internal-error"));
            }
          }));
        }
        uC.prototype.createSession = function(a) {
          a = a || "temporary";
          if ("temporary" != a && "persistent-license" != a) throw new TypeError("Session type " + a + " is unsupported on this platform.");
          var b = this.h || document.createElement("video");
          b.src || (b.src = "about:blank");
          a = new BC(b, this.l, a);
          this.i.push(a);
          return a;
        };
        uC.prototype.setServerCertificate = function() {
          return Promise.resolve(false);
        };
        uC.prototype.getStatusForPolicy = function() {
          return Promise.resolve("usable");
        };
        function zC(a, b) {
          var c = a.j.get(b);
          return c ? c : (c = a.i.shift()) ? (c.sessionId = b, a.j.set(b, c), c) : null;
        }
        function BC(a, b, c) {
          ch.call(this);
          this.j = a;
          this.m = false;
          this.g = this.h = null;
          this.i = b;
          this.l = c;
          this.sessionId = "";
          this.expiration = NaN;
          this.closed = new Tg();
          this.keyStatuses = new CC();
        }
        qa(BC, ch);
        r = BC.prototype;
        r.ready = function() {
          AC(this, "usable");
          this.g && this.g.resolve();
          this.g = null;
        };
        function DC(a, b, c) {
          if (a.m) return Promise.reject(Error("The session is already initialized."));
          a.m = true;
          try {
            if ("persistent-license" == a.l) if (c) var d = Qb(Kc("LOAD_SESSION|" + c));
            else {
              var e = Kc("PERSISTENT|");
              d = Vc(e, b);
            }
            else d = Qb(b);
          } catch (g) {
            return Promise.reject(g);
          }
          a.h = new Tg();
          var f = xC("generateKeyRequest");
          try {
            a.j[f](a.i, d);
          } catch (g) {
            if ("InvalidStateError" != g.name) return a.h = null, Promise.reject(g);
            new ec(function() {
              try {
                a.j[f](a.i, d);
              } catch (h) {
                a.h.reject(h), a.h = null;
              }
            }).da(0.01);
          }
          return a.h;
        }
        function EC(a, b, c) {
          if (a.g) a.g.then(function() {
            return EC(a, b, c);
          }).catch(function() {
            return EC(a, b, c);
          });
          else {
            a.g = b;
            if ("webkit-org.w3.clearkey" == a.i) {
              var d = Gc(c);
              var e = JSON.parse(d);
              "oct" != e.keys[0].kty && (a.g.reject(Error("Response is not a valid JSON Web Key Set.")), a.g = null);
              d = Sc(e.keys[0].k);
              e = Sc(e.keys[0].kid);
            } else d = Qb(c), e = null;
            var f = xC("addKey");
            try {
              a.j[f](a.i, d, e, a.sessionId);
            } catch (g) {
              a.g.reject(g), a.g = null;
            }
          }
        }
        function AC(a, b) {
          var c = a.keyStatuses;
          c.size = void 0 == b ? 0 : 1;
          c.g = b;
          b = new V("keystatuseschange");
          a.dispatchEvent(b);
        }
        r.generateRequest = function(a, b) {
          return DC(this, b, null);
        };
        r.load = function(a) {
          return "persistent-license" == this.l ? DC(this, null, a) : Promise.reject(Error("Not a persistent session."));
        };
        r.update = function(a) {
          var b = new Tg();
          EC(this, b, a);
          return b;
        };
        r.close = function() {
          if ("persistent-license" != this.l) {
            if (!this.sessionId) return this.closed.reject(Error("The session is not callable.")), this.closed;
            var a = xC("cancelKeyRequest");
            try {
              this.j[a](this.i, this.sessionId);
            } catch (b) {
            }
          }
          this.closed.resolve();
          return this.closed;
        };
        r.remove = function() {
          return "persistent-license" != this.l ? Promise.reject(Error("Not a persistent session.")) : this.close();
        };
        function CC() {
          this.size = 0;
          this.g = void 0;
        }
        r = CC.prototype;
        r.cc = function() {
          return this.g;
        };
        r.forEach = function(a) {
          this.g && a(this.g, bc.value());
        };
        r.get = function(a) {
          if (this.has(a)) return this.g;
        };
        r.has = function(a) {
          var b = bc.value();
          return this.g && Pb(a, b) ? true : false;
        };
        r.entries = function() {
        };
        r.keys = function() {
        };
        r.values = function() {
        };
        var rC = "", wC = "webkit";
        qB(qC);
        function FC() {
        }
        function GC() {
          if (window2.HTMLVideoElement) {
            var a = HTMLVideoElement.prototype;
            a.requestPictureInPicture && document.exitPictureInPicture || !a.webkitSupportsPresentationMode || (document.pictureInPictureEnabled = true, document.pictureInPictureElement = null, a.requestPictureInPicture = HC, Object.defineProperty(a, "disablePictureInPicture", { get: IC, set: JC, enumerable: true, configurable: true }), document.exitPictureInPicture = KC, document.addEventListener("webkitpresentationmodechanged", LC, true));
          }
        }
        function LC(a) {
          a = a.target;
          if ("picture-in-picture" == a.webkitPresentationMode) {
            document.pictureInPictureElement = a;
            var b = new Event("enterpictureinpicture");
            a.dispatchEvent(b);
          } else document.pictureInPictureElement == a && (document.pictureInPictureElement = null), b = new Event("leavepictureinpicture"), a.dispatchEvent(b);
        }
        function HC() {
          return this.webkitSupportsPresentationMode("picture-in-picture") ? (this.webkitSetPresentationMode("picture-in-picture"), document.pictureInPictureElement = this, Promise.resolve()) : Promise.reject(Error("PiP not allowed by video element"));
        }
        function KC() {
          var a = document.pictureInPictureElement;
          return a ? (a.webkitSetPresentationMode("inline"), document.pictureInPictureElement = null, Promise.resolve()) : Promise.reject(Error("No picture in picture element found"));
        }
        function IC() {
          return this.hasAttribute("disablePictureInPicture") ? true : !this.webkitSupportsPresentationMode("picture-in-picture");
        }
        function JC(a) {
          a ? this.setAttribute("disablePictureInPicture", "") : this.removeAttribute("disablePictureInPicture");
        }
        pB.PiPWebkit = FC;
        FC.install = GC;
        qB(GC);
        function MC() {
        }
        function NC() {
          window2.crypto && ("randomUUID" in window2.crypto || (window2.crypto.randomUUID = OC));
        }
        function OC() {
          var a = URL.createObjectURL(new Blob()), b = a.toString();
          URL.revokeObjectURL(a);
          return b.substr(b.lastIndexOf("/") + 1);
        }
        pB.RandomUUID = MC;
        MC.install = NC;
        qB(NC);
        function PC() {
        }
        function QC() {
          var a = Symbol.prototype;
          "description" in a || Object.defineProperty(a, "description", { get: RC });
        }
        function RC() {
          var a = /\((.*)\)/.exec(this.toString());
          return a ? a[1] : void 0;
        }
        pB.Symbol = PC;
        PC.install = QC;
        qB(QC);
        function SC() {
        }
        function TC() {
          if (window2.HTMLMediaElement) {
            var a = HTMLMediaElement.prototype.play;
            HTMLMediaElement.prototype.play = function() {
              var b = a.apply(this);
              b && b.catch(function() {
              });
              return b;
            };
          }
        }
        pB.VideoPlayPromise = SC;
        SC.install = TC;
        qB(TC);
        function UC() {
        }
        function VC() {
          if (window2.HTMLVideoElement) {
            var a = HTMLVideoElement.prototype;
            !a.getVideoPlaybackQuality && ("webkitDroppedFrameCount" in a || oc()) && (a.getVideoPlaybackQuality = WC);
          }
        }
        function WC() {
          return { droppedVideoFrames: this.webkitDroppedFrameCount, totalVideoFrames: this.webkitDecodedFrameCount, corruptedVideoFrames: 0, creationTime: NaN, totalFrameDelay: 0 };
        }
        pB.VideoPlaybackQuality = UC;
        UC.install = VC;
        qB(VC);
        function XC() {
        }
        function YC() {
          if (!window2.VTTCue && window2.TextTrackCue) {
            var a = null, b = TextTrackCue.length;
            if (3 == b) a = ZC;
            else if (6 == b) a = $C;
            else {
              try {
                var c = !!ZC(1, 2, "");
              } catch (d) {
                c = false;
              }
              c && (a = ZC);
            }
            a && (window2.VTTCue = function(d, e, f) {
              return a(d, e, f);
            });
          }
        }
        function ZC(a, b, c) {
          return new window2.TextTrackCue(a, b, c);
        }
        function $C(a, b, c) {
          return new window2.TextTrackCue(a + "-" + b + "-" + c, a, b, c);
        }
        pB.VTTCue = XC;
        XC.install = YC;
        qB(YC);
        function aD() {
        }
        aD.prototype.parseInit = function() {
        };
        aD.prototype.setSequenceMode = function() {
        };
        aD.prototype.setManifestType = function() {
        };
        aD.prototype.parseMedia = function(a, b) {
          var c = null, d = [];
          a = Gc(a).split(/\r?\n/);
          a = t(a);
          for (var e = a.next(); !e.done; e = a.next()) if ((e = e.value) && !/^\s+$/.test(e) && (e = bD.exec(e))) {
            var f = cD.exec(e[1]);
            f = 60 * parseInt(f[1], 10) + parseFloat(f[2].replace(",", "."));
            e = new ze(f, b.segmentEnd ? b.segmentEnd : f + 2, e[2]);
            c && (c.endTime = f, d.push(c));
            c = e;
          }
          c && d.push(c);
          return d;
        };
        T("shaka.text.LrcTextParser", aD);
        aD.prototype.parseMedia = aD.prototype.parseMedia;
        aD.prototype.setManifestType = aD.prototype.setManifestType;
        aD.prototype.setSequenceMode = aD.prototype.setSequenceMode;
        aD.prototype.parseInit = aD.prototype.parseInit;
        var bD = /^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/, cD = /^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;
        yf("application/x-subtitle-lrc", function() {
          return new aD();
        });
        function dD() {
        }
        dD.prototype.parseInit = function() {
        };
        dD.prototype.setSequenceMode = function() {
        };
        dD.prototype.setManifestType = function() {
        };
        dD.prototype.parseMedia = function(a, b, c, d) {
          var e = Gc(a);
          a = [];
          if ("" == e) return a;
          var f = Qd(e, "tt", true);
          if (!f) throw new U(2, 2, 2005, "Failed to parse TTML.");
          e = $d(f, "body")[0];
          if (!e) return [];
          var g = ie(f, eD, "frameRate"), h = ie(f, eD, "subFrameRate"), k2 = ie(f, eD, "frameRateMultiplier"), l = ie(f, eD, "tickRate"), m = ie(f, eD, "cellResolution"), n = f.attributes["xml:space"] || "default", p = ie(f, fD, "extent");
          if ("default" != n && "preserve" != n) throw new U(2, 2, 2005, "Invalid xml:space value: " + n);
          n = "default" == n;
          g = new gD(g, h, k2, l);
          m = hD(m);
          h = $d(f, "metadata")[0];
          h = (h ? h.children : []).filter(function(w) {
            return "\n" != w;
          });
          k2 = $d(f, "style");
          f = $d(f, "region");
          l = [];
          for (var q = t(f), u = q.next(); !u.done; u = q.next()) (u = iD(u.value, k2, p)) && l.push(u);
          if (Xd(e, "p").length) throw new U(2, 2, 2001, "<p> can only be inside <div> in TTML");
          p = t(Xd(e, "div"));
          for (q = p.next(); !q.done; q = p.next()) if (Xd(q.value, "span").length) throw new U(2, 2, 2001, "<span> can only be inside <p> in TTML");
          if (b = jD(e, b, g, h, k2, f, l, n, m, null, false, c, d)) b.backgroundColor || (b.backgroundColor = "transparent"), a.push(b);
          return a;
        };
        function jD(a, b, c, d, e, f, g, h, k2, l, m, n, p) {
          var q = l;
          if (Vd(a)) {
            if (!m) return null;
            var u = { tagName: "span", children: [Yd(a)], attributes: {}, parent: null };
          } else u = a;
          for (var w = null, v = t(kD), x = v.next(); !x.done && !(w = lD(u, "backgroundImage", d, "#", x.value)[0]); x = v.next()) ;
          v = null;
          x = ie(u, kD, "backgroundImage");
          var z = /^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/;
          if (x && z.test(x)) {
            v = parseInt(x.split(":").pop(), 10) - 1;
            if (v >= p.length) return null;
            v = p[v];
          } else n && x && !x.startsWith("#") && (z = new yb(n), x = new yb(x), (x = z.resolve(x).toString()) && (v = x));
          if ("p" == a.tagName || w || v) m = true;
          a = m;
          x = "default" == (u.attributes["xml:space"] || (h ? "default" : "preserve"));
          z = u.children.every(Vd);
          h = [];
          if (!z) for (var C = t(u.children), D = C.next(); !D.done; D = C.next()) (D = jD(D.value, b, c, d, e, f, g, x, k2, u, m, n, p)) && h.push(D);
          d = null != l;
          n = Yd(u);
          n = u.children.length && n && /\S/.test(n);
          C = u.attributes.begin || u.attributes.end || u.attributes.dur;
          if (!(C || n || "br" == u.tagName || 0 != h.length || d && !x)) return null;
          p = mD(u, c);
          n = p.start;
          for (p = p.end; q && q.tagName && "tt" != q.tagName; ) p = nD(q, c, n, p), n = p.start, p = p.end, q = q.parent;
          null == n && (n = 0);
          n += b.periodStart;
          p = null == p ? Infinity : p + b.periodStart;
          n = Math.max(n, b.segmentStart);
          p = Math.min(p, b.segmentEnd);
          if (!C && 0 < h.length) for (n = Infinity, p = 0, b = t(h), c = b.next(); !c.done; c = b.next()) c = c.value, n = Math.min(n, c.startTime), p = Math.max(p, c.endTime);
          if ("br" == u.tagName) return e = new ze(n, p, ""), e.lineBreak = true, e;
          b = "";
          z && (b = Nc(Yd(u) || ""), x && (b = b.replace(/\s+/g, " ")));
          b = new ze(n, p, b);
          b.nestedCues = h;
          m || (b.isContainer = true);
          k2 && (b.cellResolution = k2);
          k2 = lD(u, "region", f, "")[0];
          if (u.attributes.region && k2 && k2.attributes["xml:id"]) {
            var F = k2.attributes["xml:id"];
            b.region = g.filter(function(B) {
              return B.id == F;
            })[0];
          }
          g = k2;
          l && d && !u.attributes.region && !u.attributes.style && (g = lD(l, "region", f, "")[0]);
          oD(b, u, g, w, v, e, a, 0 == h.length);
          return b;
        }
        function iD(a, b, c) {
          var d = new xd(), e = a.attributes["xml:id"];
          if (!e) return null;
          d.id = e;
          e = null;
          c && (e = pD.exec(c) || qD.exec(c));
          c = e ? Number(e[1]) : null;
          e = e ? Number(e[2]) : null;
          var f, g = rD(a, b, "extent");
          if (g) {
            var h = (f = pD.exec(g)) || qD.exec(g);
            null != h && (d.width = Number(h[1]), d.height = Number(h[2]), f || (null != c && (d.width = 100 * d.width / c), null != e && (d.height = 100 * d.height / e)), d.widthUnits = f || null != c ? yd : 0, d.heightUnits = f || null != e ? yd : 0);
          }
          if (a = rD(a, b, "origin")) {
            if (h = (f = pD.exec(a)) || qD.exec(a), null != h) d.viewportAnchorX = Number(h[1]), d.viewportAnchorY = Number(h[2]), f ? g || (d.width = 100 - d.viewportAnchorX, d.widthUnits = yd, d.height = 100 - d.viewportAnchorY, d.heightUnits = yd) : (null != e && (d.viewportAnchorY = 100 * d.viewportAnchorY / e), null != c && (d.viewportAnchorX = 100 * d.viewportAnchorX / c)), d.viewportAnchorUnits = f || null != c ? yd : 0;
          }
          return d;
        }
        function sD(a) {
          var b = a.match(/rgba\(([^)]+)\)/);
          return b && (b = b[1].split(","), 4 == b.length) ? (b[3] = String(Number(b[3]) / 255), "rgba(" + b.join(",") + ")") : a;
        }
        function oD(a, b, c, d, e, f, g, h) {
          g = g || h;
          "rtl" == tD(b, c, f, "direction", g) && (a.direction = "rtl");
          h = tD(b, c, f, "writingMode", g);
          "tb" == h || "tblr" == h ? a.writingMode = "vertical-lr" : "tbrl" == h ? a.writingMode = "vertical-rl" : "rltb" == h || "rl" == h ? a.direction = "rtl" : h && (a.direction = Ce);
          (h = tD(b, c, f, "textAlign", true)) ? (a.positionAlign = uD.get(h), a.lineAlign = vD.get(h), a.textAlign = Xe[h.toUpperCase()]) : a.textAlign = Be;
          if (h = tD(b, c, f, "displayAlign", true)) a.displayAlign = Ye[h.toUpperCase()];
          if (h = tD(b, c, f, "color", g)) a.color = sD(h);
          if (h = tD(
            b,
            c,
            f,
            "backgroundColor",
            g
          )) a.backgroundColor = sD(h);
          if (h = tD(b, c, f, "border", g)) a.border = h;
          if (h = tD(b, c, f, "fontFamily", g)) switch (h) {
            case "monospaceSerif":
              a.fontFamily = "Courier New,Liberation Mono,Courier,monospace";
              break;
            case "proportionalSansSerif":
              a.fontFamily = "Arial,Helvetica,Liberation Sans,sans-serif";
              break;
            case "sansSerif":
              a.fontFamily = "sans-serif";
              break;
            case "monospaceSansSerif":
              a.fontFamily = "Consolas,monospace";
              break;
            case "proportionalSerif":
              a.fontFamily = "serif";
              break;
            default:
              a.fontFamily = h.split(",").filter(function(k2) {
                return "default" != k2;
              }).join(",");
          }
          (h = tD(b, c, f, "fontWeight", g)) && "bold" == h && (a.fontWeight = Ue);
          h = tD(b, c, f, "wrapOption", g);
          a.wrapLine = h && "noWrap" == h ? false : true;
          (h = tD(b, c, f, "lineHeight", g)) && h.match(wD) && (a.lineHeight = h);
          (h = tD(b, c, f, "fontSize", g)) && (h.match(wD) || h.match(xD)) && (a.fontSize = h);
          if (h = tD(b, c, f, "fontStyle", g)) a.fontStyle = $e[h.toUpperCase()];
          d ? (e = d.attributes.imageType || d.attributes.imagetype, h = d.attributes.encoding, d = Yd(d).trim(), "PNG" == e && "Base64" == h && d && (a.backgroundImage = "data:image/png;base64," + d)) : e && (a.backgroundImage = e);
          if (d = tD(b, c, f, "textOutline", g)) d = d.split(" "), d[0].match(wD) ? a.textStrokeColor = a.color : (a.textStrokeColor = sD(d[0]), d.shift()), d[0] && d[0].match(wD) ? a.textStrokeWidth = d[0] : a.textStrokeColor = "";
          (d = tD(b, c, f, "letterSpacing", g)) && d.match(wD) && (a.letterSpacing = d);
          (d = tD(b, c, f, "linePadding", g)) && d.match(wD) && (a.linePadding = d);
          if (d = tD(b, c, f, "opacity", g)) a.opacity = parseFloat(d);
          (d = rD(c, f, "textDecoration")) && yD(a, d);
          (d = zD(b, f, "textDecoration")) && yD(a, d);
          if (d = tD(b, c, f, "textCombine", g)) a.textCombineUpright = d;
          switch (tD(b, c, f, "ruby", g)) {
            case "container":
              a.rubyTag = "ruby";
              break;
            case "text":
              a.rubyTag = "rt";
          }
        }
        function yD(a, b) {
          b = t(b.split(" "));
          for (var c = b.next(); !c.done; c = b.next()) switch (c.value) {
            case "underline":
              a.textDecoration.includes(We) || a.textDecoration.push(We);
              break;
            case "noUnderline":
              a.textDecoration.includes(We) && Bd(a.textDecoration, We);
              break;
            case "lineThrough":
              a.textDecoration.includes("lineThrough") || a.textDecoration.push("lineThrough");
              break;
            case "noLineThrough":
              a.textDecoration.includes("lineThrough") && Bd(a.textDecoration, "lineThrough");
              break;
            case "overline":
              a.textDecoration.includes("overline") || a.textDecoration.push("overline");
              break;
            case "noOverline":
              a.textDecoration.includes("overline") && Bd(a.textDecoration, "overline");
          }
        }
        function tD(a, b, c, d, e) {
          e = void 0 === e ? true : e;
          return (a = zD(a, c, d)) ? a : e ? rD(b, c, d) : null;
        }
        function rD(a, b, c) {
          if (!a) return null;
          var d = ie(a, fD, c);
          return d ? d : AD(a, b, c);
        }
        function zD(a, b, c) {
          var d = ie(a, fD, c);
          return d ? d : AD(a, b, c);
        }
        function AD(a, b, c) {
          a = lD(a, "style", b, "");
          for (var d = null, e = 0; e < a.length; e++) {
            var f = he(a[e], "urn:ebu:tt:style", c);
            f || (f = ie(a[e], fD, c));
            f || (f = zD(a[e], b, c));
            f && (d = f);
          }
          return d;
        }
        function lD(a, b, c, d, e) {
          var f = [];
          if (!a || 1 > c.length) return f;
          var g = a;
          for (a = null; !a && !(a = e ? he(g, e, b) : g.attributes[b]) && (g = g.parent, g); ) ;
          if (b = a) {
            for (b = t(b.split(" ")), e = b.next(); !e.done; e = b.next()) for (e = e.value, a = t(c), g = a.next(); !g.done; g = a.next()) if (g = g.value, d + g.attributes["xml:id"] == e) {
              f.push(g);
              break;
            }
          }
          return f;
        }
        function nD(a, b, c, d) {
          a = mD(a, b);
          null == c ? c = a.start : null != a.start && (c += a.start);
          null == d ? d = a.end : null != a.start && (d += a.start);
          return { start: c, end: d };
        }
        function mD(a, b) {
          var c = BD(a.attributes.begin, b), d = BD(a.attributes.end, b);
          a = BD(a.attributes.dur, b);
          null == d && null != a && (d = c + a);
          return { start: c, end: d };
        }
        function BD(a, b) {
          var c = null;
          if (CD.test(a)) {
            a = CD.exec(a);
            c = Number(a[1]);
            var d = Number(a[2]), e = Number(a[3]), f = Number(a[4]);
            f += (Number(a[5]) || 0) / b.h;
            e += f / b.frameRate;
            c = e + 60 * d + 3600 * c;
          } else if (DD.test(a)) c = ED(DD, a);
          else if (FD.test(a)) c = ED(FD, a);
          else if (GD.test(a)) a = GD.exec(a), c = Number(a[1]) / b.frameRate;
          else if (HD.test(a)) a = HD.exec(a), c = Number(a[1]) / b.g;
          else if (ID.test(a)) c = ED(ID, a);
          else if (a) throw new U(2, 2, 2001, "Could not parse cue time range in TTML");
          return c;
        }
        function ED(a, b) {
          a = a.exec(b);
          return null == a || "" == a[0] ? null : (Number(a[4]) || 0) / 1e3 + (Number(a[3]) || 0) + 60 * (Number(a[2]) || 0) + 3600 * (Number(a[1]) || 0);
        }
        function hD(a) {
          return a ? (a = /^(\d+) (\d+)$/.exec(a)) ? { nc: parseInt(a[1], 10), rows: parseInt(a[2], 10) } : null : null;
        }
        T("shaka.text.TtmlTextParser", dD);
        dD.prototype.parseMedia = dD.prototype.parseMedia;
        dD.prototype.setManifestType = dD.prototype.setManifestType;
        dD.prototype.setSequenceMode = dD.prototype.setSequenceMode;
        dD.prototype.parseInit = dD.prototype.parseInit;
        function gD(a, b, c, d) {
          this.frameRate = Number(a) || 30;
          this.h = Number(b) || 1;
          this.g = Number(d);
          0 == this.g && (this.g = a ? this.frameRate * this.h : 1);
          c && (a = /^(\d+) (\d+)$/g.exec(c)) && (this.frameRate *= Number(a[1]) / Number(a[2]));
        }
        var pD = /^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/, xD = /^(\d{1,4}(?:\.\d+)?|100)%$/, wD = /^(\d+px|\d+em|\d*\.?\d+c)$/, qD = /^(\d+)px (\d+)px$/, CD = /^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/, DD = /^(?:(\d{2,}):)?(\d{2}):(\d{2})$/, FD = /^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/, GD = /^(\d*(?:\.\d*)?)f$/, HD = /^(\d*(?:\.\d*)?)t$/, ID = RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"), vD = (/* @__PURE__ */ new Map()).set("left", Fe).set("center", "center").set(
          "right",
          "end"
        ).set("start", Fe).set("end", "end"), uD = (/* @__PURE__ */ new Map()).set("left", "line-left").set("center", "center").set("right", "line-right"), eD = ["http://www.w3.org/ns/ttml#parameter", "http://www.w3.org/2006/10/ttaf1#parameter"], fD = ["http://www.w3.org/ns/ttml#styling", "http://www.w3.org/2006/10/ttaf1#styling"], kD = ["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt", "http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];
        yf("application/ttml+xml", function() {
          return new dD();
        });
        function JD() {
          this.g = new dD();
        }
        JD.prototype.parseInit = function(a) {
          var b = false;
          new Eh().box("moov", Jh).box("trak", Jh).box("mdia", Jh).box("minf", Jh).box("stbl", Jh).S("stsd", Lh).box("stpp", function(c) {
            b = true;
            c.parser.stop();
          }).parse(a);
          if (!b) throw new U(2, 2, 2007);
        };
        JD.prototype.setSequenceMode = function() {
        };
        JD.prototype.setManifestType = function() {
        };
        JD.prototype.parseMedia = function(a, b, c) {
          var d = [], e = null, f = [], g = /* @__PURE__ */ new Map(), h = [];
          new Eh().box("moof", Jh).box("traf", Jh).S("tfhd", function(x) {
            e = Vj(x.reader, x.flags).md;
          }).S("trun", function(x) {
            x = gk(x.reader, x.version, x.flags);
            x = t(x.dg);
            for (var z = x.next(); !z.done; z = x.next()) h.push(z.value.sampleSize || e || 0);
          }).S("subs", function(x) {
            for (var z = x.reader, C = z.R(), D = -1, F = 0; F < C; F++) {
              var B = z.R();
              D += B;
              B = z.na();
              for (var A = [], H = 0; H < B; H++) 1 == x.version ? A.push(z.R()) : A.push(z.na()), z.X(), z.X(), z.R();
              g.set(D, A);
            }
          }).box(
            "mdat",
            Oh(function(x) {
              f.push(x);
            })
          ).parse(a, false);
          if (0 == f.length) throw new U(2, 2, 2007);
          for (var k2 = Vc.apply(Pc, y(f)), l = 0, m = 0; m < h.length; m++) {
            var n = Qb(k2, l, h[m]);
            l += h[m];
            var p = g.get(m);
            if (p && p.length) {
              n = Qb(n, 0, p[0]);
              for (var q = [], u = p[0], w = 1; w < p.length; w++) {
                var v = Qb(a, u, p[w]);
                v = Qc(v);
                q.push("data:image/png;base64," + v);
                u += p[w];
              }
              d = d.concat(this.g.parseMedia(n, b, c, q));
            } else d = d.concat(this.g.parseMedia(n, b, c, []));
          }
          return d;
        };
        T("shaka.text.Mp4TtmlParser", JD);
        JD.prototype.parseMedia = JD.prototype.parseMedia;
        JD.prototype.setManifestType = JD.prototype.setManifestType;
        JD.prototype.setSequenceMode = JD.prototype.setSequenceMode;
        JD.prototype.parseInit = JD.prototype.parseInit;
        yf('application/mp4; codecs="stpp"', function() {
          return new JD();
        });
        yf('application/mp4; codecs="stpp.ttml"', function() {
          return new JD();
        });
        yf('application/mp4; codecs="stpp.ttml.im1i"', function() {
          return new JD();
        });
        yf('application/mp4; codecs="stpp.ttml.im1t"', function() {
          return new JD();
        });
        yf('application/mp4; codecs="stpp.ttml.im2i"', function() {
          return new JD();
        });
        yf('application/mp4; codecs="stpp.ttml.im2t"', function() {
          return new JD();
        });
        yf('application/mp4; codecs="stpp.ttml.etd1"', function() {
          return new JD();
        });
        yf('application/mp4; codecs="stpp.ttml.etd1|im1t"', function() {
          return new JD();
        });
        yf('application/mp4; codecs="stpp.ttml.im1t|etd1"', function() {
          return new JD();
        });
        yf('application/mp4; codecs="stpp.TTML.im1t"', function() {
          return new JD();
        });
        function KD() {
          this.g = "UNKNOWN";
        }
        KD.prototype.parseInit = function() {
        };
        KD.prototype.setSequenceMode = function() {
        };
        KD.prototype.setManifestType = function(a) {
          this.g = a;
        };
        KD.prototype.parseMedia = function(a, b) {
          a = Gc(a);
          a = a.replace(/\r\n|\r(?=[^\n]|$)/gm, "\n");
          var c = a.split(/\n{2,}/m);
          if (!/^WEBVTT($|[ \t\n])/m.test(c[0])) throw new U(2, 2, 2e3);
          a = b.vttOffset;
          if ("HLS" == this.g) if (c[0].includes("X-TIMESTAMP-MAP")) {
            var d = c[0];
            a = d.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m);
            d = d.match(/MPEGTS:(\d+)/m);
            if (!a || !d) throw new U(2, 2, 2e3);
            a = Ld(a[1]);
            if (null == a) throw new U(2, 2, 2e3);
            d = Number(d[1]);
            for (var e = b.segmentStart - b.periodStart; 95443.7176888889 <= e; ) e -= 95443.7176888889, d += 8589934592;
            a = b.periodStart + d / 9e4 - a;
          } else b.periodStart && b.vttOffset == b.periodStart && (a = 0);
          b = [];
          d = t(c[0].split("\n"));
          for (e = d.next(); !e.done; e = d.next()) if (e = e.value, /^Region:/.test(e)) {
            e = new Ed(e);
            var f = new xd();
            Hd(e);
            Fd(e);
            for (var g = Hd(e); g; ) {
              var h = f, k2 = g;
              (g = /^id=(.*)$/.exec(k2)) ? h.id = g[1] : (g = /^width=(\d{1,2}|100)%$/.exec(k2)) ? h.width = Number(g[1]) : (g = /^lines=(\d+)$/.exec(k2)) ? (h.height = Number(g[1]), h.heightUnits = 2) : (g = /^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(k2)) ? (h.regionAnchorX = Number(g[1]), h.regionAnchorY = Number(g[2])) : (g = /^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(k2)) ? (h.viewportAnchorX = Number(g[1]), h.viewportAnchorY = Number(g[2])) : /^scroll=up$/.exec(k2) && (h.scroll = "up");
              Fd(e);
              g = Hd(e);
            }
            b.push(f);
          }
          d = /* @__PURE__ */ new Map();
          Me(d);
          e = [];
          c = t(c.slice(1));
          for (f = c.next(); !f.done; f = c.next()) {
            f = f.value.split("\n");
            if ((1 != f.length || f[0]) && !/^NOTE($|[ \t])/.test(f[0]) && "STYLE" == f[0]) {
              h = [];
              g = -1;
              for (k2 = 1; k2 < f.length; k2++) f[k2].includes("::cue") && (h.push([]), g = h.length - 1), -1 != g && (h[g].push(f[k2]), f[k2].includes("}") && (g = -1));
              h = t(h);
              for (g = h.next(); !g.done; g = h.next()) {
                var l = g.value;
                g = "global";
                (k2 = l[0].match(/\((.*)\)/)) && (g = k2.pop());
                k2 = l.slice(1, -1);
                l[0].includes("}") && (l = /\{(.*?)\}/.exec(l[0])) && (k2 = l[1].split(";"));
                (l = d.get(g)) || (l = new ze(0, 0, ""));
                for (var m = false, n = 0; n < k2.length; n++) {
                  var p = /^\s*([^:]+):\s*(.*)/.exec(k2[n]);
                  if (p) {
                    var q = p[2].trim().replace(";", "");
                    switch (p[1].trim()) {
                      case "background-color":
                      case "background":
                        m = true;
                        l.backgroundColor = q;
                        break;
                      case "color":
                        m = true;
                        l.color = q;
                        break;
                      case "font-family":
                        m = true;
                        l.fontFamily = q;
                        break;
                      case "font-size":
                        m = true;
                        l.fontSize = q;
                        break;
                      case "font-weight":
                        if (700 <= parseInt(q, 10) || "bold" == q) m = true, l.fontWeight = Ue;
                        break;
                      case "font-style":
                        switch (q) {
                          case "normal":
                            m = true;
                            l.fontStyle = Ie;
                            break;
                          case "italic":
                            m = true;
                            l.fontStyle = Ve;
                            break;
                          case "oblique":
                            m = true, l.fontStyle = "oblique";
                        }
                        break;
                      case "opacity":
                        m = true;
                        l.opacity = parseFloat(q);
                        break;
                      case "text-combine-upright":
                        m = true;
                        l.textCombineUpright = q;
                        break;
                      case "text-shadow":
                        m = true;
                        l.textShadow = q;
                        break;
                      case "white-space":
                        m = true, l.wrapLine = "noWrap" != q;
                    }
                  }
                }
                m && d.set(
                  g,
                  l
                );
              }
            }
            l = f;
            m = a;
            if (1 == l.length && !l[0] || /^NOTE($|[ \t])/.test(l[0]) || "STYLE" == l[0] || "REGION" == l[0]) f = null;
            else if (f = null, l[0].includes("-->") || (f = l[0], l.splice(0, 1)), h = new Ed(l[0]), g = Jd(h), n = Gd(h, /[ \t]+--\x3e[ \t]+/g), k2 = Jd(h), null == g || null == n || null == k2) db("Failed to parse VTT time code. Cue skipped:", f, l), f = null;
            else {
              g += m;
              k2 += m;
              m = l.slice(1).join("\n").trim();
              d.has("global") ? (l = d.get("global").clone(), l.startTime = g, l.endTime = k2, l.payload = m) : l = new ze(g, k2, m);
              Fd(h);
              for (g = Hd(h); g; ) LD(l, g, b), Fd(h), g = Hd(h);
              Le(l, d);
              null != f && (l.id = f);
              f = l;
            }
            f && e.push(f);
          }
          return e;
        };
        function LD(a, b, c) {
          var d;
          if (d = /^align:(start|middle|center|end|left|right)$/.exec(b)) b = d[1], "middle" == b ? a.textAlign = Be : a.textAlign = Xe[b.toUpperCase()];
          else if (d = /^vertical:(lr|rl)$/.exec(b)) a.writingMode = "lr" == d[1] ? "vertical-lr" : "vertical-rl";
          else if (d = /^size:([\d.]+)%$/.exec(b)) a.size = Number(d[1]);
          else if (d = /^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(b)) a.position = Number(d[1]), d[2] && (b = d[2], a.positionAlign = "line-left" == b || "start" == b ? "line-left" : "line-right" == b || "end" == b ? "line-right" : "center" == b || "middle" == b ? "center" : Ae);
          else if (d = /^region:(.*)$/.exec(b)) {
            if (b = MD(c, d[1])) a.region = b;
          } else if (c = /^line:([\d.]+)%(?:,(start|end|center))?$/.exec(b)) a.lineInterpretation = 1, a.line = Number(c[1]), c[2] && (a.lineAlign = Ze[c[2].toUpperCase()]);
          else if (c = /^line:(-?\d+)(?:,(start|end|center))?$/.exec(b)) a.lineInterpretation = Ee, a.line = Number(c[1]), c[2] && (a.lineAlign = Ze[c[2].toUpperCase()]);
        }
        function MD(a, b) {
          a = a.filter(function(c) {
            return c.id == b;
          });
          return a.length ? a[0] : null;
        }
        T("shaka.text.VttTextParser", KD);
        KD.prototype.parseMedia = KD.prototype.parseMedia;
        KD.prototype.setManifestType = KD.prototype.setManifestType;
        KD.prototype.setSequenceMode = KD.prototype.setSequenceMode;
        KD.prototype.parseInit = KD.prototype.parseInit;
        yf("text/vtt", function() {
          return new KD();
        });
        yf('text/vtt; codecs="vtt"', function() {
          return new KD();
        });
        yf('text/vtt; codecs="wvtt"', function() {
          return new KD();
        });
        function ND() {
          this.g = null;
        }
        ND.prototype.parseInit = function(a) {
          var b = this, c = false;
          new Eh().box("moov", Jh).box("trak", Jh).box("mdia", Jh).S("mdhd", function(d) {
            d = fk(d.reader, d.version);
            b.g = d.timescale;
          }).box("minf", Jh).box("stbl", Jh).S("stsd", Lh).box("wvtt", function() {
            c = true;
          }).parse(a);
          if (!this.g) throw new U(2, 2, 2008);
          if (!c) throw new U(2, 2, 2008);
        };
        ND.prototype.setSequenceMode = function() {
        };
        ND.prototype.setManifestType = function() {
        };
        ND.prototype.parseMedia = function(a, b) {
          if (!a.length) return [];
          if (!this.g) throw new U(2, 2, 2008);
          var c = 0, d = [], e, f = [], g = false, h = false, k2 = false, l = null;
          new Eh().box("moof", Jh).box("traf", Jh).S("tfdt", function(C) {
            g = true;
            c = Wj(C.reader, C.version).baseMediaDecodeTime;
          }).S("tfhd", function(C) {
            l = Vj(C.reader, C.flags).ld;
          }).S("trun", function(C) {
            h = true;
            d = gk(C.reader, C.version, C.flags).dg;
          }).box("mdat", Oh(function(C) {
            k2 = true;
            e = C;
          })).parse(a, false);
          if (!k2 && !g && !h) throw new U(2, 2, 2008);
          a = c;
          for (var m = new Bh(e, 0), n = t(d), p = n.next(); !p.done; p = n.next()) {
            p = p.value;
            var q = p.eg || l, u = p.ye ? c + p.ye : a;
            a = u + (q || 0);
            var w = 0;
            do {
              var v = m.R();
              w += v;
              var x = m.R(), z = null;
              "vttc" == Ih(x) ? 8 < v && (z = m.Cb(v - 8)) : m.skip(v - 8);
              q && z && (v = OD(z, b.periodStart + u / this.g, b.periodStart + a / this.g), f.push(v));
            } while (p.sampleSize && w < p.sampleSize);
          }
          return f.filter(Jf);
        };
        function OD(a, b, c) {
          var d, e, f;
          new Eh().box("payl", Oh(function(g) {
            d = Gc(g);
          })).box("iden", Oh(function(g) {
            e = Gc(g);
          })).box("sttg", Oh(function(g) {
            f = Gc(g);
          })).parse(a);
          return d ? PD(d, e, f, b, c) : null;
        }
        function PD(a, b, c, d, e) {
          a = new ze(d, e, a);
          Le(a);
          b && (a.id = b);
          if (c) for (b = new Ed(c), c = Hd(b); c; ) LD(a, c, []), Fd(b), c = Hd(b);
          return a;
        }
        T("shaka.text.Mp4VttParser", ND);
        ND.prototype.parseMedia = ND.prototype.parseMedia;
        ND.prototype.setManifestType = ND.prototype.setManifestType;
        ND.prototype.setSequenceMode = ND.prototype.setSequenceMode;
        ND.prototype.parseInit = ND.prototype.parseInit;
        yf('application/mp4; codecs="wvtt"', function() {
          return new ND();
        });
        function QD() {
        }
        QD.prototype.parseInit = function() {
        };
        QD.prototype.setSequenceMode = function() {
        };
        QD.prototype.setManifestType = function() {
        };
        QD.prototype.parseMedia = function(a) {
          var b = Gc(a).replace(/\r+/g, "");
          b = b.trim();
          a = [];
          if ("" == b) return a;
          b = t(b.split("\n\n"));
          for (var c = b.next(); !c.done; c = b.next()) {
            c = c.value.split("\n");
            var d = new Ed(c[0]), e = Jd(d), f = Gd(d, /,/g);
            d = Jd(d);
            if (null == e || null == f || null == d) throw new U(2, 2, 2001, "Could not parse cue time range in SubViewer");
            a.push(new ze(e, d, c.slice(1).join("\n").trim()));
          }
          return a;
        };
        T("shaka.text.SbvTextParser", QD);
        QD.prototype.parseMedia = QD.prototype.parseMedia;
        QD.prototype.setManifestType = QD.prototype.setManifestType;
        QD.prototype.setSequenceMode = QD.prototype.setSequenceMode;
        QD.prototype.parseInit = QD.prototype.parseInit;
        yf("text/x-subviewer", function() {
          return new QD();
        });
        function RD() {
          this.g = new KD();
        }
        RD.prototype.parseInit = function() {
        };
        RD.prototype.setSequenceMode = function() {
        };
        RD.prototype.setManifestType = function() {
        };
        RD.prototype.parseMedia = function(a, b, c) {
          a = Gc(a);
          a = SD(a);
          a = Qb(Kc(a));
          return this.g.parseMedia(a, b, c, []);
        };
        function SD(a) {
          var b = "WEBVTT\n\n";
          if ("" == a) return b;
          a = a.replace(/\r+/g, "");
          a = a.trim();
          a = t(a.split("\n\n"));
          for (var c = a.next(); !c.done; c = a.next()) c = c.value.split(/\n/), c[0].match(/\d+/) && c.shift(), c[0] = c[0].replace(/,/g, "."), b += c.join("\n").replace(/{b}/g, "<b>").replace(/{\/b}/g, "</b>").replace(/{i}/g, "<i>").replace(/{\/i}/g, "</i>").replace(/{u}/g, "<u>").replace(/{\/u}/g, "</u>") + "\n\n";
          return b;
        }
        T("shaka.text.SrtTextParser", RD);
        RD.srt2webvtt = SD;
        RD.prototype.parseMedia = RD.prototype.parseMedia;
        RD.prototype.setManifestType = RD.prototype.setManifestType;
        RD.prototype.setSequenceMode = RD.prototype.setSequenceMode;
        RD.prototype.parseInit = RD.prototype.parseInit;
        yf("text/srt", function() {
          return new RD();
        });
        function TD() {
        }
        TD.prototype.parseInit = function() {
        };
        TD.prototype.setSequenceMode = function() {
        };
        TD.prototype.setManifestType = function() {
        };
        TD.prototype.parseMedia = function(a) {
          var b = "", c = "", d = null, e = null;
          e = Gc(a).split(/\r?\n\s*\r?\n/);
          a = t(e);
          for (e = a.next(); !e.done; e = a.next()) {
            var f = e.value;
            e = f;
            if (f = UD.exec(f)) d = f[1], e = f[2];
            "V4 Styles" == d || "V4+ Styles" == d ? (b = e, b = c ? b + ("\n" + e) : e) : "Events" == d && (c = c ? c + ("\n" + e) : e);
          }
          d = [];
          e = null;
          b = t(b.split(/\r?\n/));
          for (a = b.next(); !a.done; a = b.next()) if (a = a.value, !/^\s*;/.test(a) && (f = VD.exec(a))) {
            if (a = f[1].trim(), f = f[2].trim(), "Format" == a) e = f.split(WD);
            else if ("Style" == a) {
              a = f.split(WD);
              f = {};
              for (var g = 0; g < e.length && g < a.length; g++) f[e[g]] = a[g];
              d.push(f);
            }
          }
          e = [];
          b = null;
          c = t(c.split(/\r?\n/));
          f = c.next();
          for (a = {}; !f.done; a = { Bh: void 0 }, f = c.next()) if (f = f.value, !/^\s*;/.test(f) && (g = VD.exec(f))) {
            if (f = g[1].trim(), g = g[2].trim(), "Format" == f) b = g.split(WD);
            else if ("Dialogue" == f) {
              g = g.split(WD);
              f = {};
              for (var h = 0; h < b.length && h < g.length; h++) f[b[h]] = g[h];
              h = XD(f.Start);
              var k2 = XD(f.End);
              g = new ze(h, k2, g.slice(b.length - 1).join(",").replace(/\\N/g, "\n").replace(/\{[^}]+\}/g, ""));
              a.Bh = f.Style;
              (a = d.find(/* @__PURE__ */ function(l) {
                return function(m) {
                  return m.Name == l.Bh;
                };
              }(a))) && YD(g, a);
              e.push(g);
            }
          }
          return e;
        };
        function YD(a, b) {
          var c = b.Fontname;
          c && (a.fontFamily = c);
          if (c = b.Fontsize) a.fontSize = c + "px";
          if (c = b.PrimaryColour) {
            if (c = ZD(c)) a.color = c;
          }
          if (c = b.BackColour) {
            if (c = ZD(c)) a.backgroundColor = c;
          }
          b.Bold && (a.fontWeight = Ue);
          b.Italic && (a.fontStyle = Ve);
          b.Underline && a.textDecoration.push(We);
          if (c = b.Spacing) a.letterSpacing = c + "px";
          if (c = b.Alignment) switch (parseInt(c, 10)) {
            case 1:
              a.displayAlign = Ge;
              a.textAlign = "start";
              break;
            case 2:
              a.displayAlign = Ge;
              a.textAlign = Be;
              break;
            case 3:
              a.displayAlign = Ge;
              a.textAlign = "end";
              break;
            case 5:
              a.displayAlign = "before";
              a.textAlign = "start";
              break;
            case 6:
              a.displayAlign = "before";
              a.textAlign = Be;
              break;
            case 7:
              a.displayAlign = "before";
              a.textAlign = "end";
              break;
            case 9:
              a.displayAlign = "center";
              a.textAlign = "start";
              break;
            case 10:
              a.displayAlign = "center";
              a.textAlign = Be;
              break;
            case 11:
              a.displayAlign = "center", a.textAlign = "end";
          }
          if (b = b.AlphaLevel) a.opacity = parseFloat(b);
        }
        function ZD(a) {
          a = parseInt(a.replace("&H", ""), 16);
          return 0 <= a ? "rgba(" + (a & 255) + "," + (a >> 8 & 255) + "," + (a >> 16 & 255) + "," + (a >> 24 & 255 ^ 255) / 255 + ")" : null;
        }
        function XD(a) {
          a = $D.exec(a);
          return 3600 * (a[1] ? parseInt(a[1].replace(":", ""), 10) : 0) + 60 * parseInt(a[2], 10) + parseFloat(a[3]);
        }
        T("shaka.text.SsaTextParser", TD);
        TD.prototype.parseMedia = TD.prototype.parseMedia;
        TD.prototype.setManifestType = TD.prototype.setManifestType;
        TD.prototype.setSequenceMode = TD.prototype.setSequenceMode;
        TD.prototype.parseInit = TD.prototype.parseInit;
        var UD = /^\s*\[([^\]]+)\]\r?\n([\s\S]*)/, VD = /^\s*([^:]+):\s*(.*)/, WD = /\s*,\s*/, $D = /^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;
        yf("text/x-ssa", function() {
          return new TD();
        });
        function aE(a, b) {
          var c = a[b + 1] & 1 ? 7 : 9;
          return b + c <= a.length && (a = ((a[b + 3] & 3) << 11 | a[b + 4] << 3 | (a[b + 5] & 224) >>> 5) - c, 0 < a) ? { ud: c, ia: a } : null;
        }
        function bE(a, b) {
          var c = [96e3, 88200, 64e3, 48e3, 44100, 32e3, 24e3, 22050, 16e3, 12e3, 11025, 8e3, 7350], d = (a[b + 2] & 60) >>> 2;
          if (d > c.length - 1) return null;
          var e = ((a[b + 2] & 192) >>> 6) + 1, f = (a[b + 2] & 1) << 2;
          f |= (a[b + 3] & 192) >>> 6;
          return { sampleRate: c[d], channelCount: f, codec: "mp4a.40." + e };
        }
        function cE(a, b) {
          if (b + 1 < a.length && 255 === a[b] && 240 === (a[b + 1] & 246)) {
            var c = a[b + 1] & 1 ? 7 : 9;
            if (b + c >= a.length) return false;
            var d = (a[b + 3] & 3) << 11 | a[b + 4] << 3 | (a[b + 5] & 224) >>> 5;
            if (d <= c) return false;
            b += d;
            return b === a.length || b + 1 < a.length && 255 === a[b] && 240 === (a[b + 1] & 246);
          }
          return false;
        }
        function dE(a, b) {
          switch (a) {
            case "mp4a.40.2":
              if (1 === b) return new Uint8Array([0, 200, 0, 128, 35, 128]);
              if (2 === b) return new Uint8Array([33, 0, 73, 144, 2, 25, 0, 35, 128]);
              if (3 === b) return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 142]);
              if (4 === b) return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 128, 44, 128, 8, 2, 56]);
              if (5 === b) return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 130, 48, 4, 153, 0, 33, 144, 2, 56]);
              if (6 === b) return new Uint8Array([
                0,
                200,
                0,
                128,
                32,
                132,
                1,
                38,
                64,
                8,
                100,
                0,
                130,
                48,
                4,
                153,
                0,
                33,
                144,
                2,
                0,
                178,
                0,
                32,
                8,
                224
              ]);
              break;
            default:
              if (1 === b) return new Uint8Array([1, 64, 34, 128, 163, 78, 230, 128, 186, 8, 0, 0, 0, 28, 6, 241, 193, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94]);
              if (2 === b || 3 === b) return new Uint8Array([1, 64, 34, 128, 163, 94, 230, 128, 186, 8, 0, 0, 0, 0, 149, 0, 6, 241, 161, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94]);
          }
          return null;
        }
        ;
        function eE(a) {
          this.j = a;
          this.h = 0;
          this.g = /* @__PURE__ */ new Map();
          this.i = null;
        }
        r = eE.prototype;
        r.destroy = function() {
          this.g.clear();
        };
        r.isSupported = function(a) {
          return "audio/aac" == a.toLowerCase().split(";")[0] ? ld(this.convertCodecs("audio", a)) : false;
        };
        r.convertCodecs = function(a, b) {
          return "audio/aac" == b.toLowerCase().split(";")[0] ? 'audio/mp4; codecs="' + (vf(b) || "mp4a.40.2") + '"' : b;
        };
        r.getOriginalMimeType = function() {
          return this.j;
        };
        r.transmux = function(a, b, c, d) {
          for (var e = Qb(a), f = Uj(e), g = f.length; g < e.length && !cE(e, g); g++) ;
          a = 1e3 * c.endTime;
          f = Tj(f);
          f.length && c && (f = f.find(function(m) {
            return "com.apple.streaming.transportStreamTimestamp" === m.description;
          })) && (a = f.data);
          f = bE(e, g);
          if (!f) return Promise.reject(new U(2, 3, 3018, c ? c.N()[0] : null));
          b.audioSamplingRate = f.sampleRate;
          b.channelsCount = f.channelCount;
          for (var h = []; g < e.length; ) {
            var k2 = aE(e, g);
            if (!k2) return Promise.reject(new U(2, 3, 3018, c ? c.N()[0] : null));
            var l = k2.ud + k2.ia;
            g + l <= e.length && h.push({ data: e.subarray(g + k2.ud, g + l), size: k2.ia, duration: 1024, eb: 0, flags: { hb: 0, $a: 0, Za: 0, Xa: 0, Ya: 2, ib: 0 } });
            g += l;
          }
          e = f.sampleRate;
          a = Math.floor(a * e / 1e3);
          d = { id: b.id, type: "audio", codecs: f.codec, encrypted: b.encrypted && 0 < b.drmInfos.length, timescale: e, duration: d, mb: [], ra: new Uint8Array([]), Ca: new Uint8Array([]), Ia: 0, Ka: 0, data: { Db: this.h, baseMediaDecodeTime: a, jb: h }, stream: b };
          d = new Vi([d]);
          c = b.id + "_" + c.i;
          this.g.has(c) ? b = this.g.get(c) : (b = aj(d), this.g.set(c, b));
          c = this.i !== b;
          d = sj(d);
          this.i = b;
          this.h++;
          return c ? (b = Vc(b, d), Promise.resolve(b)) : Promise.resolve(d);
        };
        T("shaka.transmuxer.AacTransmuxer", eE);
        eE.prototype.transmux = eE.prototype.transmux;
        eE.prototype.getOriginalMimeType = eE.prototype.getOriginalMimeType;
        eE.prototype.convertCodecs = eE.prototype.convertCodecs;
        eE.prototype.isSupported = eE.prototype.isSupported;
        eE.prototype.destroy = eE.prototype.destroy;
        bf("audio/aac", function() {
          return new eE("audio/aac");
        }, hf);
        function fE(a, b) {
          if (b + 8 > a.length || 11 !== a[b] || 119 !== a[b + 1]) return null;
          var c = a[b + 4] >> 6;
          if (3 <= c) return null;
          var d = a[b + 4] & 63, e = 2 * [
            64,
            69,
            96,
            64,
            70,
            96,
            80,
            87,
            120,
            80,
            88,
            120,
            96,
            104,
            144,
            96,
            105,
            144,
            112,
            121,
            168,
            112,
            122,
            168,
            128,
            139,
            192,
            128,
            140,
            192,
            160,
            174,
            240,
            160,
            175,
            240,
            192,
            208,
            288,
            192,
            209,
            288,
            224,
            243,
            336,
            224,
            244,
            336,
            256,
            278,
            384,
            256,
            279,
            384,
            320,
            348,
            480,
            320,
            349,
            480,
            384,
            417,
            576,
            384,
            418,
            576,
            448,
            487,
            672,
            448,
            488,
            672,
            512,
            557,
            768,
            512,
            558,
            768,
            640,
            696,
            960,
            640,
            697,
            960,
            768,
            835,
            1152,
            768,
            836,
            1152,
            896,
            975,
            1344,
            896,
            976,
            1344,
            1024,
            1114,
            1536,
            1024,
            1115,
            1536,
            1152,
            1253,
            1728,
            1152,
            1254,
            1728,
            1280,
            1393,
            1920,
            1280,
            1394,
            1920
          ][3 * d + c];
          if (b + e > a.length) return null;
          var f = a[b + 6] >> 5, g = 0;
          2 === f ? g += 2 : (f & 1 && 1 !== f && (g += 2), f & 4 && (g += 2));
          g = (a[b + 6] << 8 | a[b + 7]) >> 12 - g & 1;
          var h = a[b + 5] & 7;
          a = new Uint8Array([c << 6 | a[b + 5] >> 3 << 1 | h >> 2, (h & 3) << 6 | f << 3 | g << 2 | d >> 4, d << 4 & 224]);
          return { sampleRate: [48e3, 44100, 32e3][c], channelCount: [2, 1, 2, 3, 3, 4, 4, 5][f] + g, ra: a, ia: e };
        }
        function gE(a, b) {
          if (11 === a[b] && 119 === a[b + 1]) {
            var c = 0, d = 5;
            b += d;
            for (var e, f; 0 < d; ) {
              f = a[b];
              var g = Math.min(d, 8), h = 8 - g;
              e = 4278190080 >>> 24 + h << h;
              e = (f & e) >> h;
              c = c ? c << g | e : e;
              b += 1;
              d -= g;
            }
            if (16 > c) return true;
          }
          return false;
        }
        ;
        function hE(a) {
          this.j = a;
          this.h = 0;
          this.g = /* @__PURE__ */ new Map();
          this.i = null;
        }
        r = hE.prototype;
        r.destroy = function() {
          this.g.clear();
        };
        r.isSupported = function(a) {
          return "audio/ac3" == a.toLowerCase().split(";")[0] ? ld(this.convertCodecs("audio", a)) : false;
        };
        r.convertCodecs = function(a, b) {
          return "audio/ac3" == b.toLowerCase().split(";")[0] ? mc() ? 'audio/mp4; codecs="ec-3"' : 'audio/mp4; codecs="ac-3"' : b;
        };
        r.getOriginalMimeType = function() {
          return this.j;
        };
        r.transmux = function(a, b, c, d) {
          a = Qb(a);
          for (var e = Uj(a), f = e.length; f < a.length && !gE(a, f); f++) ;
          var g = 1e3 * c.endTime;
          e = Tj(e);
          e.length && c && (e = e.find(function(m) {
            return "com.apple.streaming.transportStreamTimestamp" === m.description;
          })) && (g = e.data);
          e = 0;
          for (var h = new Uint8Array([]), k2 = []; f < a.length; ) {
            var l = fE(a, f);
            if (!l) return Promise.reject(new U(2, 3, 3018, c ? c.N()[0] : null));
            b.audioSamplingRate = l.sampleRate;
            b.channelsCount = l.channelCount;
            e = l.sampleRate;
            h = l.ra;
            k2.push({
              data: a.subarray(f, f + l.ia),
              size: l.ia,
              duration: 1536,
              eb: 0,
              flags: { hb: 0, $a: 0, Za: 0, Xa: 0, Ya: 2, ib: 0 }
            });
            f += l.ia;
          }
          a = Math.floor(g * e / 1e3);
          d = { id: b.id, type: "audio", codecs: "ac-3", encrypted: b.encrypted && 0 < b.drmInfos.length, timescale: e, duration: d, mb: [], ra: h, Ca: new Uint8Array([]), Ia: 0, Ka: 0, data: { Db: this.h, baseMediaDecodeTime: a, jb: k2 }, stream: b };
          d = new Vi([d]);
          c = b.id + "_" + c.i;
          this.g.has(c) ? b = this.g.get(c) : (b = aj(d), this.g.set(c, b));
          c = this.i !== b;
          d = sj(d);
          this.i = b;
          this.h++;
          return c ? (b = Vc(b, d), Promise.resolve(b)) : Promise.resolve(d);
        };
        T("shaka.transmuxer.Ac3Transmuxer", hE);
        hE.prototype.transmux = hE.prototype.transmux;
        hE.prototype.getOriginalMimeType = hE.prototype.getOriginalMimeType;
        hE.prototype.convertCodecs = hE.prototype.convertCodecs;
        hE.prototype.isSupported = hE.prototype.isSupported;
        hE.prototype.destroy = hE.prototype.destroy;
        bf("audio/ac3", function() {
          return new hE("audio/ac3");
        }, hf);
        function iE(a, b) {
          if (b + 8 > a.length || 2935 !== (a[b] << 8 | a[b + 1] << 0)) return null;
          var c = new mk(a.subarray(b + 2));
          ok(c, 2);
          ok(c, 3);
          var d = pk(c, 11) + 1 << 1, e = pk(c, 2);
          if (3 == e) {
            e = pk(c, 2);
            e = [24e3, 22060, 16e3][e];
            var f = 3;
          } else e = [48e3, 44100, 32e3][e], f = pk(c, 2);
          var g = pk(c, 3), h = pk(c, 1);
          c = pk(c, 5);
          if (b + d > a.byteLength) return null;
          a = Math.floor(d * e / (16 * [1, 2, 3, 6][f]));
          a = new Uint8Array([(a & 8160) >> 5, (a & 31) << 3, e << 6 | c << 1 | 0, 0 | g << 1 | h << 0, 0]);
          return { sampleRate: e, channelCount: [2, 1, 2, 3, 3, 4, 4, 5][g] + h, ra: a, ia: d };
        }
        ;
        function jE(a) {
          this.j = a;
          this.h = 0;
          this.g = /* @__PURE__ */ new Map();
          this.i = null;
        }
        r = jE.prototype;
        r.destroy = function() {
          this.g.clear();
        };
        r.isSupported = function(a) {
          return "audio/ec3" == a.toLowerCase().split(";")[0] ? ld(this.convertCodecs("audio", a)) : false;
        };
        r.convertCodecs = function(a, b) {
          return "audio/ec3" == b.toLowerCase().split(";")[0] ? 'audio/mp4; codecs="ec-3"' : b;
        };
        r.getOriginalMimeType = function() {
          return this.j;
        };
        r.transmux = function(a, b, c, d) {
          a = Qb(a);
          for (var e = Uj(a), f = e.length; f < a.length && 2935 !== (a[f] << 8 | a[f + 1] << 0); f++) ;
          var g = 1e3 * c.endTime;
          e = Tj(e);
          e.length && c && (e = e.find(function(m) {
            return "com.apple.streaming.transportStreamTimestamp" === m.description;
          })) && (g = e.data);
          e = 0;
          for (var h = new Uint8Array([]), k2 = []; f < a.length; ) {
            var l = iE(a, f);
            if (!l) return Promise.reject(new U(2, 3, 3018, c ? c.N()[0] : null));
            b.audioSamplingRate = l.sampleRate;
            b.channelsCount = l.channelCount;
            e = l.sampleRate;
            h = l.ra;
            k2.push({
              data: a.subarray(f, f + l.ia),
              size: l.ia,
              duration: 1536,
              eb: 0,
              flags: { hb: 0, $a: 0, Za: 0, Xa: 0, Ya: 2, ib: 0 }
            });
            f += l.ia;
          }
          a = Math.floor(g * e / 1e3);
          d = { id: b.id, type: "audio", codecs: "ec-3", encrypted: b.encrypted && 0 < b.drmInfos.length, timescale: e, duration: d, mb: [], ra: h, Ca: new Uint8Array([]), Ia: 0, Ka: 0, data: { Db: this.h, baseMediaDecodeTime: a, jb: k2 }, stream: b };
          d = new Vi([d]);
          c = b.id + "_" + c.i;
          this.g.has(c) ? b = this.g.get(c) : (b = aj(d), this.g.set(c, b));
          c = this.i !== b;
          d = sj(d);
          this.i = b;
          this.h++;
          return c ? (b = Vc(b, d), Promise.resolve(b)) : Promise.resolve(d);
        };
        T("shaka.transmuxer.Ec3Transmuxer", jE);
        jE.prototype.transmux = jE.prototype.transmux;
        jE.prototype.getOriginalMimeType = jE.prototype.getOriginalMimeType;
        jE.prototype.convertCodecs = jE.prototype.convertCodecs;
        jE.prototype.isSupported = jE.prototype.isSupported;
        jE.prototype.destroy = jE.prototype.destroy;
        bf("audio/ec3", function() {
          return new jE("audio/ec3");
        }, hf);
        function kE(a) {
          if (!a.length) return null;
          var b = a.find(function(w) {
            return 7 == w.type;
          });
          a = a.find(function(w) {
            return 8 == w.type;
          });
          if (!b || !a) return null;
          var c = new mk(b.data), d = uk(c);
          uk(c);
          uk(c);
          rk(c);
          if (lE.includes(d) && (d = W(c), 3 === d && ok(c, 1), rk(c), rk(c), ok(c, 1), tk(c))) {
            d = 3 !== d ? 8 : 12;
            for (var e = 0; e < d; e++) tk(c) && (6 > e ? vk(c, 16) : vk(c, 64));
          }
          rk(c);
          d = W(c);
          if (0 === d) W(c);
          else if (1 === d) for (ok(c, 1), rk(c), rk(c), d = W(c), e = 0; e < d; e++) rk(c);
          rk(c);
          ok(c, 1);
          var f = W(c), g = W(c), h = pk(c, 1);
          0 === h && ok(c, 1);
          ok(c, 1);
          var k2 = 0, l = 0, m = 0, n = 0;
          tk(c) && (k2 = W(c), l = W(c), m = W(c), n = W(c));
          e = d = 1;
          if (tk(c) && tk(c)) {
            var p = uk(c), q = [1, 12, 10, 16, 40, 24, 20, 32, 80, 18, 15, 64, 160, 4, 3, 2], u = [1, 11, 11, 11, 33, 11, 11, 11, 33, 11, 11, 33, 99, 3, 2, 1];
            0 < p && 16 >= p ? (d = q[p - 1], e = u[p - 1]) : 255 === p && (d = pk(c, 16), e = pk(c, 16));
          }
          c = (2 - h) * (g + 1) * 16 - 2 * m - 2 * n;
          f = 16 * (f + 1) - 2 * k2 - 2 * l;
          k2 = [];
          b = b.fullData;
          k2.push(b.byteLength >>> 8 & 255);
          k2.push(b.byteLength & 255);
          k2 = k2.concat.apply(k2, y(b));
          b = [];
          a = a.fullData;
          b.push(a.byteLength >>> 8 & 255);
          b.push(a.byteLength & 255);
          b = b.concat.apply(b, y(a));
          a = new Uint8Array([
            1,
            k2[3],
            k2[4],
            k2[5],
            255,
            225
          ].concat(k2, [1], b));
          return { height: c, width: f, Ca: a, Ia: d, Ka: e };
        }
        function mE(a) {
          function b(u) {
            e = { data: new Uint8Array([]), frame: false, isKeyframe: false, pts: u.pts, dts: u.dts, nalus: [] };
          }
          function c() {
            if (e && e.nalus.length && e.frame) {
              for (var u = [], w = t(e.nalus), v = w.next(); !v.done; v = w.next()) {
                v = v.value;
                var x = v.fullData.byteLength, z = new Uint8Array(4);
                z[0] = x >> 24 & 255;
                z[1] = x >> 16 & 255;
                z[2] = x >> 8 & 255;
                z[3] = x & 255;
                u.push(z);
                u.push(v.fullData);
              }
              e.data = Vc.apply(Pc, y(u));
              d.push(e);
            }
          }
          for (var d = [], e = null, f = false, g = 0; g < a.length; g++) {
            var h = a[g], k2 = h.nalus, l = false;
            e && k2.length && !f && (c(), b(h));
            k2 = t(h.nalus);
            for (var m = k2.next(); !m.done; m = k2.next()) {
              m = m.value;
              var n = false;
              switch (m.type) {
                case 1:
                  var p = false;
                  n = true;
                  var q = m.data;
                  l && 4 < q.length && (q = wk(new mk(q)), 2 === q || 4 === q || 7 === q || 9 === q) && (p = true);
                  p && e && e.frame && !e.isKeyframe && (c(), e = null);
                  e || b(h);
                  e.frame = true;
                  e.isKeyframe = p;
                  break;
                case 5:
                  n = true;
                  e && e.frame && !e.isKeyframe && (c(), e = null);
                  e || b(h);
                  e.frame = true;
                  e.isKeyframe = true;
                  break;
                case 6:
                  n = true;
                  break;
                case 7:
                  l = n = true;
                  break;
                case 8:
                  n = true;
                  break;
                case 9:
                  f = n = true;
                  e && e.frame && (c(), e = null);
                  e || b(h);
                  break;
                case 12:
                  n = true;
                  break;
                default:
                  n = false;
              }
              e && n && e.nalus.push(m);
            }
          }
          c();
          return d;
        }
        var lE = [100, 110, 122, 244, 44, 83, 86, 118, 128, 138, 139, 134];
        function nE(a) {
          if (!a.length) return null;
          var b = a.find(function(g) {
            return 32 == g.type;
          }), c = a.find(function(g) {
            return 33 == g.type;
          }), d = a.find(function(g) {
            return 34 == g.type;
          });
          if (!b || !c || !d) return null;
          var e = oE(b.fullData);
          a = pE(c.fullData);
          var f = qE(d.fullData);
          b = rE(b.fullData, c.fullData, d.fullData, { Tf: e.Tf, pg: e.pg, Df: a.Df, Ef: a.Ef, xf: a.xf, Cf: a.Cf, yf: a.yf, zf: a.zf, Af: a.Af, Bf: a.Bf, qf: a.qf, rf: a.rf, tf: a.tf, uf: a.uf, vf: a.vf, wf: a.wf, hf: a.hf, le: a.le, ff: a.ff, ef: a.ef, df: a.df, Vf: f.Vf });
          return {
            height: a.height,
            width: a.width,
            Ca: b,
            Ia: a.tj,
            Ka: a.sj
          };
        }
        function oE(a) {
          var b = new mk(a, true);
          uk(b);
          uk(b);
          pk(b, 4);
          pk(b, 2);
          pk(b, 6);
          a = pk(b, 3);
          b = tk(b);
          return { Tf: a + 1, pg: b };
        }
        function pE(a) {
          a = new mk(a, true);
          uk(a);
          uk(a);
          var b = 0, c = 0, d = 0, e = 0;
          pk(a, 4);
          var f = pk(a, 3);
          tk(a);
          for (var g = pk(a, 2), h = pk(a, 1), k2 = pk(a, 5), l = uk(a), m = uk(a), n = uk(a), p = uk(a), q = uk(a), u = uk(a), w = uk(a), v = uk(a), x = uk(a), z = uk(a), C = uk(a), D = [], F = [], B = 0; B < f; B++) D.push(tk(a)), F.push(tk(a));
          if (0 < f) for (B = f; 8 > B; B++) pk(a, 2);
          for (B = 0; B < f; B++) D[B] && pk(a, 88), F[B] && uk(a);
          W(a);
          D = W(a);
          3 == D && pk(a, 1);
          F = W(a);
          B = W(a);
          tk(a) && (b += W(a), c += W(a), d += W(a), e += W(a));
          var A = W(a), H = W(a), E = W(a);
          if (tk(a)) for (var L = 0; L <= f; L++) W(a), W(a), W(a);
          else W(a), W(a), W(a);
          W(a);
          W(a);
          W(a);
          W(a);
          W(a);
          W(a);
          if (tk(a) && tk(a)) for (L = 0; 4 > L; L++) for (var M = 0; M < (3 === L ? 2 : 6); M++) if (tk(a)) {
            var J = Math.min(64, 1 << 4 + (L << 1));
            1 < L && sk(a);
            for (var K = 0; K < J; K++) sk(a);
          } else W(a);
          tk(a);
          tk(a);
          tk(a) && (uk(a), W(a), W(a), tk(a));
          L = W(a);
          for (J = M = 0; J < L; J++) if (K = false, 0 !== J && (K = tk(a)), K) {
            J === L && W(a);
            tk(a);
            W(a);
            for (var N = K = 0; N <= M; N++) {
              var O = tk(a), P = false;
              O || (P = tk(a));
              (O || P) && K++;
            }
            M = K;
          } else {
            N = W(a);
            K = W(a);
            M = N + K;
            for (O = 0; O < N; O++) W(a), tk(a);
            for (N = 0; N < K; N++) W(a), tk(a);
          }
          if (tk(a)) for (L = W(a), M = 0; M < L; M++) {
            for (J = 0; J < E + 4; J++) pk(a, 1);
            pk(a, 1);
          }
          L = E = 1;
          M = 0;
          tk(a);
          tk(a);
          if (tk(a)) {
            tk(a) && (J = uk(a), K = [1, 12, 10, 16, 40, 24, 20, 32, 80, 18, 15, 64, 160, 4, 3, 2], N = [1, 11, 11, 11, 33, 11, 11, 11, 33, 11, 11, 33, 99, 3, 2, 1], 0 < J && 16 >= J ? (E = K[J - 1], L = N[J - 1]) : 255 === J && (E = pk(a, 16), L = pk(a, 16)));
            tk(a) && tk(a);
            tk(a) && (pk(a, 3), tk(a), tk(a) && (uk(a), uk(a), uk(a)));
            tk(a) && (W(a), W(a));
            tk(a);
            tk(a);
            tk(a);
            if (J = tk(a)) W(a), W(a), W(a), W(a);
            if (tk(a) && (pk(a, 32), pk(a, 32), tk(a) && W(a), tk(a))) {
              N = false;
              J = tk(a);
              K = tk(a);
              if (J || K) {
                if (N = tk(a)) uk(a), pk(a, 5), tk(a), pk(a, 5);
                pk(a, 4);
                pk(a, 4);
                N && pk(a, 4);
                pk(a, 5);
                pk(a, 5);
                pk(a, 5);
              }
              for (O = 0; O <= f; O++) {
                var R = true;
                P = 1;
                tk(a) || (R = tk(a));
                var S = false;
                R ? W(a) : S = tk(a);
                S || (P = W(a) + 1);
                if (J) {
                  for (R = 0; R < P; R++) W(a), W(a), N && (W(a), W(a));
                  tk(a);
                }
                if (K) {
                  for (R = 0; R < P; R++) W(a), W(a), N && (W(a), W(a));
                  tk(a);
                }
              }
            }
            tk(a) && (tk(a), tk(a), tk(a), M = W(a), W(a), W(a), W(a), W(a));
          }
          return { xf: C, Df: g, Ef: h, Cf: k2, yf: l, zf: m, Af: n, Bf: p, qf: q, rf: u, tf: w, uf: v, vf: x, wf: z, le: M, hf: 0, ff: D, ef: A, df: H, width: F - (b + c) * (1 === D || 2 === D ? 2 : 1), height: B - (d + e) * (1 === D ? 2 : 1), tj: E, sj: L };
        }
        function qE(a) {
          var b = new mk(a, true);
          uk(b);
          uk(b);
          W(b);
          W(b);
          tk(b);
          tk(b);
          pk(b, 3);
          tk(b);
          tk(b);
          W(b);
          W(b);
          sk(b);
          tk(b);
          tk(b);
          tk(b) && W(b);
          sk(b);
          sk(b);
          tk(b);
          tk(b);
          tk(b);
          tk(b);
          a = tk(b);
          b = tk(b);
          var c = 1;
          b && a ? c = 0 : b ? c = 3 : a && (c = 2);
          return { Vf: c };
        }
        function rE(a, b, c, d) {
          var e = new Uint8Array(23 + (5 + a.byteLength) + (5 + b.byteLength) + (5 + c.byteLength));
          e[0] = 1;
          e[1] = (d.Df & 3) << 6 | (d.Ef ? 1 : 0) << 5 | d.Cf & 31;
          e[2] = d.yf;
          e[3] = d.zf;
          e[4] = d.Af;
          e[5] = d.Bf;
          e[6] = d.qf;
          e[7] = d.rf;
          e[8] = d.tf;
          e[9] = d.uf;
          e[10] = d.vf;
          e[11] = d.wf;
          e[12] = d.xf;
          e[13] = 240 | (d.le & 3840) >> 8;
          e[14] = d.le & 255;
          e[15] = 252 | d.Vf & 3;
          e[16] = 252 | d.ff & 3;
          e[17] = 248 | d.ef & 7;
          e[18] = 248 | d.df & 7;
          e[19] = 0;
          e[20] = 0;
          e[21] = (d.hf & 3) << 6 | (d.Tf & 7) << 3 | (d.pg ? 1 : 0) << 2 | 3;
          e[22] = 3;
          e[23] = 160;
          e[24] = 0;
          e[25] = 1;
          e[26] = (a.byteLength & 65280) >> 8;
          e[27] = (a.byteLength & 255) >> 0;
          e.set(a, 28);
          e[23 + (5 + a.byteLength)] = 161;
          e[a.byteLength + 29] = 0;
          e[a.byteLength + 30] = 1;
          e[a.byteLength + 31] = (b.byteLength & 65280) >> 8;
          e[a.byteLength + 32] = (b.byteLength & 255) >> 0;
          e.set(b, a.byteLength + 33);
          e[23 + (a.byteLength + 10 + b.byteLength)] = 162;
          e[a.byteLength + 10 + b.byteLength + 24] = 0;
          e[a.byteLength + 10 + b.byteLength + 25] = 1;
          e[a.byteLength + 10 + b.byteLength + 26] = (c.byteLength & 65280) >> 8;
          e[a.byteLength + 10 + b.byteLength + 27] = (c.byteLength & 255) >> 0;
          e.set(c, a.byteLength + 10 + b.byteLength + 28);
          return e;
        }
        ;
        function sE(a, b) {
          var c = a[b + 1] >> 3 & 3, d = a[b + 1] >> 1 & 3, e = a[b + 2] >> 4 & 15, f = a[b + 2] >> 2 & 3;
          if (1 !== c && 0 !== e && 15 !== e && 3 !== f) {
            var g = a[b + 3] >> 6;
            e = 1e3 * tE[14 * (3 === c ? 3 - d : 3 === d ? 3 : 4) + e - 1];
            f = uE[3 * (3 === c ? 0 : 2 === c ? 1 : 2) + f];
            c = vE[c][d];
            var h = wE[d], k2 = Math.floor(c * e / f + (a[b + 2] >> 1 & 1)) * h, l = (navigator.userAgent || "").match(/Chrome\/(\d+)/i);
            (l = l ? parseInt(l[1], 10) : 0) && 87 >= l && 2 === d && 224e3 <= e && 0 === g && (a[b + 3] |= 128);
            return { sampleRate: f, channelCount: 3 === g ? 1 : 2, ia: k2, rj: 8 * c * h };
          }
          return null;
        }
        function xE(a, b) {
          return 255 === a[b] && 224 === (a[b + 1] & 224) && 0 !== (a[b + 1] & 6);
        }
        function yE(a, b) {
          if (b + 1 < a.length && xE(a, b)) {
            var c = sE(a, b), d = 4;
            c && c.ia && (d = c.ia);
            b += d;
            return b === a.length || b + 1 < a.length && xE(a, b);
          }
          return false;
        }
        var tE = [32, 64, 96, 128, 160, 192, 224, 256, 288, 320, 352, 384, 416, 448, 32, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 384, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 32, 48, 56, 64, 80, 96, 112, 128, 144, 160, 176, 192, 224, 256, 8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160], uE = [44100, 48e3, 32e3, 22050, 24e3, 16e3, 11025, 12e3, 8e3], vE = [[0, 72, 144, 12], [0, 0, 0, 0], [0, 72, 144, 12], [0, 144, 144, 12]], wE = [0, 1, 1, 4];
        function zE(a) {
          this.j = a;
          this.h = 0;
          this.g = /* @__PURE__ */ new Map();
          this.i = null;
        }
        r = zE.prototype;
        r.destroy = function() {
          this.g.clear();
        };
        r.isSupported = function(a) {
          return "audio/mpeg" == a.toLowerCase().split(";")[0] ? ld(this.convertCodecs("audio", a)) : false;
        };
        r.convertCodecs = function(a, b) {
          return "audio/mpeg" == b.toLowerCase().split(";")[0] ? 'audio/mp4; codecs="mp3"' : b;
        };
        r.getOriginalMimeType = function() {
          return this.j;
        };
        r.transmux = function(a, b, c, d) {
          for (var e = Qb(a), f = Uj(e).length; f < e.length && !yE(e, f); f++) ;
          var g;
          for (a = []; f < e.length; ) {
            var h = sE(e, f);
            if (!h) return Promise.reject(new U(2, 3, 3018, c ? c.N()[0] : null));
            g || (g = h);
            f + h.ia <= e.length && a.push({ data: e.subarray(f, f + h.ia), size: h.ia, duration: 1152, eb: 0, flags: { hb: 0, $a: 0, Za: 0, Xa: 0, Ya: 2, ib: 0 } });
            f += h.ia;
          }
          if (!g) return Promise.reject(new U(2, 3, 3018, c ? c.N()[0] : null));
          e = 9e4 * g.rj / g.sampleRate * this.h;
          d = {
            id: b.id,
            type: "audio",
            codecs: "mp3",
            encrypted: b.encrypted && 0 < b.drmInfos.length,
            timescale: g.sampleRate,
            duration: d,
            mb: [],
            ra: new Uint8Array([]),
            Ca: new Uint8Array([]),
            Ia: 0,
            Ka: 0,
            data: { Db: this.h, baseMediaDecodeTime: e, jb: a },
            stream: b
          };
          d = new Vi([d]);
          c = b.id + "_" + c.i;
          this.g.has(c) ? b = this.g.get(c) : (b = aj(d), this.g.set(c, b));
          c = this.i !== b;
          d = sj(d);
          this.i = b;
          this.h++;
          return c ? (b = Vc(b, d), Promise.resolve(b)) : Promise.resolve(d);
        };
        T("shaka.transmuxer.Mp3Transmuxer", zE);
        zE.prototype.transmux = zE.prototype.transmux;
        zE.prototype.getOriginalMimeType = zE.prototype.getOriginalMimeType;
        zE.prototype.convertCodecs = zE.prototype.convertCodecs;
        zE.prototype.isSupported = zE.prototype.isSupported;
        zE.prototype.destroy = zE.prototype.destroy;
        bf("audio/mpeg", function() {
          return new zE("audio/mpeg");
        }, hf);
        function AE(a) {
          this.h = a;
          this.g = null;
        }
        r = AE.prototype;
        r.destroy = function() {
        };
        r.isSupported = function(a) {
          if ("video/mp2t" != a.toLowerCase().split(";")[0]) return false;
          var b = vf(a).split(","), c = ad("audio", b);
          b = ad("video", b);
          return !c || b || "mp3" != rf(c) ? false : ld(this.convertCodecs("audio", a));
        };
        r.convertCodecs = function(a, b) {
          return "video/mp2t" == b.toLowerCase().split(";")[0] ? "audio/mpeg" : b;
        };
        r.getOriginalMimeType = function() {
          return this.h;
        };
        r.transmux = function(a, b, c, d, e) {
          this.g ? this.g.clearData() : this.g = new xk();
          a = Qb(a);
          a = this.g.parse(a);
          if ("mp3" != a.od().audio || "audio" != e) return Promise.reject(new U(2, 3, 3018, c ? c.N()[0] : null));
          c = new Uint8Array([]);
          e = t(a.fb());
          for (a = e.next(); !a.done; a = e.next()) if (a = a.value.data) for (b = 0; b < a.length; ) (d = sE(a, b)) ? (b + d.ia <= a.length && (c = Vc(c, a.subarray(b, b + d.ia))), b += d.ia) : b++;
          return Promise.resolve(c);
        };
        T("shaka.transmuxer.MpegTsTransmuxer", AE);
        AE.prototype.transmux = AE.prototype.transmux;
        AE.prototype.getOriginalMimeType = AE.prototype.getOriginalMimeType;
        AE.prototype.convertCodecs = AE.prototype.convertCodecs;
        AE.prototype.isSupported = AE.prototype.isSupported;
        AE.prototype.destroy = AE.prototype.destroy;
        bf("video/mp2t", function() {
          return new AE("video/mp2t");
        }, gf);
        function BE(a) {
          this.h = a;
          (this.g = cx.get("ISOBoxer")()) && CE(this);
        }
        function CE(a) {
          function b() {
            this._procFullBox();
            this.flags & 1 && (this._procField("AlgorithmID", "uint", 24), this._procField("IV_size", "uint", 8), this._procFieldArray("KID", 16, "uint", 8));
            this._procField("sample_count", "uint", 32);
            this._procEntries("entry", this.sample_count, function(c) {
              this._procEntryField(c, "InitializationVector", "data", 8);
              this.flags & 2 && (this._procEntryField(c, "NumberOfEntries", "uint", 16), this._procSubEntries(c, "clearAndCryptedData", c.NumberOfEntries, function(d) {
                this._procEntryField(
                  d,
                  "BytesOfClearData",
                  "uint",
                  16
                );
                this._procEntryField(d, "BytesOfEncryptedData", "uint", 32);
              }));
            });
          }
          a.g.addBoxProcessor("saio", function() {
            this._procFullBox();
            this.flags & 1 && (this._procField("aux_info_type", "uint", 32), this._procField("aux_info_type_parameter", "uint", 32));
            this._procField("entry_count", "uint", 32);
            this._procFieldArray("offset", this.entry_count, "uint", 1 === this.version ? 64 : 32);
          });
          a.g.addBoxProcessor("saiz", function() {
            this._procFullBox();
            this.flags & 1 && (this._procField("aux_info_type", "uint", 32), this._procField(
              "aux_info_type_parameter",
              "uint",
              32
            ));
            this._procField("default_sample_info_size", "uint", 8);
            this._procField("sample_count", "uint", 32);
            0 === this.default_sample_info_size && this._procFieldArray("sample_info_size", this.sample_count, "uint", 8);
          });
          a.g.addBoxProcessor("senc", b);
          a.g.addBoxProcessor("uuid", function() {
            for (var c = true, d = 0; 16 > d; d++) this.usertype[d] !== DE[d] && (c = false);
            c && (this._parsing && (this.type = "sepiff"), b.call(this));
          });
        }
        r = BE.prototype;
        r.destroy = function() {
        };
        r.isSupported = function(a, b) {
          var c = a.startsWith("mss/");
          if (!this.g || !c) return false;
          if (b) return ld(this.convertCodecs(b, a));
          b = this.convertCodecs("audio", a);
          a = this.convertCodecs("video", a);
          return ld(b) || ld(a);
        };
        r.convertCodecs = function(a, b) {
          return b.replace("mss/", "");
        };
        r.getOriginalMimeType = function() {
          return this.h;
        };
        r.transmux = function(a, b, c) {
          if (!c) return Promise.resolve(Qb(a));
          if (!b.mssPrivateData) return Promise.reject(new U(2, 3, 3020, c ? c.N()[0] : null));
          try {
            var d, e = this.g.parseBuffer(a), f = e.fetch("tfhd");
            f.track_ID = b.id + 1;
            var g = e.fetch("tfdt"), h = e.fetch("traf");
            null === g && (g = this.g.createFullBox("tfdt", h, f), g.version = 1, g.flags = 0, g.baseMediaDecodeTime = Math.floor(c.startTime * b.mssPrivateData.timescale));
            var k2 = e.fetch("trun"), l = e.fetch("tfxd");
            l && l._parent.boxes.splice(l._parent.boxes.indexOf(l), 1);
            var m = e.fetch("tfrf");
            m && m._parent.boxes.splice(m._parent.boxes.indexOf(m), 1);
            var n = e.fetch("sepiff");
            if (null !== n) {
              n.type = "senc";
              n.usertype = void 0;
              var p = e.fetch("saio");
              if (null === p) {
                p = this.g.createFullBox("saio", h);
                p.version = 0;
                p.flags = 0;
                p.entry_count = 1;
                p.offset = [0];
                var q = this.g.createFullBox("saiz", h);
                q.version = 0;
                q.flags = 0;
                q.sample_count = n.sample_count;
                q.default_sample_info_size = 0;
                q.sample_info_size = [];
                if (n.flags & 2) for (d = 0; d < n.sample_count; d += 1) q.sample_info_size[d] = 10 + 6 * n.entry[d].NumberOfEntries;
                else q.default_sample_info_size = 8;
              }
            }
            f.flags &= 16777214;
            f.flags |= 131072;
            k2.flags |= 1;
            var u = e.fetch("moof");
            k2.data_offset = u.getLength() + 8;
            var w = e.fetch("saio");
            null !== w && (w.offset[0] = EE(u, "traf") + EE(h, "senc") + 16);
            var v = Qb(e.write());
            return Promise.resolve(v);
          } catch (x) {
            return x instanceof U ? Promise.reject(x) : Promise.reject(new U(2, 3, 3022, c ? c.N()[0] : null));
          }
        };
        function EE(a, b) {
          for (var c = 8, d = 0; d < a.boxes.length && a.boxes[d].type !== b; d++) c += a.boxes[d].size;
          return c;
        }
        T("shaka.transmuxer.MssTransmuxer", BE);
        BE.prototype.transmux = BE.prototype.transmux;
        BE.prototype.getOriginalMimeType = BE.prototype.getOriginalMimeType;
        BE.prototype.convertCodecs = BE.prototype.convertCodecs;
        BE.prototype.isSupported = BE.prototype.isSupported;
        BE.prototype.destroy = BE.prototype.destroy;
        var DE = new Uint8Array([162, 57, 79, 82, 90, 155, 79, 20, 162, 68, 108, 66, 124, 100, 141, 244]);
        bf("mss/audio/mp4", function() {
          return new BE("mss/audio/mp4");
        }, hf);
        bf("mss/video/mp4", function() {
          return new BE("mss/video/mp4");
        }, hf);
        function FE(a) {
          this.m = a;
          this.g = 0;
          this.i = /* @__PURE__ */ new Map();
          this.l = this.h = this.j = null;
        }
        r = FE.prototype;
        r.destroy = function() {
          this.i.clear();
          this.h && this.h.destroy();
        };
        r.isSupported = function(a, b) {
          if ("video/mp2t" != a.toLowerCase().split(";")[0]) return false;
          var c = a;
          b && (c = this.convertCodecs(b, a));
          var d = vf(c).split(",");
          c = ad("audio", d);
          d = ad("video", d);
          if (c && (c = rf(c), !GE.includes(c)) || d && (c = rf(d), !HE.includes(c))) return false;
          if (b) return ld(this.convertCodecs(b, a));
          b = this.convertCodecs("audio", a);
          a = this.convertCodecs("video", a);
          return ld(b) || ld(a);
        };
        r.convertCodecs = function(a, b) {
          return "video/mp2t" == b.toLowerCase().split(";")[0] ? (b = vf(b).replace("mp4a.40.34", "mp3").split(",").map(function(c) {
            return rg(c, "audio/mp4");
          }).map(sg).join(","), "audio" == a ? 'audio/mp4; codecs="' + b + '"' : 'video/mp4; codecs="' + b + '"') : b;
        };
        r.getOriginalMimeType = function() {
          return this.m;
        };
        r.transmux = function(a, b, c, d, e) {
          var f = Qb(a);
          if ("audio" == e && !Fk(f)) {
            for (var g = Uj(f), h = g.length; h < f.length; h++) if (yE(f, h)) return Promise.reject(new U(2, 3, 3018, c ? c.N()[0] : null));
            for (h = g.length; h < f.length; h++) if (cE(f, h)) return this.h || (this.h = new eE("audio/aac")), this.h.transmux(a, b, c, d, e);
            return Promise.reject(new U(2, 3, 3018, c ? c.N()[0] : null));
          }
          this.j ? this.j.clearData() : this.j = new xk();
          var k2 = this.j.parse(f), l = [], m = k2.od();
          try {
            var n = null;
            if ("video" == e) {
              switch (m.video) {
                case "avc":
                  var p = [], q = null, u = k2.vc(), w = mE(u);
                  if (!w.length) throw new U(2, 3, 3023, c ? c.N()[0] : null);
                  for (var v = 0; v < w.length; v++) {
                    var x = w[v];
                    null == q && (q = x.dts);
                    var z = void 0;
                    z = v + 1 < w.length ? (w[v + 1].dts || 0) - (x.dts || 0) : 1 < w.length ? (x.dts || 0) - (w[v - 1].dts || 0) : 9e4 * (c.endTime - c.startTime);
                    p.push({ data: x.data, size: x.data.byteLength, duration: z, eb: Math.round((x.pts || 0) - (x.dts || 0)), flags: { hb: 0, $a: 0, Za: 0, Xa: 0, Ya: x.isKeyframe ? 2 : 1, ib: x.isKeyframe ? 0 : 1 } });
                  }
                  for (var C = [], D = t(u), F = D.next(); !F.done; F = D.next()) C.push.apply(C, y(F.value.nalus));
                  var B = kE(C);
                  if (!B || null == q) throw new U(2, 3, 3018, c ? c.N()[0] : null);
                  b.height = B.height;
                  b.width = B.width;
                  n = { id: b.id, type: "video", codecs: "avc1", encrypted: b.encrypted && 0 < b.drmInfos.length, timescale: 9e4, duration: d, mb: [], ra: new Uint8Array([]), Ca: B.Ca, Ia: B.Ia, Ka: B.Ka, data: { Db: this.g, baseMediaDecodeTime: q, jb: p }, stream: b };
                  break;
                case "hvc":
                  var A = [], H = null, E = [], L = k2.vc();
                  if (!L.length) throw new U(2, 3, 3023, c ? c.N()[0] : null);
                  for (var M = 0; M < L.length; M++) {
                    var J = L[M], K = J.nalus;
                    E.push.apply(E, y(K));
                    for (var N = false, O = [], P = false, R = t(K), S = R.next(); !S.done; S = R.next()) {
                      var oa = S.value;
                      switch (oa.type) {
                        case 1:
                        case 0:
                          var Z = P = true;
                          break;
                        case 19:
                        case 20:
                        case 21:
                          N = Z = P = true;
                          break;
                        case 32:
                          Z = true;
                          break;
                        case 33:
                          Z = true;
                          break;
                        case 34:
                          Z = true;
                          break;
                        case 35:
                          P = Z = true;
                          break;
                        case 39:
                        case 40:
                          Z = true;
                          break;
                        default:
                          Z = false;
                      }
                      if (P && Z) {
                        var Fa = oa.fullData.byteLength, Ia = new Uint8Array(4);
                        Ia[0] = Fa >> 24 & 255;
                        Ia[1] = Fa >> 16 & 255;
                        Ia[2] = Fa >> 8 & 255;
                        Ia[3] = Fa & 255;
                        O.push(Ia);
                        O.push(oa.fullData);
                      }
                    }
                    var ka = O.length ? { data: Vc.apply(Pc, y(O)), isKeyframe: N } : null;
                    if (ka) {
                      null == H && null != J.dts && (H = J.dts);
                      var ua = void 0;
                      ua = M + 1 < L.length ? (L[M + 1].dts || 0) - (J.dts || 0) : 1 < L.length ? (J.dts || 0) - (L[M - 1].dts || 0) : 9e4 * (c.endTime - c.startTime);
                      A.push({ data: ka.data, size: ka.data.byteLength, duration: ua, eb: Math.round((J.pts || 0) - (J.dts || 0)), flags: { hb: 0, $a: 0, Za: 0, Xa: 0, Ya: ka.isKeyframe ? 2 : 1, ib: ka.isKeyframe ? 0 : 1 } });
                    }
                  }
                  var Ba = nE(E);
                  if (!Ba || null == H) throw new U(2, 3, 3018, c ? c.N()[0] : null);
                  b.height = Ba.height;
                  b.width = Ba.width;
                  n = {
                    id: b.id,
                    type: "video",
                    codecs: "hvc1",
                    encrypted: b.encrypted && 0 < b.drmInfos.length,
                    timescale: 9e4,
                    duration: d,
                    mb: [],
                    ra: new Uint8Array([]),
                    Ca: Ba.Ca,
                    Ia: Ba.Ia,
                    Ka: Ba.Ka,
                    data: { Db: this.g, baseMediaDecodeTime: H, jb: A },
                    stream: b
                  };
              }
              n && (l.push(n), n = null);
            }
            if ("audio" == e) {
              switch (m.audio) {
                case "aac":
                  for (var na = [], Ca, ra = null, sa = null, Oa = null, ob = t(k2.fb()), bb = ob.next(); !bb.done; bb = ob.next()) {
                    var cb = bb.value, jb = cb.data;
                    if (jb) {
                      var ub = 0;
                      if (-1 == sa && Oa) jb = Vc(Oa, cb.data), sa = null;
                      else if (null != sa && Oa) {
                        ub = Math.max(0, sa);
                        var xe = Vc(Oa, jb.subarray(0, ub));
                        na.push({ data: xe, size: xe.byteLength, duration: 1024, eb: 0, flags: { hb: 0, $a: 0, Za: 0, Xa: 0, Ya: 2, ib: 0 } });
                        sa = Oa = null;
                      }
                      Ca = bE(
                        jb,
                        ub
                      );
                      if (!Ca) throw new U(2, 3, 3018, c ? c.N()[0] : null);
                      b.audioSamplingRate = Ca.sampleRate;
                      b.channelsCount = Ca.channelCount;
                      null == ra && null !== cb.pts && (ra = cb.pts);
                      for (; ub < jb.length; ) {
                        var Oc = aE(jb, ub);
                        if (!Oc) {
                          Oa = jb.subarray(ub, jb.length);
                          sa = -1;
                          break;
                        }
                        var ce = Oc.ud + Oc.ia;
                        sa = Math.max(0, ub + ce - jb.length);
                        0 != sa ? Oa = jb.subarray(ub + Oc.ud, ub + ce) : ub + ce <= jb.length && na.push({ data: jb.subarray(ub + Oc.ud, ub + ce), size: Oc.ia, duration: 1024, eb: 0, flags: { hb: 0, $a: 0, Za: 0, Xa: 0, Ya: 2, ib: 0 } });
                        ub += ce;
                      }
                    }
                  }
                  if (!Ca || null == ra) {
                    if (!k2.vc().length) throw new U(
                      2,
                      3,
                      3018,
                      c ? c.N()[0] : null
                    );
                    ra = 9e4 * c.startTime;
                    var Qf = ad("audio", b.codecs.split(","));
                    if (!Qf || !b.channelsCount || !b.audioSamplingRate) throw new U(2, 3, 3018, c ? c.N()[0] : null);
                    Ca = { sampleRate: b.audioSamplingRate, channelCount: b.channelsCount, codec: Qf };
                    var Rf = dE(Qf, b.channelsCount);
                    if (!Rf) throw new U(2, 3, 3018, c ? c.N()[0] : null);
                    for (var Zc = ra + 9e4 * (c.endTime - c.startTime), Kv = ra; Kv < Zc; ) na.push({ data: Rf, size: Rf.byteLength, duration: 1024, eb: 0, flags: { hb: 0, $a: 0, Za: 0, Xa: 0, Ya: 2, ib: 0 } }), Kv += 1024 / Ca.sampleRate * 9e4;
                  }
                  var Lv = Ca.sampleRate, aF = ra / 9e4 * Lv;
                  n = { id: b.id, type: "audio", codecs: Ca.codec, encrypted: b.encrypted && 0 < b.drmInfos.length, timescale: Lv, duration: d, mb: [], ra: new Uint8Array([]), Ca: new Uint8Array([]), Ia: 0, Ka: 0, data: { Db: this.g, baseMediaDecodeTime: aF, jb: na }, stream: b };
                  break;
                case "ac3":
                  for (var Mv = [], Xj = 0, Qn = new Uint8Array([]), Yj = null, Nv = t(k2.fb()), Rn = Nv.next(); !Rn.done; Rn = Nv.next()) {
                    var Sn = Rn.value, Tn = Sn.data;
                    null == Yj && null !== Sn.pts && (Yj = Sn.pts);
                    for (var Wf = 0; Wf < Tn.length; ) {
                      var ee = fE(Tn, Wf);
                      ee ? (b.audioSamplingRate = ee.sampleRate, b.channelsCount = ee.channelCount, Xj = ee.sampleRate, Qn = ee.ra, Mv.push({ data: Tn.subarray(Wf, Wf + ee.ia), size: ee.ia, duration: 1536, eb: 0, flags: { hb: 0, $a: 0, Za: 0, Xa: 0, Ya: 2, ib: 0 } }), Wf += ee.ia) : Wf++;
                    }
                  }
                  if (0 == Xj || 0 == Qn.byteLength || null == Yj) throw new U(2, 3, 3018, c ? c.N()[0] : null);
                  var bF = Yj / 9e4 * Xj;
                  n = { id: b.id, type: "audio", codecs: "ac-3", encrypted: b.encrypted && 0 < b.drmInfos.length, timescale: Xj, duration: d, mb: [], ra: Qn, Ca: new Uint8Array([]), Ia: 0, Ka: 0, data: { Db: this.g, baseMediaDecodeTime: bF, jb: Mv }, stream: b };
                  break;
                case "ec3":
                  for (var Ov = [], Zj = 0, Un = new Uint8Array([]), ak = null, Pv = t(k2.fb()), Vn = Pv.next(); !Vn.done; Vn = Pv.next()) {
                    var Wn = Vn.value, Xn = Wn.data;
                    null == ak && null !== Wn.pts && (ak = Wn.pts);
                    for (var Xf = 0; Xf < Xn.length; ) {
                      var fe = iE(Xn, Xf);
                      fe ? (b.audioSamplingRate = fe.sampleRate, b.channelsCount = fe.channelCount, Zj = fe.sampleRate, Un = fe.ra, Ov.push({ data: Xn.subarray(Xf, Xf + fe.ia), size: fe.ia, duration: 1536, eb: 0, flags: { hb: 0, $a: 0, Za: 0, Xa: 0, Ya: 2, ib: 0 } }), Xf += fe.ia) : Xf++;
                    }
                  }
                  if (0 == Zj || 0 == Un.byteLength || null == ak) throw new U(2, 3, 3018, c ? c.N()[0] : null);
                  var cF = ak / 9e4 * Zj;
                  n = { id: b.id, type: "audio", codecs: "ec-3", encrypted: b.encrypted && 0 < b.drmInfos.length, timescale: Zj, duration: d, mb: [], ra: Un, Ca: new Uint8Array([]), Ia: 0, Ka: 0, data: { Db: this.g, baseMediaDecodeTime: cF, jb: Ov }, stream: b };
                  break;
                case "mp3":
                  for (var Qv = [], bk, ck = null, Rv = t(k2.fb()), Yn = Rv.next(); !Yn.done; Yn = Rv.next()) {
                    var Zn = Yn.value, yh = Zn.data;
                    if (yh) {
                      null == ck && null !== Zn.pts && (ck = Zn.pts);
                      for (var Ne = 0; Ne < yh.length; ) {
                        var Yf = sE(yh, Ne);
                        Yf ? (bk || (bk = Yf), Ne + Yf.ia <= yh.length && Qv.push({
                          data: yh.subarray(Ne, Ne + Yf.ia),
                          size: Yf.ia,
                          duration: 1152,
                          eb: 0,
                          flags: { hb: 0, $a: 0, Za: 0, Xa: 0, Ya: 2, ib: 0 }
                        }), Ne += Yf.ia) : Ne++;
                      }
                    }
                  }
                  if (!bk || null == ck) throw new U(2, 3, 3018, c ? c.N()[0] : null);
                  var Sv = bk.sampleRate, dF = ck / 9e4 * Sv;
                  n = { id: b.id, type: "audio", codecs: "mp3", encrypted: b.encrypted && 0 < b.drmInfos.length, timescale: Sv, duration: d, mb: [], ra: new Uint8Array([]), Ca: new Uint8Array([]), Ia: 0, Ka: 0, data: { Db: this.g, baseMediaDecodeTime: dF, jb: Qv }, stream: b };
                  break;
                case "opus":
                  var Tv = [], dk = null, hd = k2.F;
                  if (!hd) throw new U(2, 3, 3018, c ? c.N()[0] : null);
                  var Rb = [];
                  switch (hd.Wh) {
                    case 1:
                    case 2:
                      Rb = [0];
                      break;
                    case 0:
                      Rb = [255, 1, 1, 0, 1];
                      break;
                    case 128:
                      Rb = [255, 2, 0, 0, 1];
                      break;
                    case 3:
                      Rb = [1, 2, 1, 0, 2, 1];
                      break;
                    case 4:
                      Rb = [1, 2, 2, 0, 1, 2, 3];
                      break;
                    case 5:
                      Rb = [1, 3, 2, 0, 4, 1, 2, 3];
                      break;
                    case 6:
                      Rb = [1, 4, 2, 0, 4, 1, 2, 3, 5];
                      break;
                    case 7:
                      Rb = [1, 4, 2, 0, 4, 1, 2, 3, 5, 6];
                      break;
                    case 8:
                      Rb = [1, 5, 3, 0, 6, 1, 2, 3, 4, 5, 7];
                      break;
                    case 130:
                      Rb = [1, 1, 2, 0, 1];
                      break;
                    case 131:
                      Rb = [1, 1, 3, 0, 1, 2];
                      break;
                    case 132:
                      Rb = [1, 1, 4, 0, 1, 2, 3];
                      break;
                    case 133:
                      Rb = [1, 1, 5, 0, 1, 2, 3, 4];
                      break;
                    case 134:
                      Rb = [1, 1, 6, 0, 1, 2, 3, 4, 5];
                      break;
                    case 135:
                      Rb = [1, 1, 7, 0, 1, 2, 3, 4, 5, 6];
                      break;
                    case 136:
                      Rb = [1, 1, 8, 0, 1, 2, 3, 4, 5, 6, 7];
                  }
                  var Uv = new Uint8Array([0, hd.channelCount, 0, 0, hd.sampleRate >>> 24 & 255, hd.sampleRate >>> 17 & 255, hd.sampleRate >>> 8 & 255, hd.sampleRate >>> 0 & 255, 0, 0].concat(y(Rb)));
                  for (var Vv = hd.sampleRate, Wv = t(k2.fb()), $n = Wv.next(); !$n.done; $n = Wv.next()) {
                    var ao = $n.value, Zf = ao.data;
                    null == dk && null !== ao.pts && (dk = ao.pts);
                    for (var zh = 0; zh < Zf.length; ) {
                      for (var eF = 0 !== (Zf[zh + 1] & 16), fF = 0 !== (Zf[zh + 1] & 8), Id = zh + 2, ek = 0; 255 === Zf[Id]; ) ek += 255, Id += 1;
                      ek += Zf[Id];
                      Id += 1;
                      Id += eF ? 2 : 0;
                      Id += fF ? 2 : 0;
                      var Xv = Zf.slice(Id, Id + ek);
                      Tv.push({
                        data: Xv,
                        size: Xv.byteLength,
                        duration: 960,
                        eb: 0,
                        flags: { hb: 0, $a: 0, Za: 0, Xa: 0, Ya: 2, ib: 0 }
                      });
                      zh = Id + ek;
                    }
                  }
                  if (0 == Uv.byteLength || null == dk) throw new U(2, 3, 3018, c ? c.N()[0] : null);
                  b.audioSamplingRate = hd.sampleRate;
                  b.channelsCount = hd.channelCount;
                  var gF = dk / 9e4 * Vv;
                  n = { id: b.id, type: "audio", codecs: "opus", encrypted: b.encrypted && 0 < b.drmInfos.length, timescale: Vv, duration: d, mb: [], ra: Uv, Ca: new Uint8Array([]), Ia: 0, Ka: 0, data: { Db: this.g, baseMediaDecodeTime: gF, jb: Tv }, stream: b };
              }
              n && (l.push(n), n = null);
            }
          } catch (bo) {
            return bo && 3023 == bo.code ? Promise.resolve(new Uint8Array([])) : Promise.reject(bo);
          }
          if (!l.length) return Promise.reject(new U(2, 3, 3018, c ? c.N()[0] : null));
          var Yv = new Vi(l), co = b.id + "_" + c.i;
          if (this.i.has(co)) var Ah = this.i.get(co);
          else Ah = aj(Yv), this.i.set(co, Ah);
          var hF = this.l !== Ah, Zv = sj(Yv);
          this.l = Ah;
          this.g++;
          if (hF) {
            var iF = Vc(Ah, Zv);
            return Promise.resolve(iF);
          }
          return Promise.resolve(Zv);
        };
        T("shaka.transmuxer.TsTransmuxer", FE);
        FE.prototype.transmux = FE.prototype.transmux;
        FE.prototype.getOriginalMimeType = FE.prototype.getOriginalMimeType;
        FE.prototype.convertCodecs = FE.prototype.convertCodecs;
        FE.prototype.isSupported = FE.prototype.isSupported;
        FE.prototype.destroy = FE.prototype.destroy;
        var GE = ["aac", "ac-3", "ec-3", "mp3", "opus"], HE = ["avc", "hevc"];
        bf("video/mp2t", function() {
          return new FE("video/mp2t");
        }, ff);
        function IE() {
        }
        qa(IE, qn);
        T("shaka.util.FairPlayUtils", IE);
        function JE() {
        }
        var KE;
        function LE() {
          KE || navigator.emeEncryptionSchemePolyfilled ? console.debug("EmeEncryptionSchemePolyfill: Already installed.") : navigator.requestMediaKeySystemAccess && MediaKeySystemAccess.prototype.getConfiguration ? (KE = navigator.requestMediaKeySystemAccess, console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."), navigator.requestMediaKeySystemAccess = ME, navigator.emeEncryptionSchemePolyfilled = true) : console.debug("EmeEncryptionSchemePolyfill: EME not found");
        }
        function ME(a, b) {
          var c = this, d;
          return Q(function(e) {
            if (1 == e.g) return console.assert(c == navigator, 'bad "this" for requestMediaKeySystemAccess'), G(e, KE.call(c, a, b), 2);
            d = e.h;
            if (NE(d)) return console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."), navigator.requestMediaKeySystemAccess = KE, e.return(d);
            console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support.");
            navigator.requestMediaKeySystemAccess = OE;
            return e.return(OE.call(
              c,
              a,
              b
            ));
          });
        }
        function OE(a, b) {
          var c = this, d, e, f, g, h, k2, l, m, n, p, q, u;
          return Q(function(w) {
            if (1 == w.g) {
              console.assert(c == navigator, 'bad "this" for requestMediaKeySystemAccess');
              d = PE(a);
              e = [];
              f = t(b);
              for (g = f.next(); !g.done; g = f.next()) h = g.value, k2 = QE(h.videoCapabilities, d), l = QE(h.audioCapabilities, d), h.videoCapabilities && h.videoCapabilities.length && !k2.length || h.audioCapabilities && h.audioCapabilities.length && !l.length || (m = Object.assign({}, h), m.videoCapabilities = k2, m.audioCapabilities = l, e.push(m));
              if (!e.length) throw n = Error("Unsupported keySystem or supportedConfigurations."), n.name = "NotSupportedError", n.code = DOMException.NOT_SUPPORTED_ERR, n;
              return G(w, KE.call(c, a, e), 2);
            }
            p = w.h;
            u = q = null;
            e[0] && (e[0].videoCapabilities && (q = e[0].videoCapabilities[0].encryptionScheme), e[0].audioCapabilities && (u = e[0].audioCapabilities[0].encryptionScheme));
            return w.return(new RE(p, q, u));
          });
        }
        function QE(a, b) {
          return a ? a.filter(function(c) {
            return SE(c.encryptionScheme, b);
          }) : a;
        }
        T("EmeEncryptionSchemePolyfill", JE);
        JE.install = LE;
        function TE() {
        }
        var UE;
        function VE() {
          UE || navigator.mediaCapabilitiesEncryptionSchemePolyfilled ? console.debug("McEncryptionSchemePolyfill: Already installed.") : navigator.mediaCapabilities ? (UE = navigator.mediaCapabilities.decodingInfo, console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."), navigator.mediaCapabilities.decodingInfo = WE, navigator.mediaCapabilitiesEncryptionSchemePolyfilled = true) : console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found");
        }
        function WE(a) {
          var b = this, c, d;
          return Q(function(e) {
            switch (e.g) {
              case 1:
                return console.assert(b == navigator.mediaCapabilities, 'bad "this" for decodingInfo'), G(e, UE.call(b, a), 2);
              case 2:
                c = e.h;
                if (!c.supported || !a.keySystemConfiguration) return e.return(c);
                if ((d = c.keySystemAccess) && NE(d)) return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."), navigator.mediaCapabilities.decodingInfo = UE, e.return(c);
                console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support.");
                navigator.mediaCapabilities.decodingInfo = XE;
                if (d) {
                  e.u(3);
                  break;
                }
                return G(e, YE(a), 4);
              case 4:
                return c.keySystemAccess = e.h, e.return(c);
              case 3:
                return e.return(XE.call(b, a));
            }
          });
        }
        function XE(a) {
          var b = this, c, d, e, f, g, h, k2;
          return Q(function(l) {
            switch (l.g) {
              case 1:
                return console.assert(b == navigator.mediaCapabilities, 'bad "this" for decodingInfo'), d = c = null, !a.keySystemConfiguration || (e = a.keySystemConfiguration, f = e.keySystem, d = e.audio && e.audio.encryptionScheme, c = e.video && e.video.encryptionScheme, g = PE(f), h = { powerEfficient: false, smooth: false, supported: false, keySystemAccess: null, configuration: a }, SE(d, g) && SE(c, g)) ? G(l, UE.call(b, a), 2) : l.return(h);
              case 2:
                k2 = l.h;
                if (k2.keySystemAccess) {
                  k2.keySystemAccess = new RE(k2.keySystemAccess, c, d);
                  l.u(3);
                  break;
                }
                if (!a.keySystemConfiguration) {
                  l.u(3);
                  break;
                }
                return G(l, YE(a), 5);
              case 5:
                k2.keySystemAccess = l.h;
              case 3:
                return l.return(k2);
            }
          });
        }
        function YE(a) {
          var b, c;
          return Q(function(d) {
            if (1 == d.g) {
              var e = a.keySystemConfiguration, f = [], g = [];
              e.audio && f.push({ robustness: e.audio.robustness || "", contentType: a.audio.contentType, encryptionScheme: e.audio.encryptionScheme });
              e.video && g.push({ robustness: e.video.robustness || "", contentType: a.video.contentType, encryptionScheme: e.video.encryptionScheme });
              e = { initDataTypes: e.initDataType ? [e.initDataType] : [], distinctiveIdentifier: e.distinctiveIdentifier, persistentState: e.persistentState, sessionTypes: e.sessionTypes };
              f.length && (e.audioCapabilities = f);
              g.length && (e.videoCapabilities = g);
              b = e;
              return G(d, navigator.requestMediaKeySystemAccess(a.keySystemConfiguration.keySystem, [b]), 2);
            }
            c = d.h;
            return d.return(c);
          });
        }
        T("McEncryptionSchemePolyfill", TE);
        TE.install = VE;
        function RE(a, b, c) {
          this.g = a;
          this.i = b || null;
          this.h = c || null;
          this.keySystem = a.keySystem;
        }
        RE.prototype.getConfiguration = function() {
          var a = this.g.getConfiguration();
          if (a.videoCapabilities) for (var b = t(a.videoCapabilities), c = b.next(); !c.done; c = b.next()) c.value.encryptionScheme = this.i;
          if (a.audioCapabilities) for (b = t(a.audioCapabilities), c = b.next(); !c.done; c = b.next()) c.value.encryptionScheme = this.h;
          return a;
        };
        RE.prototype.createMediaKeys = function() {
          return this.g.createMediaKeys();
        };
        function PE(a) {
          if (a.startsWith("com.widevine") || a.startsWith("com.microsoft") || a.startsWith("com.chromecast") || a.startsWith("com.adobe") || a.startsWith("org.w3")) return "cenc";
          if (a.startsWith("com.apple")) return "cbcs";
          if (a.startsWith("com.huawei")) return "cenc";
          console.warn("EmeEncryptionSchemePolyfill: Unknown key system:", a, "Please contribute!");
          return null;
        }
        function NE(a) {
          a = a.getConfiguration();
          var b = a.audioCapabilities && a.audioCapabilities[0];
          return (a = a.videoCapabilities && a.videoCapabilities[0] || b) && void 0 !== a.encryptionScheme ? true : false;
        }
        function SE(a, b) {
          if (!a || a == b) return true;
          if ("cbcs" == a || "cbcs-1-9" == a) {
            if (ZE || $E || jF) return true;
          }
          return false;
        }
        function kF() {
        }
        function xB() {
          LE();
          VE();
        }
        T("EncryptionSchemePolyfills", kF);
        kF.install = xB;
        var jF = navigator.userAgent.includes("CrKey"), ZE = 100 <= parseInt(navigator.userAgent.split("Firefox/").pop(), 10), lF;
        var mF = navigator.userAgent || "";
        if (mF.includes("Web0S")) {
          var nF = mF.match(/Chrome\/(\d+)/);
          lF = nF ? 79 <= parseInt(nF[1], 10) : false;
        } else lF = false;
        var $E = lF;
        "undefined" !== typeof module2 && module2.exports && (module2.exports = kF);
      }).call(exportTo, innerGlobal, innerGlobal, void 0);
      if (typeof exports != "undefined") for (var k in exportTo.shaka) exports[k] = exportTo.shaka[k];
      else if (typeof define == "function" && define.amd) define(function() {
        return exportTo.shaka;
      });
      else innerGlobal.shaka = exportTo.shaka;
    })();
  }
});

// ../custom-media-element/dist/custom-media-element.js
var Events = [
  "abort",
  "canplay",
  "canplaythrough",
  "durationchange",
  "emptied",
  "encrypted",
  "ended",
  "error",
  "loadeddata",
  "loadedmetadata",
  "loadstart",
  "pause",
  "play",
  "playing",
  "progress",
  "ratechange",
  "seeked",
  "seeking",
  "stalled",
  "suspend",
  "timeupdate",
  "volumechange",
  "waiting",
  "waitingforkey",
  "resize",
  "enterpictureinpicture",
  "leavepictureinpicture",
  "webkitbeginfullscreen",
  "webkitendfullscreen",
  "webkitpresentationmodechanged"
];
var Attributes = [
  "autopictureinpicture",
  "disablepictureinpicture",
  "disableremoteplayback",
  "autoplay",
  "controls",
  "controlslist",
  "crossorigin",
  "loop",
  "muted",
  "playsinline",
  "poster",
  "preload",
  "src"
];
function getAudioTemplateHTML(attrs) {
  return (
    /*html*/
    `
    <style>
      :host {
        display: inline-flex;
        line-height: 0;
        flex-direction: column;
        justify-content: end;
      }

      audio {
        width: 100%;
      }
    </style>
    <slot name="media">
      <audio${serializeAttributes(attrs)}></audio>
    </slot>
    <slot></slot>
  `
  );
}
function getVideoTemplateHTML(attrs) {
  return (
    /*html*/
    `
    <style>
      :host {
        display: inline-block;
        line-height: 0;
      }

      video {
        max-width: 100%;
        max-height: 100%;
        min-width: 100%;
        min-height: 100%;
        object-fit: var(--media-object-fit, contain);
        object-position: var(--media-object-position, 50% 50%);
      }

      video::-webkit-media-text-track-container {
        transform: var(--media-webkit-text-track-transform);
        transition: var(--media-webkit-text-track-transition);
      }
    </style>
    <slot name="media">
      <video${serializeAttributes(attrs)}></video>
    </slot>
    <slot></slot>
  `
  );
}
function CustomMediaMixin(superclass, { tag, is }) {
  const nativeElTest = globalThis.document?.createElement?.(tag, { is });
  const nativeElProps = nativeElTest ? getNativeElProps(nativeElTest) : [];
  return class CustomMedia extends superclass {
    static getTemplateHTML = tag.endsWith("audio") ? getAudioTemplateHTML : getVideoTemplateHTML;
    static shadowRootOptions = { mode: "open" };
    static Events = Events;
    static #isDefined = false;
    static get observedAttributes() {
      CustomMedia.#define();
      const natAttrs = nativeElTest?.constructor?.observedAttributes ?? [];
      return [
        ...natAttrs,
        ...Attributes
      ];
    }
    static #define() {
      if (this.#isDefined) return;
      this.#isDefined = true;
      const propsToAttrs = new Set(this.observedAttributes);
      propsToAttrs.delete("muted");
      for (const prop of nativeElProps) {
        if (prop in this.prototype) continue;
        if (typeof nativeElTest[prop] === "function") {
          this.prototype[prop] = function(...args) {
            this.#init();
            const fn = () => {
              if (this.call) return this.call(prop, ...args);
              const nativeFn = this.nativeEl?.[prop];
              return nativeFn?.apply(this.nativeEl, args);
            };
            return fn();
          };
        } else {
          const config = {
            get() {
              this.#init();
              const attr = prop.toLowerCase();
              if (propsToAttrs.has(attr)) {
                const val = this.getAttribute(attr);
                return val === null ? false : val === "" ? true : val;
              }
              return this.get?.(prop) ?? this.nativeEl?.[prop];
            }
          };
          if (prop !== prop.toUpperCase()) {
            config.set = function(val) {
              this.#init();
              const attr = prop.toLowerCase();
              if (propsToAttrs.has(attr)) {
                if (val === true || val === false || val == null) {
                  this.toggleAttribute(attr, Boolean(val));
                } else {
                  this.setAttribute(attr, val);
                }
                return;
              }
              if (this.set) {
                this.set(prop, val);
                return;
              }
              if (this.nativeEl) {
                this.nativeEl[prop] = val;
              }
            };
          }
          Object.defineProperty(this.prototype, prop, config);
        }
      }
    }
    // Private fields
    #isInit = false;
    #nativeEl = null;
    #childMap = /* @__PURE__ */ new Map();
    #childObserver;
    get;
    set;
    call;
    // If the custom element is defined before the custom element's HTML is parsed
    // no attributes will be available in the constructor (construction process).
    // Wait until initializing in the attributeChangedCallback or
    // connectedCallback or accessing any properties.
    get nativeEl() {
      this.#init();
      return this.#nativeEl ?? this.querySelector(":scope > [slot=media]") ?? this.querySelector(tag) ?? this.shadowRoot?.querySelector(tag) ?? null;
    }
    set nativeEl(val) {
      this.#nativeEl = val;
    }
    get defaultMuted() {
      return this.hasAttribute("muted");
    }
    set defaultMuted(val) {
      this.toggleAttribute("muted", val);
    }
    get src() {
      return this.getAttribute("src");
    }
    set src(val) {
      this.setAttribute("src", `${val}`);
    }
    get preload() {
      return this.getAttribute("preload") ?? this.nativeEl?.preload;
    }
    set preload(val) {
      this.setAttribute("preload", `${val}`);
    }
    #init() {
      if (this.#isInit) return;
      this.#isInit = true;
      this.init();
    }
    init() {
      if (!this.shadowRoot) {
        this.attachShadow({ mode: "open" });
        const attrs = namedNodeMapToObject(this.attributes);
        if (is) attrs.is = is;
        if (tag) attrs.part = tag;
        this.shadowRoot.innerHTML = this.constructor.getTemplateHTML(attrs);
      }
      this.nativeEl.muted = this.hasAttribute("muted");
      for (const prop of nativeElProps) {
        this.#upgradeProperty(prop);
      }
      this.#childObserver = new MutationObserver(this.#syncMediaChildAttribute.bind(this));
      this.shadowRoot.addEventListener("slotchange", () => this.#syncMediaChildren());
      this.#syncMediaChildren();
      for (const type of this.constructor.Events) {
        this.shadowRoot.addEventListener(type, this, true);
      }
    }
    handleEvent(event) {
      if (event.target === this.nativeEl) {
        this.dispatchEvent(new CustomEvent(event.type, { detail: event.detail }));
      }
    }
    #syncMediaChildren() {
      const removeNativeChildren = new Map(this.#childMap);
      const defaultSlot = this.shadowRoot?.querySelector("slot:not([name])");
      const mediaChildren = defaultSlot?.assignedElements({ flatten: true }).filter((el) => ["track", "source"].includes(el.localName));
      mediaChildren.forEach((el) => {
        removeNativeChildren.delete(el);
        let clone = this.#childMap.get(el);
        if (!clone) {
          clone = el.cloneNode();
          this.#childMap.set(el, clone);
          this.#childObserver?.observe(el, { attributes: true });
        }
        this.nativeEl?.append(clone);
        this.#enableDefaultTrack(clone);
      });
      removeNativeChildren.forEach((clone, el) => {
        clone.remove();
        this.#childMap.delete(el);
      });
    }
    #syncMediaChildAttribute(mutations) {
      for (const mutation of mutations) {
        if (mutation.type === "attributes") {
          const { target, attributeName } = mutation;
          const clone = this.#childMap.get(target);
          if (clone && attributeName) {
            clone.setAttribute(attributeName, target.getAttribute(attributeName) ?? "");
            this.#enableDefaultTrack(clone);
          }
        }
      }
    }
    #enableDefaultTrack(trackEl) {
      if (trackEl && trackEl.localName === "track" && trackEl.default && (trackEl.kind === "chapters" || trackEl.kind === "metadata") && trackEl.track.mode === "disabled") {
        trackEl.track.mode = "hidden";
      }
    }
    #upgradeProperty(prop) {
      if (Object.prototype.hasOwnProperty.call(this, prop)) {
        const value = this[prop];
        delete this[prop];
        this[prop] = value;
      }
    }
    attributeChangedCallback(attrName, oldValue, newValue) {
      this.#init();
      this.#forwardAttribute(attrName, oldValue, newValue);
    }
    #forwardAttribute(attrName, _oldValue, newValue) {
      if (["id", "class"].includes(attrName)) return;
      if (!CustomMedia.observedAttributes.includes(attrName) && this.constructor.observedAttributes.includes(attrName)) {
        return;
      }
      if (newValue === null) {
        this.nativeEl?.removeAttribute(attrName);
      } else if (this.nativeEl?.getAttribute(attrName) !== newValue) {
        this.nativeEl?.setAttribute(attrName, newValue);
      }
    }
    connectedCallback() {
      this.#init();
    }
  };
}
function getNativeElProps(nativeElTest) {
  const nativeElProps = [];
  for (let proto = Object.getPrototypeOf(nativeElTest); proto && proto !== HTMLElement.prototype; proto = Object.getPrototypeOf(proto)) {
    const props = Object.getOwnPropertyNames(proto);
    nativeElProps.push(...props);
  }
  return nativeElProps;
}
function serializeAttributes(attrs) {
  let html = "";
  for (const key in attrs) {
    if (!Attributes.includes(key)) continue;
    const value = attrs[key];
    if (value === "") html += ` ${key}`;
    else html += ` ${key}="${value}"`;
  }
  return html;
}
function namedNodeMapToObject(namedNodeMap) {
  const obj = {};
  for (const attr of namedNodeMap) {
    obj[attr.name] = attr.value;
  }
  return obj;
}
var CustomVideoElement = CustomMediaMixin(globalThis.HTMLElement ?? class {
}, {
  tag: "video"
});
var CustomAudioElement = CustomMediaMixin(globalThis.HTMLElement ?? class {
}, {
  tag: "audio"
});

// server-safe-globals.js
globalThis.navigator ??= {
  languages: [],
  get userAgent() {
    return "";
  }
};

// shaka-video-element.js
var import_shaka_player = __toESM(require_shaka_player_compiled(), 1);
function onErrorEvent(event) {
  onError(event.detail);
}
function onError(error) {
  console.error("Error code", error.code, "object", error);
}
var ShakaVideoElement = class extends CustomVideoElement {
  static shadowRootOptions = { ...CustomVideoElement.shadowRootOptions };
  static getTemplateHTML = (attrs) => {
    const { src, ...rest } = attrs;
    return CustomVideoElement.getTemplateHTML(rest);
  };
  constructor() {
    super();
    if (import_shaka_player.default.Player.isBrowserSupported()) {
      this.api = new import_shaka_player.default.Player();
      this.api.addEventListener("error", onErrorEvent);
    } else {
      console.error("Browser does not support Shaka Player");
    }
  }
  attributeChangedCallback(attrName, oldValue, newValue) {
    if (attrName !== "src") {
      super.attributeChangedCallback(attrName, oldValue, newValue);
    }
    if (attrName === "src" && oldValue != newValue) {
      this.load();
    }
  }
  get src() {
    return this.getAttribute("src");
  }
  set src(val) {
    if (val !== this.src) {
      this.setAttribute("src", val);
    }
  }
  async load() {
    if (!this.api) return;
    await Promise.resolve();
    await this.api.attach(this.nativeEl);
    if (!this.src) {
      this.api.unload();
    } else {
      try {
        await this.api.load(this.src);
      } catch (e) {
        onError(e);
      }
    }
  }
};
if (globalThis.customElements && !globalThis.customElements.get("shaka-video")) {
  globalThis.customElements.define("shaka-video", ShakaVideoElement);
}
var shaka_video_element_default = ShakaVideoElement;
export {
  shaka_video_element_default as default
};
/*! Bundled license information:

shaka-player/dist/shaka-player.compiled.js:
  (*
   @license
   Shaka Player
   Copyright 2016 Google LLC
   SPDX-License-Identifier: Apache-2.0
  *)
  (*
   @license
   Copyright 2008 The Closure Library Authors
   SPDX-License-Identifier: Apache-2.0
  *)
  (*
   @license
   Copyright 2006 The Closure Library Authors
   SPDX-License-Identifier: Apache-2.0
  *)
  (*
   @license
   tXml
   Copyright 2015 Tobias Nickel
   SPDX-License-Identifier: MIT
  *)
  (*
   @license
   Shaka Player
   Copyright 2023 Google LLC
   SPDX-License-Identifier: Apache-2.0
  *)
  (*
   @license
   Shaka Player
   Copyright 2022 Google LLC
   SPDX-License-Identifier: Apache-2.0
  *)
  (*
   @license
   MSS Transmuxer
   Copyright 2015 Dash Industry Forum
   SPDX-License-Identifier: BSD-3-Clause
  *)
  (*
   @license
   EME Encryption Scheme Polyfill
   Copyright 2019 Google LLC
   SPDX-License-Identifier: Apache-2.0
  *)
*/
